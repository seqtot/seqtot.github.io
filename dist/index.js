(()=>{var __webpack_modules__={1992:(e,t,n)=>{"use strict";n.r(t),function(e){function t(t,n,r){var i,a=t.getWrapperElement();return(i=a.appendChild(document.createElement("div"))).className=r?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?i.innerHTML=n:i.appendChild(n),e.addClass(a,"dialog-opened"),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",(function(r,i,a){a||(a={}),n(this,null);var o=t(this,r,a.bottom),s=!1,l=this;function c(t){if("string"==typeof t)u.value=t;else{if(s)return;s=!0,e.rmClass(o.parentNode,"dialog-opened"),o.parentNode.removeChild(o),l.focus(),a.onClose&&a.onClose(o)}}var d,u=o.getElementsByTagName("input")[0];return u?(u.focus(),a.value&&(u.value=a.value,!1!==a.selectValueOnOpen&&u.select()),a.onInput&&e.on(u,"input",(function(e){a.onInput(e,u.value,c)})),a.onKeyUp&&e.on(u,"keyup",(function(e){a.onKeyUp(e,u.value,c)})),e.on(u,"keydown",(function(t){a&&a.onKeyDown&&a.onKeyDown(t,u.value,c)||((27==t.keyCode||!1!==a.closeOnEnter&&13==t.keyCode)&&(u.blur(),e.e_stop(t),c()),13==t.keyCode&&i(u.value,t))})),!1!==a.closeOnBlur&&e.on(o,"focusout",(function(e){null!==e.relatedTarget&&c()}))):(d=o.getElementsByTagName("button")[0])&&(e.on(d,"click",(function(){c(),l.focus()})),!1!==a.closeOnBlur&&e.on(d,"blur",c),d.focus()),c})),e.defineExtension("openConfirm",(function(r,i,a){n(this,null);var o=t(this,r,a&&a.bottom),s=o.getElementsByTagName("button"),l=!1,c=this,d=1;function u(){l||(l=!0,e.rmClass(o.parentNode,"dialog-opened"),o.parentNode.removeChild(o),c.focus())}s[0].focus();for(var p=0;p<s.length;++p){var h=s[p];!function(t){e.on(h,"click",(function(n){e.e_preventDefault(n),u(),t&&t(c)}))}(i[p]),e.on(h,"blur",(function(){--d,setTimeout((function(){d<=0&&u()}),200)})),e.on(h,"focus",(function(){++d}))}})),e.defineExtension("openNotification",(function(r,i){n(this,c);var a,o=t(this,r,i&&i.bottom),s=!1,l=i&&void 0!==i.duration?i.duration:5e3;function c(){s||(s=!0,clearTimeout(a),e.rmClass(o.parentNode,"dialog-opened"),o.parentNode.removeChild(o))}return e.on(o,"click",(function(t){e.e_preventDefault(t),c()})),l&&(a=setTimeout(c,l)),c}))}(n(9059).default)},6970:(e,t,n)=>{"use strict";n.r(t),function(e){function t(e,t){var n=Number(t);return/^[-+]/.test(t)?e.getCursor().line+n:n-1}e.defineOption("search",{bottom:!1}),e.commands.jumpToLine=function(e){var n=e.getCursor();!function(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r,selectValueOnOpen:!0,bottom:e.options.search.bottom}):i(prompt(n,r))}(e,function(e){return e.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use line:column or scroll% syntax)")+"</span>"}(e),e.phrase("Jump to line:"),n.line+1+":"+n.ch,(function(r){var i;if(r)if(i=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(r))e.setCursor(t(e,i[1]),Number(i[2]));else if(i=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(r)){var a=Math.round(e.lineCount()*Number(i[1])/100);/^[-+]/.test(i[1])&&(a=n.line+a+1),e.setCursor(a-1,n.ch)}else(i=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(r))&&e.setCursor(t(e,i[1]),n.ch)}))},e.keyMap.default["Alt-G"]="jumpToLine"}(n(9059).default)},2162:(e,t,n)=>{"use strict";n.r(t),function(e){function t(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function n(e){return e.state.search||(e.state.search=new t)}function r(e){return"string"==typeof e&&e==e.toLowerCase()}function i(e,t,n){return e.getSearchCursor(t,n,{caseFold:r(t),multiline:!0})}function a(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r,selectValueOnOpen:!0,bottom:e.options.search.bottom}):i(prompt(n,r))}function o(e){return e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e}))}function s(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=o(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function l(e,t,n){t.queryText=n,t.query=s(n),e.removeOverlay(t.overlay,r(t.query)),t.overlay=function(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}(t.query,r(t.query)),e.addOverlay(t.overlay),e.showMatchesOnScrollbar&&(t.annotate&&(t.annotate.clear(),t.annotate=null),t.annotate=e.showMatchesOnScrollbar(t.query,r(t.query)))}function c(t,r,i,o){var s=n(t);if(s.query)return d(t,r);var c=t.getSelection()||s.lastQuery;if(c instanceof RegExp&&"x^"==c.source&&(c=null),i&&t.openDialog){var p=null,f=function(n,r){e.e_stop(r),n&&(n!=s.queryText&&(l(t,s,n),s.posFrom=s.posTo=t.getCursor()),p&&(p.style.opacity=1),d(t,r.shiftKey,(function(e,n){var r;n.line<3&&document.querySelector&&(r=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&r.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((p=r).style.opacity=.4)})))};(function(e,t,n,r,i){e.openDialog(t,r,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){u(e)},onKeyDown:i,bottom:e.options.search.bottom})})(t,h(t),c,f,(function(r,i){var a=e.keyName(r),o=t.getOption("extraKeys"),s=o&&o[a]||e.keyMap[t.getOption("keyMap")][a];"findNext"==s||"findPrev"==s||"findPersistentNext"==s||"findPersistentPrev"==s?(e.e_stop(r),l(t,n(t),i),t.execCommand(s)):"find"!=s&&"findPersistent"!=s||(e.e_stop(r),f(i,r))})),o&&c&&(l(t,s,c),d(t,r))}else a(t,h(t),"Search for:",c,(function(e){e&&!s.query&&t.operation((function(){l(t,s,e),s.posFrom=s.posTo=t.getCursor(),d(t,r)}))}))}function d(t,r,a){t.operation((function(){var o=n(t),s=i(t,o.query,r?o.posFrom:o.posTo);(s.find(r)||(s=i(t,o.query,r?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0))).find(r))&&(t.setSelection(s.from(),s.to()),t.scrollIntoView({from:s.from(),to:s.to()},20),o.posFrom=s.from(),o.posTo=s.to(),a&&a(s.from(),s.to()))}))}function u(e){e.operation((function(){var t=n(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))}))}function p(e,t){var n=e?document.createElement(e):document.createDocumentFragment();for(var r in t)n[r]=t[r];for(var i=2;i<arguments.length;i++){var a=arguments[i];n.appendChild("string"==typeof a?document.createTextNode(a):a)}return n}function h(e){var t=p("label",{className:"CodeMirror-search-label"},e.phrase("Search:"),p("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field",id:"CodeMirror-search-field"}));return t.setAttribute("for","CodeMirror-search-field"),p("",null,t," ",p("span",{style:"color: #666",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}function f(e,t,n){e.operation((function(){for(var r=i(e,t);r.findNext();)if("string"!=typeof t){var a=e.getRange(r.from(),r.to()).match(t);r.replace(n.replace(/\$(\d)/g,(function(e,t){return a[t]})))}else r.replace(n)}))}function m(e,t){if(!e.getOption("readOnly")){var r=e.getSelection()||n(e).lastQuery,l=t?e.phrase("Replace all:"):e.phrase("Replace:"),c=p("",null,p("span",{className:"CodeMirror-search-label"},l),function(e){return p("",null," ",p("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",p("span",{style:"color: #666",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}(e));a(e,c,l,r,(function(n){n&&(n=s(n),a(e,function(e){return p("",null,p("span",{className:"CodeMirror-search-label"},e.phrase("With:"))," ",p("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}(e),e.phrase("Replace with:"),"",(function(r){if(r=o(r),t)f(e,n,r);else{u(e);var a=i(e,n,e.getCursor("from")),s=function(){var t,o=a.from();!(t=a.findNext())&&(a=i(e,n),!(t=a.findNext())||o&&a.from().line==o.line&&a.from().ch==o.ch)||(e.setSelection(a.from(),a.to()),e.scrollIntoView({from:a.from(),to:a.to()}),function(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}(e,function(e){return p("",null,p("span",{className:"CodeMirror-search-label"},e.phrase("Replace?"))," ",p("button",{},e.phrase("Yes"))," ",p("button",{},e.phrase("No"))," ",p("button",{},e.phrase("All"))," ",p("button",{},e.phrase("Stop")))}(e),e.phrase("Replace?"),[function(){l(t)},s,function(){f(e,n,r)}]))},l=function(e){a.replace("string"==typeof n?r:r.replace(/\$(\d)/g,(function(t,n){return e[n]}))),s()};s()}})))}))}}e.defineOption("search",{bottom:!1}),e.commands.find=function(e){u(e),c(e)},e.commands.findPersistent=function(e){u(e),c(e,!1,!0)},e.commands.findPersistentNext=function(e){c(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){c(e,!0,!0,!0)},e.commands.findNext=c,e.commands.findPrev=function(e){c(e,!0)},e.commands.clearSearch=u,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}}(n(9059).default)},2774:(e,t,n)=>{"use strict";n.r(t),function(e){var t,n,r=e.Pos;function i(e,t){for(var n=function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e),r=n,i=0;i<t.length;i++)-1==r.indexOf(t.charAt(i))&&(r+=t.charAt(i));return n==r?e:new RegExp(e.source,r)}function a(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function o(e,t,n){t=i(t,"g");for(var a=n.line,o=n.ch,s=e.lastLine();a<=s;a++,o=0){t.lastIndex=o;var l=e.getLine(a),c=t.exec(l);if(c)return{from:r(a,c.index),to:r(a,c.index+c[0].length),match:c}}}function s(e,t,n){if(!a(t))return o(e,t,n);t=i(t,"gm");for(var s,l=1,c=n.line,d=e.lastLine();c<=d;){for(var u=0;u<l&&!(c>d);u++){var p=e.getLine(c++);s=null==s?p:s+"\n"+p}l*=2,t.lastIndex=n.ch;var h=t.exec(s);if(h){var f=s.slice(0,h.index).split("\n"),m=h[0].split("\n"),g=n.line+f.length-1,v=f[f.length-1].length;return{from:r(g,v),to:r(g+m.length-1,1==m.length?v+m[0].length:m[m.length-1].length),match:h}}}}function l(e,t,n){for(var r,i=0;i<=e.length;){t.lastIndex=i;var a=t.exec(e);if(!a)break;var o=a.index+a[0].length;if(o>e.length-n)break;(!r||o>r.index+r[0].length)&&(r=a),i=a.index+1}return r}function c(e,t,n){t=i(t,"g");for(var a=n.line,o=n.ch,s=e.firstLine();a>=s;a--,o=-1){var c=e.getLine(a),d=l(c,t,o<0?0:c.length-o);if(d)return{from:r(a,d.index),to:r(a,d.index+d[0].length),match:d}}}function d(e,t,n){if(!a(t))return c(e,t,n);t=i(t,"gm");for(var o,s=1,d=e.getLine(n.line).length-n.ch,u=n.line,p=e.firstLine();u>=p;){for(var h=0;h<s&&u>=p;h++){var f=e.getLine(u--);o=null==o?f:f+"\n"+o}s*=2;var m=l(o,t,d);if(m){var g=o.slice(0,m.index).split("\n"),v=m[0].split("\n"),b=u+g.length,y=g[g.length-1].length;return{from:r(b,y),to:r(b+v.length-1,1==v.length?y+v[0].length:v[v.length-1].length),match:m}}}}function u(e,t,n,r){if(e.length==t.length)return n;for(var i=0,a=n+Math.max(0,e.length-t.length);;){if(i==a)return i;var o=i+a>>1,s=r(e.slice(0,o)).length;if(s==n)return o;s>n?a=o:i=o+1}}function p(e,i,a,o){if(!i.length)return null;var s=o?t:n,l=s(i).split(/\r|\n\r?/);e:for(var c=a.line,d=a.ch,p=e.lastLine()+1-l.length;c<=p;c++,d=0){var h=e.getLine(c).slice(d),f=s(h);if(1==l.length){var m=f.indexOf(l[0]);if(-1==m)continue e;return a=u(h,f,m,s)+d,{from:r(c,u(h,f,m,s)+d),to:r(c,u(h,f,m+l[0].length,s)+d)}}var g=f.length-l[0].length;if(f.slice(g)==l[0]){for(var v=1;v<l.length-1;v++)if(s(e.getLine(c+v))!=l[v])continue e;var b=e.getLine(c+l.length-1),y=s(b),_=l[l.length-1];if(y.slice(0,_.length)==_)return{from:r(c,u(h,f,g,s)+d),to:r(c+l.length-1,u(b,y,_.length,s))}}}}function h(e,i,a,o){if(!i.length)return null;var s=o?t:n,l=s(i).split(/\r|\n\r?/);e:for(var c=a.line,d=a.ch,p=e.firstLine()-1+l.length;c>=p;c--,d=-1){var h=e.getLine(c);d>-1&&(h=h.slice(0,d));var f=s(h);if(1==l.length){var m=f.lastIndexOf(l[0]);if(-1==m)continue e;return{from:r(c,u(h,f,m,s)),to:r(c,u(h,f,m+l[0].length,s))}}var g=l[l.length-1];if(f.slice(0,g.length)==g){var v=1;for(a=c-l.length+1;v<l.length-1;v++)if(s(e.getLine(a+v))!=l[v])continue e;var b=e.getLine(c+1-l.length),y=s(b);if(y.slice(y.length-l[0].length)==l[0])return{from:r(c+1-l.length,u(b,y,b.length-l[0].length,s)),to:r(c,u(h,f,g.length,s))}}}}function f(e,t,n,a){var l;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=e,n=n?e.clipPos(n):r(0,0),this.pos={from:n,to:n},"object"==typeof a?l=a.caseFold:(l=a,a=null),"string"==typeof t?(null==l&&(l=!1),this.matches=function(n,r){return(n?h:p)(e,t,r,l)}):(t=i(t,"gm"),a&&!1===a.multiline?this.matches=function(n,r){return(n?c:o)(e,t,r)}:this.matches=function(n,r){return(n?d:s)(e,t,r)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),f.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){var n=this.doc.clipPos(t?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(n=r(n.line,n.ch),t?(n.ch--,n.ch<0&&(n.line--,n.ch=(this.doc.getLine(n.line)||"").length)):(n.ch++,n.ch>(this.doc.getLine(n.line)||"").length&&(n.ch=0,n.line++)),0!=e.cmpPos(n,this.doc.clipPos(n))))return this.atOccurrence=!1;var i=this.matches(t,n);if(this.afterEmptyMatch=i&&0==e.cmpPos(i.from,i.to),i)return this.pos=i,this.atOccurrence=!0,this.pos.match||!0;var a=r(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:a,to:a},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,n),this.pos.to=r(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,n){return new f(this.doc,e,t,n)})),e.defineDocExtension("getSearchCursor",(function(e,t,n){return new f(this,e,t,n)})),e.defineExtension("selectMatches",(function(t,n){for(var r=[],i=this.getSearchCursor(t,this.getCursor("from"),n);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)r.push({anchor:i.from(),head:i.to()});r.length&&this.setSelections(r,0)}))}(n(9059).default)},9079:(e,t,n)=>{"use strict";n.r(t);var r=n(9059);r.default.defineMode("javascript",(function(e,t){var n,i,a=e.indentUnit,o=t.statementIndent,s=t.jsonld,l=t.json||s,c=!1!==t.trackScope,d=t.typescript,u=t.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("keyword d"),a=e("operator"),o={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),h=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e,t,r){return n=e,i=r,t}function g(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){var r,i=!1;if(s&&"@"==e.peek()&&e.match(f))return t.tokenize=g,m("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=g),m("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==r&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return m(r);if("="==r&&e.eat(">"))return m("=>","operator");if("0"==r&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(r))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==r)return e.eat("*")?(t.tokenize=v,v(e,t)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):et(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(e.eat("="),m("operator","operator",e.current()));if("`"==r)return t.tokenize=b,b(e,t);if("#"==r&&"!"==e.peek())return e.skipToEnd(),m("meta","meta");if("#"==r&&e.eatWhile(u))return m("variable","property");if("<"==r&&e.match("!--")||"-"==r&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),m("comment","comment");if(h.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-|&?]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),"?"==r&&e.eat(".")?m("."):m("operator","operator",e.current());if(u.test(r)){e.eatWhile(u);var i=e.current();if("."!=t.lastType){if(p.propertyIsEnumerable(i)){var a=p[i];return m(a.type,a.style,i)}if("async"==i&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",i)}return m("variable","variable",i)}}function v(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=g;break}r="*"==n}return m("comment","comment")}function b(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}r=!r&&"\\"==n}return m("quasi","string-2",e.current())}var y="([{}])";function _(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(d){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,a=!1,o=n-1;o>=0;--o){var s=e.string.charAt(o),l=y.indexOf(s);if(l>=0&&l<3){if(!i){++o;break}if(0==--i){"("==s&&(a=!0);break}}else if(l>=3&&l<6)++i;else if(u.test(s))a=!0;else if(/["'\/`]/.test(s))for(;;--o){if(0==o)return;if(e.string.charAt(o-1)==s&&"\\"!=e.string.charAt(o-2)){o--;break}}else if(a&&!i){++o;break}}a&&!i&&(t.fatArrowAt=o)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function C(e,t,n,r,i,a){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=a,null!=r&&(this.align=r)}function x(e,t){if(!c)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}function k(e,t,n,r,i){var a=e.cc;for(E.state=e,E.stream=i,E.marked=null,E.cc=a,E.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():l?V:H)(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return E.marked?E.marked:"variable"==n&&x(e,r)?"variable-2":t}}var E={state:null,column:null,marked:null,cc:null};function S(){for(var e=arguments.length-1;e>=0;e--)E.cc.push(arguments[e])}function T(){return S.apply(null,arguments),!0}function M(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function I(e){var n=E.state;if(E.marked="def",c){if(n.context)if("var"==n.lexical.info&&n.context&&n.context.block){var r=L(e,n.context);if(null!=r)return void(n.context=r)}else if(!M(e,n.localVars))return void(n.localVars=new O(e,n.localVars));t.globalVars&&!M(e,n.globalVars)&&(n.globalVars=new O(e,n.globalVars))}}function L(e,t){if(t){if(t.block){var n=L(e,t.prev);return n?n==t.prev?t:new P(n,t.vars,!0):null}return M(e,t.vars)?t:new P(t.prev,new O(e,t.vars),!1)}return null}function $(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function P(e,t,n){this.prev=e,this.vars=t,this.block=n}function O(e,t){this.name=e,this.next=t}var B=new O("this",new O("arguments",null));function A(){E.state.context=new P(E.state.context,E.state.localVars,!1),E.state.localVars=B}function R(){E.state.context=new P(E.state.context,E.state.localVars,!0),E.state.localVars=null}function D(){E.state.localVars=E.state.context.vars,E.state.context=E.state.context.prev}function N(e,t){var n=function(){var n=E.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new C(r,E.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function G(){var e=E.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function z(e){return function t(n){return n==e?T():";"==e||"}"==n||")"==n||"]"==n?S():T(t)}}function H(e,t){return"var"==e?T(N("vardef",t),Ee,z(";"),G):"keyword a"==e?T(N("form"),j,H,G):"keyword b"==e?T(N("form"),H,G):"keyword d"==e?E.stream.match(/^\s*$/,!1)?T():T(N("stat"),q,z(";"),G):"debugger"==e?T(z(";")):"{"==e?T(N("}"),R,ce,G,D):";"==e?T():"if"==e?("else"==E.state.lexical.info&&E.state.cc[E.state.cc.length-1]==G&&E.state.cc.pop()(),T(N("form"),j,H,G,$e)):"function"==e?T(Ae):"for"==e?T(N("form"),R,Pe,H,D,G):"class"==e||d&&"interface"==t?(E.marked="keyword",T(N("form","class"==e?e:t),ze,G)):"variable"==e?d&&"declare"==t?(E.marked="keyword",T(H)):d&&("module"==t||"enum"==t||"type"==t)&&E.stream.match(/^\s*\w/,!1)?(E.marked="keyword","enum"==t?T(Xe):"type"==t?T(De,z("operator"),fe,z(";")):T(N("form"),Se,z("{"),N("}"),ce,G,G)):d&&"namespace"==t?(E.marked="keyword",T(N("form"),V,H,G)):d&&"abstract"==t?(E.marked="keyword",T(H)):T(N("stat"),ne):"switch"==e?T(N("form"),j,z("{"),N("}","switch"),R,ce,G,G,D):"case"==e?T(V,z(":")):"default"==e?T(z(":")):"catch"==e?T(N("form"),A,F,H,G,D):"export"==e?T(N("stat"),We,G):"import"==e?T(N("stat"),Ue,G):"async"==e?T(H):"@"==t?T(V,H):S(N("stat"),V,z(";"),G)}function F(e){if("("==e)return T(Ne,z(")"))}function V(e,t){return U(e,t,!1)}function W(e,t){return U(e,t,!0)}function j(e){return"("!=e?S():T(N(")"),q,z(")"),G)}function U(e,t,n){if(E.state.fatArrowAt==E.stream.start){var r=n?Z:X;if("("==e)return T(A,N(")"),se(Ne,")"),G,z("=>"),r,D);if("variable"==e)return S(A,Se,z("=>"),r,D)}var i=n?J:K;return w.hasOwnProperty(e)?T(i):"function"==e?T(Ae,i):"class"==e||d&&"interface"==t?(E.marked="keyword",T(N("form"),Ge,G)):"keyword c"==e||"async"==e?T(n?W:V):"("==e?T(N(")"),q,z(")"),G,i):"operator"==e||"spread"==e?T(n?W:V):"["==e?T(N("]"),Ye,G,i):"{"==e?le(ie,"}",null,i):"quasi"==e?S(Q,i):"new"==e?T(function(e){return function(t){return"."==t?T(e?te:ee):"variable"==t&&d?T(Ce,e?J:K):S(e?W:V)}}(n)):T()}function q(e){return e.match(/[;\}\)\],]/)?S():S(V)}function K(e,t){return","==e?T(q):J(e,t,!1)}function J(e,t,n){var r=0==n?K:J,i=0==n?V:W;return"=>"==e?T(A,n?Z:X,D):"operator"==e?/\+\+|--/.test(t)||d&&"!"==t?T(r):d&&"<"==t&&E.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?T(N(">"),se(fe,">"),G,r):"?"==t?T(V,z(":"),i):T(i):"quasi"==e?S(Q,r):";"!=e?"("==e?le(W,")","call",r):"."==e?T(re,r):"["==e?T(N("]"),q,z("]"),G,r):d&&"as"==t?(E.marked="keyword",T(fe,r)):"regexp"==e?(E.state.lastType=E.marked="operator",E.stream.backUp(E.stream.pos-E.stream.start-1),T(i)):void 0:void 0}function Q(e,t){return"quasi"!=e?S():"${"!=t.slice(t.length-2)?T(Q):T(q,Y)}function Y(e){if("}"==e)return E.marked="string-2",E.state.tokenize=b,T(Q)}function X(e){return _(E.stream,E.state),S("{"==e?H:V)}function Z(e){return _(E.stream,E.state),S("{"==e?H:W)}function ee(e,t){if("target"==t)return E.marked="keyword",T(K)}function te(e,t){if("target"==t)return E.marked="keyword",T(J)}function ne(e){return":"==e?T(G,H):S(K,z(";"),G)}function re(e){if("variable"==e)return E.marked="property",T()}function ie(e,t){return"async"==e?(E.marked="property",T(ie)):"variable"==e||"keyword"==E.style?(E.marked="property","get"==t||"set"==t?T(ae):(d&&E.state.fatArrowAt==E.stream.start&&(n=E.stream.match(/^\s*:\s*/,!1))&&(E.state.fatArrowAt=E.stream.pos+n[0].length),T(oe))):"number"==e||"string"==e?(E.marked=s?"property":E.style+" property",T(oe)):"jsonld-keyword"==e?T(oe):d&&$(t)?(E.marked="keyword",T(ie)):"["==e?T(V,de,z("]"),oe):"spread"==e?T(W,oe):"*"==t?(E.marked="keyword",T(ie)):":"==e?S(oe):void 0;var n}function ae(e){return"variable"!=e?S(oe):(E.marked="property",T(Ae))}function oe(e){return":"==e?T(W):"("==e?S(Ae):void 0}function se(e,t,n){function r(i,a){if(n?n.indexOf(i)>-1:","==i){var o=E.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),T((function(n,r){return n==t||r==t?S():S(e)}),r)}return i==t||a==t?T():n&&n.indexOf(";")>-1?S(e):T(z(t))}return function(n,i){return n==t||i==t?T():S(e,r)}}function le(e,t,n){for(var r=3;r<arguments.length;r++)E.cc.push(arguments[r]);return T(N(t,n),se(e,t),G)}function ce(e){return"}"==e?T():S(H,ce)}function de(e,t){if(d){if(":"==e)return T(fe);if("?"==t)return T(de)}}function ue(e,t){if(d&&(":"==e||"in"==t))return T(fe)}function pe(e){if(d&&":"==e)return E.stream.match(/^\s*\w+\s+is\b/,!1)?T(V,he,fe):T(fe)}function he(e,t){if("is"==t)return E.marked="keyword",T()}function fe(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(E.marked="keyword",T("typeof"==t?W:fe)):"variable"==e||"void"==t?(E.marked="type",T(we)):"|"==t||"&"==t?T(fe):"string"==e||"number"==e||"atom"==e?T(we):"["==e?T(N("]"),se(fe,"]",","),G,we):"{"==e?T(N("}"),ge,G,we):"("==e?T(se(_e,")"),me,we):"<"==e?T(se(fe,">"),fe):"quasi"==e?S(be,we):void 0}function me(e){if("=>"==e)return T(fe)}function ge(e){return e.match(/[\}\)\]]/)?T():","==e||";"==e?T(ge):S(ve,ge)}function ve(e,t){return"variable"==e||"keyword"==E.style?(E.marked="property",T(ve)):"?"==t||"number"==e||"string"==e?T(ve):":"==e?T(fe):"["==e?T(z("variable"),ue,z("]"),ve):"("==e?S(Re,ve):e.match(/[;\}\)\],]/)?void 0:T()}function be(e,t){return"quasi"!=e?S():"${"!=t.slice(t.length-2)?T(be):T(fe,ye)}function ye(e){if("}"==e)return E.marked="string-2",E.state.tokenize=b,T(be)}function _e(e,t){return"variable"==e&&E.stream.match(/^\s*[?:]/,!1)||"?"==t?T(_e):":"==e?T(fe):"spread"==e?T(_e):S(fe)}function we(e,t){return"<"==t?T(N(">"),se(fe,">"),G,we):"|"==t||"."==e||"&"==t?T(fe):"["==e?T(fe,z("]"),we):"extends"==t||"implements"==t?(E.marked="keyword",T(fe)):"?"==t?T(fe,z(":"),fe):void 0}function Ce(e,t){if("<"==t)return T(N(">"),se(fe,">"),G,we)}function xe(){return S(fe,ke)}function ke(e,t){if("="==t)return T(fe)}function Ee(e,t){return"enum"==t?(E.marked="keyword",T(Xe)):S(Se,de,Ie,Le)}function Se(e,t){return d&&$(t)?(E.marked="keyword",T(Se)):"variable"==e?(I(t),T()):"spread"==e?T(Se):"["==e?le(Me,"]"):"{"==e?le(Te,"}"):void 0}function Te(e,t){return"variable"!=e||E.stream.match(/^\s*:/,!1)?("variable"==e&&(E.marked="property"),"spread"==e?T(Se):"}"==e?S():"["==e?T(V,z("]"),z(":"),Te):T(z(":"),Se,Ie)):(I(t),T(Ie))}function Me(){return S(Se,Ie)}function Ie(e,t){if("="==t)return T(W)}function Le(e){if(","==e)return T(Ee)}function $e(e,t){if("keyword b"==e&&"else"==t)return T(N("form","else"),H,G)}function Pe(e,t){return"await"==t?T(Pe):"("==e?T(N(")"),Oe,G):void 0}function Oe(e){return"var"==e?T(Ee,Be):"variable"==e?T(Be):S(Be)}function Be(e,t){return")"==e?T():";"==e?T(Be):"in"==t||"of"==t?(E.marked="keyword",T(V,Be)):S(V,Be)}function Ae(e,t){return"*"==t?(E.marked="keyword",T(Ae)):"variable"==e?(I(t),T(Ae)):"("==e?T(A,N(")"),se(Ne,")"),G,pe,H,D):d&&"<"==t?T(N(">"),se(xe,">"),G,Ae):void 0}function Re(e,t){return"*"==t?(E.marked="keyword",T(Re)):"variable"==e?(I(t),T(Re)):"("==e?T(A,N(")"),se(Ne,")"),G,pe,D):d&&"<"==t?T(N(">"),se(xe,">"),G,Re):void 0}function De(e,t){return"keyword"==e||"variable"==e?(E.marked="type",T(De)):"<"==t?T(N(">"),se(xe,">"),G):void 0}function Ne(e,t){return"@"==t&&T(V,Ne),"spread"==e?T(Ne):d&&$(t)?(E.marked="keyword",T(Ne)):d&&"this"==e?T(de,Ie):S(Se,de,Ie)}function Ge(e,t){return"variable"==e?ze(e,t):He(e,t)}function ze(e,t){if("variable"==e)return I(t),T(He)}function He(e,t){return"<"==t?T(N(">"),se(xe,">"),G,He):"extends"==t||"implements"==t||d&&","==e?("implements"==t&&(E.marked="keyword"),T(d?fe:V,He)):"{"==e?T(N("}"),Fe,G):void 0}function Fe(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||d&&$(t))&&E.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(E.marked="keyword",T(Fe)):"variable"==e||"keyword"==E.style?(E.marked="property",T(Ve,Fe)):"number"==e||"string"==e?T(Ve,Fe):"["==e?T(V,de,z("]"),Ve,Fe):"*"==t?(E.marked="keyword",T(Fe)):d&&"("==e?S(Re,Fe):";"==e||","==e?T(Fe):"}"==e?T():"@"==t?T(V,Fe):void 0}function Ve(e,t){if("!"==t)return T(Ve);if("?"==t)return T(Ve);if(":"==e)return T(fe,Ie);if("="==t)return T(W);var n=E.state.lexical.prev;return S(n&&"interface"==n.info?Re:Ae)}function We(e,t){return"*"==t?(E.marked="keyword",T(Qe,z(";"))):"default"==t?(E.marked="keyword",T(V,z(";"))):"{"==e?T(se(je,"}"),Qe,z(";")):S(H)}function je(e,t){return"as"==t?(E.marked="keyword",T(z("variable"))):"variable"==e?S(W,je):void 0}function Ue(e){return"string"==e?T():"("==e?S(V):"."==e?S(K):S(qe,Ke,Qe)}function qe(e,t){return"{"==e?le(qe,"}"):("variable"==e&&I(t),"*"==t&&(E.marked="keyword"),T(Je))}function Ke(e){if(","==e)return T(qe,Ke)}function Je(e,t){if("as"==t)return E.marked="keyword",T(qe)}function Qe(e,t){if("from"==t)return E.marked="keyword",T(V)}function Ye(e){return"]"==e?T():S(se(W,"]"))}function Xe(){return S(N("form"),Se,z("{"),N("}"),se(Ze,"}"),G,G)}function Ze(){return S(Se,Ie)}function et(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return D.lex=!0,G.lex=!0,{startState:function(e){var n={tokenize:g,lastType:"sof",cc:[],lexical:new C((e||0)-a,0,"block",!1),localVars:t.localVars,context:t.localVars&&new P(null,null,!1),indented:e||0};return t.globalVars&&"object"==typeof t.globalVars&&(n.globalVars=t.globalVars),n},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),_(e,t)),t.tokenize!=v&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=i&&"--"!=i?n:"incdec",k(t,r,n,i,e))},indent:function(e,n){if(e.tokenize==v||e.tokenize==b)return r.default.Pass;if(e.tokenize!=g)return 0;var i,s=n&&n.charAt(0),l=e.lexical;if(!/^\s*else\b/.test(n))for(var c=e.cc.length-1;c>=0;--c){var d=e.cc[c];if(d==G)l=l.prev;else if(d!=$e&&d!=D)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(i=e.cc[e.cc.length-1])&&(i==K||i==J)&&!/^[,\.=+\-*:?[\(]/.test(n));)l=l.prev;o&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var u=l.type,p=s==u;return"vardef"==u?l.indented+("operator"==e.lastType||","==e.lastType?l.info.length+1:0):"form"==u&&"{"==s?l.indented:"form"==u?l.indented+a:"stat"==u?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(e,n)?o||a:0):"switch"!=l.info||p||0==t.doubleIndentSwitch?l.align?l.column+(p?0:1):l.indented+(p?0:a):l.indented+(/^(?:case|default)\b/.test(n)?a:2*a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:s,jsonMode:l,expressionAllowed:et,skipExpression:function(e){k(e,"atom","atom","true",new r.default.StringStream("",2,null))}}})),r.default.registerHelper("wordChars","javascript",/[\w$]/),r.default.defineMIME("text/javascript","javascript"),r.default.defineMIME("text/ecmascript","javascript"),r.default.defineMIME("application/javascript","javascript"),r.default.defineMIME("application/x-javascript","javascript"),r.default.defineMIME("application/ecmascript","javascript"),r.default.defineMIME("application/json",{name:"javascript",json:!0}),r.default.defineMIME("application/x-json",{name:"javascript",json:!0}),r.default.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.default.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.default.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.default.defineMIME("application/typescript",{name:"javascript",typescript:!0})},6292:(e,t,n)=>{"use strict";n.r(t);var r=n(7878),i=n(9059);const a="_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZабвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ",o="string",s="atom",l={"!":"!",$:"$"},c={".":".","<":"<"},d=[...Object.values(l),...Object.values(c)];function u(e){for(var t={},n=e.replace(/\n/g," ").trim().split(" ").filter((e=>e)),r=0;r<n.length;++r)t[n[r]]=!0;return t}i.default.defineMode("musa",(function(){var e=u("TRUE FALSE ZEROES ZEROS ZERO SPACES SPACE LOW-VALUE LOW-VALUES "),t=u("\n    EDIT SAVE DELETE\n    ДЫ ДУ ДО ДА ДЕ ДИ DU DY DO DA DE DI\n    ТЫ ТУ ТО ТА ТЕ ТИ TU TY TO TA TE TI\n    РЫ РУ РО РА РЕ РИ RU RY RO RA RE RI\n    НЫ НУ НО НА НЕ НИ NU NY NO NA NE NI\n    МЫ МУ МО МА МЕ МИ MU MY MO MA ME MI\n    ФЫ ФУ ФО ФА ФЕ ФИ FU FY FO FA FE FI\n    ВЫ ВУ ВО ВА ВЕ ВИ VU VY VO VA VE VI\n    СЫ СУ СО СА СЕ СИ SU SY SO SA SE SI\n    ЗЫ ЗУ ЗО ЗА ЗЕ ЗИ ZU ZY ZO ZA ZE ZI\n    ЛЫ ЛУ ЛО ЛА ЛЕ ЛИ LU LY LO LA LE LI\n    КЫ КУ КО КА КЕ КИ KU KY KO KA KE KI\n    БЫ БУ БО БА БЕ БИ BU BY BO BA BE BI\n    "),n=u("- * ** / + < <= = > >= "),i={digit:/\d/,digit_or_colon:/[\d:]/,hex:/[0-9a-f]/i,decor:/[0-9a-f]/i,sign:/[+-]/,exponent:/e/i,keyword_char:/[^\s\(\[\;\)\]]/,symbol:/[\p{Alpha}\p{M}\p{Nd}\p{Pc}\p{Join_C}]/u};return{startState:function(){return{indentStack:null,indentation:0,mode:!1,lineType:null,lastNoteCode:0}},token:function(u,p){if(u.sol()&&(p.lineType=null,p.lastNoteCode=0),u.eatSpace())return null;var h=null;if("string"===p.mode){for(var f=!1;null!=(f=u.next());)if(('"'==f||"'"==f)&&!u.match(/['"]/,!1)){p.mode=!1;break}h=o}else{var m=u.next(),g=u.column();if(0===g&&!d.find((e=>e===m)))return u.skipToEnd(),"hr";if("text"===p.lineType)return u.skipToEnd(),null;if(0===g&&l[m])return p.lineType="note","hr";if(0===g&&c[m])return p.lineType="text","hr";if('"'==m||"'"==m)p.mode="string",h=o;else if("'"!=m||i.digit_or_colon.test(u.peek()))if(function(e,t){return"0"===e&&t.eat(/x/i)?(t.eatWhile(i.hex),!0):("+"!=e&&"-"!=e||!i.digit.test(t.peek())||(t.eat(i.sign),e=t.next()),!!i.digit.test(e)&&(t.eat(e),t.eatWhile(i.digit),"."==t.peek()&&(t.eat("."),t.eatWhile(i.digit)),t.eat(i.exponent)&&(t.eat(i.sign),t.eatWhile(i.digit)),!0))}(m,u))h="number";else if(function(e,t){return("*"===e||"$"===e)&&(t.skipTo(" "),!0)}(m,u))h=o;else{if(a.includes(u.current()))for(;!u.eol();){let e=u.peek();if(!a.includes(e))break;g++,u.next()}if(t&&t.propertyIsEnumerable(u.current().toUpperCase())){let e=u.current().toLowerCase();e=r.noteLatByNoteHash[e],h=e?"step-"+e:"noteDefault"}else h=n&&n.propertyIsEnumerable(u.current().toUpperCase())?"builtin":e&&e.propertyIsEnumerable(u.current().toUpperCase())?s:null}else h=s}return h}}})),i.default.defineMIME("text/x-musa","musa")},4027:(e,t,n)=>{"use strict";n.r(t);var r=n(9059),i={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};r.default.defineMode("xml",(function(e,t){var n,o,s=e.indentUnit,l={},c=t.htmlMode?i:a;for(var d in c)l[d]=c[d];for(var d in t)l[d]=t[d];function u(e,t){function r(n){return t.tokenize=n,n(e,t)}var i=e.next();return"<"==i?e.eat("!")?e.eat("[")?e.match("CDATA[")?r(h("atom","]]>")):null:e.match("--")?r(h("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(f(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=h("meta","?>"),"meta"):(n=e.eat("/")?"closeTag":"openTag",t.tokenize=p,"tag bracket"):"&"==i?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function p(e,t){var r,i,a=e.next();if(">"==a||"/"==a&&e.eat(">"))return t.tokenize=u,n=">"==a?"endTag":"selfcloseTag","tag bracket";if("="==a)return n="equals",null;if("<"==a){t.tokenize=u,t.state=y,t.tagName=t.tagStart=null;var o=t.tokenize(e,t);return o?o+" tag error":"tag error"}return/[\'\"]/.test(a)?(t.tokenize=(r=a,i=function(e,t){for(;!e.eol();)if(e.next()==r){t.tokenize=p;break}return"string"},i.isInAttribute=!0,i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=u;break}n.next()}return e}}function f(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=f(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=u;break}return n.tokenize=f(e-1),n.tokenize(t,n)}}return"meta"}}function m(e){return e&&e.toLowerCase()}function g(e,t,n){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function v(e){e.context&&(e.context=e.context.prev)}function b(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!l.contextGrabbers.hasOwnProperty(m(n))||!l.contextGrabbers[m(n)].hasOwnProperty(m(t)))return;v(e)}}function y(e,t,n){return"openTag"==e?(n.tagStart=t.column(),_):"closeTag"==e?w:y}function _(e,t,n){return"word"==e?(n.tagName=t.current(),o="tag",k):l.allowMissingTagName&&"endTag"==e?(o="tag bracket",k(e,0,n)):(o="error",_)}function w(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&l.implicitlyClosed.hasOwnProperty(m(n.context.tagName))&&v(n),n.context&&n.context.tagName==r||!1===l.matchClosing?(o="tag",C):(o="tag error",x)}return l.allowMissingTagName&&"endTag"==e?(o="tag bracket",C(e,0,n)):(o="error",x)}function C(e,t,n){return"endTag"!=e?(o="error",C):(v(n),y)}function x(e,t,n){return o="error",C(e,0,n)}function k(e,t,n){if("word"==e)return o="attribute",E;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(m(r))?b(n,r):(b(n,r),n.context=new g(n,r,i==n.indented)),y}return o="error",k}function E(e,t,n){return"equals"==e?S:(l.allowMissing||(o="error"),k(e,0,n))}function S(e,t,n){return"string"==e?T:"word"==e&&l.allowUnquoted?(o="string",k):(o="error",k(e,0,n))}function T(e,t,n){return"string"==e?T:k(e,0,n)}return u.isInText=!0,{startState:function(e){var t={tokenize:u,state:y,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;n=null;var r=t.tokenize(e,t);return(r||n)&&"comment"!=r&&(o=null,t.state=t.state(n||r,e,t),o&&(r="error"==o?r+" error":o)),r},indent:function(e,t,n){var i=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+s;if(i&&i.noIndent)return r.default.Pass;if(e.tokenize!=p&&e.tokenize!=u)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==l.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+s*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(t))return 0;var a=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(a&&a[1])for(;i;){if(i.tagName==a[2]){i=i.prev;break}if(!l.implicitlyClosed.hasOwnProperty(m(i.tagName)))break;i=i.prev}else if(a)for(;i;){var o=l.contextGrabbers[m(i.tagName)];if(!o||!o.hasOwnProperty(m(a[2])))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+s:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==S&&(e.state=k)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)t.push(n.tagName);return t.reverse()}}})),r.default.defineMIME("text/xml","xml"),r.default.defineMIME("application/xml","xml"),r.default.mimeModes.hasOwnProperty("text/html")||r.default.defineMIME("text/html",{name:"xml",htmlMode:!0})},334:(e,t,n)=>{"use strict";n.r(t);var r=n(9059),i="CodeMirror-activeline",a="CodeMirror-activeline-background",o="CodeMirror-activeline-gutter";function s(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",i),e.removeLineClass(e.state.activeLines[t],"background",a),e.removeLineClass(e.state.activeLines[t],"gutter",o)}function l(e,t){for(var n=[],r=0;r<t.length;r++){var l=t[r],c=e.getOption("styleActiveLine");if("object"==typeof c&&c.nonEmpty?l.anchor.line==l.head.line:l.empty()){var d=e.getLineHandleVisualStart(l.head.line);n[n.length-1]!=d&&n.push(d)}}(function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0})(e.state.activeLines,n)||e.operation((function(){s(e);for(var t=0;t<n.length;t++)e.addLineClass(n[t],"wrap",i),e.addLineClass(n[t],"background",a),e.addLineClass(n[t],"gutter",o);e.state.activeLines=n}))}function c(e,t){l(e,t.ranges)}r.default.defineOption("styleActiveLine",!1,(function(e,t,n){var i=n!=r.default.Init&&n;t!=i&&(i&&(e.off("beforeSelectionChange",c),s(e),delete e.state.activeLines),t&&(e.state.activeLines=[],l(e,e.listSelections()),e.on("beforeSelectionChange",c)))}))},9059:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>jo});let r=navigator.userAgent,i=navigator.platform,a=/gecko\/\d/i.test(r),o=/MSIE \d/.test(r),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),l=/Edge\/(\d+)/.exec(r),c=o||s||l,d=c&&(o?document.documentMode||6:+(l||s)[1]),u=!l&&/WebKit\//.test(r),p=u&&/Qt\/\d+\.\d+/.test(r),h=!l&&/Chrome\//.test(r),f=/Opera\//.test(r),m=/Apple Computer/.test(navigator.vendor),g=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),v=/PhantomJS/.test(r),b=m&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),y=/Android/.test(r),_=b||y||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),w=b||/Mac/.test(i),C=/\bCrOS\b/.test(r),x=/win/i.test(i),k=f&&r.match(/Version\/(\d*\.\d*)/);k&&(k=Number(k[1])),k&&k>=15&&(f=!1,u=!0);let E=w&&(p||f&&(null==k||k<12.11)),S=a||c&&d>=9;function T(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}let M,I=function(e,t){let n=e.className,r=T(t).exec(n);if(r){let t=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(t?r[1]+t:"")}};function L(e){for(let t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function $(e,t){return L(e).appendChild(t)}function P(e,t,n,r){let i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(let e=0;e<t.length;++e)i.appendChild(t[e]);return i}function O(e,t,n,r){let i=P(e,t,n,r);return i.setAttribute("role","presentation"),i}function B(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function A(){let e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function R(e,t){let n=e.className;T(t).test(n)||(e.className+=(n?" ":"")+t)}function D(e,t){let n=e.split(" ");for(let e=0;e<n.length;e++)n[e]&&!T(n[e]).test(t)&&(t+=" "+n[e]);return t}M=document.createRange?function(e,t,n,r){let i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){let r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};let N=function(e){e.select()};function G(e){let t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function z(e,t,n){t||(t={});for(let r in e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function H(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(let a=r||0,o=i||0;;){let r=e.indexOf("\t",a);if(r<0||r>=t)return o+(t-a);o+=r-a,o+=n-o%n,a=r+1}}b?N=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:c&&(N=function(e){try{e.select()}catch(e){}});class F{constructor(){this.id=null,this.f=null,this.time=0,this.handler=G(this.onTimeout,this)}onTimeout(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)}set(e,t){this.f=t;const n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)}}function V(e,t){for(let n=0;n<e.length;++n)if(e[n]==t)return n;return-1}let W=50,j={toString:function(){return"CodeMirror.Pass"}},U={scroll:!1},q={origin:"*mouse"},K={origin:"+move"};function J(e,t,n){for(let r=0,i=0;;){let a=e.indexOf("\t",r);-1==a&&(a=e.length);let o=a-r;if(a==e.length||i+o>=t)return r+Math.min(o,t-i);if(i+=a-r,i+=n-i%n,r=a+1,i>=t)return r}}let Q=[""];function Y(e){for(;Q.length<=e;)Q.push(X(Q)+" ");return Q[e]}function X(e){return e[e.length-1]}function Z(e,t){let n=[];for(let r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function ee(){}function te(e,t){let n;return Object.create?n=Object.create(e):(ee.prototype=e,n=new ee),t&&z(t,n),n}let ne=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function re(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ne.test(e))}function ie(e,t){return t?!!(t.source.indexOf("\\w")>-1&&re(e))||t.test(e):re(e)}function ae(e){for(let t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}let oe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function se(e){return e.charCodeAt(0)>=768&&oe.test(e)}function le(e,t,n){for(;(n<0?t>0:t<e.length)&&se(e.charAt(t));)t+=n;return t}function ce(e,t,n){let r=t>n?-1:1;for(;;){if(t==n)return t;let i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}let de=null;function ue(e,t,n){let r;de=null;for(let i=0;i<e.length;++i){let a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&"before"==n?r=i:de=i),a.from==t&&(a.from!=a.to&&"before"!=n?r=i:de=i)}return null!=r?r:de}let pe=function(){let e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function a(e,t,n){this.level=e,this.from=t,this.to=n}return function(o,s){let l="ltr"==s?"L":"R";if(0==o.length||"ltr"==s&&!e.test(o))return!1;let c=o.length,d=[];for(let e=0;e<c;++e)d.push((u=o.charCodeAt(e))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");var u;for(let e=0,t=l;e<c;++e){let n=d[e];"m"==n?d[e]=t:t=n}for(let e=0,t=l;e<c;++e){let r=d[e];"1"==r&&"r"==t?d[e]="n":n.test(r)&&(t=r,"r"==r&&(d[e]="R"))}for(let e=1,t=d[0];e<c-1;++e){let n=d[e];"+"==n&&"1"==t&&"1"==d[e+1]?d[e]="1":","!=n||t!=d[e+1]||"1"!=t&&"n"!=t||(d[e]=t),t=n}for(let e=0;e<c;++e){let t=d[e];if(","==t)d[e]="N";else if("%"==t){let t;for(t=e+1;t<c&&"%"==d[t];++t);let n=e&&"!"==d[e-1]||t<c&&"1"==d[t]?"1":"N";for(let r=e;r<t;++r)d[r]=n;e=t-1}}for(let e=0,t=l;e<c;++e){let r=d[e];"L"==t&&"1"==r?d[e]="L":n.test(r)&&(t=r)}for(let e=0;e<c;++e)if(t.test(d[e])){let n;for(n=e+1;n<c&&t.test(d[n]);++n);let r="L"==(e?d[e-1]:l),i=r==("L"==(n<c?d[n]:l))?r?"L":"R":l;for(let t=e;t<n;++t)d[t]=i;e=n-1}let p,h=[];for(let e=0;e<c;)if(r.test(d[e])){let t=e;for(++e;e<c&&r.test(d[e]);++e);h.push(new a(0,t,e))}else{let t=e,n=h.length,r="rtl"==s?1:0;for(++e;e<c&&"L"!=d[e];++e);for(let o=t;o<e;)if(i.test(d[o])){t<o&&(h.splice(n,0,new a(1,t,o)),n+=r);let s=o;for(++o;o<e&&i.test(d[o]);++o);h.splice(n,0,new a(2,s,o)),n+=r,t=o}else++o;t<e&&h.splice(n,0,new a(1,t,e))}return"ltr"==s&&(1==h[0].level&&(p=o.match(/^\s+/))&&(h[0].from=p[0].length,h.unshift(new a(0,0,p[0].length))),1==X(h).level&&(p=o.match(/\s+$/))&&(X(h).to-=p[0].length,h.push(new a(0,c-p[0].length,c)))),"rtl"==s?h.reverse():h}}();function he(e,t){let n=e.order;return null==n&&(n=e.order=pe(e.text,t)),n}const fe=[];let me=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{let r=e._handlers||(e._handlers={});r[t]=(r[t]||fe).concat(n)}};function ge(e,t){return e._handlers&&e._handlers[t]||fe}function ve(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{let r=e._handlers,i=r&&r[t];if(i){let e=V(i,n);e>-1&&(r[t]=i.slice(0,e).concat(i.slice(e+1)))}}}function be(e,t){let n=ge(e,t);if(!n.length)return;let r=Array.prototype.slice.call(arguments,2);for(let e=0;e<n.length;++e)n[e].apply(null,r)}function ye(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),be(e,n||t.type,e,t),Ee(t)||t.codemirrorIgnore}function _e(e){let t=e._handlers&&e._handlers.cursorActivity;if(!t)return;let n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(let e=0;e<t.length;++e)-1==V(n,t[e])&&n.push(t[e])}function we(e,t){return ge(e,t).length>0}function Ce(e){e.prototype.on=function(e,t){me(this,e,t)},e.prototype.off=function(e,t){ve(this,e,t)}}function xe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ke(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ee(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Se(e){xe(e),ke(e)}function Te(e){return e.target||e.srcElement}function Me(e){let t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),w&&e.ctrlKey&&1==t&&(t=3),t}let Ie,Le,$e=function(){if(c&&d<9)return!1;let e=P("div");return"draggable"in e||"dragDrop"in e}();function Pe(e){if(null==Ie){let t=P("span","​");$(e,P("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ie=t.offsetWidth<=1&&t.offsetHeight>2&&!(c&&d<8))}let t=Ie?P("span","​"):P("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return t.setAttribute("cm-text",""),t}function Oe(e){if(null!=Le)return Le;let t=$(e,document.createTextNode("AخA")),n=M(t,0,1).getBoundingClientRect(),r=M(t,1,2).getBoundingClientRect();return L(e),!(!n||n.left==n.right)&&(Le=r.right-n.right<3)}let Be=3!="\n\nb".split(/\n/).length?e=>{let t=0,n=[],r=e.length;for(;t<=r;){let r=e.indexOf("\n",t);-1==r&&(r=e.length);let i=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),a=i.indexOf("\r");-1!=a?(n.push(i.slice(0,a)),t+=a+1):(n.push(i),t=r+1)}return n}:e=>e.split(/\r\n?|\n/),Ae=window.getSelection?e=>{try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:e=>{let t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Re=(()=>{let e=P("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)})(),De=null,Ne={},Ge={};function ze(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ne[e]=t}function He(e){if("string"==typeof e&&Ge.hasOwnProperty(e))e=Ge[e];else if(e&&"string"==typeof e.name&&Ge.hasOwnProperty(e.name)){let t=Ge[e.name];"string"==typeof t&&(t={name:t}),(e=te(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return He("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return He("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Fe(e,t){t=He(t);let n=Ne[t.name];if(!n)return Fe(e,"text/plain");let r=n(e,t);if(Ve.hasOwnProperty(t.name)){let e=Ve[t.name];for(let t in e)e.hasOwnProperty(t)&&(r.hasOwnProperty(t)&&(r["_"+t]=r[t]),r[t]=e[t])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(let e in t.modeProps)r[e]=t.modeProps[e];return r}let Ve={};function We(e,t){z(t,Ve.hasOwnProperty(e)?Ve[e]:Ve[e]={})}function je(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);let n={};for(let e in t){let r=t[e];r instanceof Array&&(r=r.concat([])),n[e]=r}return n}function Ue(e,t){let n;for(;e.innerMode&&(n=e.innerMode(t),n&&n.mode!=e);)t=n.state,e=n.mode;return n||{mode:e,state:t}}function qe(e,t,n){return!e.startState||e.startState(t,n)}const Ke=class{constructor(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n}eol(){return this.pos>=this.string.length}sol(){return this.pos==this.lineStart}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e.test?e.test(n):e(n)),t)return++this.pos,n}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=H(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)}indentation(){return H(this.string,null,this.tabSize)-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)}match(e,t,n){if("string"!=typeof e){let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}{let r=e=>n?e.toLowerCase():e;if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0}}current(){return this.string.slice(this.start,this.pos)}hideFirstChars(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}lookAhead(e){let t=this.lineOracle;return t&&t.lookAhead(e)}baseToken(){let e=this.lineOracle;return e&&e.baseToken(this.pos)}};function Je(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");let n=e;for(;!n.lines;)for(let e=0;;++e){let r=n.children[e],i=r.chunkSize();if(t<i){n=r;break}t-=i}return n.lines[t]}function Qe(e,t,n){let r=[],i=t.line;return e.iter(t.line,n.line+1,(e=>{let a=e.text;i==n.line&&(a=a.slice(0,n.ch)),i==t.line&&(a=a.slice(t.ch)),r.push(a),++i})),r}function Ye(e,t,n){let r=[];return e.iter(t,n,(e=>{r.push(e.text)})),r}function Xe(e,t){let n=t-e.height;if(n)for(let t=e;t;t=t.parent)t.height+=n}function Ze(e){if(null==e.parent)return null;let t=e.parent,n=V(t.lines,e);for(let e=t.parent;e;t=e,e=e.parent)for(let r=0;e.children[r]!=t;++r)n+=e.children[r].chunkSize();return n+t.first}function et(e,t){let n=e.first;e:do{for(let r=0;r<e.children.length;++r){let i=e.children[r],a=i.height;if(t<a){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);let r=0;for(;r<e.lines.length;++r){let n=e.lines[r].height;if(t<n)break;t-=n}return n+r}function tt(e,t){return t>=e.first&&t<e.first+e.size}function nt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function rt(e,t,n=null){if(!(this instanceof rt))return new rt(e,t,n);this.line=e,this.ch=t,this.sticky=n}function it(e,t){return e.line-t.line||e.ch-t.ch}function at(e,t){return e.sticky==t.sticky&&0==it(e,t)}function ot(e){return rt(e.line,e.ch)}function st(e,t){return it(e,t)<0?t:e}function lt(e,t){return it(e,t)<0?e:t}function ct(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function dt(e,t){if(t.line<e.first)return rt(e.first,0);let n=e.first+e.size-1;return t.line>n?rt(n,Je(e,n).text.length):function(e,t){let n=e.ch;return null==n||n>t?rt(e.line,t):n<0?rt(e.line,0):e}(t,Je(e,t.line).text.length)}function ut(e,t){let n=[];for(let r=0;r<t.length;r++)n[r]=dt(e,t[r]);return n}class pt{constructor(e,t){this.state=e,this.lookAhead=t}}class ht{constructor(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1}lookAhead(e){let t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t}baseToken(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;let t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}}nextLine(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--}static fromSaved(e,t,n){return t instanceof pt?new ht(e,je(e.mode,t.state),n,t.lookAhead):new ht(e,je(e.mode,t),n)}save(e){let t=!1!==e?je(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new pt(t,this.maxLookAhead):t}}function ft(e,t,n,r){let i=[e.state.modeGen],a={};xt(e,t.text,e.doc.mode,n,((e,t)=>i.push(e,t)),a,r);let o=n.state;for(let r=0;r<e.state.overlays.length;++r){n.baseTokens=i;let s=e.state.overlays[r],l=1,c=0;n.state=!0,xt(e,t.text,s.mode,n,((e,t)=>{let n=l;for(;c<e;){let t=i[l];t>e&&i.splice(l,1,e,i[l+1],t),l+=2,c=Math.min(e,t)}if(t)if(s.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){let e=i[n+1];i[n+1]=(e?e+" ":"")+"overlay "+t}}),a),n.state=o,n.baseTokens=null,n.baseTokenPos=1}return{styles:i,classes:a.bgClass||a.textClass?a:null}}function mt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){let r=gt(e,Ze(t)),i=t.text.length>e.options.maxHighlightLength&&je(e.doc.mode,r.state),a=ft(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function gt(e,t,n){let r=e.doc,i=e.display;if(!r.mode.startState)return new ht(r,!0,t);let a=function(e,t,n){let r,i,a=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100);for(let s=t;s>o;--s){if(s<=a.first)return a.first;let t=Je(a,s-1),o=t.stateAfter;if(o&&(!n||s+(o instanceof pt?o.lookAhead:0)<=a.modeFrontier))return s;let l=H(t.text,null,e.options.tabSize);(null==i||r>l)&&(i=s-1,r=l)}return i}(e,t,n),o=a>r.first&&Je(r,a-1).stateAfter,s=o?ht.fromSaved(r,o,a):new ht(r,qe(r.mode),a);return r.iter(a,t,(n=>{vt(e,n.text,s);let r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()})),n&&(r.modeFrontier=s.line),s}function vt(e,t,n,r){let i=e.doc.mode,a=new Ke(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&bt(i,n.state);!a.eol();)yt(i,a,n.state),a.start=a.pos}function bt(e,t){if(e.blankLine)return e.blankLine(t);if(!e.innerMode)return;let n=Ue(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}function yt(e,t,n,r){for(let i=0;i<10;i++){r&&(r[0]=Ue(e,n).mode);let i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}class _t{constructor(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n}}function wt(e,t,n,r){let i,a,o=e.doc,s=o.mode,l=Je(o,(t=dt(o,t)).line),c=gt(e,t.line,n),d=new Ke(l.text,e.options.tabSize,c);for(r&&(a=[]);(r||d.pos<t.ch)&&!d.eol();)d.start=d.pos,i=yt(s,d,c.state),r&&a.push(new _t(d,i,je(o.mode,c.state)));return r?a:new _t(d,i,c.state)}function Ct(e,t){if(e)for(;;){let n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);let r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function xt(e,t,n,r,i,a,o){let s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);let l,c=0,d=null,u=new Ke(t,e.options.tabSize,r),p=e.options.addModeClass&&[null];for(""==t&&Ct(bt(n,r.state),a);!u.eol();){if(u.pos>e.options.maxHighlightLength?(s=!1,o&&vt(e,t,r,u.pos),u.pos=t.length,l=null):l=Ct(yt(n,u,r.state,p),a),p){let e=p[0].name;e&&(l="m-"+(l?e+" "+l:e))}if(!s||d!=l){for(;c<u.start;)c=Math.min(u.start,c+5e3),i(c,d);d=l}u.start=u.pos}for(;c<u.pos;){let e=Math.min(u.pos,c+5e3);i(e,d),c=e}}let kt=!1,Et=!1;function St(e,t,n){this.marker=e,this.from=t,this.to=n}function Tt(e,t){if(e)for(let n=0;n<e.length;++n){let r=e[n];if(r.marker==t)return r}}function Mt(e,t){let n;for(let r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function It(e,t){if(t.full)return null;let n=tt(e,t.from.line)&&Je(e,t.from.line).markedSpans,r=tt(e,t.to.line)&&Je(e,t.to.line).markedSpans;if(!n&&!r)return null;let i=t.from.ch,a=t.to.ch,o=0==it(t.from,t.to),s=function(e,t,n){let r;if(e)for(let i=0;i<e.length;++i){let a=e[i],o=a.marker;if(null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t)||a.from==t&&"bookmark"==o.type&&(!n||!a.marker.insertLeft)){let e=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);(r||(r=[])).push(new St(o,a.from,e?null:a.to))}}return r}(n,i,o),l=function(e,t,n){let r;if(e)for(let i=0;i<e.length;++i){let a=e[i],o=a.marker;if(null==a.to||(o.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==o.type&&(!n||a.marker.insertLeft)){let e=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);(r||(r=[])).push(new St(o,e?null:a.from-t,null==a.to?null:a.to-t))}}return r}(r,a,o),c=1==t.text.length,d=X(t.text).length+(c?i:0);if(s)for(let e=0;e<s.length;++e){let t=s[e];if(null==t.to){let e=Tt(l,t.marker);e?c&&(t.to=null==e.to?null:e.to+d):t.to=i}}if(l)for(let e=0;e<l.length;++e){let t=l[e];null!=t.to&&(t.to+=d),null==t.from?Tt(s,t.marker)||(t.from=d,c&&(s||(s=[])).push(t)):(t.from+=d,c&&(s||(s=[])).push(t))}s&&(s=Lt(s)),l&&l!=s&&(l=Lt(l));let u=[s];if(!c){let e,n=t.text.length-2;if(n>0&&s)for(let t=0;t<s.length;++t)null==s[t].to&&(e||(e=[])).push(new St(s[t].marker,null,null));for(let t=0;t<n;++t)u.push(e);u.push(l)}return u}function Lt(e){for(let t=0;t<e.length;++t){let n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function $t(e){let t=e.markedSpans;if(t){for(let n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Pt(e,t){if(t){for(let n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ot(e){return e.inclusiveLeft?-1:0}function Bt(e){return e.inclusiveRight?1:0}function At(e,t){let n=e.lines.length-t.lines.length;if(0!=n)return n;let r=e.find(),i=t.find(),a=it(r.from,i.from)||Ot(e)-Ot(t);return a?-a:it(r.to,i.to)||Bt(e)-Bt(t)||t.id-e.id}function Rt(e,t){let n,r=Et&&e.markedSpans;if(r)for(let e,i=0;i<r.length;++i)e=r[i],e.marker.collapsed&&null==(t?e.from:e.to)&&(!n||At(n,e.marker)<0)&&(n=e.marker);return n}function Dt(e){return Rt(e,!0)}function Nt(e){return Rt(e,!1)}function Gt(e,t){let n,r=Et&&e.markedSpans;if(r)for(let e=0;e<r.length;++e){let i=r[e];i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!n||At(n,i.marker)<0)&&(n=i.marker)}return n}function zt(e,t,n,r,i){let a=Je(e,t),o=Et&&a.markedSpans;if(o)for(let e=0;e<o.length;++e){let t=o[e];if(!t.marker.collapsed)continue;let a=t.marker.find(0),s=it(a.from,n)||Ot(t.marker)-Ot(i),l=it(a.to,r)||Bt(t.marker)-Bt(i);if(!(s>=0&&l<=0||s<=0&&l>=0)&&(s<=0&&(t.marker.inclusiveRight&&i.inclusiveLeft?it(a.to,n)>=0:it(a.to,n)>0)||s>=0&&(t.marker.inclusiveRight&&i.inclusiveLeft?it(a.from,r)<=0:it(a.from,r)<0)))return!0}}function Ht(e){let t;for(;t=Dt(e);)e=t.find(-1,!0).line;return e}function Ft(e,t){let n=Je(e,t),r=Ht(n);return n==r?t:Ze(r)}function Vt(e,t){if(t>e.lastLine())return t;let n,r=Je(e,t);if(!Wt(e,r))return t;for(;n=Nt(r);)r=n.find(1,!0).line;return Ze(r)+1}function Wt(e,t){let n=Et&&t.markedSpans;if(n)for(let r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&jt(e,t,r))return!0}}function jt(e,t,n){if(null==n.to){let t=n.marker.find(1,!0);return jt(e,t.line,Tt(t.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(let r,i=0;i<t.markedSpans.length;++i)if(r=t.markedSpans[i],r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&jt(e,t,r))return!0}function Ut(e){let t=0,n=(e=Ht(e)).parent;for(let r=0;r<n.lines.length;++r){let i=n.lines[r];if(i==e)break;t+=i.height}for(let e=n.parent;e;n=e,e=n.parent)for(let r=0;r<e.children.length;++r){let i=e.children[r];if(i==n)break;t+=i.height}return t}function qt(e){if(0==e.height)return 0;let t,n=e.text.length,r=e;for(;t=Dt(r);){let e=t.find(0,!0);r=e.from.line,n+=e.from.ch-e.to.ch}for(r=e;t=Nt(r);){let e=t.find(0,!0);n-=r.text.length-e.from.ch,r=e.to.line,n+=r.text.length-e.to.ch}return n}function Kt(e){let t=e.display,n=e.doc;t.maxLine=Je(n,n.first),t.maxLineLength=qt(t.maxLine),t.maxLineChanged=!0,n.iter((e=>{let n=qt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}class Jt{constructor(e,t,n){this.text=e,Pt(this,t),this.height=n?n(this):1}lineNo(){return Ze(this)}}function Qt(e){e.parent=null,$t(e)}Ce(Jt);let Yt={},Xt={};function Zt(e,t){if(!e||/^\s*$/.test(e))return null;let n=t.addModeClass?Xt:Yt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function en(e,t){let n=O("span",null,null,u?"padding-right: .1px":null),r={pre:O("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(let n=0;n<=(t.rest?t.rest.length:0);n++){let i,a=n?t.rest[n-1]:t.line;r.pos=0,r.addToken=nn,Oe(e.display.measure)&&(i=he(a,e.doc.direction))&&(r.addToken=rn(r.addToken,i)),r.map=[],on(a,r,mt(e,a,t!=e.display.externalMeasured&&Ze(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=D(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=D(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Pe(e.display.measure))),0==n?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(u){let e=r.content.lastChild;(/\bcm-tab\b/.test(e.className)||e.querySelector&&e.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return be(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=D(r.pre.className,r.textClass||"")),r}function tn(e){let t=P("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function nn(e,t,n,r,i,a,o){if(!t)return;let s,l=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;let n=t,r="";for(let t=0;t<e.length;t++){let i=e.charAt(t);" "!=i||!n||t!=e.length-1&&32!=e.charCodeAt(t+1)||(i=" "),r+=i,n=" "==i}return r}(t,e.trailingSpace):t,u=e.cm.state.specialChars,p=!1;if(u.test(t)){s=document.createDocumentFragment();let n=0;for(;;){u.lastIndex=n;let r,i=u.exec(t),a=i?i.index-n:t.length-n;if(a){let t=document.createTextNode(l.slice(n,n+a));c&&d<9?s.appendChild(P("span",[t])):s.appendChild(t),e.map.push(e.pos,e.pos+a,t),e.col+=a,e.pos+=a}if(!i)break;if(n+=a+1,"\t"==i[0]){let t=e.cm.options.tabSize,n=t-e.col%t;r=s.appendChild(P("span",Y(n),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","\t"),e.col+=n}else"\r"==i[0]||"\n"==i[0]?(r=s.appendChild(P("span","\r"==i[0]?"␍":"␤","cm-invalidchar")),r.setAttribute("cm-text",i[0]),e.col+=1):(r=e.cm.options.specialCharPlaceholder(i[0]),r.setAttribute("cm-text",i[0]),c&&d<9?s.appendChild(P("span",[r])):s.appendChild(r),e.col+=1);e.map.push(e.pos,e.pos+1,r),e.pos++}}else e.col+=t.length,s=document.createTextNode(l),e.map.push(e.pos,e.pos+t.length,s),c&&d<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==l.charCodeAt(t.length-1),n||r||i||p||a||o){let t=n||"";r&&(t+=r),i&&(t+=i);let l=P("span",[s],t,a);if(o)for(let e in o)o.hasOwnProperty(e)&&"style"!=e&&"class"!=e&&l.setAttribute(e,o[e]);return e.content.appendChild(l)}e.content.appendChild(s)}function rn(e,t){return(n,r,i,a,o,s,l)=>{i=i?i+" cm-force-border":"cm-force-border";let c=n.pos,d=c+r.length;for(;;){let u;for(let e=0;e<t.length&&(u=t[e],!(u.to>c&&u.from<=c));e++);if(u.to>=d)return e(n,r,i,a,o,s,l);e(n,r.slice(0,u.to-c),i,a,null,s,l),a=null,r=r.slice(u.to-c),c=u.to}}}function an(e,t,n,r){let i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function on(e,t,n){let r=e.markedSpans,i=e.text,a=0;if(!r){for(let e=1;e<n.length;e+=2)t.addToken(t,i.slice(a,a=n[e]),Zt(n[e+1],t.cm.options));return}let o,s,l,c,d,u,p,h=i.length,f=0,m=1,g="",v=0;for(;;){if(v==f){l=c=d=s="",p=null,u=null,v=1/0;let e,n=[];for(let t=0;t<r.length;++t){let i=r[t],a=i.marker;if("bookmark"==a.type&&i.from==f&&a.widgetNode)n.push(a);else if(i.from<=f&&(null==i.to||i.to>f||a.collapsed&&i.to==f&&i.from==f)){if(null!=i.to&&i.to!=f&&v>i.to&&(v=i.to,c=""),a.className&&(l+=" "+a.className),a.css&&(s=(s?s+";":"")+a.css),a.startStyle&&i.from==f&&(d+=" "+a.startStyle),a.endStyle&&i.to==v&&(e||(e=[])).push(a.endStyle,i.to),a.title&&((p||(p={})).title=a.title),a.attributes)for(let e in a.attributes)(p||(p={}))[e]=a.attributes[e];a.collapsed&&(!u||At(u.marker,a)<0)&&(u=i)}else i.from>f&&v>i.from&&(v=i.from)}if(e)for(let t=0;t<e.length;t+=2)e[t+1]==v&&(c+=" "+e[t]);if(!u||u.from==f)for(let e=0;e<n.length;++e)an(t,0,n[e]);if(u&&(u.from||0)==f){if(an(t,(null==u.to?h+1:u.to)-f,u.marker,null==u.from),null==u.to)return;u.to==f&&(u=!1)}}if(f>=h)break;let e=Math.min(h,v);for(;;){if(g){let n=f+g.length;if(!u){let r=n>e?g.slice(0,e-f):g;t.addToken(t,r,o?o+l:l,d,f+r.length==v?c:"",s,p)}if(n>=e){g=g.slice(e-f),f=e;break}f=n,d=""}g=i.slice(a,a=n[m++]),o=Zt(n[m++],t.cm.options)}}}function sn(e,t,n){this.line=t,this.rest=function(e){let t,n;for(;t=Nt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Ze(X(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Wt(e,t)}function ln(e,t,n){let r,i=[];for(let a=t;a<n;a=r){let t=new sn(e.doc,Je(e.doc,a),a);r=a+t.size,i.push(t)}return i}let cn=null,dn=null;function un(e,t){let n=ge(e,t);if(!n.length)return;let r,i=Array.prototype.slice.call(arguments,2);cn?r=cn.delayedCallbacks:dn?r=dn:(r=dn=[],setTimeout(pn,0));for(let e=0;e<n.length;++e)r.push((()=>n[e].apply(null,i)))}function pn(){let e=dn;dn=null;for(let t=0;t<e.length;++t)e[t]()}function hn(e,t,n,r){for(let i=0;i<t.changes.length;i++){let a=t.changes[i];"text"==a?gn(e,t):"gutter"==a?bn(e,t,n,r):"class"==a?vn(e,t):"widget"==a&&yn(e,t,r)}t.changes=null}function fn(e){return e.node==e.text&&(e.node=P("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),c&&d<8&&(e.node.style.zIndex=2)),e.node}function mn(e,t){let n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):en(e,t)}function gn(e,t){let n=t.text.className,r=mn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,vn(e,t)):n&&(t.text.className=n)}function vn(e,t){!function(e,t){let n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){let r=fn(t);t.background=r.insertBefore(P("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?fn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");let n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function bn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){let n=fn(t);t.gutterBackground=P("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,`left: ${e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth}px; width: ${r.gutterTotalWidth}px`),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}let i=t.line.gutterMarkers;if(e.options.lineNumbers||i){let a=fn(t),o=t.gutter=P("div",null,"CodeMirror-gutter-wrapper",`left: ${e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth}px`);if(o.setAttribute("aria-hidden","true"),e.display.input.setUneditable(o),a.insertBefore(o,t.text),t.line.gutterClass&&(o.className+=" "+t.line.gutterClass),!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=o.appendChild(P("div",nt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt",`left: ${r.gutterLeft["CodeMirror-linenumbers"]}px; width: ${e.display.lineNumInnerWidth}px`))),i)for(let t=0;t<e.display.gutterSpecs.length;++t){let n=e.display.gutterSpecs[t].className,a=i.hasOwnProperty(n)&&i[n];a&&o.appendChild(P("div",[a],"CodeMirror-gutter-elt",`left: ${r.gutterLeft[n]}px; width: ${r.gutterWidth[n]}px`))}}}function yn(e,t,n){t.alignable&&(t.alignable=null);let r=T("CodeMirror-linewidget");for(let e,n=t.node.firstChild;n;n=e)e=n.nextSibling,r.test(n.className)&&t.node.removeChild(n);wn(e,t,n)}function _n(e,t,n,r){let i=mn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),vn(e,t),bn(e,t,n,r),wn(e,t,r),t.node}function wn(e,t,n){if(Cn(e,t.line,t,n,!0),t.rest)for(let r=0;r<t.rest.length;r++)Cn(e,t.rest[r],t,n,!1)}function Cn(e,t,n,r,i){if(!t.widgets)return;let a=fn(n);for(let o=0,s=t.widgets;o<s.length;++o){let t=s[o],l=P("div",[t.node],"CodeMirror-linewidget"+(t.className?" "+t.className:""));t.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),xn(t,l,n,r),e.display.input.setUneditable(l),i&&t.above?a.insertBefore(l,n.gutter||n.text):a.appendChild(l),un(t,"redraw")}}function xn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);let i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function kn(e){if(null!=e.height)return e.height;let t=e.doc.cm;if(!t)return 0;if(!B(document.body,e.node)){let n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),$(t.display.measure,P("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function En(e,t){for(let n=Te(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Sn(e){return e.lineSpace.offsetTop}function Tn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Mn(e){if(e.cachedPaddingH)return e.cachedPaddingH;let t=$(e.measure,P("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function In(e){return W-e.display.nativeBarWidth}function Ln(e){return e.display.scroller.clientWidth-In(e)-e.display.barWidth}function $n(e){return e.display.scroller.clientHeight-In(e)-e.display.barHeight}function Pn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(let n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(let t=0;t<e.rest.length;t++)if(Ze(e.rest[t])>n)return{map:e.measure.maps[t],cache:e.measure.caches[t],before:!0}}function On(e,t,n,r){return Rn(e,An(e,t),n,r)}function Bn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[hr(e,t)];let n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function An(e,t){let n=Ze(t),r=Bn(e,n);r&&!r.text?r=null:r&&r.changes&&(hn(e,r,n,lr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){let n=Ze(t=Ht(t)),r=e.display.externalMeasured=new sn(e.doc,t,n);r.lineN=n;let i=r.built=en(e,r);return r.text=i.pre,$(e.display.lineMeasure,i.pre),r}(e,t));let i=Pn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Rn(e,t,n,r,i){t.before&&(n=-1);let a,o=n+(r||"");return t.cache.hasOwnProperty(o)?a=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){let r=e.options.lineWrapping,i=r&&Ln(e);if(!t.measure.heights||r&&t.measure.width!=i){let e=t.measure.heights=[];if(r){t.measure.width=i;let r=t.text.firstChild.getClientRects();for(let t=0;t<r.length-1;t++){let i=r[t],a=r[t+1];Math.abs(i.bottom-a.bottom)>2&&e.push((i.bottom+a.top)/2-n.top)}}e.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),a=function(e,t,n,r){let i,a=Gn(t.map,n,r),o=a.node,s=a.start,l=a.end,u=a.collapse;if(3==o.nodeType){for(let e=0;e<4;e++){for(;s&&se(t.line.text.charAt(a.coverStart+s));)--s;for(;a.coverStart+l<a.coverEnd&&se(t.line.text.charAt(a.coverStart+l));)++l;if(i=c&&d<9&&0==s&&l==a.coverEnd-a.coverStart?o.parentNode.getBoundingClientRect():zn(M(o,s,l).getClientRects(),r),i.left||i.right||0==s)break;l=s,s-=1,u="right"}c&&d<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=De)return De;let t=$(e,P("span","x")),n=t.getBoundingClientRect(),r=M(t,0,1).getBoundingClientRect();return De=Math.abs(n.left-r.left)>1}(e))return t;let n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{let t;s>0&&(u=r="right"),i=e.options.lineWrapping&&(t=o.getClientRects()).length>1?t["right"==r?t.length-1:0]:o.getBoundingClientRect()}if(c&&d<9&&!s&&(!i||!i.left&&!i.right)){let t=o.parentNode.getClientRects()[0];i=t?{left:t.left,right:t.left+sr(e.display),top:t.top,bottom:t.bottom}:Nn}let p=i.top-t.rect.top,h=i.bottom-t.rect.top,f=(p+h)/2,m=t.view.measure.heights,g=0;for(;g<m.length-1&&!(f<m[g]);g++);let v=g?m[g-1]:0,b=m[g],y={left:("right"==u?i.right:i.left)-t.rect.left,right:("left"==u?i.left:i.right)-t.rect.left,top:v,bottom:b};return i.left||i.right||(y.bogus=!0),e.options.singleCursorHeightPerLine||(y.rtop=p,y.rbottom=h),y}(e,t,n,r),a.bogus||(t.cache[o]=a)),{left:a.left,right:a.right,top:i?a.rtop:a.top,bottom:i?a.rbottom:a.bottom}}let Dn,Nn={left:0,right:0,top:0,bottom:0};function Gn(e,t,n){let r,i,a,o,s,l;for(let c=0;c<e.length;c+=3)if(s=e[c],l=e[c+1],t<s?(i=0,a=1,o="left"):t<l?(i=t-s,a=i+1):(c==e.length-3||t==l&&e[c+3]>t)&&(a=l-s,i=a-1,t>=l&&(o="right")),null!=i){if(r=e[c+2],s==l&&n==(r.insertLeft?"left":"right")&&(o=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],o="left";if("right"==n&&i==l-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],o="right";break}return{node:r,start:i,end:a,collapse:o,coverStart:s,coverEnd:l}}function zn(e,t){let n=Nn;if("left"==t)for(let t=0;t<e.length&&(n=e[t]).left==n.right;t++);else for(let t=e.length-1;t>=0&&(n=e[t]).left==n.right;t--);return n}function Hn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(let t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fn(e){e.display.externalMeasure=null,L(e.display.lineMeasure);for(let t=0;t<e.display.view.length;t++)Hn(e.display.view[t])}function Vn(e){Fn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Wn(){return h&&y?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jn(){return h&&y?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Un(e){let t=0;if(e.widgets)for(let n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=kn(e.widgets[n]));return t}function qn(e,t,n,r,i){if(!i){let e=Un(t);n.top+=e,n.bottom+=e}if("line"==r)return n;r||(r="local");let a=Ut(t);if("local"==r?a+=Sn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){let t=e.display.lineSpace.getBoundingClientRect();a+=t.top+("window"==r?0:jn());let i=t.left+("window"==r?0:Wn());n.left+=i,n.right+=i}return n.top+=a,n.bottom+=a,n}function Kn(e,t,n){if("div"==n)return t;let r=t.left,i=t.top;if("page"==n)r-=Wn(),i-=jn();else if("local"==n||!n){let t=e.display.sizer.getBoundingClientRect();r+=t.left,i+=t.top}let a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Jn(e,t,n,r,i){return r||(r=Je(e.doc,t.line)),qn(e,r,On(e,r,t.ch,i),n)}function Qn(e,t,n,r,i,a){function o(t,o){let s=Rn(e,i,t,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,qn(e,r,s,n)}r=r||Je(e.doc,t.line),i||(i=An(e,r));let s=he(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!s)return o("before"==c?l-1:l,"before"==c);function d(e,t,n){return o(n?e-1:e,1==s[t].level!=n)}let u=ue(s,l,c),p=de,h=d(l,u,"before"==c);return null!=p&&(h.other=d(l,p,"before"!=c)),h}function Yn(e,t){let n=0;t=dt(e.doc,t),e.options.lineWrapping||(n=sr(e.display)*t.ch);let r=Je(e.doc,t.line),i=Ut(r)+Sn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(e,t,n,r,i){let a=rt(e,t,n);return a.xRel=i,r&&(a.outside=r),a}function Zn(e,t,n){let r=e.doc;if((n+=e.display.viewOffset)<0)return Xn(r.first,0,null,-1,-1);let i=et(r,n),a=r.first+r.size-1;if(i>a)return Xn(r.first+r.size-1,Je(r,a).text.length,null,1,1);t<0&&(t=0);let o=Je(r,i);for(;;){let a=rr(e,o,i,t,n),s=Gt(o,a.ch+(a.xRel>0||a.outside>0?1:0));if(!s)return a;let l=s.find(1);if(l.line==i)return l;o=Je(r,i=l.line)}}function er(e,t,n,r){r-=Un(t);let i=t.text.length,a=ce((t=>Rn(e,n,t-1).bottom<=r),i,0);return i=ce((t=>Rn(e,n,t).top>r),a,i),{begin:a,end:i}}function tr(e,t,n,r){return n||(n=An(e,t)),er(e,t,n,qn(e,t,Rn(e,n,r),"line").top)}function nr(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function rr(e,t,n,r,i){i-=Ut(t);let a=An(e,t),o=Un(t),s=0,l=t.text.length,c=!0,d=he(t,e.doc.direction);if(d){let o=(e.options.lineWrapping?ar:ir)(e,t,n,a,d,r,i);c=1!=o.level,s=c?o.from:o.to-1,l=c?o.to:o.from-1}let u,p,h=null,f=null,m=ce((t=>{let n=Rn(e,a,t);return n.top+=o,n.bottom+=o,!!nr(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(h=t,f=n),!0)}),s,l),g=!1;if(f){let e=r-f.left<f.right-r,t=e==c;m=h+(t?0:1),p=t?"after":"before",u=e?f.left:f.right}else{c||m!=l&&m!=s||m++,p=0==m?"after":m==t.text.length?"before":Rn(e,a,m-(c?1:0)).bottom+o<=i==c?"after":"before";let r=Qn(e,rt(n,m,p),"line",t,a);u=r.left,g=i<r.top?-1:i>=r.bottom?1:0}return m=le(t.text,m,1),Xn(n,m,p,g,r-u)}function ir(e,t,n,r,i,a,o){let s=ce((s=>{let l=i[s],c=1!=l.level;return nr(Qn(e,rt(n,c?l.to:l.from,c?"before":"after"),"line",t,r),a,o,!0)}),0,i.length-1),l=i[s];if(s>0){let c=1!=l.level,d=Qn(e,rt(n,c?l.from:l.to,c?"after":"before"),"line",t,r);nr(d,a,o,!0)&&d.top>o&&(l=i[s-1])}return l}function ar(e,t,n,r,i,a,o){let{begin:s,end:l}=er(e,t,r,o);/\s/.test(t.text.charAt(l-1))&&l--;let c=null,d=null;for(let t=0;t<i.length;t++){let n=i[t];if(n.from>=l||n.to<=s)continue;let o=Rn(e,r,1!=n.level?Math.min(l,n.to)-1:Math.max(s,n.from)).right,u=o<a?a-o+1e9:o-a;(!c||d>u)&&(c=n,d=u)}return c||(c=i[i.length-1]),c.from<s&&(c={from:s,to:c.to,level:c.level}),c.to>l&&(c={from:c.from,to:l,level:c.level}),c}function or(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Dn){Dn=P("pre",null,"CodeMirror-line-like");for(let e=0;e<49;++e)Dn.appendChild(document.createTextNode("x")),Dn.appendChild(P("br"));Dn.appendChild(document.createTextNode("x"))}$(e.measure,Dn);let t=Dn.offsetHeight/50;return t>3&&(e.cachedTextHeight=t),L(e.measure),t||1}function sr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;let t=P("span","xxxxxxxxxx"),n=P("pre",[t],"CodeMirror-line-like");$(e.measure,n);let r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function lr(e){let t=e.display,n={},r={},i=t.gutters.clientLeft;for(let a=t.gutters.firstChild,o=0;a;a=a.nextSibling,++o){let t=e.display.gutterSpecs[o].className;n[t]=a.offsetLeft+a.clientLeft+i,r[t]=a.clientWidth}return{fixedPos:cr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function cr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function dr(e){let t=or(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/sr(e.display)-3);return i=>{if(Wt(e.doc,i))return 0;let a=0;if(i.widgets)for(let e=0;e<i.widgets.length;e++)i.widgets[e].height&&(a+=i.widgets[e].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function ur(e){let t=e.doc,n=dr(e);t.iter((e=>{let t=n(e);t!=e.height&&Xe(e,t)}))}function pr(e,t,n,r){let i=e.display;if(!n&&"true"==Te(t).getAttribute("cm-not-content"))return null;let a,o,s=i.lineSpace.getBoundingClientRect();try{a=t.clientX-s.left,o=t.clientY-s.top}catch(t){return null}let l,c=Zn(e,a,o);if(r&&c.xRel>0&&(l=Je(e.doc,c.line).text).length==c.ch){let t=H(l,l.length,e.options.tabSize)-l.length;c=rt(c.line,Math.max(0,Math.round((a-Mn(e.display).left)/sr(e.display))-t))}return c}function hr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;let n=e.display.view;for(let e=0;e<n.length;e++)if((t-=n[e].size)<0)return e}function fr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);let i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Et&&Ft(e.doc,t)<i.viewTo&&gr(e);else if(n<=i.viewFrom)Et&&Vt(e.doc,n+r)>i.viewFrom?gr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)gr(e);else if(t<=i.viewFrom){let t=vr(e,n,n+r,1);t?(i.view=i.view.slice(t.index),i.viewFrom=t.lineN,i.viewTo+=r):gr(e)}else if(n>=i.viewTo){let n=vr(e,t,t,-1);n?(i.view=i.view.slice(0,n.index),i.viewTo=n.lineN):gr(e)}else{let a=vr(e,t,t,-1),o=vr(e,n,n+r,1);a&&o?(i.view=i.view.slice(0,a.index).concat(ln(e,a.lineN,o.lineN)).concat(i.view.slice(o.index)),i.viewTo+=r):gr(e)}let a=i.externalMeasured;a&&(n<a.lineN?a.lineN+=r:t<a.lineN+a.size&&(i.externalMeasured=null))}function mr(e,t,n){e.curOp.viewChanged=!0;let r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),t<r.viewFrom||t>=r.viewTo)return;let a=r.view[hr(e,t)];if(null==a.node)return;let o=a.changes||(a.changes=[]);-1==V(o,n)&&o.push(n)}function gr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vr(e,t,n,r){let i,a=hr(e,t),o=e.display.view;if(!Et||n==e.doc.first+e.doc.size)return{index:a,lineN:n};let s=e.display.viewFrom;for(let e=0;e<a;e++)s+=o[e].size;if(s!=t){if(r>0){if(a==o.length-1)return null;i=s+o[a].size-t,a++}else i=s-t;t+=i,n+=i}for(;Ft(e.doc,n)!=n;){if(a==(r<0?0:o.length-1))return null;n+=r*o[a-(r<0?1:0)].size,a+=r}return{index:a,lineN:n}}function br(e){let t=e.display.view,n=0;for(let e=0;e<t.length;e++){let r=t[e];r.hidden||r.node&&!r.changes||++n}return n}function yr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function _r(e,t=!0){let n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment();for(let r=0;r<n.sel.ranges.length;r++){if(!t&&r==n.sel.primIndex)continue;let o=n.sel.ranges[r];if(o.from().line>=e.display.viewTo||o.to().line<e.display.viewFrom)continue;let s=o.empty();(s||e.options.showCursorWhenSelecting)&&wr(e,o.head,i),s||xr(e,o,a)}return r}function wr(e,t,n){let r=Qn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(P("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){let e=n.appendChild(P("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));e.style.display="",e.style.left=r.other.left+"px",e.style.top=r.other.top+"px",e.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Cr(e,t){return e.top-t.top||e.left-t.left}function xr(e,t,n){let r=e.display,i=e.doc,a=document.createDocumentFragment(),o=Mn(e.display),s=o.left,l=Math.max(r.sizerWidth,Ln(e)-r.sizer.offsetLeft)-o.right,c="ltr"==i.direction;function d(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),a.appendChild(P("div",null,"CodeMirror-selected",`position: absolute; left: ${e}px;\n                             top: ${t}px; width: ${null==n?l-e:n}px;\n                             height: ${r-t}px`))}function u(t,n,r){let a,o,u=Je(i,t),p=u.text.length;function h(n,r){return Jn(e,rt(t,n),"div",u,r)}function f(t,n,r){let i=tr(e,u,null,t),a="ltr"==n==("after"==r)?"left":"right";return h("after"==r?i.begin:i.end-(/\s/.test(u.text.charAt(i.end-1))?2:1),a)[a]}let m=he(u,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);let i=!1;for(let a=0;a<e.length;++a){let o=e[a];(o.from<n&&o.to>t||t==n&&o.to==t)&&(r(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr",a),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?p:r,((e,t,i,u)=>{let g="ltr"==i,v=h(e,g?"left":"right"),b=h(t-1,g?"right":"left"),y=null==n&&0==e,_=null==r&&t==p,w=0==u,C=!m||u==m.length-1;if(b.top-v.top<=3){let e=(c?_:y)&&C,t=(c?y:_)&&w?s:(g?v:b).left,n=e?l:(g?b:v).right;d(t,v.top,n-t,v.bottom)}else{let n,r,a,o;g?(n=c&&y&&w?s:v.left,r=c?l:f(e,i,"before"),a=c?s:f(t,i,"after"),o=c&&_&&C?l:b.right):(n=c?f(e,i,"before"):s,r=!c&&y&&w?l:v.right,a=!c&&_&&C?s:b.left,o=c?f(t,i,"after"):l),d(n,v.top,r-n,v.bottom),v.bottom<b.top&&d(s,v.bottom,null,b.top),d(a,b.top,o-a,b.bottom)}(!a||Cr(v,a)<0)&&(a=v),Cr(b,a)<0&&(a=b),(!o||Cr(v,o)<0)&&(o=v),Cr(b,o)<0&&(o=b)})),{start:a,end:o}}let p=t.from(),h=t.to();if(p.line==h.line)u(p.line,p.ch,h.ch);else{let e=Je(i,p.line),t=Je(i,h.line),n=Ht(e)==Ht(t),r=u(p.line,p.ch,n?e.text.length+1:null).end,a=u(h.line,n?0:null,h.ch).start;n&&(r.top<a.top-2?(d(r.right,r.top,null,r.bottom),d(s,a.top,a.left,a.bottom)):d(r.right,r.top,a.left-r.right,r.bottom)),r.bottom<a.top&&d(s,r.bottom,null,a.top)}n.appendChild(a)}function kr(e){if(!e.state.focused)return;let t=e.display;clearInterval(t.blinker);let n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((()=>{e.hasFocus()||Mr(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}function Er(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Tr(e))}function Sr(e){e.state.delayingBlurEvent=!0,setTimeout((()=>{e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Mr(e))}),100)}function Tr(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(be(e,"focus",e,t),e.state.focused=!0,R(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),u&&setTimeout((()=>e.display.input.reset(!0)),20)),e.display.input.receivedFocus()),kr(e))}function Mr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(be(e,"blur",e,t),e.state.focused=!1,I(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((()=>{e.state.focused||(e.display.shift=!1)}),150))}function Ir(e){let t=e.display,n=t.lineDiv.offsetTop;for(let r=0;r<t.view.length;r++){let i,a=t.view[r],o=e.options.lineWrapping,s=0;if(a.hidden)continue;if(c&&d<8){let e=a.node.offsetTop+a.node.offsetHeight;i=e-n,n=e}else{let e=a.node.getBoundingClientRect();i=e.bottom-e.top,!o&&a.text.firstChild&&(s=a.text.firstChild.getBoundingClientRect().right-e.left-1)}let l=a.line.height-i;if((l>.005||l<-.005)&&(Xe(a.line,i),Lr(a.line),a.rest))for(let e=0;e<a.rest.length;e++)Lr(a.rest[e]);if(s>e.display.sizerWidth){let t=Math.ceil(s/sr(e.display));t>e.display.maxLineLength&&(e.display.maxLineLength=t,e.display.maxLine=a.line,e.display.maxLineChanged=!0)}}}function Lr(e){if(e.widgets)for(let t=0;t<e.widgets.length;++t){let n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function $r(e,t,n){let r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Sn(e));let i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=et(t,r),o=et(t,i);if(n&&n.ensure){let r=n.ensure.from.line,i=n.ensure.to.line;r<a?(a=r,o=et(t,Ut(Je(t,r))+e.wrapper.clientHeight)):Math.min(i,t.lastLine())>=o&&(a=et(t,Ut(Je(t,i))-e.wrapper.clientHeight),o=i)}return{from:a,to:Math.max(o,a+1)}}function Pr(e,t){let n=e.display,r=or(e.display);t.top<0&&(t.top=0);let i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=$n(e),o={};t.bottom-t.top>a&&(t.bottom=t.top+a);let s=e.doc.height+Tn(n),l=t.top<r,c=t.bottom>s-r;if(t.top<i)o.scrollTop=l?0:t.top;else if(t.bottom>i+a){let e=Math.min(t.top,(c?s:t.bottom)-a);e!=i&&(o.scrollTop=e)}let d=e.options.fixedGutter?0:n.gutters.offsetWidth,u=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,p=Ln(e)-n.gutters.offsetWidth,h=t.right-t.left>p;return h&&(t.right=t.left+p),t.left<10?o.scrollLeft=0:t.left<u?o.scrollLeft=Math.max(0,t.left+d-(h?0:10)):t.right>p+u-3&&(o.scrollLeft=t.right+(h?0:10)-p),o}function Or(e,t){null!=t&&(Rr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Br(e){Rr(e);let t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Ar(e,t,n){null==t&&null==n||Rr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Rr(e){let t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Dr(e,Yn(e,t.from),Yn(e,t.to),t.margin))}function Dr(e,t,n,r){let i=Pr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Ar(e,i.scrollLeft,i.scrollTop)}function Nr(e,t){Math.abs(e.doc.scrollTop-t)<2||(a||ci(e,{top:t}),Gr(e,t,!0),a&&ci(e),ii(e,100))}function Gr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function zr(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,pi(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Hr(e){let t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Tn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+In(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function Fr(e,t){t||(t=Hr(e));let n=e.display.barWidth,r=e.display.barHeight;Vr(e,t);for(let t=0;t<4&&n!=e.display.barWidth||r!=e.display.barHeight;t++)n!=e.display.barWidth&&e.options.lineWrapping&&Ir(e),Vr(e,Hr(e)),n=e.display.barWidth,r=e.display.barHeight}function Vr(e,t){let n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}let Wr={native:class{constructor(e,t,n){this.cm=n;let r=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),me(r,"scroll",(()=>{r.clientHeight&&t(r.scrollTop,"vertical")})),me(i,"scroll",(()=>{i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,c&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}update(e){let t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";let n=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";let t=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+t)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}}setScrollLeft(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}setScrollTop(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}zeroWidthHack(){let e=w&&!g?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new F,this.disableVert=new F}enableZeroWidthBar(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function r(){let i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)}))}clear(){let e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},null:class{update(){return{bottom:0,right:0}}setScrollLeft(){}setScrollTop(){}clear(){}}};function jr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&I(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Wr[e.options.scrollbarStyle]((t=>{e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),me(t,"mousedown",(()=>{e.state.focused&&setTimeout((()=>e.display.input.focus()),0)})),t.setAttribute("cm-not-content","true")}),((t,n)=>{"horizontal"==n?zr(e,t):Nr(e,t)}),e),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)}let Ur=0;function qr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ur,markArrays:null},t=e.curOp,cn?cn.ops.push(t):t.ownsGroup=cn={ops:[t],delayedCallbacks:[]}}function Kr(e){let t=e.curOp;t&&function(e,t){let n=e.ownsGroup;if(n)try{!function(e){let t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(let t=0;t<e.ops.length;t++){let n=e.ops[t];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(n<t.length)}(n)}finally{cn=null,(e=>{for(let t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){let t=e.ops;for(let e=0;e<t.length;e++)Jr(t[e]);for(let e=0;e<t.length;e++)Qr(t[e]);for(let e=0;e<t.length;e++)Yr(t[e]);for(let e=0;e<t.length;e++)Xr(t[e]);for(let e=0;e<t.length;e++)Zr(t[e])}(e)})(n)}}(t)}function Jr(e){let t=e.cm,n=t.display;!function(e){let t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=In(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=In(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Kt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new oi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Qr(e){e.updatedDisplay=e.mustUpdate&&si(e.cm,e.update)}function Yr(e){let t=e.cm,n=t.display;e.updatedDisplay&&Ir(t),e.barMeasure=Hr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=On(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+In(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Ln(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Xr(e){let t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&zr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);let n=e.focus&&e.focus==A();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Fr(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&kr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Er(e.cm)}function Zr(e){let t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&li(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Gr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&zr(t,e.scrollLeft,!0,!0),e.scrollToPos){let n=function(e,t,n,r){let i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==t.sticky?rt(t.line,t.ch+1,"before"):t,t=t.ch?rt(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(let a=0;a<5;a++){let a=!1,o=Qn(e,t),s=n&&n!=t?Qn(e,n):o;i={left:Math.min(o.left,s.left),top:Math.min(o.top,s.top)-r,right:Math.max(o.left,s.left),bottom:Math.max(o.bottom,s.bottom)+r};let l=Pr(e,i),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(Nr(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=l.scrollLeft&&(zr(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(a=!0)),!a)break}return i}(t,dt(r,e.scrollToPos.from),dt(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(ye(e,"scrollCursorIntoView"))return;let n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!v){let r=P("div","​",null,`position: absolute;\n                         top: ${t.top-n.viewOffset-Sn(e.display)}px;\n                         height: ${t.bottom-t.top+In(e)+n.barHeight}px;\n                         left: ${t.left}px; width: ${Math.max(2,t.right-t.left)}px;`);e.display.lineSpace.appendChild(r),r.scrollIntoView(i),e.display.lineSpace.removeChild(r)}}(t,n)}let i=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(i)for(let e=0;e<i.length;++e)i[e].lines.length||be(i[e],"hide");if(a)for(let e=0;e<a.length;++e)a[e].lines.length&&be(a[e],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&be(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function ei(e,t){if(e.curOp)return t();qr(e);try{return t()}finally{Kr(e)}}function ti(e,t){return function(){if(e.curOp)return t.apply(e,arguments);qr(e);try{return t.apply(e,arguments)}finally{Kr(e)}}}function ni(e){return function(){if(this.curOp)return e.apply(this,arguments);qr(this);try{return e.apply(this,arguments)}finally{Kr(this)}}}function ri(e){return function(){let t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);qr(t);try{return e.apply(this,arguments)}finally{Kr(t)}}}function ii(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,G(ai,e))}function ai(e){let t=e.doc;if(t.highlightFrontier>=e.display.viewTo)return;let n=+new Date+e.options.workTime,r=gt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(a=>{if(r.line>=e.display.viewFrom){let n=a.styles,o=a.text.length>e.options.maxHighlightLength?je(t.mode,r.state):null,s=ft(e,a,r,!0);o&&(r.state=o),a.styles=s.styles;let l=a.styleClasses,c=s.classes;c?a.styleClasses=c:l&&(a.styleClasses=null);let d=!n||n.length!=a.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass);for(let e=0;!d&&e<n.length;++e)d=n[e]!=a.styles[e];d&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&vt(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ii(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&ei(e,(()=>{for(let t=0;t<i.length;t++)mr(e,i[t],"text")}))}class oi{constructor(e,t,n){let r=e.display;this.viewport=t,this.visible=$r(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Ln(e),this.force=n,this.dims=lr(e),this.events=[]}signal(e,t){we(e,t)&&this.events.push(arguments)}finish(){for(let e=0;e<this.events.length;e++)be.apply(null,this.events[e])}}function si(e,t){let n=e.display,r=e.doc;if(t.editorIsHidden)return gr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==br(e))return!1;hi(e)&&(gr(e),t.dims=lr(e));let i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),o=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(i,n.viewTo)),Et&&(a=Ft(e.doc,a),o=Vt(e.doc,o));let s=a!=n.viewFrom||o!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){let r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=ln(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=ln(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(hr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(ln(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,hr(e,n)))),r.viewTo=n}(e,a,o),n.viewOffset=Ut(Je(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";let l=br(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;let c=function(e){if(e.hasFocus())return null;let t=A();if(!t||!B(e.display.lineDiv,t))return null;let n={activeElt:t};if(window.getSelection){let t=window.getSelection();t.anchorNode&&t.extend&&B(e.display.lineDiv,t.anchorNode)&&(n.anchorNode=t.anchorNode,n.anchorOffset=t.anchorOffset,n.focusNode=t.focusNode,n.focusOffset=t.focusOffset)}return n}(e);return l>4&&(n.lineDiv.style.display="none"),function(e,t,n){let r=e.display,i=e.options.lineNumbers,a=r.lineDiv,o=a.firstChild;function s(t){let n=t.nextSibling;return u&&w&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}let l=r.view,c=r.viewFrom;for(let r=0;r<l.length;r++){let d=l[r];if(d.hidden);else if(d.node&&d.node.parentNode==a){for(;o!=d.node;)o=s(o);let r=i&&null!=t&&t<=c&&d.lineNumber;d.changes&&(V(d.changes,"gutter")>-1&&(r=!1),hn(e,d,c,n)),r&&(L(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(nt(e.options,c)))),o=d.node.nextSibling}else{let t=_n(e,d,c,n);a.insertBefore(t,o)}c+=d.size}for(;o;)o=s(o)}(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=A()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&B(document.body,e.anchorNode)&&B(document.body,e.focusNode))){let t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),L(n.cursorDiv),L(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ii(e,400)),n.updateLineNumbers=null,!0}function li(e,t){let n=t.viewport;for(let r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Ln(e))r&&(t.visible=$r(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Tn(e.display)-$n(e),n.top)}),t.visible=$r(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!si(e,t))break;Ir(e);let i=Hr(e);yr(e),Fr(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ci(e,t){let n=new oi(e,t);if(si(e,n)){Ir(e),li(e,n);let t=Hr(e);yr(e),Fr(e,t),ui(e,t),n.finish()}}function di(e){let t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",un(e,"gutterChanged",e)}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+In(e)+"px"}function pi(e){let t=e.display,n=t.view;if(!(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter))return;let r=cr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px";for(let t=0;t<n.length;t++)if(!n[t].hidden){e.options.fixedGutter&&(n[t].gutter&&(n[t].gutter.style.left=a),n[t].gutterBackground&&(n[t].gutterBackground.style.left=a));let r=n[t].alignable;if(r)for(let e=0;e<r.length;e++)r[e].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}function hi(e){if(!e.options.lineNumbers)return!1;let t=e.doc,n=nt(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){let t=r.measure.appendChild(P("div",[P("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=t.firstChild.offsetWidth,a=t.offsetWidth-i;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(i,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",di(e.display),!0}return!1}function fi(e,t){let n=[],r=!1;for(let i=0;i<e.length;i++){let a=e[i],o=null;if("string"!=typeof a&&(o=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;r=!0}n.push({className:a,style:o})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function mi(e){let t=e.gutters,n=e.gutterSpecs;L(t),e.lineGutter=null;for(let r=0;r<n.length;++r){let{className:i,style:a}=n[r],o=t.appendChild(P("div",null,"CodeMirror-gutter "+i));a&&(o.style.cssText=a),"CodeMirror-linenumbers"==i&&(e.lineGutter=o,o.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",di(e)}function gi(e){mi(e.display),fr(e),pi(e)}function vi(e,t,n,r){let i=this;this.input=n,i.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=O("div",null,"CodeMirror-code"),i.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=P("div",null,"CodeMirror-cursors"),i.measure=P("div",null,"CodeMirror-measure"),i.lineMeasure=P("div",null,"CodeMirror-measure"),i.lineSpace=O("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");let o=O("div",[i.lineSpace],"CodeMirror-lines");i.mover=P("div",[o],null,"position: relative"),i.sizer=P("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=P("div",null,null,"position: absolute; height: "+W+"px; width: 1px;"),i.gutters=P("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=P("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=P("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),c&&d<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),u||a&&_||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=fi(r.gutters,r.lineNumbers),mi(i),n.init(i)}let bi=0,yi=null;function _i(e){let t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function wi(e){let t=_i(e);return t.x*=yi,t.y*=yi,t}function Ci(e,t){let n=_i(t),r=n.x,i=n.y,o=e.display,s=o.scroller,l=s.scrollWidth>s.clientWidth,c=s.scrollHeight>s.clientHeight;if(r&&l||i&&c){if(i&&w&&u)e:for(let n=t.target,r=o.view;n!=s;n=n.parentNode)for(let t=0;t<r.length;t++)if(r[t].node==n){e.display.currentWheelTarget=n;break e}if(r&&!a&&!f&&null!=yi)return i&&c&&Nr(e,Math.max(0,s.scrollTop+i*yi)),zr(e,Math.max(0,s.scrollLeft+r*yi)),(!i||i&&c)&&xe(t),void(o.wheelStartX=null);if(i&&null!=yi){let t=i*yi,n=e.doc.scrollTop,r=n+o.wrapper.clientHeight;t<0?n=Math.max(0,n+t-50):r=Math.min(e.doc.height,r+t+50),ci(e,{top:n,bottom:r})}bi<20&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout((()=>{if(null==o.wheelStartX)return;let e=s.scrollLeft-o.wheelStartX,t=s.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(yi=(yi*bi+n)/(bi+1),++bi)}),200)):(o.wheelDX+=r,o.wheelDY+=i))}}c?yi=-.53:a?yi=15:h?yi=-.7:m&&(yi=-1/3);class xi{constructor(e,t){this.ranges=e,this.primIndex=t}primary(){return this.ranges[this.primIndex]}equals(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(let t=0;t<this.ranges.length;t++){let n=this.ranges[t],r=e.ranges[t];if(!at(n.anchor,r.anchor)||!at(n.head,r.head))return!1}return!0}deepCopy(){let e=[];for(let t=0;t<this.ranges.length;t++)e[t]=new ki(ot(this.ranges[t].anchor),ot(this.ranges[t].head));return new xi(e,this.primIndex)}somethingSelected(){for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1}contains(e,t){t||(t=e);for(let n=0;n<this.ranges.length;n++){let r=this.ranges[n];if(it(t,r.from())>=0&&it(e,r.to())<=0)return n}return-1}}class ki{constructor(e,t){this.anchor=e,this.head=t}from(){return lt(this.anchor,this.head)}to(){return st(this.anchor,this.head)}empty(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}}function Ei(e,t,n){let r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(((e,t)=>it(e.from(),t.from()))),n=V(t,i);for(let e=1;e<t.length;e++){let i=t[e],a=t[e-1],o=it(a.to(),i.from());if(r&&!i.empty()?o>0:o>=0){let r=lt(a.from(),i.from()),o=st(a.to(),i.to()),s=a.empty()?i.from()==i.head:a.from()==a.head;e<=n&&--n,t.splice(--e,2,new ki(s?o:r,s?r:o))}}return new xi(t,n)}function Si(e,t){return new xi([new ki(e,t||e)],0)}function Ti(e){return e.text?rt(e.from.line+e.text.length-1,X(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Mi(e,t){if(it(e,t.from)<0)return e;if(it(e,t.to)<=0)return Ti(t);let n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Ti(t).ch-t.to.ch),rt(n,r)}function Ii(e,t){let n=[];for(let r=0;r<e.sel.ranges.length;r++){let i=e.sel.ranges[r];n.push(new ki(Mi(i.anchor,t),Mi(i.head,t)))}return Ei(e.cm,n,e.sel.primIndex)}function Li(e,t,n){return e.line==t.line?rt(n.line,e.ch-t.ch+n.ch):rt(n.line+(e.line-t.line),e.ch)}function $i(e){e.doc.mode=Fe(e.options,e.doc.modeOption),Pi(e)}function Pi(e){e.doc.iter((e=>{e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ii(e,100),e.state.modeGen++,e.curOp&&fr(e)}function Oi(e,t){return 0==t.from.ch&&0==t.to.ch&&""==X(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Bi(e,t,n,r){function i(e){return n?n[e]:null}function a(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),$t(e),Pt(e,n);let i=r?r(e):1;i!=e.height&&Xe(e,i)}(e,n,i,r),un(e,"change",e,t)}function o(e,t){let n=[];for(let a=e;a<t;++a)n.push(new Jt(c[a],i(a),r));return n}let s=t.from,l=t.to,c=t.text,d=Je(e,s.line),u=Je(e,l.line),p=X(c),h=i(c.length-1),f=l.line-s.line;if(t.full)e.insert(0,o(0,c.length)),e.remove(c.length,e.size-c.length);else if(Oi(e,t)){let t=o(0,c.length-1);a(u,u.text,h),f&&e.remove(s.line,f),t.length&&e.insert(s.line,t)}else if(d==u)if(1==c.length)a(d,d.text.slice(0,s.ch)+p+d.text.slice(l.ch),h);else{let t=o(1,c.length-1);t.push(new Jt(p+d.text.slice(l.ch),h,r)),a(d,d.text.slice(0,s.ch)+c[0],i(0)),e.insert(s.line+1,t)}else if(1==c.length)a(d,d.text.slice(0,s.ch)+c[0]+u.text.slice(l.ch),i(0)),e.remove(s.line+1,f);else{a(d,d.text.slice(0,s.ch)+c[0],i(0)),a(u,p+u.text.slice(l.ch),h);let t=o(1,c.length-1);f>1&&e.remove(s.line+1,f-1),e.insert(s.line+1,t)}un(e,"change",e,t)}function Ai(e,t,n){!function e(r,i,a){if(r.linked)for(let o=0;o<r.linked.length;++o){let s=r.linked[o];if(s.doc==i)continue;let l=a&&s.sharedHist;n&&!l||(t(s.doc,l),e(s.doc,r,l))}}(e,null,!0)}function Ri(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ur(e),$i(e),Di(e),e.options.direction=t.direction,e.options.lineWrapping||Kt(e),e.options.mode=t.modeOption,fr(e)}function Di(e){("rtl"==e.doc.direction?R:I)(e.display.lineDiv,"CodeMirror-rtl")}function Ni(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Gi(e,t){let n={from:ot(t.from),to:Ti(t),text:Qe(e,t.from,t.to)};return Vi(e,n,t.from.line,t.to.line+1),Ai(e,(e=>Vi(e,n,t.from.line,t.to.line+1)),!0),n}function zi(e){for(;e.length&&X(e).ranges;)e.pop()}function Hi(e,t,n,r){let i=e.history;i.undone.length=0;let a,o,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(a=function(e,t){return t?(zi(e.done),X(e.done)):e.done.length&&!X(e.done).ranges?X(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),X(e.done)):void 0}(i,i.lastOp==r)))o=X(a.changes),0==it(t.from,t.to)&&0==it(t.from,o.to)?o.to=Ti(t):a.changes.push(Gi(e,t));else{let n=X(i.done);for(n&&n.ranges||Fi(e.sel,i.done),a={changes:[Gi(e,t)],generation:i.generation},i.done.push(a);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,o||be(e,"historyAdded")}function Fi(e,t){let n=X(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Vi(e,t,n,r){let i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(n=>{n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=n.markedSpans),++a}))}function Wi(e){if(!e)return null;let t;for(let n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ji(e,t){let n=function(e,t){let n=t["spans_"+e.id];if(!n)return null;let r=[];for(let e=0;e<t.text.length;++e)r.push(Wi(n[e]));return r}(e,t),r=It(e,t);if(!n)return r;if(!r)return n;for(let e=0;e<n.length;++e){let t=n[e],i=r[e];if(t&&i)e:for(let e=0;e<i.length;++e){let n=i[e];for(let e=0;e<t.length;++e)if(t[e].marker==n.marker)continue e;t.push(n)}else i&&(n[e]=i)}return n}function Ui(e,t,n){let r=[];for(let a=0;a<e.length;++a){let o=e[a];if(o.ranges){r.push(n?xi.prototype.deepCopy.call(o):o);continue}let s=o.changes,l=[];r.push({changes:l});for(let e=0;e<s.length;++e){let n,r=s[e];if(l.push({from:r.from,to:r.to,text:r.text}),t)for(var i in r)(n=i.match(/^spans_(\d+)$/))&&V(t,Number(n[1]))>-1&&(X(l)[i]=r[i],delete r[i])}}return r}function qi(e,t,n,r){if(r){let r=e.anchor;if(n){let e=it(t,r)<0;e!=it(n,r)<0?(r=t,t=n):e!=it(t,n)<0&&(t=n)}return new ki(r,t)}return new ki(n||t,t)}function Ki(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Zi(e,new xi([qi(e.sel.primary(),t,n,i)],0),r)}function Ji(e,t,n){let r=[],i=e.cm&&(e.cm.display.shift||e.extend);for(let n=0;n<e.sel.ranges.length;n++)r[n]=qi(e.sel.ranges[n],t[n],null,i);Zi(e,Ei(e.cm,r,e.sel.primIndex),n)}function Qi(e,t,n,r){let i=e.sel.ranges.slice(0);i[t]=n,Zi(e,Ei(e.cm,i,e.sel.primIndex),r)}function Yi(e,t,n,r){Zi(e,Si(t,n),r)}function Xi(e,t,n){let r=e.history.done,i=X(r);i&&i.ranges?(r[r.length-1]=t,ea(e,t,n)):Zi(e,t,n)}function Zi(e,t,n){ea(e,t,n),function(e,t,n,r){let i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function(e,t,n,r){let i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,X(i.done),t))?i.done[i.done.length-1]=t:Fi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&zi(i.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ea(e,t,n){(we(e,"beforeSelectionChange")||e.cm&&we(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){let r={ranges:t.ranges,update:function(t){this.ranges=[];for(let n=0;n<t.length;n++)this.ranges[n]=new ki(dt(e,t[n].anchor),dt(e,t[n].head))},origin:n&&n.origin};return be(e,"beforeSelectionChange",e,r),e.cm&&be(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Ei(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));let r=n&&n.bias||(it(t.primary().head,e.sel.primary().head)<0?-1:1);ta(e,ra(e,t,r,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||Br(e.cm)}function ta(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,_e(e.cm)),un(e,"cursorActivity",e))}function na(e){ta(e,ra(e,e.sel,null,!1))}function ra(e,t,n,r){let i;for(let a=0;a<t.ranges.length;a++){let o=t.ranges[a],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],l=aa(e,o.anchor,s&&s.anchor,n,r),c=aa(e,o.head,s&&s.head,n,r);(i||l!=o.anchor||c!=o.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new ki(l,c))}return i?Ei(e.cm,i,t.primIndex):t}function ia(e,t,n,r,i){let a=Je(e,t.line);if(a.markedSpans)for(let o=0;o<a.markedSpans.length;++o){let s=a.markedSpans[o],l=s.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,d="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(c?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(d?s.to>=t.ch:s.to>t.ch))){if(i&&(be(l,"beforeCursorEnter"),l.explicitlyCleared)){if(a.markedSpans){--o;continue}break}if(!l.atomic)continue;if(n){let o,s=l.find(r<0?1:-1);if((r<0?d:c)&&(s=oa(e,s,-r,s&&s.line==t.line?a:null)),s&&s.line==t.line&&(o=it(s,n))&&(r<0?o<0:o>0))return ia(e,s,t,r,i)}let s=l.find(r<0?-1:1);return(r<0?c:d)&&(s=oa(e,s,r,s.line==t.line?a:null)),s?ia(e,s,t,r,i):null}}return t}function aa(e,t,n,r,i){let a=r||1;return ia(e,t,n,a,i)||!i&&ia(e,t,n,a,!0)||ia(e,t,n,-a,i)||!i&&ia(e,t,n,-a,!0)||(e.cantEdit=!0,rt(e.first,0))}function oa(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?dt(e,rt(t.line-1)):null:n>0&&t.ch==(r||Je(e,t.line)).text.length?t.line<e.first+e.size-1?rt(t.line+1,0):null:new rt(t.line,t.ch+n)}function sa(e){e.setSelection(rt(e.firstLine(),0),rt(e.lastLine()),U)}function la(e,t,n){let r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:()=>r.canceled=!0};return n&&(r.update=(t,n,i,a)=>{t&&(r.from=dt(e,t)),n&&(r.to=dt(e,n)),i&&(r.text=i),void 0!==a&&(r.origin=a)}),be(e,"beforeChange",e,r),e.cm&&be(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function ca(e,t,n){if(e.cm){if(!e.cm.curOp)return ti(e.cm,ca)(e,t,n);if(e.cm.state.suppressEdits)return}if((we(e,"beforeChange")||e.cm&&we(e.cm,"beforeChange"))&&!(t=la(e,t,!0)))return;let r=kt&&!n&&function(e,t,n){let r=null;if(e.iter(t.line,n.line+1,(e=>{if(e.markedSpans)for(let t=0;t<e.markedSpans.length;++t){let n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=V(r,n)||(r||(r=[])).push(n)}})),!r)return null;let i=[{from:t,to:n}];for(let e=0;e<r.length;++e){let t=r[e],n=t.find(0);for(let e=0;e<i.length;++e){let r=i[e];if(it(r.to,n.from)<0||it(r.from,n.to)>0)continue;let a=[e,1],o=it(r.from,n.from),s=it(r.to,n.to);(o<0||!t.inclusiveLeft&&!o)&&a.push({from:r.from,to:n.from}),(s>0||!t.inclusiveRight&&!s)&&a.push({from:n.to,to:r.to}),i.splice.apply(i,a),e+=a.length-3}}return i}(e,t.from,t.to);if(r)for(let n=r.length-1;n>=0;--n)da(e,{from:r[n].from,to:r[n].to,text:n?[""]:t.text,origin:t.origin});else da(e,t)}function da(e,t){if(1==t.text.length&&""==t.text[0]&&0==it(t.from,t.to))return;let n=Ii(e,t);Hi(e,t,n,e.cm?e.cm.curOp.id:NaN),ha(e,t,n,It(e,t));let r=[];Ai(e,((e,n)=>{n||-1!=V(r,e.history)||(va(e.history,t),r.push(e.history)),ha(e,t,null,It(e,t))}))}function ua(e,t,n){let r=e.cm&&e.cm.state.suppressEdits;if(r&&!n)return;let i,a=e.history,o=e.sel,s="undo"==t?a.done:a.undone,l="undo"==t?a.undone:a.done,c=0;for(;c<s.length&&(i=s[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c==s.length)return;for(a.lastOrigin=a.lastSelOrigin=null;;){if(i=s.pop(),!i.ranges){if(r)return void s.push(i);break}if(Fi(i,l),n&&!i.equals(e.sel))return void Zi(e,i,{clearRedo:!1});o=i}let d=[];Fi(o,l),l.push({changes:d,generation:a.generation}),a.generation=i.generation||++a.maxGeneration;let u=we(e,"beforeChange")||e.cm&&we(e.cm,"beforeChange");for(let n=i.changes.length-1;n>=0;--n){let r=i.changes[n];if(r.origin=t,u&&!la(e,r,!1))return void(s.length=0);d.push(Gi(e,r));let a=n?Ii(e,r):X(s);ha(e,r,a,ji(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Ti(r)});let o=[];Ai(e,((e,t)=>{t||-1!=V(o,e.history)||(va(e.history,r),o.push(e.history)),ha(e,r,null,ji(e,r))}))}}function pa(e,t){if(0!=t&&(e.first+=t,e.sel=new xi(Z(e.sel.ranges,(e=>new ki(rt(e.anchor.line+t,e.anchor.ch),rt(e.head.line+t,e.head.ch)))),e.sel.primIndex),e.cm)){fr(e.cm,e.first,e.first-t,t);for(let t=e.cm.display,n=t.viewFrom;n<t.viewTo;n++)mr(e.cm,n,"gutter")}}function ha(e,t,n,r){if(e.cm&&!e.cm.curOp)return ti(e.cm,ha)(e,t,n,r);if(t.to.line<e.first)return void pa(e,t.text.length-1-(t.to.line-t.from.line));if(t.from.line>e.lastLine())return;if(t.from.line<e.first){let n=t.text.length-1-(e.first-t.from.line);pa(e,n),t={from:rt(e.first,0),to:rt(t.to.line+n,t.to.ch),text:[X(t.text)],origin:t.origin}}let i=e.lastLine();t.to.line>i&&(t={from:t.from,to:rt(i,Je(e,i).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Qe(e,t.from,t.to),n||(n=Ii(e,t)),e.cm?function(e,t,n){let r=e.doc,i=e.display,a=t.from,o=t.to,s=!1,l=a.line;e.options.lineWrapping||(l=Ze(Ht(Je(r,a.line))),r.iter(l,o.line+1,(e=>{if(e==i.maxLine)return s=!0,!0}))),r.sel.contains(t.from,t.to)>-1&&_e(e),Bi(r,t,n,dr(e)),e.options.lineWrapping||(r.iter(l,a.line+t.text.length,(e=>{let t=qt(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)})),s&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),e.highlightFrontier<t-10)return;let n=e.first;for(let r=t-1;r>n;r--){let i=Je(e,r).stateAfter;if(i&&(!(i instanceof pt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}(r,a.line),ii(e,400);let c=t.text.length-(o.line-a.line)-1;t.full?fr(e):a.line!=o.line||1!=t.text.length||Oi(e.doc,t)?fr(e,a.line,o.line+1,c):mr(e,a.line,"text");let d=we(e,"changes"),u=we(e,"change");if(u||d){let n={from:a,to:o,text:t.text,removed:t.removed,origin:t.origin};u&&un(e,"change",e,n),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(n)}e.display.selForContextMenu=null}(e.cm,t,r):Bi(e,t,r),ea(e,n,U),e.cantEdit&&aa(e,rt(e.firstLine(),0))&&(e.cantEdit=!1)}function fa(e,t,n,r,i){r||(r=n),it(r,n)<0&&([n,r]=[r,n]),"string"==typeof t&&(t=e.splitLines(t)),ca(e,{from:n,to:r,text:t,origin:i})}function ma(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function ga(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i],o=!0;if(a.ranges){a.copied||(a=e[i]=a.deepCopy(),a.copied=!0);for(let e=0;e<a.ranges.length;e++)ma(a.ranges[e].anchor,t,n,r),ma(a.ranges[e].head,t,n,r)}else{for(let e=0;e<a.changes.length;++e){let i=a.changes[e];if(n<i.from.line)i.from=rt(i.from.line+r,i.from.ch),i.to=rt(i.to.line+r,i.to.ch);else if(t<=i.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}}function va(e,t){let n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;ga(e.done,n,r,i),ga(e.undone,n,r,i)}function ba(e,t,n,r){let i=t,a=t;return"number"==typeof t?a=Je(e,ct(e,t)):i=Ze(t),null==i?null:(r(a,i)&&e.cm&&mr(e.cm,i,n),a)}function ya(e){this.lines=e,this.parent=null;let t=0;for(let n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function _a(e){this.children=e;let t=0,n=0;for(let r=0;r<e.length;++r){let i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}ya.prototype={chunkSize(){return this.lines.length},removeInner(e,t){for(let n=e,r=e+t;n<r;++n){let e=this.lines[n];this.height-=e.height,Qt(e),un(e,"delete")}this.lines.splice(e,t)},collapse(e){e.push.apply(e,this.lines)},insertInner(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(let e=0;e<t.length;++e)t[e].parent=this},iterN(e,t,n){for(let r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},_a.prototype={chunkSize(){return this.size},removeInner(e,t){this.size-=t;for(let n=0;n<this.children.length;++n){let r=this.children[n],i=r.chunkSize();if(e<i){let a=Math.min(t,i-e),o=r.height;if(r.removeInner(e,a),this.height-=o-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ya))){let e=[];this.collapse(e),this.children=[new ya(e)],this.children[0].parent=this}},collapse(e){for(let t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner(e,t,n){this.size+=t.length,this.height+=n;for(let r=0;r<this.children.length;++r){let i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){let e=i.lines.length%25+25;for(let t=e;t<i.lines.length;){let e=new ya(i.lines.slice(t,t+=25));i.height-=e.height,this.children.splice(++r,0,e),e.parent=this}i.lines=i.lines.slice(0,e),this.maybeSpill()}break}e-=a}},maybeSpill(){if(this.children.length<=10)return;let e=this;do{let t=new _a(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;let n=V(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{let n=new _a(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN(e,t,n){for(let r=0;r<this.children.length;++r){let i=this.children[r],a=i.chunkSize();if(e<a){let r=Math.min(t,a-e);if(i.iterN(e,r,n))return!0;if(0==(t-=r))break;e=0}else e-=a}}};class wa{constructor(e,t,n){if(n)for(let e in n)n.hasOwnProperty(e)&&(this[e]=n[e]);this.doc=e,this.node=t}clear(){let e=this.doc.cm,t=this.line.widgets,n=this.line,r=Ze(n);if(null==r||!t)return;for(let e=0;e<t.length;++e)t[e]==this&&t.splice(e--,1);t.length||(n.widgets=null);let i=kn(this);Xe(n,Math.max(0,n.height-i)),e&&(ei(e,(()=>{Ca(e,n,-i),mr(e,r,"widget")})),un(e,"lineWidgetCleared",e,this,r))}changed(){let e=this.height,t=this.doc.cm,n=this.line;this.height=null;let r=kn(this)-e;r&&(Wt(this.doc,n)||Xe(n,n.height+r),t&&ei(t,(()=>{t.curOp.forceUpdate=!0,Ca(t,n,r),un(t,"lineWidgetChanged",t,this,Ze(n))})))}}function Ca(e,t,n){Ut(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Or(e,n)}Ce(wa);let xa=0;class ka{constructor(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++xa}clear(){if(this.explicitlyCleared)return;let e=this.doc.cm,t=e&&!e.curOp;if(t&&qr(e),we(this,"clear")){let e=this.find();e&&un(this,"clear",e.from,e.to)}let n=null,r=null;for(let t=0;t<this.lines.length;++t){let i=this.lines[t],a=Tt(i.markedSpans,this);e&&!this.collapsed?mr(e,Ze(i),"text"):e&&(null!=a.to&&(r=Ze(i)),null!=a.from&&(n=Ze(i))),i.markedSpans=Mt(i.markedSpans,a),null==a.from&&this.collapsed&&!Wt(this.doc,i)&&e&&Xe(i,or(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(let t=0;t<this.lines.length;++t){let n=Ht(this.lines[t]),r=qt(n);r>e.display.maxLineLength&&(e.display.maxLine=n,e.display.maxLineLength=r,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&fr(e,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&na(e.doc)),e&&un(e,"markerCleared",e,this,n,r),t&&Kr(e),this.parent&&this.parent.clear()}find(e,t){let n,r;null==e&&"bookmark"==this.type&&(e=1);for(let i=0;i<this.lines.length;++i){let a=this.lines[i],o=Tt(a.markedSpans,this);if(null!=o.from&&(n=rt(t?a:Ze(a),o.from),-1==e))return n;if(null!=o.to&&(r=rt(t?a:Ze(a),o.to),1==e))return r}return n&&{from:n,to:r}}changed(){let e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&ei(n,(()=>{let r=e.line,i=Ze(e.line),a=Bn(n,i);if(a&&(Hn(a),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Wt(t.doc,r)&&null!=t.height){let e=t.height;t.height=null;let n=kn(t)-e;n&&Xe(r,r.height+n)}un(n,"markerChanged",n,this)}))}attachLine(e){if(!this.lines.length&&this.doc.cm){let e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=V(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)}detachLine(e){if(this.lines.splice(V(this.lines,e),1),!this.lines.length&&this.doc.cm){let e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}}}function Ea(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=z(r)).shared=!1;let a=[Ea(e,t,n,r,i)],o=a[0],s=r.widgetNode;return Ai(e,(e=>{s&&(r.widgetNode=s.cloneNode(!0)),a.push(Ea(e,dt(e,t),dt(e,n),r,i));for(let t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;o=X(a)})),new Sa(a,o)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return ti(e.cm,Ea)(e,t,n,r,i);let a=new ka(e,i),o=it(t,n);if(r&&z(r,a,!1),o>0||0==o&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=O("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(zt(e,t.line,t,n,a)||t.line!=n.line&&zt(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Et=!0}a.addToHistory&&Hi(e,{from:t,to:n,origin:"markText"},e.sel,NaN);let s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(r=>{c&&a.collapsed&&!c.options.lineWrapping&&Ht(r)==c.display.maxLine&&(s=!0),a.collapsed&&l!=t.line&&Xe(r,0),function(e,t,n){let r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}(r,new St(a,l==t.line?t.ch:null,l==n.line?n.ch:null),e.cm&&e.cm.curOp),++l})),a.collapsed&&e.iter(t.line,n.line+1,(t=>{Wt(e,t)&&Xe(t,0)})),a.clearOnEnter&&me(a,"beforeCursorEnter",(()=>a.clear())),a.readOnly&&(kt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++xa,a.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),a.collapsed)fr(c,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(let e=t.line;e<=n.line;e++)mr(c,e,"text");a.atomic&&na(c.doc),un(c,"markerAdded",c,a)}return a}Ce(ka);class Sa{constructor(e,t){this.markers=e,this.primary=t;for(let t=0;t<e.length;++t)e[t].parent=this}clear(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(let e=0;e<this.markers.length;++e)this.markers[e].clear();un(this,"clear")}}find(e,t){return this.primary.find(e,t)}}function Ta(e){return e.findMarks(rt(e.first,0),e.clipPos(rt(e.lastLine())),(e=>e.parent))}function Ma(e){for(let t=0;t<e.length;t++){let n=e[t],r=[n.primary.doc];Ai(n.primary.doc,(e=>r.push(e)));for(let e=0;e<n.markers.length;e++){let t=n.markers[e];-1==V(r,t.doc)&&(t.parent=null,n.markers.splice(e--,1))}}}Ce(Sa);let Ia=0,La=function(e,t,n,r,i){if(!(this instanceof La))return new La(e,t,n,r,i);null==n&&(n=0),_a.call(this,[new ya([new Jt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;let a=rt(n,0);this.sel=Si(a),this.history=new Ni(null),this.id=++Ia,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Bi(this,{from:a,to:a,text:e}),Zi(this,Si(a),U)};La.prototype=te(_a.prototype,{constructor:La,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){let n=0;for(let e=0;e<t.length;++e)n+=t[e].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){let t=Ye(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:ri((function(e){let t=rt(this.first,0),n=this.first+this.size-1;ca(this,{from:t,to:rt(n,Je(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Ar(this.cm,0,0),Zi(this,Si(t),U)})),replaceRange:function(e,t,n,r){fa(this,e,t=dt(this,t),n=n?dt(this,n):t,r)},getRange:function(e,t,n){let r=Qe(this,dt(this,e),dt(this,t));return!1===n?r:""===n?r.join(""):r.join(n||this.lineSeparator())},getLine:function(e){let t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(tt(this,e))return Je(this,e)},getLineNumber:function(e){return Ze(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Je(this,e)),Ht(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return dt(this,e)},getCursor:function(e){let t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||!1===e?n.to():n.from(),t},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ri((function(e,t,n){Yi(this,dt(this,"number"==typeof e?rt(e,t||0):e),null,n)})),setSelection:ri((function(e,t,n){Yi(this,dt(this,e),dt(this,t||e),n)})),extendSelection:ri((function(e,t,n){Ki(this,dt(this,e),t&&dt(this,t),n)})),extendSelections:ri((function(e,t){Ji(this,ut(this,e),t)})),extendSelectionsBy:ri((function(e,t){Ji(this,ut(this,Z(this.sel.ranges,e)),t)})),setSelections:ri((function(e,t,n){if(!e.length)return;let r=[];for(let t=0;t<e.length;t++)r[t]=new ki(dt(this,e[t].anchor),dt(this,e[t].head||e[t].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Zi(this,Ei(this.cm,r,t),n)})),addSelection:ri((function(e,t,n){let r=this.sel.ranges.slice(0);r.push(new ki(dt(this,e),dt(this,t||e))),Zi(this,Ei(this.cm,r,r.length-1),n)})),getSelection:function(e){let t,n=this.sel.ranges;for(let e=0;e<n.length;e++){let r=Qe(this,n[e].from(),n[e].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){let t=[],n=this.sel.ranges;for(let r=0;r<n.length;r++){let i=Qe(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){let r=[];for(let t=0;t<this.sel.ranges.length;t++)r[t]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:ri((function(e,t,n){let r=[],i=this.sel;for(let t=0;t<i.ranges.length;t++){let a=i.ranges[t];r[t]={from:a.from(),to:a.to(),text:this.splitLines(e[t]),origin:n}}let a=t&&"end"!=t&&function(e,t,n){let r=[],i=rt(e.first,0),a=i;for(let o=0;o<t.length;o++){let s=t[o],l=Li(s.from,i,a),c=Li(Ti(s),i,a);if(i=s.to,a=c,"around"==n){let t=e.sel.ranges[o],n=it(t.head,t.anchor)<0;r[o]=new ki(n?c:l,n?l:c)}else r[o]=new ki(l,l)}return new xi(r,e.sel.primIndex)}(this,r,t);for(let e=r.length-1;e>=0;e--)ca(this,r[e]);a?Xi(this,a):this.cm&&Br(this.cm)})),undo:ri((function(){ua(this,"undo")})),redo:ri((function(){ua(this,"redo")})),undoSelection:ri((function(){ua(this,"undo",!0)})),redoSelection:ri((function(){ua(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){let e=this.history,t=0,n=0;for(let n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(let t=0;t<e.undone.length;t++)e.undone[t].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Ni(this.history),Ai(this,(e=>e.history=this.history),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ui(this.history.done),undone:Ui(this.history.undone)}},setHistory:function(e){let t=this.history=new Ni(this.history);t.done=Ui(e.done.slice(0),null,!0),t.undone=Ui(e.undone.slice(0),null,!0)},setGutterMarker:ri((function(e,t,n){return ba(this,e,"gutter",(e=>{let r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ae(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:ri((function(e){this.iter((t=>{t.gutterMarkers&&t.gutterMarkers[e]&&ba(this,t,"gutter",(()=>(t.gutterMarkers[e]=null,ae(t.gutterMarkers)&&(t.gutterMarkers=null),!0)))}))})),lineInfo:function(e){let t;if("number"==typeof e){if(!tt(this,e))return null;if(t=e,!(e=Je(this,e)))return null}else if(t=Ze(e),null==t)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:ri((function(e,t,n){return ba(this,e,"gutter"==t?"gutter":"class",(e=>{let r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(T(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:ri((function(e,t,n){return ba(this,e,"gutter"==t?"gutter":"class",(e=>{let r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{let t=i.match(T(n));if(!t)return!1;let a=t.index+t[0].length;e[r]=i.slice(0,t.index)+(t.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0}))})),addLineWidget:ri((function(e,t,n){return function(e,t,n,r){let i=new wa(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),ba(e,t,"widget",(t=>{let n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=t,a&&!Wt(e,t)){let n=Ut(t)<e.scrollTop;Xe(t,t.height+kn(i)),n&&Or(a,i.height),a.curOp.forceUpdate=!0}return!0})),a&&un(a,"lineWidgetAdded",a,i,"number"==typeof t?t:Ze(t)),i}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Ea(this,dt(this,e),dt(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){let n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Ea(this,e=dt(this,e),e,n,"bookmark")},findMarksAt:function(e){let t=[],n=Je(this,(e=dt(this,e)).line).markedSpans;if(n)for(let r=0;r<n.length;++r){let i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=dt(this,e),t=dt(this,t);let r=[],i=e.line;return this.iter(e.line,t.line+1,(a=>{let o=a.markedSpans;if(o)for(let a=0;a<o.length;a++){let s=o[a];null!=s.to&&i==e.line&&e.ch>=s.to||null==s.from&&i!=e.line||null!=s.from&&i==t.line&&s.from>=t.ch||n&&!n(s.marker)||r.push(s.marker.parent||s.marker)}++i})),r},getAllMarks:function(){let e=[];return this.iter((t=>{let n=t.markedSpans;if(n)for(let t=0;t<n.length;++t)null!=n[t].from&&e.push(n[t].marker)})),e},posFromIndex:function(e){let t,n=this.first,r=this.lineSeparator().length;return this.iter((i=>{let a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n})),dt(this,rt(n,t))},indexFromPos:function(e){let t=(e=dt(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;let n=this.lineSeparator().length;return this.iter(this.first,e.line,(e=>{t+=e.text.length+n})),t},copy:function(e){let t=new La(Ye(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});let t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);let r=new La(Ye(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(let n=0;n<t.length;n++){let r=t[n],i=r.find(),a=e.clipPos(i.from),o=e.clipPos(i.to);if(it(a,o)){let t=Ea(e,a,o,r.primary,r.primary.type);r.markers.push(t),t.parent=r}}}(r,Ta(this)),r},unlinkDoc:function(e){if(e instanceof Eo&&(e=e.doc),this.linked)for(let t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ma(Ta(this));break}if(e.history==this.history){let t=[e.id];Ai(e,(e=>t.push(e.id)),!0),e.history=new Ni(null),e.history.done=Ui(this.history.done,t),e.history.undone=Ui(this.history.undone,t)}},iterLinkedDocs:function(e){Ai(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Be(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ri((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((e=>e.order=null)),this.cm&&ei(t=this.cm,(()=>{Di(t),fr(t)})))}))}),La.prototype.eachLine=La.prototype.iter;const $a=La;let Pa=0;function Oa(e){let t=this;if(Ba(t),ye(t,e)||En(t.display,e))return;xe(e),c&&(Pa=+new Date);let n=pr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File){let e=r.length,i=Array(e),a=0;const o=()=>{++a==e&&ti(t,(()=>{n=dt(t.doc,n);let e={from:n,to:n,text:t.doc.splitLines(i.filter((e=>null!=e)).join(t.doc.lineSeparator())),origin:"paste"};ca(t.doc,e),Xi(t.doc,Si(dt(t.doc,n),dt(t.doc,Ti(e))))}))()},s=(e,n)=>{if(t.options.allowDropFileTypes&&-1==V(t.options.allowDropFileTypes,e.type))return void o();let r=new FileReader;r.onerror=()=>o(),r.onload=()=>{let e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(i[n]=e),o()},r.readAsText(e)};for(let e=0;e<r.length;e++)s(r[e],e)}else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((()=>t.display.input.focus()),20);try{let r=e.dataTransfer.getData("Text");if(r){let e;if(t.state.draggingText&&!t.state.draggingText.copy&&(e=t.listSelections()),ea(t.doc,Si(n,n)),e)for(let n=0;n<e.length;++n)fa(t.doc,"",e[n].anchor,e[n].head,"drag");t.replaceSelection(r,"around","paste"),t.display.input.focus()}}catch(e){}}}function Ba(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Aa(e){if(!document.getElementsByClassName)return;let t=document.getElementsByClassName("CodeMirror"),n=[];for(let e=0;e<t.length;e++){let r=t[e].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((()=>{for(let t=0;t<n.length;t++)e(n[t])}))}let Ra=!1;function Da(e){let t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}let Na={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(let e=0;e<10;e++)Na[e+48]=Na[e+96]=String(e);for(let e=65;e<=90;e++)Na[e]=String.fromCharCode(e);for(let e=1;e<=12;e++)Na[e+111]=Na[e+63235]="F"+e;let Ga={};function za(e){let t,n,r,i,a=e.split(/-(?!$)/);e=a[a.length-1];for(let e=0;e<a.length-1;e++){let o=a[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else{if(!/^s(hift)?$/i.test(o))throw new Error("Unrecognized modifier name: "+o);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Ha(e){let t={};for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}let i=Z(n.split(" "),za);for(let e=0;e<i.length;e++){let n,a;e==i.length-1?(a=i.join(" "),n=r):(a=i.slice(0,e+1).join(" "),n="...");let o=t[a];if(o){if(o!=n)throw new Error("Inconsistent bindings for "+a)}else t[a]=n}delete e[n]}for(let n in t)e[n]=t[n];return e}function Fa(e,t,n,r){let i=(t=Ua(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Fa(e,t.fallthrough,n,r);for(let i=0;i<t.fallthrough.length;i++){let a=Fa(e,t.fallthrough[i],n,r);if(a)return a}}}function Va(e){let t="string"==typeof e?e:Na[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Wa(e,t,n){let r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(E?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(E?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function ja(e,t){if(f&&34==e.keyCode&&e.char)return!1;let n=Na[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Wa(n,e,t))}function Ua(e){return"string"==typeof e?Ga[e]:e}function qa(e,t){let n=e.doc.sel.ranges,r=[];for(let e=0;e<n.length;e++){let i=t(n[e]);for(;r.length&&it(i.from,X(r).to)<=0;){let e=r.pop();if(it(e.from,i.from)<0){i.from=e.from;break}}r.push(i)}ei(e,(()=>{for(let t=r.length-1;t>=0;t--)fa(e.doc,"",r[t].from,r[t].to,"+delete");Br(e)}))}function Ka(e,t,n){let r=le(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Ja(e,t,n){let r=Ka(e,t.ch,n);return null==r?null:new rt(t.line,r,n<0?"after":"before")}function Qa(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);let e=he(n,t.doc.direction);if(e){let a,o=i<0?X(e):e[0],s=i<0==(1==o.level)?"after":"before";if(o.level>0||"rtl"==t.doc.direction){let e=An(t,n);a=i<0?n.text.length-1:0;let r=Rn(t,e,a).top;a=ce((n=>Rn(t,e,n).top==r),i<0==(1==o.level)?o.from:o.to-1,a),"before"==s&&(a=Ka(n,a,1))}else a=i<0?o.to:o.from;return new rt(r,a,s)}}return new rt(r,i<0?n.text.length:0,i<0?"before":"after")}Ga.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ga.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ga.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ga.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ga.default=w?Ga.macDefault:Ga.pcDefault;let Ya={selectAll:sa,singleSelection:e=>e.setSelection(e.getCursor("anchor"),e.getCursor("head"),U),killLine:e=>qa(e,(t=>{if(t.empty()){let n=Je(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:rt(t.head.line+1,0)}:{from:t.head,to:rt(t.head.line,n)}}return{from:t.from(),to:t.to()}})),deleteLine:e=>qa(e,(t=>({from:rt(t.from().line,0),to:dt(e.doc,rt(t.to().line+1,0))}))),delLineLeft:e=>qa(e,(e=>({from:rt(e.from().line,0),to:e.from()}))),delWrappedLineLeft:e=>qa(e,(t=>{let n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})),delWrappedLineRight:e=>qa(e,(t=>{let n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})),undo:e=>e.undo(),redo:e=>e.redo(),undoSelection:e=>e.undoSelection(),redoSelection:e=>e.redoSelection(),goDocStart:e=>e.extendSelection(rt(e.firstLine(),0)),goDocEnd:e=>e.extendSelection(rt(e.lastLine())),goLineStart:e=>e.extendSelectionsBy((t=>Xa(e,t.head.line)),{origin:"+move",bias:1}),goLineStartSmart:e=>e.extendSelectionsBy((t=>Za(e,t.head)),{origin:"+move",bias:1}),goLineEnd:e=>e.extendSelectionsBy((t=>function(e,t){let n=Je(e.doc,t),r=function(e){let t;for(;t=Nt(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=Ze(r)),Qa(!0,e,n,t,-1)}(e,t.head.line)),{origin:"+move",bias:-1}),goLineRight:e=>e.extendSelectionsBy((t=>{let n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),K),goLineLeft:e=>e.extendSelectionsBy((t=>{let n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),K),goLineLeftSmart:e=>e.extendSelectionsBy((t=>{let n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Za(e,t.head):r}),K),goLineUp:e=>e.moveV(-1,"line"),goLineDown:e=>e.moveV(1,"line"),goPageUp:e=>e.moveV(-1,"page"),goPageDown:e=>e.moveV(1,"page"),goCharLeft:e=>e.moveH(-1,"char"),goCharRight:e=>e.moveH(1,"char"),goColumnLeft:e=>e.moveH(-1,"column"),goColumnRight:e=>e.moveH(1,"column"),goWordLeft:e=>e.moveH(-1,"word"),goGroupRight:e=>e.moveH(1,"group"),goGroupLeft:e=>e.moveH(-1,"group"),goWordRight:e=>e.moveH(1,"word"),delCharBefore:e=>e.deleteH(-1,"codepoint"),delCharAfter:e=>e.deleteH(1,"char"),delWordBefore:e=>e.deleteH(-1,"word"),delWordAfter:e=>e.deleteH(1,"word"),delGroupBefore:e=>e.deleteH(-1,"group"),delGroupAfter:e=>e.deleteH(1,"group"),indentAuto:e=>e.indentSelection("smart"),indentMore:e=>e.indentSelection("add"),indentLess:e=>e.indentSelection("subtract"),insertTab:e=>e.replaceSelection("\t"),insertSoftTab:e=>{let t=[],n=e.listSelections(),r=e.options.tabSize;for(let i=0;i<n.length;i++){let a=n[i].from(),o=H(e.getLine(a.line),a.ch,r);t.push(Y(r-o%r))}e.replaceSelections(t)},defaultTab:e=>{e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:e=>ei(e,(()=>{let t=e.listSelections(),n=[];for(let r=0;r<t.length;r++){if(!t[r].empty())continue;let i=t[r].head,a=Je(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new rt(i.line,i.ch-1)),i.ch>0)i=new rt(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),rt(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){let t=Je(e.doc,i.line-1).text;t&&(i=new rt(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+t.charAt(t.length-1),rt(i.line-1,t.length-1),i,"+transpose"))}n.push(new ki(i,i))}e.setSelections(n)})),newlineAndIndent:e=>ei(e,(()=>{let t=e.listSelections();for(let n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(let n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);Br(e)})),openLine:e=>e.replaceSelection("\n","start"),toggleOverwrite:e=>e.toggleOverwrite()};function Xa(e,t){let n=Je(e.doc,t),r=Ht(n);return r!=n&&(t=Ze(r)),Qa(!0,e,r,t,1)}function Za(e,t){let n=Xa(e,t.line),r=Je(e.doc,n.line),i=he(r,e.doc.direction);if(!i||0==i[0].level){let e=Math.max(n.ch,r.text.search(/\S/)),i=t.line==n.line&&t.ch<=e&&t.ch;return rt(n.line,i?0:e,n.sticky)}return n}function eo(e,t,n){if("string"==typeof t&&!(t=Ya[t]))return!1;e.display.input.ensurePolled();let r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=j}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}let to=new F;function no(e,t,n,r){let i=e.state.keySeq;if(i){if(Va(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:to.set(50,(()=>{e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),ro(e,i+" "+t,n,r))return!0}return ro(e,t,n,r)}function ro(e,t,n,r){let i=function(e,t,n){for(let r=0;r<e.state.keyMaps.length;r++){let i=Fa(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Fa(t,e.options.extraKeys,n,e)||Fa(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&un(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(xe(n),kr(e)),!!i}function io(e,t){let n=ja(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?no(e,"Shift-"+n,t,(t=>eo(e,t,!0)))||no(e,n,t,(t=>{if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return eo(e,t)})):no(e,n,t,(t=>eo(e,t))))}let ao,oo,so=null;function lo(e){let t=this;if(e.target&&e.target!=t.display.input.getField())return;if(t.curOp.focus=A(),ye(t,e))return;c&&d<11&&27==e.keyCode&&(e.returnValue=!1);let n=e.keyCode;t.display.shift=16==n||e.shiftKey;let r=io(t,e);f&&(so=r?n:null,r||88!=n||Re||!(w?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),a&&!w&&!r&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){let t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(I(t,"CodeMirror-crosshair"),ve(document,"keyup",n),ve(document,"mouseover",n))}R(t,"CodeMirror-crosshair"),me(document,"keyup",n),me(document,"mouseover",n)}(t)}function co(e){16==e.keyCode&&(this.doc.sel.shift=!1),ye(this,e)}function uo(e){let t=this;if(e.target&&e.target!=t.display.input.getField())return;if(En(t.display,e)||ye(t,e)||e.ctrlKey&&!e.altKey||w&&e.metaKey)return;let n=e.keyCode,r=e.charCode;if(f&&n==so)return so=null,void xe(e);if(f&&(!e.which||e.which<10)&&io(t,e))return;let i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return no(e,"'"+n+"'",t,(t=>eo(e,t,!0)))}(t,e,i)||t.display.input.onKeyPress(e))}class po{constructor(e,t,n){this.time=e,this.pos=t,this.button=n}compare(e,t,n){return this.time+400>e&&0==it(t,this.pos)&&n==this.button}}function ho(e){let t=this,n=t.display;if(ye(t,e)||n.activeTouch&&n.input.supportsTouch())return;if(n.input.ensurePolled(),n.shift=e.shiftKey,En(n,e))return void(u||(n.scroller.draggable=!1,setTimeout((()=>n.scroller.draggable=!0),100)));if(go(t,e))return;let r=pr(t,e),i=Me(e),a=r?function(e,t){let n=+new Date;return oo&&oo.compare(n,e,t)?(ao=oo=null,"triple"):ao&&ao.compare(n,e,t)?(oo=new po(n,e,t),ao=null,"double"):(ao=new po(n,e,t),oo=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){let a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),a=(1==t?"Left":2==t?"Middle":"Right")+a,no(e,Wa(a,i),i,(t=>{if("string"==typeof t&&(t=Ya[t]),!t)return!1;let r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=j}finally{e.state.suppressEdits=!1}return r}))}(t,i,r,a,e)||(1==i?r?function(e,t,n,r){c?setTimeout(G(Er,e),0):e.curOp.focus=A();let i,a=function(e,t,n){let r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){let e=C?n.shiftKey&&n.metaKey:n.altKey;i.unit=e?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=w?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(w?n.altKey:n.ctrlKey)),i}(e,n,r),o=e.doc.sel;e.options.dragDrop&&$e&&!e.isReadOnly()&&"single"==n&&(i=o.contains(t))>-1&&(it((i=o.ranges[i]).from(),t)<0||t.xRel>0)&&(it(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){let i=e.display,a=!1,o=ti(e,(t=>{u&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Sr(e)),ve(i.wrapper.ownerDocument,"mouseup",o),ve(i.wrapper.ownerDocument,"mousemove",s),ve(i.scroller,"dragstart",l),ve(i.scroller,"drop",o),a||(xe(t),r.addNew||Ki(e.doc,n,null,null,r.extend),u&&!m||c&&9==d?setTimeout((()=>{i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),s=function(e){a=a||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},l=()=>a=!0;u&&(i.scroller.draggable=!0),e.state.draggingText=o,o.copy=!r.moveOnDrag,me(i.wrapper.ownerDocument,"mouseup",o),me(i.wrapper.ownerDocument,"mousemove",s),me(i.scroller,"dragstart",l),me(i.scroller,"drop",o),e.state.delayingBlurEvent=!0,setTimeout((()=>i.input.focus()),20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,a):function(e,t,n,r){c&&Sr(e);let i=e.display,a=e.doc;xe(t);let o,s,l=a.sel,d=l.ranges;if(r.addNew&&!r.extend?(s=a.sel.contains(n),o=s>-1?d[s]:new ki(n,n)):(o=a.sel.primary(),s=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(o=new ki(n,n)),n=pr(e,t,!0,!0),s=-1;else{let t=fo(e,n,r.unit);o=r.extend?qi(o,t.anchor,t.head,r.extend):t}r.addNew?-1==s?(s=d.length,Zi(a,Ei(e,d.concat([o]),s),{scroll:!1,origin:"*mouse"})):d.length>1&&d[s].empty()&&"char"==r.unit&&!r.extend?(Zi(a,Ei(e,d.slice(0,s).concat(d.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),l=a.sel):Qi(a,s,o,q):(s=0,Zi(a,new xi([o],0),q),l=a.sel);let u=n;let p=i.wrapper.getBoundingClientRect(),h=0;function f(t){let c=++h,d=pr(e,t,!0,"rectangle"==r.unit);if(d)if(0!=it(d,u)){e.curOp.focus=A(),function(t){if(0!=it(u,t))if(u=t,"rectangle"==r.unit){let r=[],i=e.options.tabSize,o=H(Je(a,n.line).text,n.ch,i),c=H(Je(a,t.line).text,t.ch,i),d=Math.min(o,c),u=Math.max(o,c);for(let o=Math.min(n.line,t.line),s=Math.min(e.lastLine(),Math.max(n.line,t.line));o<=s;o++){let e=Je(a,o).text,t=J(e,d,i);d==u?r.push(new ki(rt(o,t),rt(o,t))):e.length>t&&r.push(new ki(rt(o,t),rt(o,J(e,u,i))))}r.length||r.push(new ki(n,n)),Zi(a,Ei(e,l.ranges.slice(0,s).concat(r),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{let n,i=o,c=fo(e,t,r.unit),d=i.anchor;it(c.anchor,d)>0?(n=c.head,d=lt(i.from(),c.anchor)):(n=c.anchor,d=st(i.to(),c.head));let u=l.ranges.slice(0);u[s]=function(e,t){let{anchor:n,head:r}=t,i=Je(e.doc,n.line);if(0==it(n,r)&&n.sticky==r.sticky)return t;let a=he(i);if(!a)return t;let o=ue(a,n.ch,n.sticky),s=a[o];if(s.from!=n.ch&&s.to!=n.ch)return t;let l,c=o+(s.from==n.ch==(1!=s.level)?0:1);if(0==c||c==a.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{let e=ue(a,r.ch,r.sticky),t=e-o||(r.ch-n.ch)*(1==s.level?-1:1);l=e==c-1||e==c?t<0:t>0}let d=a[c+(l?-1:0)],u=l==(1==d.level),p=u?d.from:d.to,h=u?"after":"before";return n.ch==p&&n.sticky==h?t:new ki(new rt(n.line,p,h),r)}(e,new ki(dt(a,d),n)),Zi(a,Ei(e,u,s),q)}}(d);let p=$r(i,a);(d.line>=p.to||d.line<p.from)&&setTimeout(ti(e,(()=>{h==c&&f(t)})),150)}else{let n=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;n&&setTimeout(ti(e,(()=>{h==c&&(i.scroller.scrollTop+=n,f(t))})),50)}}function m(t){e.state.selectingText=!1,h=1/0,t&&(xe(t),i.input.focus()),ve(i.wrapper.ownerDocument,"mousemove",g),ve(i.wrapper.ownerDocument,"mouseup",v),a.history.lastSelOrigin=null}let g=ti(e,(e=>{0!==e.buttons&&Me(e)?f(e):m(e)})),v=ti(e,m);e.state.selectingText=v,me(i.wrapper.ownerDocument,"mousemove",g),me(i.wrapper.ownerDocument,"mouseup",v)}(e,r,t,a)}(t,r,a,e):Te(e)==n.scroller&&xe(e):2==i?(r&&Ki(t.doc,r),setTimeout((()=>n.input.focus()),20)):3==i&&(S?t.display.input.onContextMenu(e):Sr(t)))}function fo(e,t,n){if("char"==n)return new ki(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new ki(rt(t.line,0),dt(e.doc,rt(t.line+1,0)));let r=n(e,t);return new ki(r.from,r.to)}function mo(e,t,n,r){let i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&xe(t);let o=e.display,s=o.lineDiv.getBoundingClientRect();if(a>s.bottom||!we(e,n))return Ee(t);a-=s.top-o.viewOffset;for(let r=0;r<e.display.gutterSpecs.length;++r){let s=o.gutters.childNodes[r];if(s&&s.getBoundingClientRect().right>=i)return be(e,n,e,et(e.doc,a),e.display.gutterSpecs[r].className,t),Ee(t)}}function go(e,t){return mo(e,t,"gutterClick",!0)}function vo(e,t){En(e.display,t)||function(e,t){return!!we(e,"gutterContextMenu")&&mo(e,t,"gutterContextMenu",!1)}(e,t)||ye(e,t,"contextmenu")||S||e.display.input.onContextMenu(t)}function bo(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Vn(e)}let yo={toString:function(){return"CodeMirror.Init"}},_o={},wo={};function Co(e,t,n){if(!t!=!(n&&n!=yo)){let n=e.display.dragFunctions,r=t?me:ve;r(e.display.scroller,"dragstart",n.start),r(e.display.scroller,"dragenter",n.enter),r(e.display.scroller,"dragover",n.over),r(e.display.scroller,"dragleave",n.leave),r(e.display.scroller,"drop",n.drop)}}function xo(e){e.options.lineWrapping?(R(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(I(e.display.wrapper,"CodeMirror-wrap"),Kt(e)),ur(e),fr(e),Vn(e),setTimeout((()=>Fr(e)),100)}function ko(e,t){if(!(this instanceof ko))return new ko(e,t);this.options=t=t?z(t):{},z(_o,t,!1);let n=t.value;"string"==typeof n?n=new $a(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;let r=new ko.inputStyles[t.inputStyle](this),i=this.display=new vi(e,n,r,t);i.wrapper.CodeMirror=this,bo(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),jr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new F,keySeq:null,specialChars:null},t.autofocus&&!_&&i.input.focus(),c&&d<11&&setTimeout((()=>this.display.input.reset(!0)),20),function(e){let t=e.display;me(t.scroller,"mousedown",ti(e,ho)),me(t.scroller,"dblclick",c&&d<11?ti(e,(t=>{if(ye(e,t))return;let n=pr(e,t);if(!n||go(e,t)||En(e.display,t))return;xe(t);let r=e.findWordAt(n);Ki(e.doc,r.anchor,r.head)})):t=>ye(e,t)||xe(t)),me(t.scroller,"contextmenu",(t=>vo(e,t))),me(t.input.getField(),"contextmenu",(n=>{t.scroller.contains(n.target)||vo(e,n)}));let n,r={end:0};function i(){t.activeTouch&&(n=setTimeout((()=>t.activeTouch=null),1e3),r=t.activeTouch,r.end=+new Date)}function a(e,t){if(null==t.left)return!0;let n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}me(t.scroller,"touchstart",(i=>{if(!ye(e,i)&&!function(e){if(1!=e.touches.length)return!1;let t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!go(e,i)){t.input.ensurePolled(),clearTimeout(n);let e=+new Date;t.activeTouch={start:e,moved:!1,prev:e-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),me(t.scroller,"touchmove",(()=>{t.activeTouch&&(t.activeTouch.moved=!0)})),me(t.scroller,"touchend",(n=>{let r=t.activeTouch;if(r&&!En(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){let i,o=e.coordsChar(t.activeTouch,"page");i=!r.prev||a(r,r.prev)?new ki(o,o):!r.prev.prev||a(r,r.prev.prev)?e.findWordAt(o):new ki(rt(o.line,0),dt(e.doc,rt(o.line+1,0))),e.setSelection(i.anchor,i.head),e.focus(),xe(n)}i()})),me(t.scroller,"touchcancel",i),me(t.scroller,"scroll",(()=>{t.scroller.clientHeight&&(Nr(e,t.scroller.scrollTop),zr(e,t.scroller.scrollLeft,!0),be(e,"scroll",e))})),me(t.scroller,"mousewheel",(t=>Ci(e,t))),me(t.scroller,"DOMMouseScroll",(t=>Ci(e,t))),me(t.wrapper,"scroll",(()=>t.wrapper.scrollTop=t.wrapper.scrollLeft=0)),t.dragFunctions={enter:t=>{ye(e,t)||Se(t)},over:t=>{ye(e,t)||(function(e,t){let n=pr(e,t);if(!n)return;let r=document.createDocumentFragment();wr(e,n,r),e.display.dragCursor||(e.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),$(e.display.dragCursor,r)}(e,t),Se(t))},start:t=>function(e,t){if(c&&(!e.state.draggingText||+new Date-Pa<100))Se(t);else if(!ye(e,t)&&!En(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!m)){let n=P("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(e,t),drop:ti(e,Oa),leave:t=>{ye(e,t)||Ba(e)}};let o=t.input.getField();me(o,"keyup",(t=>co.call(e,t))),me(o,"keydown",ti(e,lo)),me(o,"keypress",ti(e,uo)),me(o,"focus",(t=>Tr(e,t))),me(o,"blur",(t=>Mr(e,t)))}(this),Ra||(function(){let e;me(window,"resize",(()=>{null==e&&(e=setTimeout((()=>{e=null,Aa(Da)}),100))})),me(window,"blur",(()=>Aa(Mr)))}(),Ra=!0),qr(this),this.curOp.forceUpdate=!0,Ri(this,n),t.autofocus&&!_||this.hasFocus()?setTimeout((()=>{this.hasFocus()&&!this.state.focused&&Tr(this)}),20):Mr(this);for(let e in wo)wo.hasOwnProperty(e)&&wo[e](this,t[e],yo);hi(this),t.finishInit&&t.finishInit(this);for(let e=0;e<So.length;++e)So[e](this);Kr(this),u&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(i.lineDiv).textRendering&&(i.lineDiv.style.textRendering="auto")}ko.defaults=_o,ko.optionHandlers=wo;const Eo=ko;let So=[];function To(e,t,n,r){let i,a=e.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?i=gt(e,t).state:n="prev");let o=e.options.tabSize,s=Je(a,t),l=H(s.text,null,o);s.stateAfter&&(s.stateAfter=null);let c,d=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(c=a.mode.indent(i,s.text.slice(d.length),s.text),c==j||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>a.first?H(Je(a,t-1).text,null,o):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);let u="",p=0;if(e.options.indentWithTabs)for(let e=Math.floor(c/o);e;--e)p+=o,u+="\t";if(p<c&&(u+=Y(c-p)),u!=d)return fa(a,u,rt(t,0),rt(t,d.length),"+input"),s.stateAfter=null,!0;for(let e=0;e<a.sel.ranges.length;e++){let n=a.sel.ranges[e];if(n.head.line==t&&n.head.ch<d.length){let n=rt(t,d.length);Qi(a,e,new ki(n,n));break}}}ko.defineInitHook=e=>So.push(e);let Mo=null;function Io(e){Mo=e}function Lo(e,t,n,r,i){let a=e.doc;e.display.shift=!1,r||(r=a.sel);let o=+new Date-200,s="paste"==i||e.state.pasteIncoming>o,l=Be(t),c=null;if(s&&r.ranges.length>1)if(Mo&&Mo.text.join("\n")==t){if(r.ranges.length%Mo.text.length==0){c=[];for(let e=0;e<Mo.text.length;e++)c.push(a.splitLines(Mo.text[e]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Z(l,(e=>[e])));let d=e.curOp.updateInput;for(let t=r.ranges.length-1;t>=0;t--){let d=r.ranges[t],u=d.from(),p=d.to();d.empty()&&(n&&n>0?u=rt(u.line,u.ch-n):e.state.overwrite&&!s?p=rt(p.line,Math.min(Je(a,p.line).text.length,p.ch+X(l).length)):s&&Mo&&Mo.lineWise&&Mo.text.join("\n")==l.join("\n")&&(u=p=rt(u.line,0)));let h={from:u,to:p,text:c?c[t%c.length]:l,origin:i||(s?"paste":e.state.cutIncoming>o?"cut":"+input")};ca(e.doc,h),un(e,"inputRead",e,h)}t&&!s&&Po(e,t),Br(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function $o(e,t){let n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||ei(t,(()=>Lo(t,n,0,null,"paste"))),!0}function Po(e,t){if(!e.options.electricChars||!e.options.smartIndent)return;let n=e.doc.sel;for(let r=n.ranges.length-1;r>=0;r--){let i=n.ranges[r];if(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)continue;let a=e.getModeAt(i.head),o=!1;if(a.electricChars){for(let n=0;n<a.electricChars.length;n++)if(t.indexOf(a.electricChars.charAt(n))>-1){o=To(e,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Je(e.doc,i.head.line).text.slice(0,i.head.ch))&&(o=To(e,i.head.line,"smart"));o&&un(e,"electricInput",e,i.head.line)}}function Oo(e){let t=[],n=[];for(let r=0;r<e.doc.sel.ranges.length;r++){let i=e.doc.sel.ranges[r].head.line,a={anchor:rt(i,0),head:rt(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Bo(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Ao(){let e=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=P("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?e.style.width="1000px":e.setAttribute("wrap","off"),b&&(e.style.border="1px solid black"),Bo(e),t}function Ro(e,t,n,r,i){let a=t,o=n,s=Je(e,t.line),l=i&&"rtl"==e.direction?-n:n;function c(a){let o;if("codepoint"==r){let e=s.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(e))o=null;else{let r=n>0?e>=55296&&e<56320:e>=56320&&e<57343;o=new rt(t.line,Math.max(0,Math.min(s.text.length,t.ch+n*(r?2:1))),-n)}}else o=i?function(e,t,n,r){let i=he(t,e.doc.direction);if(!i)return Ja(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");let a=ue(i,n.ch,n.sticky),o=i[a];if("ltr"==e.doc.direction&&o.level%2==0&&(r>0?o.to>n.ch:o.from<n.ch))return Ja(t,n,r);let s,l=(e,n)=>Ka(t,e instanceof rt?e.ch:e,n),c=n=>e.options.lineWrapping?(s=s||An(e,t),tr(e,t,s,n)):{begin:0,end:t.text.length},d=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==o.level){let e=1==o.level==r<0,t=l(n,e?1:-1);if(null!=t&&(e?t<=o.to&&t<=d.end:t>=o.from&&t>=d.begin)){let r=e?"before":"after";return new rt(n.line,t,r)}}let u=(e,t,r)=>{let a=(e,t)=>t?new rt(n.line,l(e,1),"before"):new rt(n.line,e,"after");for(;e>=0&&e<i.length;e+=t){let n=i[e],o=t>0==(1!=n.level),s=o?r.begin:l(r.end,-1);if(n.from<=s&&s<n.to)return a(s,o);if(s=o?n.from:l(n.to,-1),r.begin<=s&&s<r.end)return a(s,o)}},p=u(a+r,r,d);if(p)return p;let h=r>0?d.end:l(d.begin,-1);return null==h||r>0&&h==t.text.length||(p=u(r>0?0:i.length-1,r,c(h)),!p)?null:p}(e.cm,s,t,n):Ja(s,t,n);if(null==o){if(a||!function(){let n=t.line+l;return!(n<e.first||n>=e.first+e.size)&&(t=new rt(n,t.ch,t.sticky),s=Je(e,n))}())return!1;t=Qa(i,e.cm,s,t.line,l)}else t=o;return!0}if("char"==r||"codepoint"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r){let i=null,a="group"==r,o=e.cm&&e.cm.getHelper(t,"wordChars");for(let e=!0;!(n<0)||c(!e);e=!1){let r=s.text.charAt(t.ch)||"\n",l=ie(r,o)?"w":a&&"\n"==r?"n":!a||/\s/.test(r)?null:"p";if(!a||e||l||(l="s"),i&&i!=l){n<0&&(n=1,c(),t.sticky="after");break}if(l&&(i=l),n>0&&!c(!e))break}}let d=aa(e,t,a,o,!0);return at(a,d)&&(d.hitSide=!0),d}function Do(e,t,n,r){let i,a,o=e.doc,s=t.left;if("page"==r){let r=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),a=Math.max(r-.5*or(e.display),3);i=(n>0?t.bottom:t.top)+n*a}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;a=Zn(e,s,i),a.outside;){if(n<0?i<=0:i>=o.height){a.hitSide=!0;break}i+=5*n}return a}class No{constructor(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new F,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}init(e){let t=this,n=t.cm,r=t.div=e.lineDiv;function i(e){for(let t=e.target;t;t=t.parentNode){if(t==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function a(e){if(!i(e)||ye(n,e))return;if(n.somethingSelected())Io({lineWise:!1,text:n.getSelections()}),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;{let t=Oo(n);Io({lineWise:!0,text:t.text}),"cut"==e.type&&n.operation((()=>{n.setSelections(t.ranges,0,U),n.replaceSelection("",null,"cut")}))}}if(e.clipboardData){e.clipboardData.clearData();let t=Mo.text.join("\n");if(e.clipboardData.setData("Text",t),e.clipboardData.getData("Text")==t)return void e.preventDefault()}let a=Ao(),o=a.firstChild;n.display.lineSpace.insertBefore(a,n.display.lineSpace.firstChild),o.value=Mo.text.join("\n");let s=A();N(o),setTimeout((()=>{n.display.lineSpace.removeChild(a),s.focus(),s==r&&t.showPrimarySelection()}),50)}r.contentEditable=!0,Bo(r,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),me(r,"paste",(e=>{!i(e)||ye(n,e)||$o(e,n)||d<=11&&setTimeout(ti(n,(()=>this.updateFromDOM())),20)})),me(r,"compositionstart",(e=>{this.composing={data:e.data,done:!1}})),me(r,"compositionupdate",(e=>{this.composing||(this.composing={data:e.data,done:!1})})),me(r,"compositionend",(e=>{this.composing&&(e.data!=this.composing.data&&this.readFromDOMSoon(),this.composing.done=!0)})),me(r,"touchstart",(()=>t.forceCompositionEnd())),me(r,"input",(()=>{this.composing||this.readFromDOMSoon()})),me(r,"copy",a),me(r,"cut",a)}screenReaderLabelChanged(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")}prepareSelection(){let e=_r(this.cm,!1);return e.focus=A()==this.div,e}showSelection(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))}getSelection(){return this.cm.display.wrapper.ownerDocument.getSelection()}showPrimarySelection(){let e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)return void e.removeAllRanges();let o=Ho(t,e.anchorNode,e.anchorOffset),s=Ho(t,e.focusNode,e.focusOffset);if(o&&!o.bad&&s&&!s.bad&&0==it(lt(o,s),r)&&0==it(st(o,s),i))return;let l=t.display.view,c=r.line>=t.display.viewFrom&&Go(t,r)||{node:l[0].measure.map[2],offset:0},d=i.line<t.display.viewTo&&Go(t,i);if(!d){let e=l[l.length-1].measure,t=e.maps?e.maps[e.maps.length-1]:e.map;d={node:t[t.length-1],offset:t[t.length-2]-t[t.length-3]}}if(!c||!d)return void e.removeAllRanges();let u,p=e.rangeCount&&e.getRangeAt(0);try{u=M(c.node,c.offset,d.offset,d.node)}catch(e){}u&&(!a&&t.state.focused?(e.collapse(c.node,c.offset),u.collapsed||(e.removeAllRanges(),e.addRange(u))):(e.removeAllRanges(),e.addRange(u)),p&&null==e.anchorNode?e.addRange(p):a&&this.startGracePeriod()),this.rememberSelection()}startGracePeriod(){clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((()=>{this.gracePeriod=!1,this.selectionChanged()&&this.cm.operation((()=>this.cm.curOp.selectionChanged=!0))}),20)}showMultipleSelections(e){$(this.cm.display.cursorDiv,e.cursors),$(this.cm.display.selectionDiv,e.selection)}rememberSelection(){let e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset}selectionInEditor(){let e=this.getSelection();if(!e.rangeCount)return!1;let t=e.getRangeAt(0).commonAncestorContainer;return B(this.div,t)}focus(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&A()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())}blur(){this.div.blur()}getField(){return this.div}supportsTouch(){return!0}receivedFocus(){let e=this;this.selectionInEditor()?this.pollSelection():ei(this.cm,(()=>e.cm.curOp.selectionChanged=!0)),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))}selectionChanged(){let e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset}pollSelection(){if(null!=this.readDOMTimeout||this.gracePeriod||!this.selectionChanged())return;let e=this.getSelection(),t=this.cm;if(y&&h&&this.cm.display.gutterSpecs.length&&function(e){for(let t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(this.composing)return;this.rememberSelection();let n=Ho(t,e.anchorNode,e.anchorOffset),r=Ho(t,e.focusNode,e.focusOffset);n&&r&&ei(t,(()=>{Zi(t.doc,Si(n,r),U),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}pollContent(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);let e,t,n,r=this.cm,i=r.display,a=r.doc.sel.primary(),o=a.from(),s=a.to();if(0==o.ch&&o.line>r.firstLine()&&(o=rt(o.line-1,Je(r.doc,o.line-1).length)),s.ch==Je(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=rt(s.line+1,0)),o.line<i.viewFrom||s.line>i.viewTo-1)return!1;o.line==i.viewFrom||0==(e=hr(r,o.line))?(t=Ze(i.view[0].line),n=i.view[0].node):(t=Ze(i.view[e].line),n=i.view[e-1].node.nextSibling);let l,c,d=hr(r,s.line);if(d==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=Ze(i.view[d+1].line)-1,c=i.view[d+1].node.previousSibling),!n)return!1;let u=r.doc.splitLines(function(e,t,n,r,i){let a="",o=!1,s=e.doc.lineSeparator(),l=!1;function c(){o&&(a+=s,l&&(a+=s),o=l=!1)}function d(e){e&&(c(),a+=e)}function u(t){if(1==t.nodeType){let a=t.getAttribute("cm-text");if(a)return void d(a);let p,h=t.getAttribute("cm-marker");if(h){let t=e.findMarks(rt(r,0),rt(i+1,0),(n=+h,e=>e.id==n));return void(t.length&&(p=t[0].find(0))&&d(Qe(e.doc,p.from,p.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;let f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&c();for(let e=0;e<t.childNodes.length;e++)u(t.childNodes[e]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),f&&(o=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var n}for(;u(t),t!=n;)t=t.nextSibling,l=!1;return a}(r,n,c,t,l)),p=Qe(r.doc,rt(t,0),rt(l,Je(r.doc,l).text.length));for(;u.length>1&&p.length>1;)if(X(u)==X(p))u.pop(),p.pop(),l--;else{if(u[0]!=p[0])break;u.shift(),p.shift(),t++}let h=0,f=0,m=u[0],g=p[0],v=Math.min(m.length,g.length);for(;h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;let b=X(u),y=X(p),_=Math.min(b.length-(1==u.length?h:0),y.length-(1==p.length?h:0));for(;f<_&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;if(1==u.length&&1==p.length&&t==o.line)for(;h&&h>o.ch&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)h--,f++;u[u.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),u[0]=u[0].slice(h).replace(/\u200b+$/,"");let w=rt(t,h),C=rt(l,p.length?X(p).length-f:0);return u.length>1||u[0]||it(w,C)?(fa(r.doc,u,w,C,"+input"),!0):void 0}ensurePolled(){this.forceCompositionEnd()}reset(){this.forceCompositionEnd()}forceCompositionEnd(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())}readFromDOMSoon(){null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((()=>{if(this.readDOMTimeout=null,this.composing){if(!this.composing.done)return;this.composing=null}this.updateFromDOM()}),80))}updateFromDOM(){!this.cm.isReadOnly()&&this.pollContent()||ei(this.cm,(()=>fr(this.cm)))}setUneditable(e){e.contentEditable="false"}onKeyPress(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||ti(this.cm,Lo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))}readOnlyChanged(e){this.div.contentEditable=String("nocursor"!=e)}onContextMenu(){}resetPosition(){}}function Go(e,t){let n=Bn(e,t.line);if(!n||n.hidden)return null;let r=Je(e.doc,t.line),i=Pn(n,r,t.line),a=he(r,e.doc.direction),o="left";a&&(o=ue(a,t.ch)%2?"right":"left");let s=Gn(i.map,t.ch,o);return s.offset="right"==s.collapse?s.end:s.start,s}function zo(e,t){return t&&(e.bad=!0),e}function Ho(e,t,n){let r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[n],!r)return zo(e.clipPos(rt(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(let i=0;i<e.display.view.length;i++){let a=e.display.view[i];if(a.node==r)return Fo(a,t,n)}}function Fo(e,t,n){let r=e.text.firstChild,i=!1;if(!t||!B(r,t))return zo(rt(Ze(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){let t=e.rest?X(e.rest):e.line;return zo(rt(Ze(t),t.text.length),i)}let a=3==t.nodeType?t:null,o=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));o.parentNode!=r;)o=o.parentNode;let s=e.measure,l=s.maps;function c(t,n,r){for(let i=-1;i<(l?l.length:0);i++){let a=i<0?s.map:l[i];for(let o=0;o<a.length;o+=3){let s=a[o+2];if(s==t||s==n){let n=Ze(i<0?e.line:e.rest[i]),l=a[o]+r;return(r<0||s!=t)&&(l=a[o+(r?1:0)]),rt(n,l)}}}}let d=c(a,o,n);if(d)return zo(d,i);for(let e=o.nextSibling,t=a?a.nodeValue.length-n:0;e;e=e.nextSibling){if(d=c(e,e.firstChild,0),d)return zo(rt(d.line,d.ch-t),i);t+=e.textContent.length}for(let e=o.previousSibling,t=n;e;e=e.previousSibling){if(d=c(e,e.firstChild,-1),d)return zo(rt(d.line,d.ch+t),i);t+=e.textContent.length}}No.prototype.needsContentAttribute=!0;class Vo{constructor(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new F,this.hasSelection=!1,this.composing=null}init(e){let t=this,n=this.cm;this.createField(e);const r=this.textarea;function i(e){if(!ye(n,e)){if(n.somethingSelected())Io({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;{let i=Oo(n);Io({lineWise:!0,text:i.text}),"cut"==e.type?n.setSelections(i.ranges,null,U):(t.prevInput="",r.value=i.text.join("\n"),N(r))}}"cut"==e.type&&(n.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),b&&(r.style.width="0px"),me(r,"input",(()=>{c&&d>=9&&this.hasSelection&&(this.hasSelection=null),t.poll()})),me(r,"paste",(e=>{ye(n,e)||$o(e,n)||(n.state.pasteIncoming=+new Date,t.fastPoll())})),me(r,"cut",i),me(r,"copy",i),me(e.scroller,"paste",(i=>{if(En(e,i)||ye(n,i))return;if(!r.dispatchEvent)return n.state.pasteIncoming=+new Date,void t.focus();const a=new Event("paste");a.clipboardData=i.clipboardData,r.dispatchEvent(a)})),me(e.lineSpace,"selectstart",(t=>{En(e,t)||xe(t)})),me(r,"compositionstart",(()=>{let e=n.getCursor("from");t.composing&&t.composing.range.clear(),t.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}})),me(r,"compositionend",(()=>{t.composing&&(t.poll(),t.composing.range.clear(),t.composing=null)}))}createField(e){this.wrapper=Ao(),this.textarea=this.wrapper.firstChild}screenReaderLabelChanged(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")}prepareSelection(){let e=this.cm,t=e.display,n=e.doc,r=_r(e);if(e.options.moveInputWithCursor){let i=Qn(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+o.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+o.left-a.left))}return r}showSelection(e){let t=this.cm.display;$(t.cursorDiv,e.cursors),$(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")}reset(e){if(this.contextMenuPending||this.composing)return;let t=this.cm;if(t.somethingSelected()){this.prevInput="";let e=t.getSelection();this.textarea.value=e,t.state.focused&&N(this.textarea),c&&d>=9&&(this.hasSelection=e)}else e||(this.prevInput=this.textarea.value="",c&&d>=9&&(this.hasSelection=null))}getField(){return this.textarea}supportsTouch(){return!1}focus(){if("nocursor"!=this.cm.options.readOnly&&(!_||A()!=this.textarea))try{this.textarea.focus()}catch(e){}}blur(){this.textarea.blur()}resetPosition(){this.wrapper.style.top=this.wrapper.style.left=0}receivedFocus(){this.slowPoll()}slowPoll(){this.pollingFast||this.polling.set(this.cm.options.pollInterval,(()=>{this.poll(),this.cm.state.focused&&this.slowPoll()}))}fastPoll(){let e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))}poll(){let e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||Ae(t)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;let r=t.value;if(r==n&&!e.somethingSelected())return!1;if(c&&d>=9&&this.hasSelection===r||w&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){let e=r.charCodeAt(0);if(8203!=e||n||(n="​"),8666==e)return this.reset(),this.cm.execCommand("undo")}let i=0,a=Math.min(n.length,r.length);for(;i<a&&n.charCodeAt(i)==r.charCodeAt(i);)++i;return ei(e,(()=>{Lo(e,r.slice(i),n.length-i,null,this.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?t.value=this.prevInput="":this.prevInput=r,this.composing&&(this.composing.range.clear(),this.composing.range=e.markText(this.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0}ensurePolled(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)}onKeyPress(){c&&d>=9&&(this.hasSelection=null),this.fastPoll()}onContextMenu(e){let t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();let a=pr(n,e),o=r.scroller.scrollTop;if(!a||f)return;n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&ti(n,Zi)(n.doc,Si(a),U);let s,l=i.style.cssText,p=t.wrapper.style.cssText,h=t.wrapper.offsetParent.getBoundingClientRect();function m(){if(null!=i.selectionStart){let e=n.somethingSelected(),a="​"+(e?i.value:"");i.value="⇚",i.value=a,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=a.length,r.selForContextMenu=n.doc.sel}}function g(){if(t.contextMenuPending==g&&(t.contextMenuPending=!1,t.wrapper.style.cssText=p,i.style.cssText=l,c&&d<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=o),null!=i.selectionStart)){(!c||c&&d<9)&&m();let e=0,a=()=>{r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?ti(n,sa)(n):e++<10?r.detectingSelectAll=setTimeout(a,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(a,200)}}if(t.wrapper.style.cssText="position: static",i.style.cssText=`position: absolute; width: 30px; height: 30px;\n      top: ${e.clientY-h.top-5}px; left: ${e.clientX-h.left-5}px;\n      z-index: 1000; background: ${c?"rgba(255, 255, 255, .05)":"transparent"};\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,u&&(s=window.scrollY),r.input.focus(),u&&window.scrollTo(null,s),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=g,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),c&&d>=9&&m(),S){Se(e);let t=()=>{ve(window,"mouseup",t),setTimeout(g,20)};me(window,"mouseup",t)}else setTimeout(g,50)}readOnlyChanged(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e}setUneditable(){}}Vo.prototype.needsContentAttribute=!1,function(e){let t=e.optionHandlers;function n(n,r,i,a){e.defaults[n]=r,i&&(t[n]=a?(e,t,n)=>{n!=yo&&i(e,t,n)}:i)}e.defineOption=n,e.Init=yo,n("value","",((e,t)=>e.setValue(t)),!0),n("mode",null,((e,t)=>{e.doc.modeOption=t,$i(e)}),!0),n("indentUnit",2,$i,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(e=>{Pi(e),Vn(e),fr(e)}),!0),n("lineSeparator",null,((e,t)=>{if(e.doc.lineSep=t,!t)return;let n=[],r=e.doc.first;e.doc.iter((e=>{for(let i=0;;){let a=e.text.indexOf(t,i);if(-1==a)break;i=a+t.length,n.push(rt(r,a))}r++}));for(let r=n.length-1;r>=0;r--)fa(e.doc,t,n[r],rt(n[r].line,n[r].ch+t.length))})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,((e,t,n)=>{e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=yo&&e.refresh()})),n("specialCharPlaceholder",tn,(e=>e.refresh()),!0),n("electricChars",!0),n("inputStyle",_?"contenteditable":"textarea",(()=>{throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,((e,t)=>e.getInputField().spellcheck=t),!0),n("autocorrect",!1,((e,t)=>e.getInputField().autocorrect=t),!0),n("autocapitalize",!1,((e,t)=>e.getInputField().autocapitalize=t),!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",(e=>{bo(e),gi(e)}),!0),n("keyMap","default",((e,t,n)=>{let r=Ua(t),i=n!=yo&&Ua(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,xo,!0),n("gutters",[],((e,t)=>{e.display.gutterSpecs=fi(t,e.options.lineNumbers),gi(e)}),!0),n("fixedGutter",!0,((e,t)=>{e.display.gutters.style.left=t?cr(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(e=>Fr(e)),!0),n("scrollbarStyle","native",(e=>{jr(e),Fr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,((e,t)=>{e.display.gutterSpecs=fi(e.options.gutters,t),gi(e)}),!0),n("firstLineNumber",1,gi,!0),n("lineNumberFormatter",(e=>e),gi,!0),n("showCursorWhenSelecting",!1,yr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,((e,t)=>{"nocursor"==t&&(Mr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,((e,t)=>{t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,((e,t)=>{t||e.display.input.reset()}),!0),n("dragDrop",!0,Co),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,yr,!0),n("singleCursorHeightPerLine",!0,yr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Pi,!0),n("addModeClass",!1,Pi,!0),n("pollInterval",100),n("undoDepth",200,((e,t)=>e.doc.history.undoDepth=t)),n("historyEventDelay",1250),n("viewportMargin",10,(e=>e.refresh()),!0),n("maxHighlightLength",1e4,Pi,!0),n("moveInputWithCursor",!0,((e,t)=>{t||e.display.input.resetPosition()})),n("tabindex",null,((e,t)=>e.display.input.getField().tabIndex=t||"")),n("autofocus",null),n("direction","ltr",((e,t)=>e.doc.setDirection(t)),!0),n("phrases",null)}(ko),function(e){let t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){let r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&ti(this,t[e])(this,n,i),be(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ua(e))},removeKeyMap:function(e){let t=this.state.keyMaps;for(let n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:ni((function(t,n){let r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){let r=0,i=n(t);for(;r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(e=>e.priority)),this.state.modeGen++,fr(this)})),removeOverlay:ni((function(e){let t=this.state.overlays;for(let n=0;n<t.length;++n){let r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void fr(this)}})),indentLine:ni((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),tt(this.doc,e)&&To(this,e,t,n)})),indentSelection:ni((function(e){let t=this.doc.sel.ranges,n=-1;for(let r=0;r<t.length;r++){let i=t[r];if(i.empty())i.head.line>n&&(To(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Br(this));else{let a=i.from(),o=i.to(),s=Math.max(n,a.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(let t=s;t<n;++t)To(this,t,e);let l=this.doc.sel.ranges;0==a.ch&&t.length==l.length&&l[r].from().ch>0&&Qi(this.doc,r,new ki(a,l[r].to()),U)}}})),getTokenAt:function(e,t){return wt(this,e,t)},getLineTokens:function(e,t){return wt(this,rt(e),t,!0)},getTokenTypeAt:function(e){e=dt(this.doc,e);let t,n=mt(this,Je(this.doc,e.line)),r=0,i=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){let e=r+i>>1;if((e?n[2*e-1]:0)>=a)i=e;else{if(!(n[2*e+1]<a)){t=n[2*e+2];break}r=e+1}}let o=t?t.indexOf("overlay "):-1;return o<0?t:0==o?null:t.slice(0,o-1)},getModeAt:function(t){let n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){let r=[];if(!n.hasOwnProperty(t))return r;let i=n[t],a=this.getModeAt(e);if("string"==typeof a[t])i[a[t]]&&r.push(i[a[t]]);else if(a[t])for(let e=0;e<a[t].length;e++){let n=i[a[t][e]];n&&r.push(n)}else a.helperType&&i[a.helperType]?r.push(i[a.helperType]):i[a.name]&&r.push(i[a.name]);for(let e=0;e<i._global.length;e++){let t=i._global[e];t.pred(a,this)&&-1==V(r,t.val)&&r.push(t.val)}return r},getStateAfter:function(e,t){let n=this.doc;return gt(this,(e=ct(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){let n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?dt(this.doc,e):e?r.from():r.to(),Qn(this,n,t||"page")},charCoords:function(e,t){return Jn(this,dt(this.doc,e),t||"page")},coordsChar:function(e,t){return Zn(this,(e=Kn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Kn(this,{top:e,left:0},t||"page").top,et(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){let r,i=!1;if("number"==typeof e){let t=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>t&&(e=t,i=!0),r=Je(this.doc,e)}else r=e;return qn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ut(r):0)},defaultTextHeight:function(){return or(this.display)},defaultCharWidth:function(){return sr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){let a=this.display,o=(e=Qn(this,dt(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==r)o=e.top;else if("above"==r||"near"==r){let n=Math.max(a.wrapper.clientHeight,this.doc.height),i=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>n)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=n&&(o=e.bottom),s+t.offsetWidth>i&&(s=i-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==i?(s=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&function(e,t){let n=Pr(e,t);null!=n.scrollTop&&Nr(e,n.scrollTop),null!=n.scrollLeft&&zr(e,n.scrollLeft)}(this,{left:s,top:o,right:s+t.offsetWidth,bottom:o+t.offsetHeight})},triggerOnKeyDown:ni(lo),triggerOnKeyPress:ni(uo),triggerOnKeyUp:co,triggerOnMouseDown:ni(ho),execCommand:function(e){if(Ya.hasOwnProperty(e))return Ya[e].call(null,this)},triggerElectric:ni((function(e){Po(this,e)})),findPosH:function(e,t,n,r){let i=1;t<0&&(i=-1,t=-t);let a=dt(this.doc,e);for(let e=0;e<t&&(a=Ro(this.doc,a,i,n,r),!a.hitSide);++e);return a},moveH:ni((function(e,t){this.extendSelectionsBy((n=>this.display.shift||this.doc.extend||n.empty()?Ro(this.doc,n.head,e,t,this.options.rtlMoveVisually):e<0?n.from():n.to()),K)})),deleteH:ni((function(e,t){let n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):qa(this,(n=>{let i=Ro(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(e,t,n,r){let i=1,a=r;t<0&&(i=-1,t=-t);let o=dt(this.doc,e);for(let e=0;e<t;++e){let e=Qn(this,o,"div");if(null==a?a=e.left:e.left=a,o=Do(this,e,i,n),o.hitSide)break}return o},moveV:ni((function(e,t){let n=this.doc,r=[],i=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy((a=>{if(i)return e<0?a.from():a.to();let o=Qn(this,a.head,"div");null!=a.goalColumn&&(o.left=a.goalColumn),r.push(o.left);let s=Do(this,o,e,t);return"page"==t&&a==n.sel.primary()&&Or(this,Jn(this,s,"div").top-o.top),s}),K),r.length)for(let e=0;e<n.sel.ranges.length;e++)n.sel.ranges[e].goalColumn=r[e]})),findWordAt:function(e){let t=Je(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){let i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;let a=t.charAt(n),o=ie(a,i)?e=>ie(e,i):/\s/.test(a)?e=>/\s/.test(e):e=>!/\s/.test(e)&&!ie(e);for(;n>0&&o(t.charAt(n-1));)--n;for(;r<t.length&&o(t.charAt(r));)++r}return new ki(rt(e.line,n),rt(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):I(this.display.cursorDiv,"CodeMirror-overwrite"),be(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==A()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ni((function(e,t){Ar(this,e,t)})),getScrollInfo:function(){let e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-In(this)-this.display.barHeight,width:e.scrollWidth-In(this)-this.display.barWidth,clientHeight:$n(this),clientWidth:Ln(this)}},scrollIntoView:ni((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:rt(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Rr(e),e.curOp.scrollToPos=t}(this,e):Dr(this,e.from,e.to,e.margin)})),setSize:ni((function(e,t){let n=e=>"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e;null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Fn(this);let r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(e=>{if(e.widgets)for(let t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){mr(this,r,"widget");break}++r})),this.curOp.forceUpdate=!0,be(this,"refresh",this)})),operation:function(e){return ei(this,e)},startOperation:function(){return qr(this)},endOperation:function(){return Kr(this)},refresh:ni((function(){let e=this.display.cachedTextHeight;fr(this),this.curOp.forceUpdate=!0,Vn(this),Ar(this,this.doc.scrollLeft,this.doc.scrollTop),di(this.display),(null==e||Math.abs(e-or(this.display))>.5||this.options.lineWrapping)&&ur(this),be(this,"refresh",this)})),swapDoc:ni((function(e){let t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Ri(this,e),Vn(this),this.display.input.reset(),Ar(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,un(this,"swapDoc",this,t),t})),phrase:function(e){let t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ce(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,a){e.registerHelper(t,r,a),n[t]._global.push({pred:i,val:a})}}(ko);let Wo="iter insert remove copy getEditor constructor".split(" ");for(let e in $a.prototype)$a.prototype.hasOwnProperty(e)&&V(Wo,e)<0&&(ko.prototype[e]=function(e){return function(){return e.apply(this.doc,arguments)}}($a.prototype[e]));Ce($a),ko.inputStyles={textarea:Vo,contenteditable:No},ko.defineMode=function(e){ko.defaults.mode||"null"==e||(ko.defaults.mode=e),ze.apply(this,arguments)},ko.defineMIME=function(e,t){Ge[e]=t},ko.defineMode("null",(()=>({token:e=>e.skipToEnd()}))),ko.defineMIME("text/plain","null"),ko.defineExtension=(e,t)=>{ko.prototype[e]=t},ko.defineDocExtension=(e,t)=>{$a.prototype[e]=t},ko.fromTextArea=function(e,t){if((t=t?z(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){let n=A();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function n(){e.value=i.getValue()}let r;if(e.form&&(me(e.form,"submit",n),!t.leaveSubmitMethodAlone)){let t=e.form;r=t.submit;try{let e=t.submit=()=>{n(),t.submit=r,t.submit(),t.submit=e}}catch(e){}}t.finishInit=i=>{i.save=n,i.getTextArea=()=>e,i.toTextArea=()=>{i.toTextArea=isNaN,n(),e.parentNode.removeChild(i.getWrapperElement()),e.style.display="",e.form&&(ve(e.form,"submit",n),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";let i=ko((t=>e.parentNode.insertBefore(t,e.nextSibling)),t);return i},function(e){e.off=ve,e.on=me,e.wheelEventPixels=wi,e.Doc=$a,e.splitLines=Be,e.countColumn=H,e.findColumn=J,e.isWordChar=re,e.Pass=j,e.signal=be,e.Line=Jt,e.changeEnd=Ti,e.scrollbarModel=Wr,e.Pos=rt,e.cmpPos=it,e.modes=Ne,e.mimeModes=Ge,e.resolveMode=He,e.getMode=Fe,e.modeExtensions=Ve,e.extendMode=We,e.copyState=je,e.startState=qe,e.innerMode=Ue,e.commands=Ya,e.keyMap=Ga,e.keyName=ja,e.isModifierKey=Va,e.lookupKey=Fa,e.normalizeKeyMap=Ha,e.StringStream=Ke,e.SharedTextMarker=Sa,e.TextMarker=ka,e.LineWidget=wa,e.e_preventDefault=xe,e.e_stopPropagation=ke,e.e_stop=Se,e.addClass=R,e.contains=B,e.rmClass=I,e.keyNames=Na}(ko),ko.version="5.62.2";const jo=ko},3783:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$:()=>u,add:()=>pe,addClass:()=>p,animate:()=>ve,animationEnd:()=>$,append:()=>K,appendTo:()=>J,attr:()=>g,blur:()=>Ce,change:()=>Le,children:()=>ce,click:()=>we,closest:()=>se,css:()=>z,data:()=>y,dataset:()=>w,default:()=>Ve,detach:()=>ue,each:()=>H,empty:()=>he,eq:()=>q,filter:()=>F,find:()=>le,focus:()=>xe,focusin:()=>ke,focusout:()=>Ee,hasClass:()=>m,height:()=>B,hide:()=>D,html:()=>V,index:()=>U,insertAfter:()=>Z,insertBefore:()=>X,is:()=>j,keydown:()=>Te,keypress:()=>Me,keyup:()=>Se,mousedown:()=>$e,mouseenter:()=>Be,mouseleave:()=>Ae,mousemove:()=>Pe,mouseout:()=>Re,mouseover:()=>De,mouseup:()=>Oe,next:()=>ee,nextAll:()=>te,off:()=>T,offset:()=>R,on:()=>S,once:()=>M,outerHeight:()=>A,outerWidth:()=>O,parent:()=>ae,parents:()=>oe,prepend:()=>Q,prependTo:()=>Y,prev:()=>ne,prevAll:()=>re,prop:()=>b,remove:()=>de,removeAttr:()=>v,removeClass:()=>h,removeData:()=>_,resize:()=>He,scroll:()=>Fe,scrollLeft:()=>ge,scrollTo:()=>fe,scrollTop:()=>me,show:()=>N,siblings:()=>ie,stop:()=>be,styles:()=>G,submit:()=>Ie,text:()=>W,toggleClass:()=>f,touchend:()=>Ge,touchmove:()=>ze,touchstart:()=>Ne,transform:()=>k,transition:()=>E,transitionEnd:()=>L,trigger:()=>I,val:()=>C,value:()=>x,width:()=>P});var r=n(6156);function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function o(e,t,n){return o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i},o.apply(null,arguments)}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)},s(e)}var l=function(e){var t,n;function r(t){var n,r,i;return r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n=e.call.apply(e,[this].concat(t))||this),i=r.__proto__,Object.defineProperty(r,"__proto__",{get:function(){return i},set:function(e){i.__proto__=e}}),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(s(Array));function c(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,c(e)):t.push(e)})),t}function d(e,t){return Array.prototype.filter.call(e,t)}function u(e,t){var n=(0,r.Jj)(),i=(0,r.Me)(),a=[];if(!t&&e instanceof l)return e;if(!e)return new l(a);if("string"==typeof e){var o=e.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var s="div";0===o.indexOf("<li")&&(s="ul"),0===o.indexOf("<tr")&&(s="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(s="tr"),0===o.indexOf("<tbody")&&(s="table"),0===o.indexOf("<option")&&(s="select");var c=i.createElement(s);c.innerHTML=o;for(var d=0;d<c.childNodes.length;d+=1)a.push(c.childNodes[d])}else a=function(e,t){if("string"!=typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||i)}else if(e.nodeType||e===n||e===i)a.push(e);else if(Array.isArray(e)){if(e instanceof l)return e;a=e}return new l(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(a))}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=c(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,r)})),this}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=c(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,r)})),this}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=c(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=c(t.map((function(e){return e.split(" ")})));return d(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0}function g(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this}function v(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function b(e,t){if(1!==arguments.length||"string"!=typeof e){for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n][e]=t;else for(var r in e)this[n][r]=e[r];return this}return this[0]?this[0][e]:this}function y(e,t){var n;if(void 0===t){if(!(n=this[0]))return;return n.dom7ElementDataStorage&&e in n.dom7ElementDataStorage?n.dom7ElementDataStorage[e]:n.getAttribute("data-"+e)||void 0}for(var r=0;r<this.length;r+=1)(n=this[r]).dom7ElementDataStorage||(n.dom7ElementDataStorage={}),n.dom7ElementDataStorage[e]=t;return this}function _(e){for(var t=0;t<this.length;t+=1){var n=this[t];n.dom7ElementDataStorage&&n.dom7ElementDataStorage[e]&&(n.dom7ElementDataStorage[e]=null,delete n.dom7ElementDataStorage[e])}}function w(){var e=this[0];if(e){var t,n={};if(e.dataset)for(var r in e.dataset)n[r]=e.dataset[r];else for(var i=0;i<e.attributes.length;i+=1){var a=e.attributes[i];a.name.indexOf("data-")>=0&&(n[(t=a.name.split("data-")[1],t.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=a.value)}for(var o in n)"false"===n[o]?n[o]=!1:"true"===n[o]?n[o]=!0:parseFloat(n[o])===1*n[o]&&(n[o]*=1);return n}}function C(e){if(void 0===e){var t=this[0];if(!t)return;if(t.multiple&&"select"===t.nodeName.toLowerCase()){for(var n=[],r=0;r<t.selectedOptions.length;r+=1)n.push(t.selectedOptions[r].value);return n}return t.value}for(var i=0;i<this.length;i+=1){var a=this[i];if(Array.isArray(e)&&a.multiple&&"select"===a.nodeName.toLowerCase())for(var o=0;o<a.options.length;o+=1)a.options[o].selected=e.indexOf(a.options[o].value)>=0;else a.value=e}return this}function x(e){return this.val(e)}function k(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function E(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),u(t).is(i))a.apply(t,n);else for(var r=u(t).parents(),o=0;o<r.length;o+=1)u(r[o]).is(i)&&a.apply(r[o],n)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),a.apply(this,t)}"function"==typeof t[1]&&(r=t[0],a=t[1],o=t[2],i=void 0),o||(o=!1);for(var c,d=r.split(" "),p=0;p<this.length;p+=1){var h=this[p];if(i)for(c=0;c<d.length;c+=1){var f=d[c];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[f]||(h.dom7LiveListeners[f]=[]),h.dom7LiveListeners[f].push({listener:a,proxyListener:s}),h.addEventListener(f,s,o)}else for(c=0;c<d.length;c+=1){var m=d[c];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[m]||(h.dom7Listeners[m]=[]),h.dom7Listeners[m].push({listener:a,proxyListener:l}),h.addEventListener(m,l,o)}}return this}function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];"function"==typeof t[1]&&(r=t[0],a=t[1],o=t[2],i=void 0),o||(o=!1);for(var s=r.split(" "),l=0;l<s.length;l+=1)for(var c=s[l],d=0;d<this.length;d+=1){var u=this[d],p=void 0;if(!i&&u.dom7Listeners?p=u.dom7Listeners[c]:i&&u.dom7LiveListeners&&(p=u.dom7LiveListeners[c]),p&&p.length)for(var h=p.length-1;h>=0;h-=1){var f=p[h];a&&f.listener===a||a&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===a?(u.removeEventListener(c,f.proxyListener,o),p.splice(h,1)):a||(u.removeEventListener(c,f.proxyListener,o),p.splice(h,1))}}return this}function M(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],s=n[3];function l(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o.apply(this,n),e.off(i,a,l,s),l.dom7proxy&&delete l.dom7proxy}return"function"==typeof n[1]&&(i=n[0],o=n[1],s=n[2],a=void 0),l.dom7proxy=o,e.on(i,a,l,s)}function I(){for(var e=(0,r.Jj)(),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var a=n[0].split(" "),o=n[1],s=0;s<a.length;s+=1)for(var l=a[s],c=0;c<this.length;c+=1){var d=this[c];if(e.CustomEvent){var u=new e.CustomEvent(l,{detail:o,bubbles:!0,cancelable:!0});d.dom7EventData=n.filter((function(e,t){return t>0})),d.dispatchEvent(u),d.dom7EventData=[],delete d.dom7EventData}}return this}function L(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this}function $(e){var t=this;return e&&t.on("animationend",(function n(r){r.target===this&&(e.call(this,r),t.off("animationend",n))})),this}function P(){var e=(0,r.Jj)();return this[0]===e?e.innerWidth:this.length>0?parseFloat(this.css("width")):null}function O(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function B(){var e=(0,r.Jj)();return this[0]===e?e.innerHeight:this.length>0?parseFloat(this.css("height")):null}function A(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function R(){if(this.length>0){var e=(0,r.Jj)(),t=(0,r.Me)(),n=this[0],i=n.getBoundingClientRect(),a=t.body,o=n.clientTop||a.clientTop||0,s=n.clientLeft||a.clientLeft||0,l=n===e?e.scrollY:n.scrollTop,c=n===e?e.scrollX:n.scrollLeft;return{top:i.top+l-o,left:i.left+c-s}}return null}function D(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function N(){for(var e=(0,r.Jj)(),t=0;t<this.length;t+=1){var n=this[t];"none"===n.style.display&&(n.style.display=""),"none"===e.getComputedStyle(n,null).getPropertyValue("display")&&(n.style.display="block")}return this}function G(){var e=(0,r.Jj)();return this[0]?e.getComputedStyle(this[0],null):{}}function z(e,t){var n,i=(0,r.Jj)();if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n+=1)for(var a in e)this[n].style[a]=e[a];return this}if(this[0])return i.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this}function H(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this}function F(e){return u(d(this,e))}function V(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function W(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this}function j(e){var t,n,i=(0,r.Jj)(),a=(0,r.Me)(),o=this[0];if(!o||void 0===e)return!1;if("string"==typeof e){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(t=u(e),n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}if(e===a)return o===a;if(e===i)return o===i;if(e.nodeType||e instanceof l){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}return!1}function U(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}}function q(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return u([]);if(e<0){var n=t+e;return u(n<0?[]:[this[n]])}return u([this[e]])}function K(){for(var e,t=(0,r.Me)(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var i=0;i<this.length;i+=1)if("string"==typeof e){var a=t.createElement("div");for(a.innerHTML=e;a.firstChild;)this[i].appendChild(a.firstChild)}else if(e instanceof l)for(var o=0;o<e.length;o+=1)this[i].appendChild(e[o]);else this[i].appendChild(e)}return this}function J(e){return u(e).append(this),this}function Q(e){var t,n,i=(0,r.Me)();for(t=0;t<this.length;t+=1)if("string"==typeof e){var a=i.createElement("div");for(a.innerHTML=e,n=a.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(a.childNodes[n],this[t].childNodes[0])}else if(e instanceof l)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this}function Y(e){return u(e).prepend(this),this}function X(e){for(var t=u(e),n=0;n<this.length;n+=1)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0]);else if(t.length>1)for(var r=0;r<t.length;r+=1)t[r].parentNode.insertBefore(this[n].cloneNode(!0),t[r])}function Z(e){for(var t=u(e),n=0;n<this.length;n+=1)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0].nextSibling);else if(t.length>1)for(var r=0;r<t.length;r+=1)t[r].parentNode.insertBefore(this[n].cloneNode(!0),t[r].nextSibling)}function ee(e){return this.length>0?e?this[0].nextElementSibling&&u(this[0].nextElementSibling).is(e)?u([this[0].nextElementSibling]):u([]):this[0].nextElementSibling?u([this[0].nextElementSibling]):u([]):u([])}function te(e){var t=[],n=this[0];if(!n)return u([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?u(r).is(e)&&t.push(r):t.push(r),n=r}return u(t)}function ne(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&u(t.previousElementSibling).is(e)?u([t.previousElementSibling]):u([]):t.previousElementSibling?u([t.previousElementSibling]):u([])}return u([])}function re(e){var t=[],n=this[0];if(!n)return u([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?u(r).is(e)&&t.push(r):t.push(r),n=r}return u(t)}function ie(e){return this.nextAll(e).add(this.prevAll(e))}function ae(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?u(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return u(t)}function oe(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?u(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return u(t)}function se(e){var t=this;return void 0===e?u([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function le(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),i=0;i<r.length;i+=1)t.push(r[i]);return u(t)}function ce(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,i=0;i<r.length;i+=1)e&&!u(r[i]).is(e)||t.push(r[i]);return u(t)}function de(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}function ue(){return this.remove()}function pe(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(e=0;e<r.length;e+=1){var a=u(r[e]);for(t=0;t<a.length;t+=1)this.push(a[t])}return this}function he(){for(var e=0;e<this.length;e+=1){var t=this[e];if(1===t.nodeType){for(var n=0;n<t.childNodes.length;n+=1)t.childNodes[n].parentNode&&t.childNodes[n].parentNode.removeChild(t.childNodes[n]);t.textContent=""}}return this}function fe(){for(var e=(0,r.Jj)(),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n[0],o=n[1],s=n[2],l=n[3],c=n[4];return 4===n.length&&"function"==typeof l&&(c=l,a=n[0],o=n[1],s=n[2],c=n[3],l=n[4]),void 0===l&&(l="swing"),this.each((function(){var t,n,r,i,d,u,p,h,f=this,m=o>0||0===o,g=a>0||0===a;if(void 0===l&&(l="swing"),m&&(t=f.scrollTop,s||(f.scrollTop=o)),g&&(n=f.scrollLeft,s||(f.scrollLeft=a)),s){m&&(r=f.scrollHeight-f.offsetHeight,d=Math.max(Math.min(o,r),0)),g&&(i=f.scrollWidth-f.offsetWidth,u=Math.max(Math.min(a,i),0));var v=null;m&&d===t&&(m=!1),g&&u===n&&(g=!1),e.requestAnimationFrame((function r(i){void 0===i&&(i=(new Date).getTime()),null===v&&(v=i);var a,o=Math.max(Math.min((i-v)/s,1),0),b="linear"===l?o:.5-Math.cos(o*Math.PI)/2;m&&(p=t+b*(d-t)),g&&(h=n+b*(u-n)),m&&d>t&&p>=d&&(f.scrollTop=d,a=!0),m&&d<t&&p<=d&&(f.scrollTop=d,a=!0),g&&u>n&&h>=u&&(f.scrollLeft=u,a=!0),g&&u<n&&h<=u&&(f.scrollLeft=u,a=!0),a?c&&c():(m&&(f.scrollTop=p),g&&(f.scrollLeft=h),e.requestAnimationFrame(r))}))}}))}function me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];3===t.length&&"function"==typeof a&&(r=t[0],i=t[1],o=t[2],a=t[3]);var s=this;return void 0===r?s.length>0?s[0].scrollTop:null:s.scrollTo(void 0,r,i,a,o)}function ge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];3===t.length&&"function"==typeof a&&(r=t[0],i=t[1],o=t[2],a=t[3]);var s=this;return void 0===r?s.length>0?s[0].scrollLeft:null:s.scrollTo(r,void 0,i,a,o)}function ve(e,t){var n,i=(0,r.Jj)(),a=this,o={props:Object.assign({},e),params:Object.assign({duration:300,easing:"swing"},t),elements:a,animating:!1,que:[],easingProgress:function(e,t){return"swing"===e?.5-Math.cos(t*Math.PI)/2:"function"==typeof e?e(t):t},stop:function(){o.frameId&&i.cancelAnimationFrame(o.frameId),o.animating=!1,o.elements.each((function(e){delete e.dom7AnimateInstance})),o.que=[]},done:function(e){if(o.animating=!1,o.elements.each((function(e){delete e.dom7AnimateInstance})),e&&e(a),o.que.length>0){var t=o.que.shift();o.animate(t[0],t[1])}},animate:function(e,t){if(o.animating)return o.que.push([e,t]),o;var n=[];o.elements.each((function(t,r){var a,s,l,c,d;t.dom7AnimateInstance||(o.elements[r].dom7AnimateInstance=o),n[r]={container:t},Object.keys(e).forEach((function(o){a=i.getComputedStyle(t,null).getPropertyValue(o).replace(",","."),s=parseFloat(a),l=a.replace(s,""),c=parseFloat(e[o]),d=e[o]+l,n[r][o]={initialFullValue:a,initialValue:s,unit:l,finalValue:c,finalFullValue:d,currentValue:s}}))}));var r,s,l=null,c=0,d=0,u=!1;return o.animating=!0,o.frameId=i.requestAnimationFrame((function p(){var h,f;r=(new Date).getTime(),u||(u=!0,t.begin&&t.begin(a)),null===l&&(l=r),t.progress&&t.progress(a,Math.max(Math.min((r-l)/t.duration,1),0),l+t.duration-r<0?0:l+t.duration-r,l),n.forEach((function(i){var a=i;s||a.done||Object.keys(e).forEach((function(i){if(!s&&!a.done){h=Math.max(Math.min((r-l)/t.duration,1),0),f=o.easingProgress(t.easing,h);var u=a[i],p=u.initialValue,m=u.finalValue,g=u.unit;a[i].currentValue=p+f*(m-p);var v=a[i].currentValue;(m>p&&v>=m||m<p&&v<=m)&&(a.container.style[i]=m+g,(d+=1)===Object.keys(e).length&&(a.done=!0,c+=1),c===n.length&&(s=!0)),s?o.done(t.complete):a.container.style[i]=v+g}}))})),s||(o.frameId=i.requestAnimationFrame(p))})),o}};if(0===o.elements.length)return a;for(var s=0;s<o.elements.length;s+=1)o.elements[s].dom7AnimateInstance?n=o.elements[s].dom7AnimateInstance:o.elements[s].dom7AnimateInstance=o;return n||(n=o),"stop"===e?n.stop():n.animate(o.props,o.params),a}function be(){for(var e=this,t=0;t<e.length;t+=1)e[t].dom7AnimateInstance&&e[t].dom7AnimateInstance.stop()}u.fn=l.prototype;var ye="resize scroll".split(" ");function _e(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0===n[0]){for(var i=0;i<this.length;i+=1)ye.indexOf(e)<0&&(e in this[i]?this[i][e]():u(this[i]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}var we=_e("click"),Ce=_e("blur"),xe=_e("focus"),ke=_e("focusin"),Ee=_e("focusout"),Se=_e("keyup"),Te=_e("keydown"),Me=_e("keypress"),Ie=_e("submit"),Le=_e("change"),$e=_e("mousedown"),Pe=_e("mousemove"),Oe=_e("mouseup"),Be=_e("mouseenter"),Ae=_e("mouseleave"),Re=_e("mouseout"),De=_e("mouseover"),Ne=_e("touchstart"),Ge=_e("touchend"),ze=_e("touchmove"),He=_e("resize"),Fe=_e("scroll");const Ve=u},129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$jsx:()=>Nt,Component:()=>Ot,Dom7:()=>a,createStore:()=>Vt,default:()=>ll,getDevice:()=>N,getSupport:()=>D,request:()=>pe,utils:()=>r});var r={};n.r(r),n.d(r,{auroraPreloaderContent:()=>f,bindMethods:()=>A,cancelAnimationFrame:()=>b,colorHexToRgb:()=>M,colorHsbToHsl:()=>P,colorHslToHsb:()=>O,colorHslToRgb:()=>$,colorRgbToHex:()=>I,colorRgbToHsl:()=>L,colorThemeCSSProperties:()=>B,deleteProps:()=>g,eventNameToColonCase:()=>m,extend:()=>T,flattenArray:()=>R,getTranslate:()=>x,id:()=>c,iosPreloaderContent:()=>h,isObject:()=>E,mdPreloaderContent:()=>p,merge:()=>S,nextFrame:()=>_,nextTick:()=>y,now:()=>w,parseUrlQuery:()=>C,requestAnimationFrame:()=>v,serializeObject:()=>k,uniqueNumber:()=>l});var i=n(3783);Object.keys(i).forEach((function(e){"$"!==e&&(i.$.fn[e]=i[e])}));const a=i.$;var o=n(6156),s=0;function l(){return s+=1}function c(e,t){void 0===e&&(e="xxxxxxxxxx"),void 0===t&&(t="0123456789abcdef");var n=t.length;return e.replace(/x/g,(function(){return t[Math.floor(Math.random()*n)]}))}var d,u,p='\n  <span class="preloader-inner">\n    <svg viewBox="0 0 36 36">\n      <circle cx="18" cy="18" r="16"></circle>\n    </svg>\n  </span>\n'.trim(),h=('\n  <span class="preloader-inner">\n    '+[0,1,2,3,4,5,6,7].map((function(){return'<span class="preloader-inner-line"></span>'})).join("")+"\n  </span>\n").trim(),f='\n  <span class="preloader-inner">\n    <span class="preloader-inner-circle"></span>\n  </span>\n';function m(e){var t;return e.split("").map((function(e,n){return e.match(/[A-Z]/)&&0!==n&&!t?(t=!0,":"+e.toLowerCase()):e.toLowerCase()})).join("")}function g(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}function v(e){return(0,o.Jj)().requestAnimationFrame(e)}function b(e){return(0,o.Jj)().cancelAnimationFrame(e)}function y(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function _(e){return v((function(){v(e)}))}function w(){return Date.now()}function C(e){var t,n,r,i,a=(0,o.Jj)(),s={},l=e||a.location.href;if("string"==typeof l&&l.length)for(i=(n=(l=l.indexOf("?")>-1?l.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,t=0;t<i;t+=1)r=n[t].replace(/#\S+/g,"").split("="),s[decodeURIComponent(r[0])]=void 0===r[1]?void 0:decodeURIComponent(r.slice(1).join("="))||"";return s}function x(e,t){void 0===t&&(t="x");var n,r,i,a=(0,o.Jj)(),s=a.getComputedStyle(e,null);return a.WebKitCSSMatrix?((r=s.transform||s.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),i=new a.WebKitCSSMatrix("none"===r?"":r)):n=(i=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=a.WebKitCSSMatrix?i.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=a.WebKitCSSMatrix?i.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function k(e,t){if(void 0===t&&(t=[]),"string"==typeof e)return e;var n,r=[];function i(e){if(t.length>0){for(var n="",r=0;r<t.length;r+=1)n+=0===r?t[r]:"["+encodeURIComponent(t[r])+"]";return n+"["+encodeURIComponent(e)+"]"}return encodeURIComponent(e)}function a(e){return encodeURIComponent(e)}return Object.keys(e).forEach((function(o){var s;if(Array.isArray(e[o])){s=[];for(var l=0;l<e[o].length;l+=1)Array.isArray(e[o][l])||"object"!=typeof e[o][l]?s.push(i(o)+"[]="+a(e[o][l])):((n=t.slice()).push(o),n.push(String(l)),s.push(k(e[o][l],n)));s.length>0&&r.push(s.join("&"))}else null===e[o]||""===e[o]?r.push(i(o)+"="):"object"==typeof e[o]?((n=t.slice()).push(o),""!==(s=k(e[o],n))&&r.push(s)):void 0!==e[o]&&""!==e[o]?r.push(i(o)+"="+a(e[o])):""===e[o]&&r.push(i(o))})),r.join("&")}function E(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];t.splice(0,1);for(var i=t,a=0;a<i.length;a+=1){var o=t[a];if(null!=o)for(var s=Object.keys(Object(o)),l=0,c=s.length;l<c;l+=1){var d=s[l],u=Object.getOwnPropertyDescriptor(o,d);void 0!==u&&u.enumerable&&(r[d]=o[d])}}return r}function T(){for(var e,t,n=!0,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];"boolean"==typeof i[0]?(n=i[0],e=i[1],i.splice(0,2),t=i):(e=i[0],i.splice(0,1),t=i);for(var o=0;o<t.length;o+=1){var s=i[o];if(null!=s)for(var l=Object.keys(Object(s)),c=0,d=l.length;c<d;c+=1){var u=l[c],p=Object.getOwnPropertyDescriptor(s,u);void 0!==p&&p.enumerable&&(n?E(e[u])&&E(s[u])?T(e[u],s[u]):!E(e[u])&&E(s[u])?(e[u]={},T(e[u],s[u])):e[u]=s[u]:e[u]=s[u])}}return e}function M(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?n.slice(1).map((function(e){return parseInt(e,16)})):null}function I(e,t,n){var r=[e,t,n].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("");return"#"+r}function L(e,t,n){e/=255,t/=255,n/=255;var r,i=Math.max(e,t,n),a=Math.min(e,t,n),o=i-a;0===o?r=0:i===e?r=(t-n)/o%6:i===t?r=(n-e)/o+2:i===n&&(r=(e-t)/o+4);var s=(a+i)/2;return r<0&&(r=6+r),[60*r,0===o?0:o/(1-Math.abs(2*s-1)),s]}function $(e,t,n){var r,i=(1-Math.abs(2*n-1))*t,a=e/60,o=i*(1-Math.abs(a%2-1));Number.isNaN(e)||void 0===e?r=[0,0,0]:a<=1?r=[i,o,0]:a<=2?r=[o,i,0]:a<=3?r=[0,i,o]:a<=4?r=[0,o,i]:a<=5?r=[o,0,i]:a<=6&&(r=[i,0,o]);var s=n-i/2;return r.map((function(e){return Math.max(0,Math.min(255,Math.round(255*(e+s))))}))}function P(e,t,n){var r={h:e,s:0,l:0},i=t,a=n;return r.l=(2-i)*a/2,r.s=r.l&&r.l<1?i*a/(r.l<.5?2*r.l:2-2*r.l):r.s,[r.h,r.s,r.l]}function O(e,t,n){var r={h:e,s:0,b:0},i=n,a=t*(i<.5?i:1-i);return r.b=i+a,r.s=i>0?2*a/r.b:r.s,[r.h,r.s,r.b]}function B(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(1===r.length?t=M(e=r[0]):3===r.length&&(t=r,e=I.apply(void 0,t)),!t)return{};var a=L.apply(void 0,t),o=[a[0],a[1],Math.max(0,a[2]-.08)],s=[a[0],a[1],Math.max(0,a[2]+.08)],l=I.apply(void 0,$.apply(void 0,o)),c=I.apply(void 0,$.apply(void 0,s));return{"--f7-theme-color":e,"--f7-theme-color-rgb":t.join(", "),"--f7-theme-color-shade":l,"--f7-theme-color-tint":c}}function A(e,t){Object.keys(t).forEach((function(n){E(t[n])&&Object.keys(t[n]).forEach((function(r){"function"==typeof t[n][r]&&(t[n][r]=t[n][r].bind(e))})),e[n]=t[n]}))}function R(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){Array.isArray(t)?e.push.apply(e,R.apply(void 0,t)):e.push(t)})),e}function D(){return d||(d=function(){var e=(0,o.Jj)(),t=(0,o.Me)();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),intersectionObserver:"IntersectionObserver"in e}}()),d}function N(e,t){return void 0===e&&(e={}),u&&!t||(u=function(e){var t=(void 0===e?{}:e).userAgent,n=D(),r=(0,o.Jj)(),i=r.navigator.platform,a=t||r.navigator.userAgent,s={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!r.cordova&&!r.phonegap),phonegap:!(!r.cordova&&!r.phonegap),electron:!1,capacitor:!!r.Capacitor,nwjs:!1},l=r.screen.width,c=r.screen.height,d=a.match(/(Android);?[\s\/]+([\d.]+)?/),u=a.match(/(iPad).*OS\s([\d_]+)/),p=a.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&a.match(/(iPhone\sOS|iOS|iPhone;\sCPU\sOS)\s([\d_]+)/),f=a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0,m=a.indexOf("Edge/")>=0,g=a.indexOf("Gecko/")>=0&&a.indexOf("Firefox/")>=0,v="Win32"===i,b=a.toLowerCase().indexOf("electron")>=0,y="undefined"!=typeof nw&&"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.nw,_="MacIntel"===i;return!u&&_&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(l+"x"+c)>=0&&((u=a.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),_=!1),s.ie=f,s.edge=m,s.firefox=g,d&&(s.os="android",s.osVersion=d[2],s.android=!0,s.androidChrome=a.toLowerCase().indexOf("chrome")>=0),(u||h||p)&&(s.os="ios",s.ios=!0),h&&!p&&(s.osVersion=h[2].replace(/_/g,"."),s.iphone=!0),u&&(s.osVersion=u[2].replace(/_/g,"."),s.ipad=!0),p&&(s.osVersion=p[3]?p[3].replace(/_/g,"."):null,s.ipod=!0),s.ios&&s.osVersion&&a.indexOf("Version/")>=0&&"10"===s.osVersion.split(".")[0]&&(s.osVersion=a.toLowerCase().split("version/")[1].split(" ")[0]),s.webView=!(!(h||u||p)||!a.match(/.*AppleWebKit(?!.*Safari)/i)&&!r.navigator.standalone)||r.matchMedia&&r.matchMedia("(display-mode: standalone)").matches,s.webview=s.webView,s.standalone=s.webView,s.desktop=!(s.ios||s.android)||b||y,s.desktop&&(s.electron=b,s.nwjs=y,s.macos=_,s.windows=v,s.macos&&(s.os="macos"),s.windows&&(s.os="windows")),s.pixelRatio=r.devicePixelRatio||1,s.prefersColorScheme=function(){var e;return r.matchMedia&&r.matchMedia("(prefers-color-scheme: light)").matches&&(e="light"),r.matchMedia&&r.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),e},s}(e)),u}var G=function(){function e(e){void 0===e&&(e=[]),this.eventsParents=e,this.eventsListeners={}}var t=e.prototype;return t.on=function(e,t,n){var r=this;if("function"!=typeof t)return r;var i=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},t.once=function(e,t,n){var r=this;if("function"!=typeof t)return r;function i(){r.off(e,i),i.f7proxy&&delete i.f7proxy;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(r,a)}return i.f7proxy=t,r.on(e,i,n)},t.off=function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,i){(r===t||r.f7proxy&&r.f7proxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},t.emit=function(){var e,t,n,r,i=this;if(!i.eventsListeners)return i;for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];"string"==typeof o[0]||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),n=i,r=i.eventsParents):(e=o[0].events,t=o[0].data,n=o[0].context||i,r=o[0].local?[]:o[0].parents||i.eventsParents);var l=Array.isArray(e)?e:e.split(" "),c=l.map((function(e){return e.replace("local::","")})),d=l.filter((function(e){return e.indexOf("local::")<0}));return c.forEach((function(e){if(i.eventsListeners&&i.eventsListeners[e]){var r=[];i.eventsListeners[e].forEach((function(e){r.push(e)})),r.forEach((function(e){e.apply(n,t)}))}})),r&&r.length>0&&r.forEach((function(e){e.emit.apply(e,[d].concat(t))})),i},e}();const z=G;function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(e,t)}var V=function(e){var t,n;function r(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=[]);var i=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r=e.call(this,n)||this);return i.params=t,i.params&&i.params.on&&Object.keys(i.params.on).forEach((function(e){i.on(e,i.params.on[e])})),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,F(t,n);var i,a,o=r.prototype;return o.useModuleParams=function(e,t){if(e.params){var n={};Object.keys(e.params).forEach((function(e){void 0!==t[e]&&(n[e]=T({},t[e]))})),T(t,e.params),Object.keys(n).forEach((function(e){T(t[e],n[e])}))}},o.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n];r.params&&T(e,r.params)}))},o.useModule=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=this;if(n.modules){var r="string"==typeof e?n.modules[e]:e;r&&(r.instance&&Object.keys(r.instance).forEach((function(e){var t=r.instance[e];n[e]="function"==typeof t?t.bind(n):t})),r.on&&n.on&&Object.keys(r.on).forEach((function(e){n.on(e,r.on[e])})),r.vnode&&(n.vnodeHooks||(n.vnodeHooks={}),Object.keys(r.vnode).forEach((function(e){Object.keys(r.vnode[e]).forEach((function(t){var i=r.vnode[e][t];n.vnodeHooks[t]||(n.vnodeHooks[t]={}),n.vnodeHooks[t][e]||(n.vnodeHooks[t][e]=[]),n.vnodeHooks[t][e].push(i.bind(n))}))}))),r.create&&r.create.bind(n)(t))}},o.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=e[n]||{};t.useModule(n,r)}))},r.installModule=function(e){var t=this;t.prototype.modules||(t.prototype.modules={});var n=e.name||Object.keys(t.prototype.modules).length+"_"+w();if(t.prototype.modules[n]=e,e.proto&&Object.keys(e.proto).forEach((function(n){t.prototype[n]=e.proto[n]})),e.static&&Object.keys(e.static).forEach((function(n){t[n]=e.static[n]})),e.install){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];e.install.apply(t,i)}return t},r.use=function(e){var t=this;if(Array.isArray(e))return e.forEach((function(e){return t.installModule(e)})),t;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.installModule.apply(t,[e].concat(r))},i=r,a=[{key:"components",set:function(e){this.use&&this.use(e)}}],null&&H(i.prototype,null),a&&H(i,a),r}(z);const W=V;function j(e,t,n){return j=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&U(i,n.prototype),i},j.apply(null,arguments)}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function q(e){void 0===e&&(e={});var t=e,n=t.defaultSelector,r=t.constructor,i=t.domProp,o=t.app,s=t.addMethods,l={create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j(r,o?[o].concat(t):t)},get:function(e){if(void 0===e&&(e=n),e instanceof r)return e;var t=a(e);return 0!==t.length?t[0][i]:void 0},destroy:function(e){var t=l.get(e);if(t&&t.destroy)return t.destroy()}};return s&&Array.isArray(s)&&s.forEach((function(e){l[e]=function(t){void 0===t&&(t=n);for(var r=l.get(t),i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if(r&&r[e])return r[e].apply(r,a)}})),l}function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function J(e){void 0===e&&(e={});var t=e,n=t.defaultSelector,r=t.constructor,i=t.app;return T(q({defaultSelector:n,constructor:r,app:i,domProp:"f7Modal"}),{open:function(e,t,n){var o=a(e);if(o.length>1&&n){var s=a(n).parents(".page");s.length&&o.each((function(e){var t=a(e);t.parents(s)[0]===s[0]&&(o=t)}))}if(o.length>1&&(o=o.eq(o.length-1)),o.length){var l=o[0].f7Modal;if(!l){var c=o.dataset();l=new r(i,K({el:o},c))}return l.open(t)}},close:function(e,t,o){void 0===e&&(e=n);var s=a(e);if(s.length){if(s.length>1){var l;if(o){var c=a(o);c.length&&(l=c.parents(s))}s=l&&l.length>0?l:s.eq(s.length-1)}var d=s[0].f7Modal;if(!d){var u=s.dataset();d=new r(i,K({el:s},u))}return d.close(t)}}})}var Q=[];function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z(e,t)}var ee=function(e){var t,n;function r(t){var n;if(void 0===t&&(t={}),n=e.call(this,t)||this,r.instance&&"undefined"!=typeof window)throw new Error("Framework7 is already initialized and can't be initialized more than once");var i=N({userAgent:t.userAgent||void 0}),s=D(),l=T({},t),c=X(n);c.device=i,c.support=s;var d=(0,o.Jj)(),u=(0,o.Me)();r.instance=c;var p={version:"1.0.0",id:"io.framework7.myapp",el:"body",theme:"auto",language:d.navigator.language,routes:[],name:"Framework7",lazyModulesPath:null,initOnDeviceReady:!0,init:!0,autoDarkTheme:!1,iosTranslucentBars:!0,iosTranslucentModals:!0,component:void 0,componentUrl:void 0,userAgent:null,url:null};return c.useModulesParams(p),c.params=T(p,t),T(c,{id:c.params.id,name:c.params.name,version:c.params.version,routes:c.params.routes,language:c.params.language,theme:"auto"===c.params.theme?i.ios?"ios":i.desktop&&i.electron?"aurora":"md":c.params.theme,passedParams:l,online:d.navigator.onLine}),t.store&&(c.params.store=t.store),c.$el&&c.$el[0]&&(c.$el[0].f7=c),c.useModules(),c.initStore(),c.params.init&&(i.cordova&&c.params.initOnDeviceReady?a(u).on("deviceready",(function(){c.init()})):c.init()),c||X(n)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Z(t,n);var i,s,l,c=r.prototype;return c.mount=function(e){var t=this,n=(0,o.Jj)(),r=(0,o.Me)(),i=a(e||t.params.el).eq(0);t.$el=i,t.$el&&t.$el[0]&&(t.el=t.$el[0],t.el.f7=t,t.rtl="rtl"===i.css("direction"));var s="(prefers-color-scheme: dark)",l="(prefers-color-scheme: light)";t.mq={},n.matchMedia&&(t.mq.dark=n.matchMedia(s),t.mq.light=n.matchMedia(l)),t.colorSchemeListener=function(e){var n=e.matches,i=e.media;if(n){var a=r.querySelector("html");i===s?(a.classList.add("theme-dark"),t.darkTheme=!0,t.emit("darkThemeChange",!0)):i===l&&(a.classList.remove("theme-dark"),t.darkTheme=!1,t.emit("darkThemeChange",!1))}},t.emit("mount")},c.initStore=function(){var e=this;void 0!==e.params.store&&e.params.store.__store?e.store=e.params.store:e.store=e.createStore(e.params.store)},c.enableAutoDarkTheme=function(){var e=(0,o.Jj)(),t=(0,o.Me)();if(e.matchMedia){var n=this,r=t.querySelector("html");n.mq.dark&&n.mq.light&&(n.mq.dark.addListener(n.colorSchemeListener),n.mq.light.addListener(n.colorSchemeListener)),n.mq.dark&&n.mq.dark.matches?(r.classList.add("theme-dark"),n.darkTheme=!0,n.emit("darkThemeChange",!0)):n.mq.light&&n.mq.light.matches&&(r.classList.remove("theme-dark"),n.darkTheme=!1,n.emit("darkThemeChange",!1))}},c.disableAutoDarkTheme=function(){if((0,o.Jj)().matchMedia){var e=this;e.mq.dark&&e.mq.dark.removeListener(e.colorSchemeListener),e.mq.light&&e.mq.light.removeListener(e.colorSchemeListener)}},c.initAppComponent=function(e){var t=this;t.router.componentLoader(t.params.component,t.params.componentUrl,{componentOptions:{el:t.$el[0]}},(function(n){t.$el=a(n),t.$el[0].f7=t,t.$elComponent=n.f7Component,t.el=t.$el[0],e&&e()}),(function(){}))},c.init=function(e){var t=this;t.mount(e);var n=function(){if(!t.initialized){t.$el.addClass("framework7-initializing"),t.rtl&&a("html").attr("dir","rtl"),t.params.autoDarkTheme&&t.enableAutoDarkTheme();var e=(0,o.Jj)();e.addEventListener("offline",(function(){t.online=!1,t.emit("offline"),t.emit("connection",!1)})),e.addEventListener("online",(function(){t.online=!0,t.emit("online"),t.emit("connection",!0)})),t.$el.addClass("framework7-root"),a("html").removeClass("ios md aurora").addClass(t.theme);var n=t.device;t.params.iosTranslucentBars&&"ios"===t.theme&&n.ios&&a("html").addClass("ios-translucent-bars"),t.params.iosTranslucentModals&&"ios"===t.theme&&n.ios&&a("html").addClass("ios-translucent-modals"),_((function(){t.$el.removeClass("framework7-initializing")})),t.initialized=!0,t.emit("init")}};return t.params.component||t.params.componentUrl?t.initAppComponent((function(){n()})):n(),t},c.loadModule=function(){return r.loadModule.apply(r,arguments)},c.loadModules=function(){return r.loadModules.apply(r,arguments)},c.getVnodeHooks=function(e,t){var n=this;return n.vnodeHooks&&n.vnodeHooks[e]&&n.vnodeHooks[e][t]||[]},i=r,l=[{key:"Dom7",get:function(){return a}},{key:"$",get:function(){return a}},{key:"device",get:function(){return N()}},{key:"support",get:function(){return D()}},{key:"Class",get:function(){return W}},{key:"Events",get:function(){return z}}],(s=[{key:"$",get:function(){return a}}])&&Y(i.prototype,s),l&&Y(i,l),r}(W);ee.ModalMethods=J,ee.ConstructorMethods=q,ee.loadModule=function(e){var t=this,n=(0,o.Jj)(),r=(0,o.Me)();return new Promise((function(i,o){var s,l,d,u=t.instance;if(e){if("string"==typeof e){var p=e.match(/([a-z0-9-]*)/i);if(e.indexOf(".")<0&&p&&p[0].length===e.length){if(!u||u&&!u.params.lazyModulesPath)return void o(new Error('Framework7: "lazyModulesPath" app parameter must be specified to fetch module by name'));s=u.params.lazyModulesPath+"/"+e+"/"+e+".js"}else s=e}else"function"==typeof e?d=e:l=e;if(d){var h=d(t,!1);if(!h)return void o(new Error("Framework7: Can't find Framework7 component in specified component function"));if(t.prototype.modules&&t.prototype.modules[h.name])return void i();v(h),i()}if(l){var f=l;if(!f)return void o(new Error("Framework7: Can't find Framework7 component in specified component"));if(t.prototype.modules&&t.prototype.modules[f.name])return void i();v(f),i()}if(s){if(Q.indexOf(s)>=0)return void i();Q.push(s);var m=new Promise((function(e,i){t.request.get(s,(function(o){var l="f7_component_loader_callback_"+c(),d=r.createElement("script");d.innerHTML="window."+l+" = function (Framework7, Framework7AutoInstallComponent) {return "+o.trim()+"}",a("head").append(d);var u=n[l];delete n[l],a(d).remove();var p=u(t,!1);p?(t.prototype.modules&&t.prototype.modules[p.name]||v(p),e()):i(new Error("Framework7: Can't find Framework7 component in "+s+" file"))}),(function(e,t){i(e,t)}))})),g=new Promise((function(e){t.request.get(s.replace(".js",u.rtl?".rtl.css":".css"),(function(t){var n=r.createElement("style");n.innerHTML=t,a("head").append(n),e()}),(function(){e()}))}));Promise.all([m,g]).then((function(){i()})).catch((function(e){o(e)}))}}else o(new Error("Framework7: Lazy module must be specified"));function v(e){t.use(e),u&&(u.useModuleParams(e,u.params),u.useModule(e))}}))},ee.loadModules=function(e){return Promise.all(e.map((function(e){return ee.loadModule(e)})))};const te=ee;function ne(e){var t="function"==typeof Map?new Map:void 0;return ne=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return re(e,arguments,ae(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ie(r,e)},ne(e)}function re(e,t,n){return re=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ie(i,n.prototype),i},re.apply(null,arguments)}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var oe={},se=0,le=function(e){Object.assign(this,e)},ce=function(e){var t,n;function r(t){var n;return n=e.call(this)||this,Object.assign(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,ie(t,n),r}(ne(Error)),de=function(e){return new Promise((function(t,n){var r=(0,o.Jj)(),i=(0,o.Me)(),a=T({},oe);"beforeCreate beforeOpen beforeSend error complete success statusCode".split(" ").forEach((function(e){delete a[e]}));var s=T({url:r.location.toString(),method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},a),l=T({},s,e);if(e.abortController&&(l.abortController=e.abortController),l.abortController&&l.abortController.canceled)n(new ce({options:l,status:"canceled",message:"canceled"}));else if(!1!==S("beforeCreate",l)){l.type&&(l.method=l.type);var c,d=l.url.indexOf("?")>=0?"&":"?",u=l.method.toUpperCase();if("GET"!==u&&"HEAD"!==u&&"OPTIONS"!==u&&"DELETE"!==u||!l.data||(c="string"==typeof l.data?l.data.indexOf("?")>=0?l.data.split("?")[1]:l.data:k(l.data)).length&&(l.url+=d+c,"?"===d&&(d="&")),"json"===l.dataType&&l.url.indexOf("callback=")>=0){var p,h="f7jsonp_"+(Date.now()+(se+=1)),f=l.url.split("callback="),m=f[0]+"callback="+h;if(f[1].indexOf("&")>=0){var g=f[1].split("&").filter((function(e){return e.indexOf("=")>0})).join("&");g.length>0&&(m+="&"+g)}var v=i.createElement("script");return v.type="text/javascript",v.onerror=function(){clearTimeout(p),S("error",null,"scripterror","scripterror"),n(new ce({options:l,status:"scripterror",message:"scripterror"})),S("complete",null,"scripterror")},v.src=m,r[h]=function(e){clearTimeout(p),S("success",e),v.parentNode.removeChild(v),v=null,delete r[h],t(new le({options:l,data:e}))},i.querySelector("head").appendChild(v),void(l.timeout>0&&(p=setTimeout((function(){v.parentNode.removeChild(v),v=null,S("error",null,"timeout","timeout"),n(new ce({options:l,status:"timeout",message:"timeout"}))}),l.timeout)))}"GET"!==u&&"HEAD"!==u&&"OPTIONS"!==u&&"DELETE"!==u||!1===l.cache&&(l.url+=d+"_nocache"+Date.now());var b=new XMLHttpRequest;if(l.abortController){var y=!1;l.abortController.onAbort=function(){y||(y=!0,b.abort(),n(new ce({options:l,xhr:b,status:"canceled",message:"canceled"})))}}if(b.requestUrl=l.url,b.requestParameters=l,!1!==S("beforeOpen",b,l)){b.open(u,l.url,l.async,l.user,l.password);var _=null;if(("POST"===u||"PUT"===u||"PATCH"===u)&&l.data)if(l.processData)if([ArrayBuffer,Blob,Document,FormData].indexOf(l.data.constructor)>=0)_=l.data;else{var w="---------------------------"+Date.now().toString(16);"multipart/form-data"===l.contentType?b.setRequestHeader("Content-Type","multipart/form-data; boundary="+w):b.setRequestHeader("Content-Type",l.contentType),_="";var C=k(l.data);if("multipart/form-data"===l.contentType){C=C.split("&");for(var x=[],E=0;E<C.length;E+=1)x.push('Content-Disposition: form-data; name="'+C[E].split("=")[0]+'"\r\n\r\n'+C[E].split("=")[1]+"\r\n");_="--"+w+"\r\n"+x.join("--"+w+"\r\n")+"--"+w+"--\r\n"}else _="application/json"===l.contentType?JSON.stringify(l.data):C}else _=l.data,b.setRequestHeader("Content-Type",l.contentType);"json"!==l.dataType||l.headers&&l.headers.Accept||b.setRequestHeader("Accept","application/json"),l.headers&&Object.keys(l.headers).forEach((function(e){void 0!==l.headers[e]&&b.setRequestHeader(e,l.headers[e])})),void 0===l.crossDomain&&(l.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(l.url)&&RegExp.$2!==r.location.host),l.crossDomain||b.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.xhrFields&&T(b,l.xhrFields),b.onload=function(){var e;if(b.status>=200&&b.status<300||0===b.status)if("json"===l.dataType){var r;try{e=JSON.parse(b.responseText)}catch(e){r=!0}r?(S("error",b,"parseerror","parseerror"),n(new ce({options:l,xhr:b,status:"parseerror",message:"parseerror"}))):(S("success",e,b.status,b),t(new le({options:l,data:e,status:b.status,xhr:b})))}else S("success",e="text"===b.responseType||""===b.responseType?b.responseText:b.response,b.status,b),t(new le({options:l,data:e,status:b.status,xhr:b}));else S("error",b,b.status,b.statusText),n(new ce({options:l,xhr:b,status:b.status,message:b.statusText}));l.statusCode&&(oe.statusCode&&oe.statusCode[b.status]&&oe.statusCode[b.status](b),l.statusCode[b.status]&&l.statusCode[b.status](b)),S("complete",b,b.status)},b.onerror=function(){S("error",b,b.status,b.status),n(new ce({options:l,xhr:b,status:b.status,message:b.statusText})),S("complete",b,"error")},l.timeout>0&&(b.timeout=l.timeout,b.ontimeout=function(){S("error",b,"timeout","timeout"),n(new ce({options:l,xhr:b,status:"timeout",message:"timeout"})),S("complete",b,"timeout")}),!1!==S("beforeSend",b,l)?b.send(_):n(new ce({options:l,xhr:b,status:"canceled",message:"canceled"}))}else n(new ce({options:l,xhr:b,status:"canceled",message:"canceled"}))}else n(new ce({options:l,status:"canceled",message:"canceled"}));function S(e){for(var t,n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return oe[e]&&(t=oe[e].apply(oe,i)),l[e]&&(n=l[e].apply(l,i)),"boolean"!=typeof t&&(t=!0),"boolean"!=typeof n&&(n=!0),(!l.abortController||!l.abortController.canceled||"beforeCreate"!==e&&"beforeOpen"!==e&&"beforeSend"!==e)&&t&&n}}))};function ue(e){for(var t=[],n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];"function"==typeof l[1]?(n=l[0],i=l[1],a=l[2],o=l[3]):(n=l[0],r=l[1],i=l[2],a=l[3],o=l[4]),[i,a].forEach((function(e){"string"==typeof e&&(o=e,e===i?i=void 0:a=void 0)}));var d={url:n,method:"post"===e||"postJSON"===e?"POST":"GET",data:r,success:i,error:a,dataType:o=o||("json"===e||"postJSON"===e?"json":void 0)};return"postJSON"===e&&T(d,{contentType:"application/json",processData:!1,crossDomain:!0,data:"string"==typeof r?r:JSON.stringify(r)}),de(d)}Object.assign(de,{get:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue.apply(void 0,["get"].concat(t))},post:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue.apply(void 0,["post"].concat(t))},json:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue.apply(void 0,["json"].concat(t))},getJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue.apply(void 0,["json"].concat(t))},postJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue.apply(void 0,["postJSON"].concat(t))}}),de.abortController=function(){var e={canceled:!1,onAbort:null,abort:function(){e.canceled=!0,e.onAbort&&e.onAbort()}};return e},de.setup=function(e){e.type&&!e.method&&T(e,{method:e.type}),T(oe,e)};const pe=de,he={name:"device",static:{getDevice:N},on:{init:function(){var e=(0,o.Me)(),t=N(),n=[],r=e.querySelector("html"),i=e.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');r&&(t.standalone&&t.ios&&i&&"black-translucent"===i.content&&n.push("device-full-viewport"),n.push("device-pixel-ratio-"+Math.floor(t.pixelRatio)),t.os&&!t.desktop?n.push("device-"+t.os):t.desktop&&(n.push("device-desktop"),t.os&&n.push("device-"+t.os)),(t.cordova||t.phonegap)&&n.push("device-cordova"),t.capacitor&&n.push("device-capacitor"),n.forEach((function(e){r.classList.add(e)})))}}},fe={name:"support",static:{getSupport:D}},me={name:"utils",proto:{utils:r},static:{utils:r}},ge={name:"resize",create:function(){var e=this;e.getSize=function(){if(!e.el)return{width:0,height:0,left:0,top:0};var t=e.$el.offset(),n=[e.el.offsetWidth,e.el.offsetHeight,t.left,t.top],r=n[0],i=n[1],a=n[2],o=n[3];return e.width=r,e.height=i,e.left=a,e.top=o,{width:r,height:i,left:a,top:o}}},on:{init:function(){var e=this,t=(0,o.Jj)();e.getSize(),t.addEventListener("resize",(function(){e.emit("resize")}),!1),t.addEventListener("orientationchange",(function(){e.emit("orientationchange")}))},orientationchange:function(){var e=(0,o.Me)();N().ipad&&(e.body.scrollLeft=0,setTimeout((function(){e.body.scrollLeft=0}),0))},resize:function(){this.getSize()}}},ve={name:"request",proto:{request:pe},static:{request:pe}},be={name:"touch",params:{touch:{touchClicksDistanceThreshold:5,disableContextMenu:!1,tapHold:!1,tapHoldDelay:750,tapHoldPreventClicks:!0,activeState:!0,activeStateElements:"a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle",activeStateOnMouseMove:!1,mdTouchRipple:!0,iosTouchRipple:!1,auroraTouchRipple:!1,touchRippleElements:".ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle",touchRippleInsetElements:".ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back"}},create:function(){var e=D();T(this,{touchEvents:{start:e.touch?"touchstart":e.pointerEvents?"pointerdown":"mousedown",move:e.touch?"touchmove":e.pointerEvents?"pointermove":"mousemove",end:e.touch?"touchend":e.pointerEvents?"pointerup":"mouseup"}})},on:{init:function(){var e,t,n,r,i,s,l,c,d,u,p,h,f,m=this,g=N(),v=D(),b=(0,o.Jj)(),y=(0,o.Me)(),_=m.params.touch,w=_[m.theme+"TouchRipple"];function C(e){var t,n=a(e),r=n.parents(_.activeStateElements);if(n.closest(".no-active-state").length)return null;if(n.is(_.activeStateElements)&&(t=n),r.length>0&&(t=t?t.add(r):r),t&&t.length>1){for(var i,o=[],s=0;s<t.length;s+=1)i||(o.push(t[s]),(t.eq(s).hasClass("prevent-active-state-propagation")||t.eq(s).hasClass("no-active-state-propagation"))&&(i=!0));t=a(o)}return t||n}function x(e){return e.parents(".page-content").length>0}function k(){c&&c.addClass("active-state")}function E(){c&&(c.removeClass("active-state"),c=null)}function S(e,t,n){e&&(u=m.touchRipple.create(m,e,t,n))}function T(){u&&(u.remove(),u=void 0,p=void 0)}function M(n){p=function(e){var t=_.touchRippleElements,n=a(e);if(n.is(t))return!n.hasClass("no-ripple")&&n;if(n.parents(t).length>0){var r=n.parents(t).eq(0);return!r.hasClass("no-ripple")&&r}return!1}(n),p&&0!==p.length?x(p)?(clearTimeout(h),h=setTimeout((function(){T(),S(p,e,t)}),80)):(T(),S(p,e,t)):p=void 0}function I(){clearTimeout(h),T()}function L(){u||!p||r?T():(clearTimeout(h),S(p,e,t),setTimeout(T,0))}function $(){a(".active-state").removeClass("active-state"),w&&L()}g.ios&&g.webView&&b.addEventListener("touchstart",(function(){}));var P=!1,O=null,B=".dialog-button, .actions-button",A=!1,R=null;function G(e,t){m.emit({events:e,data:[t]})}function z(e){G("touchstart touchstart:active",e)}function H(e){G("touchmove touchmove:active",e)}function F(e){G("touchend touchend:active",e)}function V(e){G("touchstart:passive",e)}function W(e){G("touchmove:passive",e)}function j(e){G("touchend:passive",e)}var U=!!v.passiveListener&&{passive:!0},q=!v.passiveListener||{passive:!0,capture:!0},K=!!v.passiveListener&&{passive:!1},J=!v.passiveListener||{passive:!1,capture:!0};y.addEventListener("click",(function(e){G("click",e)}),!0),v.passiveListener?(y.addEventListener(m.touchEvents.start,z,J),y.addEventListener(m.touchEvents.move,H,K),y.addEventListener(m.touchEvents.end,F,K),y.addEventListener(m.touchEvents.start,V,q),y.addEventListener(m.touchEvents.move,W,U),y.addEventListener(m.touchEvents.end,j,U)):(y.addEventListener(m.touchEvents.start,(function(e){z(e),V(e)}),!0),y.addEventListener(m.touchEvents.move,(function(e){H(e),W(e)}),!1),y.addEventListener(m.touchEvents.end,(function(e){F(e),j(e)}),!1)),v.touch?(m.on("click",(function(e){var t=e&&e.detail&&"f7Overswipe"===e.detail,r=e&&e.detail&&"f7Segmented"===e.detail,a=e&&e.detail&&"f7TouchMoveActivable"===e.detail,o=l;return n&&e.target!==n?o=!(t||r||a):a&&(o=!1),_.tapHold&&_.tapHoldPreventClicks&&i&&(o=!0),o&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()),_.tapHold&&(s=setTimeout((function(){i=!1}),g.ios||g.androidChrome?100:400)),l=!1,n=null,!o})),m.on("touchstart",(function(o){return r=!1,i=!1,l=!1,f=void 0,o.targetTouches.length>1?(c&&E(),!0):(o.touches.length>1&&c&&E(),_.tapHold&&(s&&clearTimeout(s),s=setTimeout((function(){o&&o.touches&&o.touches.length>1||(i=!0,o.preventDefault(),l=!0,a(o.target).trigger("taphold",o),m.emit("taphold",o))}),_.tapHoldDelay)),n=o.target,e=o.targetTouches[0].pageX,t=o.targetTouches[0].pageY,P=o.target.closest(".segmented-strong .button-active, .segmented-strong .tab-link-active"),A="ios"===m.theme&&o.target.closest(B),P&&(O=P.closest(".segmented-strong")),_.activeState&&((c=C(n))&&!x(c)?k():c&&(d=setTimeout(k,80))),w&&M(n),!0)})),m.on("touchmove",(function(i){var o,u,p=!0;"touchmove"===i.type&&(o=i.targetTouches[0],u=_.touchClicksDistanceThreshold);var h=i.targetTouches[0].pageX,m=i.targetTouches[0].pageY;if(void 0===f&&(f=!!(f||Math.abs(m-t)>Math.abs(h-e))),(A||!f&&P&&O)&&i.cancelable&&i.preventDefault(),!f&&P&&O){var g=y.elementFromPoint(i.targetTouches[0].clientX,i.targetTouches[0].clientY).closest(".segmented-strong .button:not(.button-active):not(.tab-link-active)");g&&O.contains(g)&&(a(g).trigger("click","f7Segmented"),n=g)}if(u&&o){var v=o.pageX,b=o.pageY;(Math.abs(v-e)>u||Math.abs(b-t)>u)&&(r=!0)}else r=!0;if(r){if(l=!0,A){var x=y.elementFromPoint(i.targetTouches[0].clientX,i.targetTouches[0].clientY);(R=x.closest(B))&&c&&c[0]===R?p=!1:R&&setTimeout((function(){c=C(R),k()}))}_.tapHold&&clearTimeout(s),_.activeState&&p&&(clearTimeout(d),E()),w&&I()}})),m.on("touchend",(function(e){return f=void 0,P=!1,O=null,A=!1,clearTimeout(d),clearTimeout(s),R&&(a(R).trigger("click","f7TouchMoveActivable"),R=null),y.activeElement===e.target?(_.activeState&&E(),w&&L(),!0):(_.activeState&&(k(),setTimeout(E,0)),w&&L(),!(_.tapHoldPreventClicks&&i||l)||(e.cancelable&&e.preventDefault(),l=!0,!1))})),y.addEventListener("touchcancel",(function(){n=null,clearTimeout(d),clearTimeout(s),_.activeState&&E(),w&&L()}),{passive:!0})):_.activeState&&(m.on("touchstart",(function(n){var r=C(n.target);r&&(r.addClass("active-state"),"which"in n&&3===n.which&&setTimeout((function(){a(".active-state").removeClass("active-state")}),0)),w&&(e=n.pageX,t=n.pageY,M(n.target,n.pageX,n.pageY))})),m.on("touchmove",(function(){_.activeStateOnMouseMove||a(".active-state").removeClass("active-state"),w&&I()})),m.on("touchend",$),y.addEventListener("pointercancel",$,{passive:!0})),y.addEventListener("contextmenu",(function(e){_.disableContextMenu&&(g.ios||g.android||g.cordova||b.Capacitor&&b.Capacitor.isNative)&&e.preventDefault(),w&&(c&&E(),L())}))}}};function ye(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var i=1,a="";if("?"===e[s=n+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--i){s++;break}}else if("("===e[s]&&(i++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));a+=e[s++]}else a+=e[s++]+e[s++];if(i)throw new TypeError("Unbalanced pattern at ".concat(n));if(!a)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:a}),n=s}else{for(var o="",s=n+1;s<e.length;){var l=e.charCodeAt(s);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[s++]}if(!o)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:o}),n=s}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,i=void 0===r?"./":r,a="[^".concat(_e(t.delimiter||"/#?"),"]+?"),o=[],s=0,l=0,c="",d=function(e){if(l<n.length&&n[l].type===e)return n[l++].value},u=function(e){var t=d(e);if(void 0!==t)return t;var r=n[l],i=r.type,a=r.index;throw new TypeError("Unexpected ".concat(i," at ").concat(a,", expected ").concat(e))},p=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};l<n.length;){var h=d("CHAR"),f=d("NAME"),m=d("PATTERN");if(f||m){var g=h||"";-1===i.indexOf(g)&&(c+=g,g=""),c&&(o.push(c),c=""),o.push({name:f||s++,prefix:g,suffix:"",pattern:m||a,modifier:d("MODIFIER")||""})}else{var v=h||d("ESCAPED_CHAR");if(v)c+=v;else if(c&&(o.push(c),c=""),d("OPEN")){g=p();var b=d("NAME")||"",y=d("PATTERN")||"",_=p();u("CLOSE"),o.push({name:b||(y?s++:""),pattern:b&&!y?a:y,prefix:g,suffix:_,modifier:d("MODIFIER")||""})}else u("END")}}return o}function _e(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function we(e){return e&&e.sensitive?"":"i"}function Ce(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=n.exec(e.source);i;)t.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=n.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return Ce(e,t,n).source}));return new RegExp("(?:".concat(r.join("|"),")"),we(n))}(e,t,n):function(e,t,n){return function(e,t,n){void 0===n&&(n={});for(var r=n.strict,i=void 0!==r&&r,a=n.start,o=void 0===a||a,s=n.end,l=void 0===s||s,c=n.encode,d=void 0===c?function(e){return e}:c,u=n.delimiter,p=void 0===u?"/#?":u,h=n.endsWith,f="[".concat(_e(void 0===h?"":h),"]|$"),m="[".concat(_e(p),"]"),g=o?"^":"",v=0,b=e;v<b.length;v++){var y=b[v];if("string"==typeof y)g+=_e(d(y));else{var _=_e(d(y.prefix)),w=_e(d(y.suffix));if(y.pattern)if(t&&t.push(y),_||w)if("+"===y.modifier||"*"===y.modifier){var C="*"===y.modifier?"?":"";g+="(?:".concat(_,"((?:").concat(y.pattern,")(?:").concat(w).concat(_,"(?:").concat(y.pattern,"))*)").concat(w,")").concat(C)}else g+="(?:".concat(_,"(").concat(y.pattern,")").concat(w,")").concat(y.modifier);else"+"===y.modifier||"*"===y.modifier?g+="((?:".concat(y.pattern,")").concat(y.modifier,")"):g+="(".concat(y.pattern,")").concat(y.modifier);else g+="(?:".concat(_).concat(w,")").concat(y.modifier)}}if(l)i||(g+="".concat(m,"?")),g+=n.endsWith?"(?=".concat(f,")"):"$";else{var x=e[e.length-1],k="string"==typeof x?m.indexOf(x[x.length-1])>-1:void 0===x;i||(g+="(?:".concat(m,"(?=").concat(f,"))?")),k||(g+="(?=".concat(m,"|").concat(f,")"))}return new RegExp(g,we(n))}(ye(e,n),t,n)}(e,t,n)}var xe={queue:[],clearQueue:function(){0!==xe.queue.length&&xe.queue.shift()()},routerQueue:[],clearRouterQueue:function(){if(0!==xe.routerQueue.length){var e=xe.routerQueue.pop(),t=e.router,n=e.stateUrl,r=e.action,i=t.params.animate;!1===t.params.browserHistoryAnimate&&(i=!1),"back"===r&&t.back({animate:i,browserHistory:!1}),"load"===r&&t.navigate(n,{animate:i,browserHistory:!1})}},handle:function(e){if(!xe.blockPopstate){var t=e.state;xe.previousState=xe.state,xe.state=t,xe.allowChange=!0,xe.clearQueue(),(t=xe.state)||(t={}),this.views.forEach((function(e){var n=e.router,r=t[e.id];if(!r&&e.params.browserHistory&&(r={url:e.router.history[0]}),r){var i=r.url||void 0,a=n.params.animate;!1===n.params.browserHistoryAnimate&&(a=!1),i!==n.url&&(n.history.indexOf(i)>=0?n.allowPageChange?n.back({animate:a,browserHistory:!1}):xe.routerQueue.push({action:"back",router:n}):n.allowPageChange?n.navigate(i,{animate:a,browserHistory:!1}):xe.routerQueue.unshift({action:"load",stateUrl:i,router:n}))}}))}},initViewState:function(e,t){var n,r=(0,o.Jj)(),i=T({},xe.state||{},((n={})[e]=t,n));xe.state=i,r.history.replaceState(i,"")},push:function(e,t,n){var r,i=(0,o.Jj)();if("#!/"===n.substr(-3)&&(n=n.replace("#!/","")),xe.allowChange){xe.previousState=xe.state;var a=T({},xe.previousState||{},((r={})[e]=t,r));xe.state=a,i.history.pushState(a,"",n)}else xe.queue.push((function(){xe.push(e,t,n)}))},replace:function(e,t,n){var r,i=(0,o.Jj)();if("#!/"===n.substr(-3)&&(n=n.replace("#!/","")),xe.allowChange){xe.previousState=xe.state;var a=T({},xe.previousState||{},((r={})[e]=t,r));xe.state=a,i.history.replaceState(a,"",n)}else xe.queue.push((function(){xe.replace(e,t,n)}))},go:function(e){var t=(0,o.Jj)();xe.allowChange=!1,t.history.go(e)},back:function(){var e=(0,o.Jj)();xe.allowChange=!1,e.history.back()},allowChange:!0,previousState:{},state:{},blockPopstate:!0,init:function(e){var t=(0,o.Jj)(),n=(0,o.Me)();xe.state=t.history.state,a(t).on("load",(function(){setTimeout((function(){xe.blockPopstate=!1}),0)})),n.readyState&&"complete"===n.readyState&&(xe.blockPopstate=!1),a(t).on("popstate",xe.handle.bind(e))}};const ke=xe;function Ee(e,t,n){var r=this,i=t.route.redirect,a="forward"===e?"navigate":"back";if(n.initial&&r.params.browserHistory&&(n.replaceState=!0,n.history=!0),"function"==typeof i){r.allowPageChange=!1;var o=i.call(r,{router:r,to:t,resolve:function(e,t){void 0===t&&(t={}),r.allowPageChange=!0,r[a](e,T({},n,t))},reject:function(){r.allowPageChange=!0},direction:e,app:r.app});return o&&"string"==typeof o?(r.allowPageChange=!0,r[a](o,n)):r}return r[a](i,n)}function Se(e,t,n,r,i,a,o,s){var l=[];Array.isArray(n)?l.push.apply(l,n):n&&"function"==typeof n&&l.push(n),t&&(Array.isArray(t)?l.push.apply(l,t):l.push(t)),function t(){0!==l.length?l.shift().call(e,{router:e,to:r,from:i,resolve:function(){t()},reject:function(){o()},direction:s,app:e.app}):a()}()}function Te(e,t,n,r,i){var a=this;function o(){e&&e.route&&(a.params.routesBeforeEnter||e.route.beforeEnter)?(a.allowPageChange=!1,Se(a,a.params.routesBeforeEnter,e.route.beforeEnter,e,t,(function(){a.allowPageChange=!0,n()}),(function(){r()}),i)):n()}t&&t.route&&(a.params.routesBeforeLeave||t.route.beforeLeave)?(a.allowPageChange=!1,Se(a,a.params.routesBeforeLeave,t.route.beforeLeave,e,t,(function(){a.allowPageChange=!0,o()}),(function(){r()}),i)):o()}function Me(e,t){if(!e.view)throw new Error("Framework7: it is not allowed to use router methods on global app router. Use router methods only on related View, e.g. app.views.main.router."+t+"(...)")}function Ie(e,t,n,r){function i(e){e.then((function(e){n({component:e.default||e._default||e})})).catch((function(e){throw r(),new Error(e)}))}if(t instanceof Promise)i(t);else{var a=t.call(e);a instanceof Promise?i(a):n({component:a})}}function Le(){return Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(this,arguments)}function $e(e,t,n){void 0===n&&(n={});var r,i,s,l=(0,o.Me)(),c=a(t),d=e.app,u=e.view,p=T(!1,{animate:e.params.animate,browserHistory:!0,replaceState:!1,history:!0,reloadCurrent:e.params.reloadPages,reloadPrevious:!1,reloadAll:!1,clearPreviousHistory:!1,reloadDetail:e.params.reloadDetail,on:{}},n),h=e.params.masterDetailBreakpoint>0,f=h&&p.route&&p.route.route&&(!0===p.route.route.master||"function"==typeof p.route.route.master&&p.route.route.master(d,e)),m=0,g=e.currentRoute.modal;if(g||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){e.currentRoute&&e.currentRoute.route&&e.currentRoute.route[t]&&(g=!0,s=t)})),g){var v=e.currentRoute.modal||e.currentRoute.route.modalInstance||d[s].get(),b=e.history[e.history.length-2],y=e.findMatchingRoute(b);!y&&b&&(y={url:b,path:b.split("?")[0],query:C(b),route:{path:b.split("?")[0],url:b}}),e.modalRemove(v)}var _,w,x,k,E=e.dynamicNavbar,S=e.$el,M=c,I=p.reloadPrevious||p.reloadCurrent||p.reloadAll;if(e.allowPageChange=!1,0===M.length)return e.allowPageChange=!0,e;M.length&&e.removeThemeElements(M),E&&(x=M.children(".navbar"),w=e.$navbarsEl,0===x.length&&M[0]&&M[0].f7Page&&(x=M[0].f7Page.$navbarEl)),p.route&&p.route.route&&p.route.route.keepAlive&&!p.route.route.keepAliveData&&(p.route.route.keepAliveData={pageEl:c[0]});var L,$,P,O,B=S.children(".page:not(.stacked)").filter((function(e){return e!==M[0]}));if(E&&(L=w.children(".navbar:not(.stacked)").filter((function(e){return e!==x[0]}))),p.reloadPrevious&&B.length<2)return e.allowPageChange=!0,e;if(h&&!p.reloadAll){for(var A=0;A<B.length;A+=1)r||!B[A].classList.contains("page-master")||(r=B[A]);if(($=!f&&r)&&r)for(var R=0;R<B.length;R+=1)B[R].classList.contains("page-master-detail")&&(i=B[R]);P=$&&p.reloadDetail&&d.width>=e.params.masterDetailBreakpoint&&r}$&&(O=!i||P||p.reloadAll||p.reloadCurrent);var D="next";if(p.reloadCurrent||p.reloadAll||P?D="current":p.reloadPrevious&&(D="previous"),M.removeClass("page-previous page-current page-next").addClass("page-"+D+(f?" page-master":"")+($?" page-master-detail":"")+(O?" page-master-detail-root":"")).removeClass("stacked").trigger("page:unstack").trigger("page:position",{position:D}),e.emit("pageUnstack",M[0]),e.emit("pagePosition",M[0],D),(f||$)&&(M.trigger("page:role",{role:f?"master":"detail",root:!!O}),e.emit("pageRole",M[0],{role:f?"master":"detail",detailRoot:!!O})),E&&x.length&&(x.removeClass("navbar-previous navbar-current navbar-next").addClass("navbar-"+D+(f?" navbar-master":"")+($?" navbar-master-detail":"")+(O?" navbar-master-detail-root":"")).removeClass("stacked"),x.trigger("navbar:position",{position:D}),e.emit("navbarPosition",x[0],D),(f||$)&&e.emit("navbarRole",x[0],{role:f?"master":"detail",detailRoot:!!O})),p.reloadCurrent||P)P?(_=B.filter((function(e){return!e.classList.contains("page-master")})),E&&(k=a(_.map((function(e){return d.navbar.getElByPage(e)})))),_.length>1&&r&&(m=_.length-1,a(r).removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",r),E&&(a(d.navbar.getElByPage(r)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",d.navbar.getElByPage(r))))):(_=B.eq(B.length-1),E&&(k=a(d.navbar.getElByPage(_))));else if(p.reloadPrevious)_=B.eq(B.length-2),E&&(k=a(d.navbar.getElByPage(_)));else if(p.reloadAll)_=B.filter((function(e){return e!==M[0]})),E&&(k=L.filter((function(e){return e!==x[0]})));else{var N=[],G=[];if(B.length>1){var z=0;for(z=0;z<B.length-1;z+=1)if(r&&B[z]===r)B.eq(z).addClass("page-master-stacked"),B.eq(z).trigger("page:masterstack"),e.emit("pageMasterStack",B[z]),E&&(a(d.navbar.getElByPage(r)).addClass("navbar-master-stacked"),e.emit("navbarMasterStack",d.navbar.getElByPage(r)));else{var H=d.navbar.getElByPage(B.eq(z));e.params.stackPages?(B.eq(z).addClass("stacked"),B.eq(z).trigger("page:stack"),e.emit("pageStack",B[z]),E&&a(H).addClass("stacked")):(N.push(B[z]),e.pageCallback("beforeRemove",B[z],L&&L[z],"previous",void 0,p),e.removePage(B[z]),E&&H&&(G.push(H),e.removeNavbar(H)))}}_=S.children(".page:not(.stacked)").filter((function(e){return e!==M[0]&&N.indexOf(e)<0})),E&&(k=w.children(".navbar:not(.stacked)").filter((function(e){return e!==x[0]&&G.indexOf(G)<0}))),N=[],G=[]}if($&&!p.reloadAll&&((_.length>1||P)&&(_=_.filter((function(e){return!e.classList.contains("page-master")}))),k&&(k.length>1||P)&&(k=k.filter((function(e){return!e.classList.contains("navbar-master")})))),e.params.browserHistory&&(p.browserHistory||p.replaceState)&&!p.reloadPrevious){var F=e.params.browserHistoryRoot||"";ke[p.reloadCurrent||P&&i||p.reloadAll||p.replaceState?"replace":"push"](u.id,{url:p.route.url},F+e.params.browserHistorySeparator+p.route.url)}p.reloadPrevious||(e.currentPageEl=M[0],E&&x.length?e.currentNavbarEl=x[0]:delete e.currentNavbarEl,e.currentRoute=p.route);var V=p.route.url;p.history&&(((p.reloadCurrent||P&&i)&&e.history.length)>0||p.replaceState?(P&&m>0&&(e.history=e.history.slice(0,e.history.length-m)),e.history[e.history.length-(p.reloadPrevious?2:1)]=V):p.reloadPrevious?e.history[e.history.length-2]=V:p.reloadAll?e.history=[V]:e.history.push(V)),e.saveHistory();var W=M.parents(l).length>0,j=M[0].f7Component;if(p.reloadPrevious?(j&&!W?j.mount((function(e){a(e).insertBefore(_)})):M.insertBefore(_),E&&x.length&&(x.find(".title-large").length&&x.addClass("navbar-large"),k.length?x.insertBefore(k):(e.$navbarsEl.parents(l).length||e.$el.prepend(e.$navbarsEl),w.append(x)))):(_.next(".page")[0]!==M[0]&&(j&&!W?j.mount((function(e){S.append(e)})):S.append(M[0])),E&&x.length&&(x.find(".title-large").length&&x.addClass("navbar-large"),e.$navbarsEl.parents(l).length||e.$el.prepend(e.$navbarsEl),w.append(x[0]))),W?p.route&&p.route.route&&p.route.route.keepAlive&&!M[0].f7PageMounted&&(M[0].f7PageMounted=!0,e.pageCallback("mounted",M,x,D,I?D:"current",p,_)):e.pageCallback("mounted",M,x,D,I?D:"current",p,_),(p.reloadCurrent||P)&&_.length>0?e.params.stackPages&&e.initialPages.indexOf(_[0])>=0?(_.addClass("stacked"),_.trigger("page:stack"),e.emit("pageStack",_[0]),E&&k.addClass("stacked")):(e.pageCallback("beforeOut",_,k,"current",void 0,p),e.pageCallback("afterOut",_,k,"current",void 0,p),e.pageCallback("beforeRemove",_,k,"current",void 0,p),e.removePage(_),E&&k&&k.length&&e.removeNavbar(k)):p.reloadAll?_.each((function(t,n){var r=a(t),i=a(d.navbar.getElByPage(r));e.params.stackPages&&e.initialPages.indexOf(r[0])>=0?(r.addClass("stacked"),r.trigger("page:stack"),e.emit("pageStack",r[0]),E&&i.addClass("stacked")):(r.hasClass("page-current")&&(e.pageCallback("beforeOut",_,k,"current",void 0,p),e.pageCallback("afterOut",_,k,"current",void 0,p)),e.pageCallback("beforeRemove",r,k&&k.eq(n),"previous",void 0,p),e.removePage(r),E&&i.length&&e.removeNavbar(i))})):p.reloadPrevious&&(e.params.stackPages&&e.initialPages.indexOf(_[0])>=0?(_.addClass("stacked"),_.trigger("page:stack"),e.emit("pageStack",_[0]),E&&k.addClass("stacked")):(e.pageCallback("beforeRemove",_,k,"previous",void 0,p),e.removePage(_),E&&k&&k.length&&e.removeNavbar(k))),p.route.route.tab&&e.tabLoad(p.route.route.tab,T({},p,{history:!1,browserHistory:!1})),h&&u.checkMasterDetailBreakpoint(),e.pageCallback("init",M,x,D,I?D:"current",p,_),p.reloadCurrent||p.reloadAll||P)return e.allowPageChange=!0,e.pageCallback("beforeIn",M,x,D,"current",p),M.removeAttr("aria-hidden"),E&&x&&x.removeAttr("aria-hidden"),e.pageCallback("afterIn",M,x,D,"current",p),p.reloadCurrent&&p.clearPreviousHistory&&e.clearPreviousHistory(),P&&(e.setPagePosition(a(r),"previous"),r.f7Page&&r.f7Page.navbarEl&&e.setNavbarPosition(a(r.f7Page.navbarEl),"previous")),e;if(p.reloadPrevious)return e.allowPageChange=!0,e;function U(){e.setPagePosition(M,"current",!1),e.setPagePosition(_,"previous",!_.hasClass("page-master")),E&&(e.setNavbarPosition(x,"current",!1),e.setNavbarPosition(k,"previous",!k.hasClass("navbar-master"))),e.allowPageChange=!0,e.pageCallback("afterOut",_,k,"current","previous",p),e.pageCallback("afterIn",M,x,"next","current",p);var t=(e.params.preloadPreviousPage||e.params[d.theme+"SwipeBack"])&&!f;t||(M.hasClass("smart-select-page")||M.hasClass("photo-browser-page")||M.hasClass("autocomplete-page")||M.hasClass("color-picker-page"))&&(t=!0),t||(e.params.stackPages?(_.addClass("stacked"),_.trigger("page:stack"),e.emit("pageStack",_[0]),E&&k.addClass("stacked")):M.attr("data-name")&&"smart-select-page"===M.attr("data-name")||(e.pageCallback("beforeRemove",_,k,"previous",void 0,p),e.removePage(_),E&&k.length&&e.removeNavbar(k))),p.clearPreviousHistory&&e.clearPreviousHistory(),e.emit("routeChanged",e.currentRoute,e.previousRoute,e),e.params.browserHistory&&ke.clearRouterQueue()}function q(){e.setPagePosition(_,"current",!1),e.setPagePosition(M,"next",!1),E&&(e.setNavbarPosition(k,"current",!1),e.setNavbarPosition(x,"next",!1))}if(e.pageCallback("beforeOut",_,k,"current","previous",p),e.pageCallback("beforeIn",M,x,"next","current",p),!p.animate||f&&d.width>=e.params.masterDetailBreakpoint)U();else{var K=e.params[e.app.theme+"PageLoadDelay"],J=e.params.transition;p.transition&&(J=p.transition),!J&&e.currentRoute&&e.currentRoute.route&&(J=e.currentRoute.route.transition),!J&&e.currentRoute&&e.currentRoute.route.options&&(J=e.currentRoute.route.options.transition),J&&(M[0].f7PageTransition=J),K?setTimeout((function(){q(),e.animate(_,M,k,x,"forward",J,(function(){U()}))}),K):(q(),e.animate(_,M,k,x,"forward",J,(function(){U()})))}return e}function Pe(e,t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),!e.allowPageChange&&!r)return e;var i=t,a=n,o=i.url,s=i.content,l=i.el,c=i.pageName,d=i.component,u=i.componentUrl;if(!a.reloadCurrent&&a.route&&a.route.route&&a.route.route.parentPath&&e.currentRoute.route&&e.currentRoute.route.parentPath===a.route.route.parentPath){if(a.route.url===e.url)return e.allowPageChange=!0,!1;var p=Object.keys(a.route.params).length===Object.keys(e.currentRoute.params).length;if(p&&Object.keys(a.route.params).forEach((function(t){t in e.currentRoute.params&&e.currentRoute.params[t]===a.route.params[t]||(p=!1)})),p)return!!a.route.route.tab&&e.tabLoad(a.route.route.tab,a);if(!p&&a.route.route.tab&&e.currentRoute.route.tab&&e.currentRoute.parentPath===a.route.parentPath)return e.tabLoad(a.route.route.tab,a)}if(a.route&&a.route.url&&e.url===a.route.url&&!a.reloadCurrent&&!a.reloadPrevious&&!e.params.allowDuplicateUrls)return e.allowPageChange=!0,!1;if(!a.route&&o&&(a.route=e.parseRouteUrl(o),T(a.route,{route:{url:o,path:o}})),(o||u||d)&&(e.allowPageChange=!1),s)$e(e,e.getPageEl(s),a);else if(l)$e(e,e.getPageEl(l),a);else if(c)$e(e,e.$el.children('.page[data-name="'+c+'"]').eq(0),a);else if(d||u)try{e.pageComponentLoader({routerEl:e.el,component:d,componentUrl:u,options:a,resolve:function(t,n){return $e(e,t,T(a,n))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else o&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(o,a).then((function(t){$e(e,e.getPageEl(t),a)})).catch((function(){e.allowPageChange=!0})));return e}function Oe(e,t,n){var r,i,s,l,c,d,u,p,h=N(),f=(0,o.Me)(),m=a(t),g=e.app,v=e.view,b=T({animate:e.params.animate,browserHistory:!0,replaceState:!1},n),y=e.params.masterDetailBreakpoint>0,_=y&&b.route&&b.route.route&&(!0===b.route.route.master||"function"==typeof b.route.route.master&&b.route.route.master(g,e)),w=e.dynamicNavbar,C=m,x=e.$el.children(".page-current"),k=0===x.length&&b.preload,E=y&&x.hasClass("page-master");if(C.length&&e.removeThemeElements(C),w&&(l=C.children(".navbar"),s=e.$navbarsEl,0===l.length&&C[0]&&C[0].f7Page&&(l=C[0].f7Page.$navbarEl),c=s.find(".navbar-current")),e.allowPageChange=!1,0===C.length||0===x.length&&!b.preload)return e.allowPageChange=!0,e;if(e.removeThemeElements(C),b.route&&b.route.route&&b.route.route.keepAlive&&!b.route.route.keepAliveData&&(b.route.route.keepAliveData={pageEl:m[0]}),y){for(var S=e.$el.children(".page:not(.stacked)").filter((function(e){return e!==C[0]})),M=0;M<S.length;M+=1)r||!S[M].classList.contains("page-master")||(r=S[M]);!(d=!_&&r&&e.history.indexOf(b.route.url)>e.history.indexOf(r.f7Page.route.url))&&!_&&r&&r.f7Page&&b.route.route.masterRoute&&(d=b.route.route.masterRoute.path===r.f7Page.route.route.path)}if(d&&r&&r.f7Page&&(u=e.history.indexOf(b.route.url)-e.history.indexOf(r.f7Page.route.url)==1),C.addClass("page-"+(k?"current":"previous")+(_?" page-master":"")+(d?" page-master-detail":"")+(u?" page-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden").trigger("page:unstack").trigger("page:position",{position:k?"current":"previous"}),e.emit("pageUnstack",C[0]),e.emit("pagePosition",C[0],k?"current":"previous"),(_||d)&&(C.trigger("page:role",{role:_?"master":"detail",root:!!u}),e.emit("pageRole",C[0],{role:_?"master":"detail",detailRoot:!!u})),w&&l.length>0&&(l.addClass("navbar-"+(k?"current":"previous")+(_?" navbar-master":"")+(d?" navbar-master-detail":"")+(u?" navbar-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden"),l.trigger("navbar:position",{position:k?"current":"previous"}),e.emit("navbarPosition",l[0],k?"current":"previous"),(_||u)&&e.emit("navbarRole",l[0],{role:_?"master":"detail",detailRoot:!!u})),b.force&&(x.prev(".page-previous:not(.stacked)").length>0||0===x.prev(".page-previous").length))if(e.history.indexOf(b.route.url)>=0?(p=e.history.length-e.history.indexOf(b.route.url)-1,e.history=e.history.slice(0,e.history.indexOf(b.route.url)+2),v.history=e.history):e.history[[e.history.length-2]]?e.history[e.history.length-2]=b.route.url:e.history.unshift(e.url),p&&e.params.stackPages)x.prevAll(".page-previous").each((function(t){var n,o=a(t);w&&(n=a(g.navbar.getElByPage(o))),o[0]!==C[0]&&o.index()>C.index()&&(e.initialPages.indexOf(o[0])>=0?(o.addClass("stacked"),o.trigger("page:stack"),e.emit("pageStack",o[0]),w&&n.addClass("stacked")):(e.pageCallback("beforeRemove",o,n,"previous",void 0,b),o[0]===r&&(i=!0),e.removePage(o),w&&n.length>0&&e.removeNavbar(n)))}));else{var I,L=x.prev(".page-previous:not(.stacked)");w&&(I=a(g.navbar.getElByPage(L))),e.params.stackPages&&e.initialPages.indexOf(L[0])>=0?(L.addClass("stacked"),L.trigger("page:stack"),e.emit("pageStack",L[0]),I.addClass("stacked")):L.length>0&&(e.pageCallback("beforeRemove",L,I,"previous",void 0,b),L[0]===r&&(i=!0),e.removePage(L),w&&I.length&&e.removeNavbar(I))}var $=C.parents(f).length>0,P=C[0].f7Component;function O(){k&&(!$&&P?P.mount((function(t){e.$el.append(t)})):e.$el.append(C)),0===C.next(x).length&&(!$&&P?P.mount((function(e){a(e).insertBefore(x)})):C.insertBefore(x)),w&&l.length&&(l.find(".title-large").length&&l.addClass("navbar-large"),l.insertBefore(c),c.length>0?l.insertBefore(c):(e.$navbarsEl.parents(f).length||e.$el.prepend(e.$navbarsEl),s.append(l))),$?b.route&&b.route.route&&b.route.route.keepAlive&&!C[0].f7PageMounted&&(C[0].f7PageMounted=!0,e.pageCallback("mounted",C,l,"previous","current",b,x)):e.pageCallback("mounted",C,l,"previous","current",b,x)}if(b.preload){O(),b.route.route.tab&&e.tabLoad(b.route.route.tab,T({},b,{history:!1,browserHistory:!1,preload:!0})),_&&(C.removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",C[0]),w&&(a(g.navbar.getElByPage(C)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",g.navbar.getElByPage(C)))),e.pageCallback("init",C,l,"previous","current",b,x),k&&(e.pageCallback("beforeIn",C,l,"current",void 0,b),e.pageCallback("afterIn",C,l,"current",void 0,b));var B=C.prevAll(".page-previous:not(.stacked):not(.page-master)");return B.length>0&&B.each((function(t){var n,r=a(t);w&&(n=a(g.navbar.getElByPage(r))),e.params.stackPages&&e.initialPages.indexOf(t)>=0?(r.addClass("stacked"),r.trigger("page:stack"),e.emit("pageStack",r[0]),w&&n.addClass("stacked")):(e.pageCallback("beforeRemove",r,n,"previous",void 0),e.removePage(r),w&&n.length&&e.removeNavbar(n))})),e.allowPageChange=!0,e}if(!(h.ie||h.edge||h.firefox&&!h.ios)&&e.params.browserHistory&&b.browserHistory)if(b.replaceState){var A=e.params.browserHistoryRoot||"";ke.replace(v.id,{url:b.route.url},A+e.params.browserHistorySeparator+b.route.url)}else p?ke.go(-p):ke.back();if(b.replaceState?e.history[e.history.length-1]=b.route.url:(1===e.history.length&&e.history.unshift(e.url),e.history.pop()),e.saveHistory(),e.currentPageEl=C[0],w&&l.length?e.currentNavbarEl=l[0]:delete e.currentNavbarEl,e.currentRoute=b.route,(h.ie||h.edge||h.firefox&&!h.ios)&&e.params.browserHistory&&b.browserHistory)if(b.replaceState){var R=e.params.browserHistoryRoot||"";ke.replace(v.id,{url:b.route.url},R+e.params.browserHistorySeparator+b.route.url)}else p?ke.go(-p):ke.back();function D(){e.setPagePosition(C,"current",!1),e.setPagePosition(x,"next",!0),w&&(e.setNavbarPosition(l,"current",!1),e.setNavbarPosition(c,"next",!0)),e.pageCallback("afterOut",x,c,"current","next",b),e.pageCallback("afterIn",C,l,"previous","current",b),e.params.stackPages&&e.initialPages.indexOf(x[0])>=0?(x.addClass("stacked"),x.trigger("page:stack"),e.emit("pageStack",x[0]),w&&c.addClass("stacked")):(e.pageCallback("beforeRemove",x,c,"next",void 0,b),e.removePage(x),w&&c.length&&e.removeNavbar(c)),e.allowPageChange=!0,e.emit("routeChanged",e.currentRoute,e.previousRoute,e),(e.params.preloadPreviousPage||e.params[g.theme+"SwipeBack"])&&e.history[e.history.length-2]&&!_&&e.back(e.history[e.history.length-2],{preload:!0}),e.params.browserHistory&&ke.clearRouterQueue()}if(O(),b.route.route.tab&&e.tabLoad(b.route.route.tab,T({},b,{history:!1,browserHistory:!1})),y&&(E||i)&&v.checkMasterDetailBreakpoint(!1),e.pageCallback("init",C,l,"previous","current",b,x),e.pageCallback("beforeOut",x,c,"current","next",b),e.pageCallback("beforeIn",C,l,"previous","current",b),!b.animate||E&&g.width>=e.params.masterDetailBreakpoint)D();else{var G=e.params.transition;x[0]&&x[0].f7PageTransition&&(G=x[0].f7PageTransition,delete x[0].f7PageTransition),b.transition&&(G=b.transition),!G&&e.previousRoute&&e.previousRoute.route&&(G=e.previousRoute.route.transition),!G&&e.previousRoute&&e.previousRoute.route&&e.previousRoute.route.options&&(G=e.previousRoute.route.options.transition),e.setPagePosition(x,"current"),e.setPagePosition(C,"previous",!1),w&&(e.setNavbarPosition(c,"current"),e.setNavbarPosition(l,"previous",!1)),e.animate(x,C,c,l,"backward",G,(function(){D()}))}return e}function Be(e,t,n,r){if(!e.allowPageChange&&!r)return e;var i=t,a=n,o=i.url,s=i.content,l=i.el,c=i.pageName,d=i.component,u=i.componentUrl;if(a.route.url&&e.url===a.route.url&&!a.reloadCurrent&&!a.reloadPrevious&&!e.params.allowDuplicateUrls)return!1;if(!a.route&&o&&(a.route=e.parseRouteUrl(o)),(o||u||d)&&(e.allowPageChange=!1),s)Oe(e,e.getPageEl(s),a);else if(l)Oe(e,e.getPageEl(l),a);else if(c)Oe(e,e.$el.children('.page[data-name="'+c+'"]').eq(0),a);else if(d||u)try{e.pageComponentLoader({routerEl:e.el,component:d,componentUrl:u,options:a,resolve:function(t,n){return Oe(e,t,T(a,n))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else o&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(o,a).then((function(t){Oe(e,e.getPageEl(t),a)})).catch((function(){e.allowPageChange=!0})));return e}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}var De=function(e){var t,n;function r(t,n){var r,i=Ae(r=e.call(this,{},[void 0===n?t:n])||this);i.isAppRouter=void 0===n,i.isAppRouter?T(!1,i,{app:t,params:t.params.view,routes:t.routes||[],cache:t.cache}):T(!1,i,{app:t,view:n,viewId:n.id,id:n.params.routerId,params:n.params,routes:n.routes,history:n.history,scrollHistory:n.scrollHistory,cache:t.cache,dynamicNavbar:"ios"===t.theme&&n.params.iosDynamicNavbar,initialPages:[],initialNavbars:[]}),i.useModules(),i.allowPageChange=!0;var a={},o={};return Object.defineProperty(i,"currentRoute",{enumerable:!0,configurable:!0,set:function(e){void 0===e&&(e={}),o=T({},a),(a=e)&&(i.url=a.url,i.emit("routeChange",e,o,i))},get:function(){return a}}),Object.defineProperty(i,"previousRoute",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}}),i||Ae(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Re(t,n);var i=r.prototype;return i.mount=function(){var e=this,t=e.view;T(!1,e,{tempDom:(0,o.Me)().createElement("div"),$el:t.$el,el:t.el,$navbarsEl:t.$navbarsEl,navbarsEl:t.navbarsEl}),e.emit("local::mount routerMount",e)},i.animatableNavElements=function(e,t,n,r,i){var o,s,l=this,c=l.dynamicNavbar,d=l.params.iosAnimateNavbarBackIcon;function u(e,t){var n,r=e.hasClass("sliding")||t.hasClass("sliding"),i=e.hasClass("subnavbar"),a=!r||!i,o=e.find(".back .icon");return r&&d&&e.hasClass("left")&&o.length>0&&o.next("span").length&&(e=o.next("span"),n=!0),{$el:e,isIconLabel:n,leftOffset:e[0].f7NavbarLeftOffset,rightOffset:e[0].f7NavbarRightOffset,isSliding:r,isSubnavbar:i,needsOpacityTransition:a}}return c&&(o=[],s=[],e.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(t){var s=a(t);s.hasClass("left")&&r&&"forward"===i||s.hasClass("title")&&n||o.push(u(s,e.children(".navbar-inner")))})),t.hasClass("navbar-master")&&l.params.masterDetailBreakpoint>0&&l.app.width>=l.params.masterDetailBreakpoint||t.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(e){var o=a(e);o.hasClass("left")&&n&&!r&&"forward"===i||o.hasClass("left")&&n&&"backward"===i||o.hasClass("title")&&r||s.push(u(o,t.children(".navbar-inner")))})),[s,o].forEach((function(e){e.forEach((function(t){var n=t,r=t.isSliding,i=t.$el,a=e===s?o:s;r&&i.hasClass("title")&&a&&a.forEach((function(e){if(e.isIconLabel){var t=e.$el[0];n.leftOffset+=t&&t.offsetLeft||0}}))}))}))),{newNavEls:o,oldNavEls:s}},i.animate=function(e,t,n,r,i,a,o){var s=this;if(s.params.animateCustom)s.params.animateCustom.apply(s,[e,t,n,r,i,o]);else{var l=s.dynamicNavbar,c="ios"===s.app.theme;if(a){var d="router-transition-custom router-transition-"+a+"-"+i;return("forward"===i?t:e).animationEnd((function(){s.$el.removeClass(d),l&&s.$navbarsEl.length&&(r&&s.$navbarsEl.prepend(r),n&&s.$navbarsEl.prepend(n)),o&&o()})),l&&(r&&t&&(s.setNavbarPosition(r,""),r.removeClass("navbar-next navbar-previous navbar-current"),t.prepend(r)),n&&e&&(s.setNavbarPosition(n,""),n.removeClass("navbar-next navbar-previous navbar-current"),e.prepend(n))),void s.$el.addClass(d)}var u,p,h,f,m,g,v,b="router-transition-"+i+" router-transition";if(c&&l){s.params.masterDetailBreakpoint>0&&s.app.width>=s.params.masterDetailBreakpoint&&(n.hasClass("navbar-master")&&r.hasClass("navbar-master-detail")||n.hasClass("navbar-master-detail")&&r.hasClass("navbar-master"))||(g=n&&n.hasClass("navbar-large"),v=r&&r.hasClass("navbar-large"),h=g&&!n.hasClass("navbar-large-collapsed"),f=v&&!r.hasClass("navbar-large-collapsed"),m=h&&!f||f&&!h);var y=s.animatableNavElements(r,n,f,h,i);u=y.newNavEls,p=y.oldNavEls}("forward"===i?t:e).animationEnd((function(){s.dynamicNavbar&&(r&&(r.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),r.addClass("navbar-no-title-large-transition"),_((function(){r.removeClass("navbar-no-title-large-transition")}))),n&&n.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),r.hasClass("sliding")||r.children(".navbar-inner.sliding").length?r.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):r.find(".sliding").transform(""),n.hasClass("sliding")||n.children(".navbar-inner.sliding").length?n.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):n.find(".sliding").transform("")),s.$el.removeClass(b),o&&o()})),l?(w(0),_((function(){s.$el.addClass(b),m&&(s.el._clientLeft=s.el.clientLeft),w(1)}))):s.$el.addClass(b)}function w(e){c&&l&&(1===e&&(f&&(r.addClass("router-navbar-transition-to-large"),n.addClass("router-navbar-transition-to-large")),h&&(r.addClass("router-navbar-transition-from-large"),n.addClass("router-navbar-transition-from-large"))),u.forEach((function(t){var n=t.$el,r="forward"===i?t.rightOffset:t.leftOffset;t.isSliding&&(t.isSubnavbar&&v?n[0].style.setProperty("transform","translate3d("+r*(1-e)+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)","important"):n.transform("translate3d("+r*(1-e)+"px,0,0)"))})),p.forEach((function(t){var n=t.$el,r="forward"===i?t.leftOffset:t.rightOffset;t.isSliding&&(t.isSubnavbar&&g?n.transform("translate3d("+r*e+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)"):n.transform("translate3d("+r*e+"px,0,0)"))})))}},i.removeModal=function(e){this.removeEl(e)},i.removeTabContent=function(e){a(e).html("")},i.removeNavbar=function(e){this.removeEl(e)},i.removePage=function(e){var t=a(e),n=t&&t[0]&&t[0].f7Page;n&&n.route&&n.route.route&&n.route.route.keepAlive?t.remove():this.removeEl(e)},i.removeEl=function(e){if(e){var t=this,n=a(e);0!==n.length&&(n.find(".tab").each((function(e){a(e).children().each((function(e){e.f7Component&&(a(e).trigger("tab:beforeremove"),e.f7Component.destroy())}))})),n[0].f7Component&&n[0].f7Component.destroy&&n[0].f7Component.destroy(),t.params.removeElements&&(t.params.removeElementsWithTimeout?setTimeout((function(){n.remove()}),t.params.removeElementsTimeout):n.remove()))}},i.getPageEl=function(e){var t=this;if("string"==typeof e)t.tempDom.innerHTML=e;else{if(a(e).hasClass("page"))return e;t.tempDom.innerHTML="",a(t.tempDom).append(e)}return t.findElement(".page",t.tempDom)},i.findElement=function(e,t,n){var r=this,i=r.view,o=r.app,s=a(t),l=e;n&&(l+=":not(.stacked)");var c=s.find(l).filter((function(e){return 0===a(e).parents(".popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page").length}));return c.length>1&&("string"==typeof i.selector&&(c=s.find(i.selector+" "+l)),c.length>1&&(c=s.find("."+o.params.viewMainClass+" "+l))),1===c.length?c:(n||(c=r.findElement(l,s,!0)),c&&1===c.length?c:c&&c.length>1?a(c[0]):void 0)},i.flattenRoutes=function(e){void 0===e&&(e=this.routes);var t=this,n=[];return e.forEach((function(e){var r=!1;if("tabs"in e&&e.tabs){var i=e.tabs.map((function(t){var n=T({},e,{path:(e.path+"/"+t.path).replace("///","/").replace("//","/"),parentPath:e.path,tab:t});return delete n.tabs,delete n.routes,n}));r=!0,n=n.concat(t.flattenRoutes(i))}if("detailRoutes"in e){var a=e.detailRoutes.map((function(t){var n=T({},t);return n.masterRoute=e,n.masterRoutePath=e.path,n}));n=n.concat(e,t.flattenRoutes(a))}if("routes"in e){var o=e.routes.map((function(t){var n=T({},t);return n.path=(e.path+"/"+n.path).replace("///","/").replace("//","/"),n}));n=r?n.concat(t.flattenRoutes(o)):n.concat(e,t.flattenRoutes(o))}"routes"in e||"tabs"in e&&e.tabs||"detailRoutes"in e||n.push(e)})),n},i.parseRouteUrl=function(e){if(!e)return{};var t=C(e),n=e.split("#")[1],r=e.split("#")[0].split("?")[0];return{query:t,hash:n,params:{},url:e,path:r}},i.generateUrl=function(e){if(void 0===e&&(e={}),"string"==typeof e)return e;var t=e,n=t.name,r=t.path,i=t.params,a=t.query;if(!n&&!r)throw new Error('Framework7: "name" or "path" parameter is required');var o=this,s=n?o.findRouteByKey("name",n):o.findRouteByKey("path",r);if(!s)throw n?new Error('Framework7: route with name "'+n+'" not found'):new Error('Framework7: route with path "'+r+'" not found');var l=o.constructRouteUrl(s,{params:i,query:a});if(!l)throw new Error("Framework7: can't construct URL for route with name \""+n+'"');return l},i.constructRouteUrl=function(e,t){var n,r,i=void 0===t?{}:t,a=i.params,o=i.query,s=e.path,l=function(e,t){void 0===t&&(t={});var n=we(t),r=t.encode,i=void 0===r?function(e){return e}:r,a=t.validate,o=void 0===a||a,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),n)}));return function(t){for(var n="",r=0;r<e.length;r++){var a=e[r];if("string"!=typeof a){var l=t?t[a.name]:void 0,c="?"===a.modifier||"*"===a.modifier,d="*"===a.modifier||"+"===a.modifier;if(Array.isArray(l)){if(!d)throw new TypeError('Expected "'.concat(a.name,'" to not repeat, but got an array'));if(0===l.length){if(c)continue;throw new TypeError('Expected "'.concat(a.name,'" to not be empty'))}for(var u=0;u<l.length;u++){var p=i(l[u],a);if(o&&!s[r].test(p))throw new TypeError('Expected all "'.concat(a.name,'" to match "').concat(a.pattern,'", but got "').concat(p,'"'));n+=a.prefix+p+a.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c){var h=d?"an array":"a string";throw new TypeError('Expected "'.concat(a.name,'" to be ').concat(h))}}else{if(p=i(String(l),a),o&&!s[r].test(p))throw new TypeError('Expected "'.concat(a.name,'" to match "').concat(a.pattern,'", but got "').concat(p,'"'));n+=a.prefix+p+a.suffix}}else n+=a}return n}}(ye(s,r),r);try{n=l(a||{})}catch(e){throw new Error("Framework7: error constructing route URL from passed params:\nRoute: "+s+"\n"+e.toString())}return o&&("string"==typeof o?n+="?"+o:Object.keys(o).length&&(n+="?"+k(o))),n},i.findTabRouteUrl=function(e){var t,n=this,r=a(e),i=n.currentRoute.route.parentPath,o=r.attr("id");return n.flattenRoutes(n.routes).forEach((function(e){e.parentPath===i&&e.tab&&e.tab.id===o&&(t=n.currentRoute.params&&Object.keys(n.currentRoute.params).length>0?n.constructRouteUrl(e,{params:n.currentRoute.params,query:n.currentRoute.query}):e.path)})),t},i.findRouteByKey=function(e,t){var n,r=this.routes;return this.flattenRoutes(r).forEach((function(r){n||r[e]===t&&(n=r)})),n},i.findMatchingRoute=function(e){if(e){var t,n=this,r=n.routes,i=n.flattenRoutes(r),a=n.parseRouteUrl(e),o=a.path,s=a.query,l=a.hash,c=a.params;return i.forEach((function(n){if(!t){var r,i,a=[],d=[n.path];n.alias&&("string"==typeof n.alias?d.push(n.alias):Array.isArray(n.alias)&&n.alias.forEach((function(e){d.push(e)}))),d.forEach((function(e){r||(r=Ce(e,a).exec(o))})),r&&(a.forEach((function(e,t){if("number"!=typeof e.name){var n=r[t+1];c[e.name]=null==n?n:decodeURIComponent(n)}})),n.parentPath&&(i=o.split("/").slice(0,n.parentPath.split("/").length-1).join("/")),t={query:s,hash:l,params:c,url:e,path:o,parentPath:i,route:n,name:n.name})}})),t}},i.replaceRequestUrlParams=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=e;return"string"==typeof n&&n.indexOf("{{")>=0&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&Object.keys(t.route.params).forEach((function(e){var r=new RegExp("{{"+e+"}}","g");n=n.replace(r,t.route.params[e]||"")})),n},i.removeFromXhrCache=function(e){for(var t=this.cache.xhr,n=!1,r=0;r<t.length;r+=1)t[r].url===e&&(n=r);!1!==n&&t.splice(n,1)},i.xhrRequest=function(e,t){var n=this,r=n.params,i=t.ignoreCache,a=e,o=a.indexOf("?")>=0;return r.passRouteQueryToRequest&&t&&t.route&&t.route.query&&Object.keys(t.route.query).length&&(a+=(o?"&":"?")+k(t.route.query),o=!0),r.passRouteParamsToRequest&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&(a+=(o?"&":"?")+k(t.route.params),o=!0),a.indexOf("{{")>=0&&(a=n.replaceRequestUrlParams(a,t)),r.xhrCacheIgnoreGetParameters&&a.indexOf("?")>=0&&(a=a.split("?")[0]),new Promise((function(e,o){if(r.xhrCache&&!i&&a.indexOf("nocache")<0&&r.xhrCacheIgnore.indexOf(a)<0)for(var s=0;s<n.cache.xhr.length;s+=1){var l=n.cache.xhr[s];if(l.url===a&&w()-l.time<r.xhrCacheDuration)return void e(l.content)}n.xhrAbortController=n.app.request.abortController(),n.app.request({abortController:n.xhrAbortController,url:a,method:"GET",beforeSend:function(e){n.emit("routerAjaxStart",e,t)},complete:function(i,s){n.emit("routerAjaxComplete",i),"error"!==s&&"timeout"!==s&&i.status>=200&&i.status<300||0===i.status?(r.xhrCache&&""!==i.responseText&&(n.removeFromXhrCache(a),n.cache.xhr.push({url:a,time:w(),content:i.responseText})),n.emit("routerAjaxSuccess",i,t),e(i.responseText)):(n.emit("routerAjaxError",i,t),o(i))},error:function(e){n.emit("routerAjaxError",e,t),o(e)}})}))},i.setNavbarPosition=function(e,t,n){e.removeClass("navbar-previous navbar-current navbar-next"),t&&e.addClass("navbar-"+t),!1===n?e.removeAttr("aria-hidden"):!0===n&&e.attr("aria-hidden","true"),e.trigger("navbar:position",{position:t}),this.emit("navbarPosition",e[0],t)},i.setPagePosition=function(e,t,n){e.removeClass("page-previous page-current page-next"),e.addClass("page-"+t),!1===n?e.removeAttr("aria-hidden"):!0===n&&e.attr("aria-hidden","true"),e.trigger("page:position",{position:t}),this.emit("pagePosition",e[0],t)},i.removeThemeElements=function(e){var t,n=this.app.theme;"ios"===n?t=".md-only, .aurora-only, .if-md, .if-aurora, .if-not-ios, .not-ios":"md"===n?t=".ios-only, .aurora-only, .if-ios, .if-aurora, .if-not-md, .not-md":"aurora"===n&&(t=".ios-only, .md-only, .if-ios, .if-md, .if-not-aurora, .not-aurora"),a(e).find(t).remove()},i.getPageData=function(e,t,n,r,i,o){void 0===i&&(i={});var s,l,c=this,d=a(e).eq(0),u=a(t).eq(0),p=d[0].f7Page||{};if(("next"===n&&"current"===r||"current"===n&&"previous"===r)&&(s="forward"),("current"===n&&"next"===r||"previous"===n&&"current"===r)&&(s="backward"),p&&!p.fromPage){var h=a(o);h.length&&(l=h[0].f7Page)}(l=p.pageFrom||l)&&l.pageFrom&&(l.pageFrom=null);var f={app:c.app,view:c.view,router:c,$el:d,el:d[0],$pageEl:d,pageEl:d[0],$navbarEl:u,navbarEl:u[0],name:d.attr("data-name"),position:n,from:n,to:r,direction:s,route:p.route?p.route:i,pageFrom:l};return d[0].f7Page=f,f},i.pageCallback=function(e,t,n,r,i,o,s){if(void 0===o&&(o={}),t){var l=this,c=a(t);if(c.length){var d=a(n),u=o.route,p=l.params.restoreScrollTopOnBack&&!(l.params.masterDetailBreakpoint>0&&c.hasClass("page-master")&&l.app.width>=l.params.masterDetailBreakpoint),h=c[0].f7Page&&c[0].f7Page.route&&c[0].f7Page.route.route&&c[0].f7Page.route.route.keepAlive;"beforeRemove"===e&&h&&(e="beforeUnmount");var f="page"+(e[0].toUpperCase()+e.slice(1,e.length)),g="page:"+e.toLowerCase(),v={};(v="beforeRemove"===e&&c[0].f7Page?T(c[0].f7Page,{from:r,to:i,position:r}):l.getPageData(c[0],d[0],r,i,u,s)).swipeBack=!!o.swipeBack;var b=o.route?o.route.route:{},y=b.on,_=void 0===y?{}:y,w=b.once,C=void 0===w?{}:w;if(o.on&&T(_,o.on),o.once&&T(C,o.once),"mounted"===e&&E(),"init"===e){if(p&&("previous"===r||!r)&&"current"===i&&l.scrollHistory[v.route.url]&&!c.hasClass("no-restore-scroll")){var x=c.find(".page-content");x.length>0&&(x=x.filter((function(e){return 0===a(e).parents(".tab:not(.tab-active)").length&&!a(e).is(".tab:not(.tab-active)")}))),x.scrollTop(l.scrollHistory[v.route.url])}if(E(),c[0].f7PageInitialized)return c.trigger("page:reinit",v),void l.emit("pageReinit",v);c[0].f7PageInitialized=!0}if(p&&"beforeOut"===e&&"current"===r&&"previous"===i){var k=c.find(".page-content");k.length>0&&(k=k.filter((function(e){return 0===a(e).parents(".tab:not(.tab-active)").length&&!a(e).is(".tab:not(.tab-active)")}))),l.scrollHistory[v.route.url]=k.scrollTop()}p&&"beforeOut"===e&&"current"===r&&"next"===i&&delete l.scrollHistory[v.route.url],c.trigger(g,v),l.emit(f,v),"beforeRemove"!==e&&"beforeUnmount"!==e||(c[0].f7RouteEventsAttached&&(c[0].f7RouteEventsOn&&Object.keys(c[0].f7RouteEventsOn).forEach((function(e){c.off(m(e),c[0].f7RouteEventsOn[e])})),c[0].f7RouteEventsOnce&&Object.keys(c[0].f7RouteEventsOnce).forEach((function(e){c.off(m(e),c[0].f7RouteEventsOnce[e])})),c[0].f7RouteEventsAttached=null,c[0].f7RouteEventsOn=null,c[0].f7RouteEventsOnce=null,delete c[0].f7RouteEventsAttached,delete c[0].f7RouteEventsOn,delete c[0].f7RouteEventsOnce),h||(c[0].f7Page&&c[0].f7Page.navbarEl&&delete c[0].f7Page.navbarEl.f7Page,c[0].f7Page=null))}}function E(){c[0].f7RouteEventsAttached||(c[0].f7RouteEventsAttached=!0,_&&Object.keys(_).length>0&&(c[0].f7RouteEventsOn=_,Object.keys(_).forEach((function(e){_[e]=_[e].bind(l),c.on(m(e),_[e])}))),C&&Object.keys(C).length>0&&(c[0].f7RouteEventsOnce=C,Object.keys(C).forEach((function(e){C[e]=C[e].bind(l),c.once(m(e),C[e])}))))}},i.saveHistory=function(){var e=this,t=(0,o.Jj)();e.view.history=e.history,e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&(t.localStorage["f7router-"+e.view.id+"-history"]=JSON.stringify(e.history))},i.restoreHistory=function(){var e=this,t=(0,o.Jj)();e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&t.localStorage["f7router-"+e.view.id+"-history"]&&(e.history=JSON.parse(t.localStorage["f7router-"+e.view.id+"-history"]),e.view.history=e.history)},i.clearHistory=function(){var e=this;e.history=[],e.view&&(e.view.history=[]),e.saveHistory()},i.updateCurrentUrl=function(e){var t=this;Me(t,"updateCurrentUrl"),t.history.length?t.history[t.history.length-1]=e:t.history.push(e);var n=t.parseRouteUrl(e),r=n.query,i=n.hash,a=n.params,o=n.url,s=n.path;if(t.currentRoute&&T(t.currentRoute,{query:r,hash:i,params:a,url:o,path:s}),t.params.browserHistory){var l=t.params.browserHistoryRoot||"";ke.replace(t.view.id,{url:e},l+t.params.browserHistorySeparator+e)}t.saveHistory(),t.emit("routeUrlUpdate",t.currentRoute,t)},i.getInitialUrl=function(){var e=this;if(e.initialUrl)return{initialUrl:e.initialUrl,historyRestored:e.historyRestored};var t,n=e.app,r=e.view,i=(0,o.Me)(),a=(0,o.Jj)(),s=n.params.url&&"string"==typeof n.params.url&&"undefined"!=typeof URL?new URL(n.params.url):i.location,l=e.params.url,c=s.href.split(s.origin)[1],d=e.params,u=d.browserHistory,p=d.browserHistoryOnLoad,h=d.browserHistorySeparator,f=e.params.browserHistoryRoot;return(a.cordova||a.Capacitor&&a.Capacitor.isNative)&&u&&!h&&!f&&s.pathname.indexOf("index.html")&&(console.warn("Framework7: wrong or not complete browserHistory configuration, trying to guess browserHistoryRoot"),f=s.pathname.split("index.html")[0]),u&&p?(f&&c.indexOf(f)>=0&&""===(c=c.split(f)[1])&&(c="/"),l=h.length>0&&c.indexOf(h)>=0?c.split(h)[1]:c,e.restoreHistory(),e.history.indexOf(l)>=0?e.history=e.history.slice(0,e.history.indexOf(l)+1):e.params.url===l?e.history=[l]:ke.state&&ke.state[r.id]&&ke.state[r.id].url===e.history[e.history.length-1]?l=e.history[e.history.length-1]:e.history=[c.split(h)[0]||"/",l],e.history.length>1?t=!0:e.history=[],e.saveHistory()):(l||(l=c),s.search&&l.indexOf("?")<0&&(l+=s.search),s.hash&&l.indexOf("#")<0&&(l+=s.hash)),e.initialUrl=l,e.historyRestored=t,{initialUrl:l,historyRestored:t}},i.init=function(){var e=this,t=e.app,n=e.view,r=(0,o.Me)();e.mount();var i=e.getInitialUrl(),s=i.initialUrl,l=i.historyRestored;(n&&e.params.iosSwipeBack&&"ios"===t.theme||n&&e.params.mdSwipeBack&&"md"===t.theme||n&&e.params.auroraSwipeBack&&"aurora"===t.theme)&&function(e){var t,n,r,i,o,s,l,c,d,u=e,p=u.$el,h=u.$navbarsEl,f=u.app,m=u.params,g=D(),v=N(),b=!1,y=!1,_={},C=[],x=[],k=!0,E=[],S=[],T=m[f.theme+"SwipeBackAnimateShadow"],M=m[f.theme+"SwipeBackAnimateOpacity"],I=m[f.theme+"SwipeBackActiveArea"],L=m[f.theme+"SwipeBackThreshold"],$=f.rtl?"right center":"left center",P=f.rtl?"calc(100% - var(--f7-navbar-large-title-padding-left) - var(--f7-safe-area-left)) center":"calc(var(--f7-navbar-large-title-padding-left) + var(--f7-safe-area-left)) center";function O(e){var t=void 0===e?{}:e,n=t.progress,r=t.reset,i=t.transition,a=t.reflow,o=["overflow","transform","transform-origin","opacity"];if(!0===i||!1===i)for(var s=0;s<c.length;s+=1){var l=c[s];l&&l.el&&(!0===i&&l.el.classList.add("navbar-page-transitioning"),!1===i&&l.el.classList.remove("navbar-page-transitioning"))}a&&c.length&&c[0]&&c[0].el&&(c[0].el._clientLeft=c[0].el.clientLeft);for(var d=0;d<c.length;d+=1){var u=c[d];if(u&&u.el){!u.className||u.classNameSet||r||(u.el.classList.add(u.className),u.classNameSet=!0),u.className&&r&&u.el.classList.remove(u.className);for(var p=0;p<o.length;p+=1){var h=o[p];u[h]&&(r?u.el.style[h]="":"function"==typeof u[h]?u.el.style[h]=u[h](n):u.el.style[h]=u[h])}}}}function B(e){var n=m[f.theme+"SwipeBack"];!k||!n||b||f.swipeout&&f.swipeout.el||!u.allowPageChange||a(e.target).closest(".range-slider, .calendar-months").length>0||a(e.target).closest(".page-master, .page-master-detail").length>0&&m.masterDetailBreakpoint>0&&f.width>=m.masterDetailBreakpoint||(y=!1,b=!0,t=void 0,_.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,_.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,i=w(),o=u.dynamicNavbar)}function A(e){if(b){var i="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,d="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===t&&(t=!!(t||Math.abs(d-_.y)>Math.abs(i-_.x))||i<_.x&&!f.rtl||i>_.x&&f.rtl),t||e.f7PreventSwipeBack||f.preventSwipeBack)b=!1;else{if(!y){var g=!1,w=a(e.target),k=w.closest(".swipeout");if(k.length>0&&(!f.rtl&&k.find(".swipeout-actions-left").length>0&&(g=!0),f.rtl&&k.find(".swipeout-actions-right").length>0&&(g=!0)),((C=w.closest(".page")).hasClass("no-swipeback")||w.closest(".no-swipeback, .card-opened").length>0)&&(g=!0),(x=p.find(".page-previous:not(.stacked)")).length>1&&(x=x.eq(x.length-1)),_.x,p.offset().left,n=p.width(),(f.rtl?_.x<p.offset().left-p[0].scrollLeft+(n-I):_.x-p.offset().left>I)&&(g=!0),0!==x.length&&0!==C.length||(g=!0),g)return void(b=!1);T&&0===(s=C.find(".page-shadow-effect")).length&&(s=a('<div class="page-shadow-effect"></div>'),C.append(s)),M&&0===(l=x.find(".page-opacity-effect")).length&&(l=a('<div class="page-opacity-effect"></div>'),x.append(l)),o&&(E=h.find(".navbar-current:not(.stacked)"),(S=h.find(".navbar-previous:not(.stacked)")).length>1&&(S=S.eq(S.length-1)),c=function(){var e,t,n=[],r=f.rtl?-1:1,i=E.hasClass("navbar-transparent")&&!E.hasClass("navbar-large")&&!E.hasClass("navbar-transparent-visible"),o=E.hasClass("navbar-large"),s=E.hasClass("navbar-large-collapsed"),l=E.hasClass("navbar-large-transparent")||E.hasClass("navbar-large")&&E.hasClass("navbar-transparent"),c=S.hasClass("navbar-transparent")&&!S.hasClass("navbar-large")&&!S.hasClass("navbar-transparent-visible"),d=S.hasClass("navbar-large"),u=S.hasClass("navbar-large-collapsed"),p=S.hasClass("navbar-large-transparent")||S.hasClass("navbar-large")&&S.hasClass("navbar-transparent"),h=o&&!s,g=d&&!u,b=E.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg"),y=S.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg");return m.iosAnimateNavbarBackIcon&&(e=E.hasClass("sliding")||E.find(".navbar-inner.sliding").length?E.find(".left").find(".back .icon + span").eq(0):E.find(".left.sliding").find(".back .icon + span").eq(0),t=S.hasClass("sliding")||S.find(".navbar-inner.sliding").length?S.find(".left").find(".back .icon + span").eq(0):S.find(".left.sliding").find(".back .icon + span").eq(0),e.length&&y.each((function(t){a(t).hasClass("title")&&(t.f7NavbarLeftOffset+=e.prev(".icon")[0].offsetWidth)}))),b.each((function(t){var c=a(t),d=c.hasClass("subnavbar"),u=c.hasClass("left"),p=c.hasClass("title"),f=c.hasClass("navbar-bg");if((!p&&!f||!i)&&(h||!c.hasClass(".title-large"))){var b={el:t};if(h){if(p)return;if(c.hasClass("title-large"))return n.indexOf(b)<0&&n.push(b),b.overflow="visible",void c.find(".title-large-text").each((function(e){n.push({el:e,transform:function(e){return"translateX("+100*e*r+"%)"}})}))}if(g&&(h||c.hasClass("title-large")&&(n.indexOf(b)<0&&n.push(b),b.opacity=0),u))return n.indexOf(b)<0&&n.push(b),b.opacity=function(e){return 1-Math.pow(e,.33)},void c.find(".back span").each((function(e){n.push({el:e,"transform-origin":$,transform:function(e){return"translateX(calc("+e+" * (var(--f7-navbarTitleLargeOffset) - var(--f7-navbarLeftTextOffset)))) translateY(calc("+e+" * (var(--f7-navbar-large-title-height) - var(--f7-navbar-large-title-padding-vertical) / 2))) scale("+(1+1*e)+")"}})}));if(f)return n.indexOf(b)<0&&n.push(b),h||g||(s?(l&&(b.className="ios-swipeback-navbar-bg-large"),b.transform=function(e){return"translateX("+100*e*r+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):b.transform=function(e){return"translateX("+100*e*r+"%)"}),!h&&g&&(b.className="ios-swipeback-navbar-bg-large",b.transform=function(e){return"translateX("+100*e*r+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),h&&g&&(b.transform=function(e){return"translateX("+100*e*r+"%)"}),void(h&&!g&&(b.transform=function(e){return"translateX("+100*e*r+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}));if(!c.hasClass("title-large")){var y=c.hasClass("sliding")||c.parents(".navbar-inner.sliding").length;if(n.indexOf(b)<0&&n.push(b),(!d||d&&!y)&&(b.opacity=function(e){return 1-Math.pow(e,.33)}),y){var _=b;if(u&&e.length&&m.iosAnimateNavbarBackIcon){var w={el:e[0]};_=w,n.push(w)}_.transform=function(e){var t=e*_.el.f7NavbarRightOffset;return 1===v.pixelRatio&&(t=Math.round(t)),d&&o?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),y.each((function(e){var i=a(e),o=i.hasClass("subnavbar"),s=i.hasClass("left"),l=i.hasClass("title"),f=i.hasClass("navbar-bg");if(!l&&!f||!c){var b={el:e};if(g){if(l)return;if(n.indexOf(b)<0&&n.push(b),i.hasClass("title-large"))return b.opacity=1,b.overflow="visible",void i.find(".title-large-text").each((function(e){n.push({el:e,"transform-origin":P,opacity:function(e){return Math.pow(e,3)},transform:function(e){return"translateX(calc("+(1-e)+" * (var(--f7-navbarLeftTextOffset) - var(--f7-navbarTitleLargeOffset)))) translateY(calc("+(e-1)+" * var(--f7-navbar-large-title-height) + "+(1-e)+" * var(--f7-navbar-large-title-padding-vertical))) scale("+(.5+.5*e)+")"}})}))}if(f)return n.indexOf(b)<0&&n.push(b),h||g||(u?(p&&(b.className="ios-swipeback-navbar-bg-large"),b.transform=function(e){return"translateX("+(100*e-100)*r+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):b.transform=function(e){return"translateX("+(100*e-100)*r+"%)"}),!h&&g&&(b.transform=function(e){return"translateX("+(100*e-100)*r+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),h&&!g&&(b.className="ios-swipeback-navbar-bg-large",b.transform=function(e){return"translateX("+(100*e-100)*r+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}),void(h&&g&&(b.transform=function(e){return"translateX("+(100*e-100)*r+"%)"}));if(!i.hasClass("title-large")){var y=i.hasClass("sliding")||S.children(".navbar-inner.sliding").length;if(n.indexOf(b)<0&&n.push(b),(!o||o&&!y)&&(b.opacity=function(e){return Math.pow(e,3)}),y){var _=b;if(s&&t.length&&m.iosAnimateNavbarBackIcon){var w={el:t[0]};_=w,n.push(w)}_.transform=function(e){var t=_.el.f7NavbarLeftOffset*(1-e);return 1===v.pixelRatio&&(t=Math.round(t)),o&&d?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),n}()),a(".sheet.modal-in").length>0&&f.sheet&&f.sheet.close(a(".sheet.modal-in"))}e.f7PreventSwipePanel=!0,y=!0,f.preventSwipePanelBySwipeBack=!0,e.preventDefault();var B=f.rtl?-1:1;(r=(i-_.x-L)*B)<0&&(r=0);var A=Math.min(Math.max(r/n,0),1),R={percentage:A,progress:A,currentPageEl:C[0],previousPageEl:x[0],currentNavbarEl:E[0],previousNavbarEl:S[0]};p.trigger("swipeback:move",R),u.emit("swipebackMove",R);var D=r*B,N=(r/5-n/5)*B;f.rtl?(D=Math.max(D,-n),N=Math.max(N,0)):(D=Math.min(D,n),N=Math.min(N,0)),1===v.pixelRatio&&(D=Math.round(D),N=Math.round(N)),u.swipeBackActive=!0,a([C[0],x[0]]).addClass("page-swipeback-active"),C.transform("translate3d("+D+"px,0,0)"),T&&(s[0].style.opacity=1-1*A),"ios"===f.theme&&x.transform("translate3d("+N+"px,0,0)"),M&&(l[0].style.opacity=1-1*A),o&&O({progress:A})}}}function R(){if(f.preventSwipePanelBySwipeBack=!1,!b||!y)return b=!1,void(y=!1);b=!1,y=!1,u.swipeBackActive=!1;var e=a([C[0],x[0]]);if(e.removeClass("page-swipeback-active"),0===r)return e.transform(""),s&&s.length>0&&s.remove(),l&&l.length>0&&l.remove(),void(o&&O({reset:!0}));var t=w()-i,c=!1;(t<300&&r>10||t>=300&&r>n/2)&&(C.removeClass("page-current").addClass("page-next"+("ios"!==f.theme?" page-next-on-right":"")),x.removeClass("page-previous").addClass("page-current").removeAttr("aria-hidden"),s&&(s[0].style.opacity=""),l&&(l[0].style.opacity=""),o&&(u.setNavbarPosition(E,"next"),u.setNavbarPosition(S,"current",!1)),c=!0),e.addClass("page-transitioning page-transitioning-swipeback"),v.ios&&(C[0]._clientLeft=C[0].clientLeft),e.transform(""),o&&O({progress:c?1:0,transition:!0,reflow:!!v.ios}),k=!1,u.allowPageChange=!1;var d={currentPageEl:C[0],previousPageEl:x[0],currentNavbarEl:E[0],previousNavbarEl:S[0]};c?(u.currentRoute=x[0].f7Page.route,u.currentPage=x[0],u.pageCallback("beforeOut",C,E,"current","next",{route:C[0].f7Page.route,swipeBack:!0}),u.pageCallback("beforeIn",x,S,"previous","current",{route:x[0].f7Page.route,swipeBack:!0},C[0]),p.trigger("swipeback:beforechange",d),u.emit("swipebackBeforeChange",d)):(p.trigger("swipeback:beforereset",d),u.emit("swipebackBeforeReset",d)),C.transitionEnd((function(){e.removeClass("page-transitioning page-transitioning-swipeback"),o&&O({reset:!0,transition:!1}),k=!0,u.allowPageChange=!0,c?(1===u.history.length&&u.history.unshift(u.url),u.history.pop(),u.saveHistory(),m.browserHistory&&ke.back(),u.pageCallback("afterOut",C,E,"current","next",{route:C[0].f7Page.route,swipeBack:!0}),u.pageCallback("afterIn",x,S,"previous","current",{route:x[0].f7Page.route,swipeBack:!0}),m.stackPages&&u.initialPages.indexOf(C[0])>=0?(C.addClass("stacked"),o&&E.addClass("stacked")):(u.pageCallback("beforeRemove",C,E,"next",{swipeBack:!0}),u.removePage(C),o&&u.removeNavbar(E)),p.trigger("swipeback:afterchange",d),u.emit("swipebackAfterChange",d),u.emit("routeChanged",u.currentRoute,u.previousRoute,u),m.preloadPreviousPage&&u.back(u.history[u.history.length-2],{preload:!0})):(p.trigger("swipeback:afterreset",d),u.emit("swipebackAfterReset",d)),s&&s.length>0&&s.remove(),l&&l.length>0&&l.remove()}))}d=!("touchstart"!==f.touchEvents.start||!g.passiveListener)&&{passive:!0,capture:!1},p.on(f.touchEvents.start,B,d),f.on("touchmove:active",A),f.on("touchend:passive",R),u.on("routerDestroy",(function(){var e=!("touchstart"!==f.touchEvents.start||!g.passiveListener)&&{passive:!0,capture:!1};p.off(f.touchEvents.start,B,e),f.off("touchmove:active",A),f.off("touchend:passive",R)}))}(e);var c,d=e.params,u=d.browserHistory,p=d.browserHistoryOnLoad,h=d.browserHistoryAnimateOnLoad,f=d.browserHistoryInitialMatch;if(e.history.length>1){var m=f?s:e.history[0];(c=e.findMatchingRoute(m))||(c=T(e.parseRouteUrl(m),{route:{url:m,path:m.split("?")[0]}}))}else(c=e.findMatchingRoute(s))||(c=T(e.parseRouteUrl(s),{route:{url:s,path:s.split("?")[0]}}));if(e.params.stackPages&&e.$el.children(".page").each((function(t){var n=a(t);e.initialPages.push(n[0]),e.dynamicNavbar&&n.children(".navbar").length>0&&e.initialNavbars.push(n.children(".navbar")[0])})),0===e.$el.children(".page:not(.stacked)").length&&s&&e.params.loadInitialPage)e.navigate(s,{initial:!0,reloadCurrent:!0,browserHistory:!1,animate:!1,once:{modalOpen:function(){l&&(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0})},pageAfterIn:function(){l&&(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0})}}});else if(e.$el.children(".page:not(.stacked)").length){var g;e.currentRoute=c,e.$el.children(".page:not(.stacked)").each((function(i){var o,s=a(i);e.setPagePosition(s,"current"),e.dynamicNavbar&&((o=s.children(".navbar")).length>0?(e.$navbarsEl.parents(r).length||e.$el.prepend(e.$navbarsEl),e.setNavbarPosition(o,"current"),e.$navbarsEl.append(o),o.children(".title-large").length&&o.addClass("navbar-large"),s.children(".navbar").remove()):(e.$navbarsEl.addClass("navbar-hidden"),o.children(".title-large").length&&e.$navbarsEl.addClass("navbar-hidden navbar-large-hidden"))),e.currentRoute&&e.currentRoute.route&&(!0===e.currentRoute.route.master||"function"==typeof e.currentRoute.route.master&&e.currentRoute.route.master(t,e))&&e.params.masterDetailBreakpoint>0&&(s.addClass("page-master"),s.trigger("page:role",{role:"master"}),o&&o.length&&o.addClass("navbar-master"),n.checkMasterDetailBreakpoint());var l={route:e.currentRoute};e.currentRoute&&e.currentRoute.route&&e.currentRoute.route.options&&T(l,e.currentRoute.route.options),e.currentPageEl=s[0],e.dynamicNavbar&&o.length&&(e.currentNavbarEl=o[0]),e.removeThemeElements(s),e.dynamicNavbar&&o.length&&e.removeThemeElements(o),l.route.route.tab&&(g=!0,e.tabLoad(l.route.route.tab,T({},l))),e.pageCallback("init",s,o,"current",void 0,l),e.pageCallback("beforeIn",s,o,"current",void 0,l),e.pageCallback("afterIn",s,o,"current",void 0,l)})),l&&(f?(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0}):e.navigate(s,{initial:!0,browserHistory:!1,history:!1,animate:h,once:{pageAfterIn:function(){(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>2&&e.back({preload:!0})}}})),l||g||(e.history.push(s),e.saveHistory())}!(s&&u&&p)||ke.state&&ke.state[n.id]||ke.initViewState(n.id,{url:s}),e.emit("local::init routerInit",e)},i.destroy=function(){var e=this;e.emit("local::destroy routerDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},r}(W);De.prototype.navigate=function(e,t){void 0===t&&(t={});var n,r,i,a,o,s,l,c=this;if(c.swipeBackActive)return c;if("string"==typeof e?n=e:(n=e.url,r=e.route,i=e.name,a=e.path,o=e.query,s=e.params),i||a)return(n=c.generateUrl({path:a,name:i,params:s,query:o}))?c.navigate(n,t):c;var d=c.app;if(Me(c,"navigate"),"#"===n||""===n)return c;var u=n.replace("./","");if("/"!==u[0]&&0!==u.indexOf("#")){var p=c.currentRoute.parentPath||c.currentRoute.path;u=((p?p+"/":"/")+u).replace("///","/").replace("//","/")}if(!(l=r?T(c.parseRouteUrl(u),{route:T({},r)}):c.findMatchingRoute(u)))return c;if(l.route&&l.route.viewName){var h=l.route.viewName,f=d.views[h];if(!f)throw new Error('Framework7: There is no View with "'+h+'" name that was specified in this route');if(f!==c.view)return f.router.navigate(e,t)}if(l.route.redirect)return Ee.call(c,"forward",l,t);var m={};if(l.route.options?T(m,l.route.options,t):T(m,t),m.openIn&&(!c.params.ignoreOpenIn||c.params.ignoreOpenIn&&c.history.length>0))return function(e,t,n){var r={url:t,route:{path:t,options:Le({},n,{openIn:void 0})}},i=Le({},n);if("popup"===n.openIn&&(i.content='<div class="popup popup-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',r.route.popup=i),"loginScreen"===n.openIn&&(i.content='<div class="login-screen login-screen-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',r.route.loginScreen=i),"sheet"===n.openIn&&(i.content='<div class="sheet-modal sheet-modal-router-open-in" data-url="'+t+'"><div class="sheet-modal-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',r.route.sheet=i),"popover"===n.openIn&&(i.targetEl=n.clickedEl||n.targetEl,i.content='<div class="popover popover-router-open-in" data-url="'+t+'"><div class="popover-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',r.route.popover=i),n.openIn.indexOf("panel")>=0){var a=n.openIn.split(":"),o=a[1]||"left",s=a[2]||"cover";i.targetEl=n.clickedEl||n.targetEl,i.content='<div class="panel panel-router-open-in panel-'+o+" panel-"+s+'" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',r.route.panel=i}return e.navigate(r)}(c,u,m);function g(){var e=!1;function t(e,t){c.allowPageChange=!1;var n=!1;"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(r){if(e[r]){n=!0;var i=T({},l,{route:e});c.allowPageChange=!0,c.modalLoad(r,i,T(m,t),"forward")}})),n||Pe(c,e,T(m,t),!0)}function n(){c.allowPageChange=!0}"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){l.route[t]&&!e&&(e=!0,c.modalLoad(t,l,m,"forward"))})),l.route.keepAlive&&l.route.keepAliveData&&(Pe(c,{el:l.route.keepAliveData.pageEl},m,!1),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var n;l.route[t]&&!e&&(e=!0,Pe(c,((n={})[t]=l.route[t],n),m,!1))})),e||(l.route.async&&(c.allowPageChange=!1,l.route.async.call(c,{router:c,to:m.route,from:c.currentRoute,resolve:t,reject:n,direction:"forward",app:d})),l.route.asyncComponent&&Ie(c,l.route.asyncComponent,t,n))}function v(){c.allowPageChange=!0}if(m.route=l,c.params.masterDetailBreakpoint>0&&l.route.masterRoute){var b=!0,y=!1;if(c.currentRoute&&c.currentRoute.route&&(!(!0===c.currentRoute.route.master||"function"==typeof c.currentRoute.route.master&&c.currentRoute.route.master(d,c))||c.currentRoute.route!==l.route.masterRoute&&c.currentRoute.route.path!==l.route.masterRoute.path||(b=!1),!c.currentRoute.route.masterRoute||c.currentRoute.route.masterRoute!==l.route.masterRoute&&c.currentRoute.route.masterRoute.path!==l.route.masterRoute.path||(b=!1,y=!0)),b||y&&t.reloadAll)return c.navigate({path:l.route.masterRoute.path,params:l.params||{}},{animate:!1,reloadAll:t.reloadAll,reloadCurrent:t.reloadCurrent,reloadPrevious:t.reloadPrevious,browserHistory:!t.initial,history:!t.initial,once:{pageAfterIn:function(){c.navigate(e,T({},t,{animate:!1,reloadAll:!1,reloadCurrent:!1,reloadPrevious:!1,history:!t.initial,browserHistory:!t.initial}))}}}),c}return Te.call(c,l,c.currentRoute,(function(){l.route.modules?d.loadModules(Array.isArray(l.route.modules)?l.route.modules:[l.route.modules]).then((function(){g()})).catch((function(){v()})):g()}),(function(){v()}),"forward"),c},De.prototype.refreshPage=function(){var e=this;return Me(e,"refreshPage"),e.navigate(e.currentRoute.url,{ignoreCache:!0,reloadCurrent:!0})},De.prototype.tabLoad=function(e,t){void 0===t&&(t={});var n,r,i=this,o=T({animate:i.params.animate,browserHistory:!0,history:!0,parentPageEl:null,preload:!1,on:{}},t);o.route&&(o.preload||o.route===i.currentRoute||(r=i.previousRoute,i.currentRoute=o.route),o.preload?(n=o.route,r=i.currentRoute):(n=i.currentRoute,r||(r=i.previousRoute)),i.params.browserHistory&&o.browserHistory&&!o.reloadPrevious&&ke.replace(i.view.id,{url:o.route.url},(i.params.browserHistoryRoot||"")+i.params.browserHistorySeparator+o.route.url),o.history&&(i.history[Math.max(i.history.length-1,0)]=o.route.url,i.saveHistory()));var s,l=a(o.parentPageEl||i.currentPageEl);s=l.length&&l.find("#"+e.id).length?l.find("#"+e.id).eq(0):i.view.selector?i.view.selector+" #"+e.id:"#"+e.id;var c,d=i.app.tab.show({tabEl:s,animate:o.animate,tabRoute:o.route}),u=d.$newTabEl,p=d.$oldTabEl,h=d.animated,f=d.onTabsChanged;if(u&&u.parents(".page").length>0&&o.route){var m=u.parents(".page")[0].f7Page;m&&o.route&&(m.route=o.route)}if(u[0].f7RouterTabLoaded)return p&&p.length?(h?f((function(){i.emit("routeChanged",i.currentRoute,i.previousRoute,i)})):i.emit("routeChanged",i.currentRoute,i.previousRoute,i),i):i;function g(t,n){var r=t.url,o=t.content,s=t.el,l=t.component,c=t.componentUrl;function d(t){i.allowPageChange=!0,t&&("string"==typeof t?u.html(t):(u.html(""),t.f7Component?t.f7Component.mount((function(e){u.append(e)})):u.append(t)),u[0].f7RouterTabLoaded=!0,function(t){i.removeThemeElements(u);var n=u;"string"!=typeof t&&(n=a(t)),n.trigger("tab:init tab:mounted",e),i.emit("tabInit tabMounted",u[0],e),p&&p.length&&(h?f((function(){i.emit("routeChanged",i.currentRoute,i.previousRoute,i),i.params.unloadTabContent&&i.tabRemove(p,u,e)})):(i.emit("routeChanged",i.currentRoute,i.previousRoute,i),i.params.unloadTabContent&&i.tabRemove(p,u,e)))}(t))}if(o)d(o);else if(s)d(s);else if(l||c)try{i.tabComponentLoader({tabEl:u[0],component:l,componentUrl:c,options:n,resolve:d,reject:function(){return i.allowPageChange=!0,i}})}catch(e){throw i.allowPageChange=!0,e}else r&&(i.xhrAbortController&&(i.xhrAbortController.abort(),i.xhrAbortController=!1),i.xhrRequest(r,n).then((function(e){d(e)})).catch((function(){i.allowPageChange=!0})))}function v(e,t){g(e,T(o,t))}function b(){i.allowPageChange=!0}return"url content component el componentUrl".split(" ").forEach((function(t){var n;e[t]&&(c=!0,g(((n={})[t]=e[t],n),o))})),e.async?e.async.call(i,{router:i,to:n,from:r,resolve:v,reject:b,app:i.app}):e.asyncComponent?Ie(i,e.asyncComponent,v,b):c||(i.allowPageChange=!0),i},De.prototype.tabRemove=function(e,t,n){var r;e[0]&&(e[0].f7RouterTabLoaded=!1,delete e[0].f7RouterTabLoaded),e.children().each((function(e){e.f7Component&&(r=!0,a(e).trigger("tab:beforeremove",n),e.f7Component.destroy())})),r||e.trigger("tab:beforeremove",n),this.emit("tabBeforeRemove",e[0],t[0],n),this.removeTabContent(e[0],n)},De.prototype.modalLoad=function(e,t,n,r){void 0===n&&(n={});var i,a=this,o=a.app,s="panel"===e,l=s?"panel":"modal",c=T({animate:a.params.animate,browserHistory:!0,history:!0,on:{},once:{}},n),d=T({},t.route[e]),u=t.route,p=function(e,t){var n,r=c.on,i=c.once;"open"===t&&(n=r.modalOpen||i.modalOpen||r.panelOpen||i.panelOpen),"close"===t&&(n=r.modalClose||i.modalClose||r.panelClose||i.panelClose),"closed"===t&&(n=r.modalClosed||i.modalClosed||r.panelClosed||i.panelClosed),n&&n(e)};function h(){var n=o[e].create(d);u.modalInstance=n;var r=n.el;function i(){n.close()}n.on(l+"Open",(function(){r||(a.removeThemeElements(n.el),n.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,n),a.emit((s?"":"modalInit")+" "+e+"Init "+e+"Mounted",n.el,t,n)),a.once("swipeBackMove",i),p(n,"open")})),n.on(l+"Close",(function(){a.off("swipeBackMove",i),n.closeByRouter||a.back(),p(n,"close")})),n.on(l+"Closed",(function(){n.$el.trigger(e.toLowerCase()+":beforeremove",t,n),n.emit((s?"":"modalBeforeRemove ")+e+"BeforeRemove",n.el,t,n);var r=n.el.f7Component;p(n,"closed"),r&&r.destroy(),y((function(){(r||d.component||d.asyncComponent)&&a.removeModal(n.el),n.destroy(),delete n.route,delete u.modalInstance}))})),c.route&&(a.params.browserHistory&&c.browserHistory&&ke.push(a.view.id,{url:c.route.url,modal:e},(a.params.browserHistoryRoot||"")+a.params.browserHistorySeparator+c.route.url),c.route!==a.currentRoute&&(n.route=T(c.route,{modal:n}),a.currentRoute=n.route),c.history&&!c.reloadCurrent&&(a.history.push(c.route.url),a.saveHistory())),r&&(a.removeThemeElements(n.el),n.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,n),a.emit(l+"Init "+e+"Init "+e+"Mounted",n.el,t,n)),n.open(!1===c.animate||!0===c.animate?c.animate:void 0)}function f(e,t){var n=e.url,r=e.content,i=e.component,s=e.componentUrl;function l(e){e&&("string"==typeof e?d.content=e:e.f7Component?e.f7Component.mount((function(e){d.el=e,o.$el.append(e)})):d.el=e,h())}if(r)l(r);else if(i||s)try{a.modalComponentLoader({rootEl:o.el,component:i,componentUrl:s,options:t,resolve:l,reject:function(){return a.allowPageChange=!0,a}})}catch(e){throw a.allowPageChange=!0,e}else n?(a.xhrAbortController&&(a.xhrAbortController.abort(),a.xhrAbortController=!1),a.xhrRequest(n,t).then((function(e){d.content=e,h()})).catch((function(){a.allowPageChange=!0}))):h()}function m(e,t){f(e,T(c,t))}function g(){a.allowPageChange=!0}return"url content component el componentUrl template".split(" ").forEach((function(e){var t;d[e]&&!i&&(i=!0,f(((t={})[e]=d[e],t),c))})),i||"actions"!==e||h(),d.async&&d.async.call(a,{router:a,to:c.route,from:a.currentRoute,resolve:m,reject:g,direction:r,app:o}),d.asyncComponent&&Ie(a,d.asyncComponent,m,g),a},De.prototype.modalRemove=function(e){T(e,{closeByRouter:!0}),e.close()},De.prototype.back=function(){var e,t,n,r=this,i=N();if(r.swipeBackActive)return r;"object"==typeof(arguments.length<=0?void 0:arguments[0])?t=(arguments.length<=0?void 0:arguments[0])||{}:(e=arguments.length<=0?void 0:arguments[0],t=(arguments.length<=1?void 0:arguments[1])||{});var a=t,o=a.name,s=a.params,l=a.query;if(o)return(e=r.generateUrl({name:o,params:s,query:l}))?r.back(e,T({},t,{name:null,params:null,query:null})):r;var c=r.app;Me(r,"back");var d,u=r.currentRoute.modal;if(u||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(e){r.currentRoute.route[e]&&(u=!0,d=e)})),u&&!t.preload){var p,h=r.currentRoute.modal||r.currentRoute.route.modalInstance||c[d].get(),f=r.history[r.history.length-2];if(h&&h.$el){var m=h.$el.prevAll(".modal-in");if(m.length&&m[0].f7Modal){var g=m[0];r.$el.parents(g).length||(p=g.f7Modal.route)}}if(p||(p=r.findMatchingRoute(f)),!p&&f&&(p={url:f,path:f.split("?")[0],query:C(f),route:{path:f.split("?")[0],url:f}}),!(e&&0!==e.replace(/[# ]/g,"").trim().length||p&&h))return r;var v=t.force&&p&&e;if(p&&h){var b=i.ie||i.edge||i.firefox&&!i.ios,y=r.params.browserHistory&&!1!==t.browserHistory,_=r.currentRoute&&r.currentRoute.route&&r.currentRoute.route.options&&!1===r.currentRoute.route.options.browserHistory;!y||b||_||ke.back(),r.currentRoute=p,r.history.pop(),r.saveHistory(),y&&b&&!_&&ke.back(),r.modalRemove(h),v&&r.navigate(e,{reloadCurrent:!0})}else h&&(r.modalRemove(h),e&&r.navigate(e,{reloadCurrent:!0}));return r}var w,x=r.$el.children(".page-current").prevAll(".page-previous:not(.page-master)").eq(0);if(r.params.masterDetailBreakpoint>0){var k=[];r.$el.children(".page").each((function(e){k.push(e.className)}));var E=r.$el.children(".page-current").prevAll(".page-master").eq(0);if(E.length){var S=r.history[r.history.length-2],M=r.findMatchingRoute(S);M&&E[0].f7Page&&M.route===E[0].f7Page.route.route&&(x=E,t.preload||(w=c.width>=r.params.masterDetailBreakpoint))}}if(!t.force&&x.length&&!w){if(r.params.browserHistory&&x[0].f7Page&&r.history[r.history.length-2]!==x[0].f7Page.route.url)return r.back(r.history[r.history.length-2],T(t,{force:!0})),r;var I=x[0].f7Page.route;return Te.call(r,I,r.currentRoute,(function(){Be(r,{el:x},T(t,{route:I}))}),(function(){}),"backward"),r}if("#"===e&&(e=void 0),e&&"/"!==e[0]&&0!==e.indexOf("#")&&(e=((r.path||"/")+e).replace("//","/")),!e&&r.history.length>1&&(e=r.history[r.history.length-2]),w&&!t.force&&r.history[r.history.length-3])return r.back(r.history[r.history.length-3],T({},t||{},{force:!0,animate:!1}));if(w&&!t.force)return r;if((n=r.findMatchingRoute(e))||e&&(n={url:e,path:e.split("?")[0],query:C(e),route:{path:e.split("?")[0],url:e}}),!n)return r;if(n.route.redirect)return Ee.call(r,"backward",n,t);var L,$={};if(n.route.options?T($,n.route.options,t):T($,t),$.route=n,$.force&&r.params.stackPages&&(r.$el.children(".page-previous.stacked").each((function(e){e.f7Page&&e.f7Page.route&&e.f7Page.route.url===n.url&&(L=!0,Be(r,{el:e},$))})),L))return r;function P(){var e=!1;function t(e,t){r.allowPageChange=!1,Be(r,e,T($,t),!0)}function i(){r.allowPageChange=!0}n.route.keepAlive&&n.route.keepAliveData&&(Be(r,{el:n.route.keepAliveData.pageEl},$),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var i;n.route[t]&&!e&&(e=!0,Be(r,((i={})[t]=n.route[t],i),$))})),e||(n.route.async&&(r.allowPageChange=!1,n.route.async.call(r,{router:r,to:n,from:r.currentRoute,resolve:t,reject:i,direction:"backward",app:c})),n.route.asyncComponent&&Ie(r,n.route.asyncComponent,t,i))}function O(){r.allowPageChange=!0}return $.preload?P():Te.call(r,n,r.currentRoute,(function(){n.route.modules?c.loadModules(Array.isArray(n.route.modules)?n.route.modules:[n.route.modules]).then((function(){P()})).catch((function(){O()})):P()}),(function(){O()}),"backward"),r},De.prototype.clearPreviousHistory=function(){var e=this;Me(e,"clearPreviousHistory");var t=e.history[e.history.length-1];!function(e){Me(e,"clearPreviousPages");var t=e.app,n=e.dynamicNavbar;e.$el.children(".page").filter((function(t){return!(!e.currentRoute||!e.currentRoute.modal&&!e.currentRoute.panel)||t!==e.currentPageEl})).each((function(r){var i=a(r),o=a(t.navbar.getElByPage(i));e.params.stackPages&&e.initialPages.indexOf(i[0])>=0?(i.addClass("stacked"),n&&o.addClass("stacked")):(e.pageCallback("beforeRemove",i,o,"previous",void 0,{}),e.removePage(i),n&&o.length&&e.removeNavbar(o))}))}(e),e.history=[t],e.view.history=[t],e.saveHistory()};const Ne=De,Ge={name:"router",static:{Router:Ne},instance:{cache:{xhr:[],templates:[],components:[]}},create:function(){var e=this;e.app?e.params.router&&(e.router=new Ne(e.app,e)):e.router=new Ne(e)}};function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e,t){return He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},He(e,t)}var Fe=function(e){var t,n;function r(t,n,r){var i;void 0===r&&(r={});var o,s=ze(i=e.call(this,r,[t])||this);if(!s.params.routerId&&!a(n).length){var l="Framework7: can't create a View instance because ";throw new Error(l+="string"==typeof n?'the selector "'+n+"\" didn't match any element":"el must be an HTMLElement or Dom7 object")}return s.params=T({el:n},{routes:[],routesAdd:[]},t.params.view,r),s.params.routes.length>0?s.routes=s.params.routes:s.routes=[].concat(t.routes,s.params.routesAdd),T(!1,s,{app:t,name:s.params.name,main:s.params.main,history:[],scrollHistory:{}}),s.useModules(),t.views.push(s),s.main&&(t.views.main=s),s.name&&(t.views[s.name]=s),s.index=t.views.indexOf(s),o=s.name?"view_"+s.name:s.main?"view_main":"view_"+s.index,s.id=o,s.params.init?(t.initialized?s.init():t.on("init",(function(){s.init()})),s||ze(i)):s||ze(i)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,He(t,n);var i=r.prototype;return i.destroy=function(){var e=this,t=e.app;e.$el.trigger("view:beforedestroy"),e.emit("local::beforeDestroy viewBeforeDestroy",e),t.off("resize",e.checkMasterDetailBreakpoint),e.main?(t.views.main=null,delete t.views.main):e.name&&(t.views[e.name]=null,delete t.views[e.name]),e.$el[0].f7View=null,delete e.$el[0].f7View,t.views.splice(t.views.indexOf(e),1),e.params.router&&e.router&&e.router.destroy(),e.emit("local::destroy viewDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},i.checkMasterDetailBreakpoint=function(e){var t=this,n=t.app,r=t.$el.hasClass("view-master-detail"),i=n.width>=t.params.masterDetailBreakpoint&&t.$el.children(".page-master").length;void 0===e&&i||!0===e?(t.$el.addClass("view-master-detail"),r||(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint"))):(t.$el.removeClass("view-master-detail"),r&&(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint")))},i.initMasterDetail=function(){var e=this,t=e.app;e.checkMasterDetailBreakpoint=e.checkMasterDetailBreakpoint.bind(e),e.checkMasterDetailBreakpoint(),e.params.masterDetailResizable&&function(e){var t=e.app,n=D();if(!e.resizableInitialized){T(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var r=a("html"),i=e.$el;if(i){var o,s,l,c,d,u,p,h={};(o=e.$el.children(".view-resize-handler")).length||(e.$el.append('<div class="view-resize-handler"></div>'),o=e.$el.children(".view-resize-handler")),e.$resizeHandlerEl=o,i.addClass("view-resizable");var f=!!n.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".view-resize-handler",g,f),t.on("touchmove:active",v),t.on("touchend:passive",b),t.on("resize",y),e.on("beforeOpen",y),e.once("viewDestroy",(function(){i.removeClass("view-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".view-resize-handler",g,f),t.off("touchmove:active",v),t.off("touchend:passive",b),t.off("resize",y),e.off("beforeOpen",y)}))}}function m(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var n=parseInt(e,10);return Number.isNaN(n)?null:n}function g(t){if(e.resizable&&i.hasClass("view-resizable")&&i.hasClass("view-master-detail")){h.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,h.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,l=!1,s=!0;var n=i.children(".page-master");u=m(n.css("min-width")),p=m(n.css("max-width"))}}function v(n){if(s){n.f7PreventSwipePanel=!0;var a="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX;l||(d=o[0].offsetLeft+o[0].offsetWidth,i.addClass("view-resizing"),r.css("cursor","col-resize")),l=!0,n.preventDefault(),c=a-h.x;var f=d+c;u&&!Number.isNaN(u)&&(f=Math.max(f,u)),p&&!Number.isNaN(p)&&(f=Math.min(f,p)),f=Math.min(Math.max(f,0),t.width),e.resizableWidth=f,r[0].style.setProperty("--f7-page-master-width",f+"px"),i.trigger("view:resize",f),e.emit("local::resize viewResize",e,f)}}function b(){if(a("html").css("cursor",""),!s||!l)return s=!1,void(l=!1);s=!1,l=!1,r[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"),i.removeClass("view-resizing")}function y(){e.resizableWidth&&(u=m(o.css("min-width")),p=m(o.css("max-width")),u&&!Number.isNaN(u)&&e.resizableWidth<u&&(e.resizableWidth=Math.max(e.resizableWidth,u)),p&&!Number.isNaN(p)&&e.resizableWidth>p&&(e.resizableWidth=Math.min(e.resizableWidth,p)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),r[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"))}}(e),t.on("resize",e.checkMasterDetailBreakpoint)},i.mount=function(e){var t,n,r=this,i=r.app,o=r.params.el||e,s=a(o);t="string"==typeof o?o:(s.attr("id")?"#"+s.attr("id"):"")+(s.attr("class")?"."+s.attr("class").replace(/ /g,".").replace(".active",""):""),"ios"===i.theme&&r.params.iosDynamicNavbar&&0===(n=s.children(".navbars").eq(0)).length&&(n=a('<div class="navbars"></div>')),T(r,{$el:s,el:s[0],main:r.main||s.hasClass("view-main"),$navbarsEl:n,navbarsEl:n?n[0]:void 0,selector:t}),r.main&&(i.views.main=r),s&&s[0]&&(s[0].f7View=r),r.emit("local::mount viewMount",r)},i.init=function(e){var t=this;t.mount(e),t.params.router&&(t.params.masterDetailBreakpoint>0&&t.initMasterDetail(),t.router.init(),t.$el.trigger("view:init"),t.emit("local::init viewInit",t))},r}(W);Fe.use(Ge);const Ve=Fe,We={name:"clicks",params:{clicks:{externalLinks:".external"}},on:{init:function(){var e;(e=this).on("click",(function(t){var n=(0,o.Jj)(),r=a(t.target),i=r.closest("a"),s=i.length>0,l=s&&i.attr("href");if(s&&(i.is(e.params.clicks.externalLinks)||l&&l.indexOf("javascript:")>=0)){var c=i.attr("target");l&&n.cordova&&n.cordova.InAppBrowser&&("_system"===c||"_blank"===c)?(t.preventDefault(),n.cordova.InAppBrowser.open(l,c)):l&&n.Capacitor&&n.Capacitor.Plugins&&n.Capacitor.Plugins.Browser&&("_system"===c||"_blank"===c)&&(t.preventDefault(),n.Capacitor.Plugins.Browser.open({url:l}))}else{Object.keys(e.modules).forEach((function(n){var i=e.modules[n].clicks;i&&(t.preventF7Router||Object.keys(i).forEach((function(n){var a=r.closest(n).eq(0);a.length>0&&i[n].call(e,a,a.dataset(),t)})))}));var d={};if(s&&(t.preventDefault(),d=i.dataset()),d.clickedEl=i[0],!t.preventF7Router&&!i.hasClass("prevent-router")&&!i.hasClass("router-prevent")&&(l&&l.length>0&&"#"!==l[0]||i.hasClass("back"))){var u;if(d.view&&"current"===d.view?u=e.views.current:d.view?u=a(d.view)[0].f7View:(u=r.parents(".view")[0]&&r.parents(".view")[0].f7View,!i.hasClass("back")&&u&&u.params.linksView&&("string"==typeof u.params.linksView?u=a(u.params.linksView)[0].f7View:u.params.linksView instanceof Ve&&(u=u.params.linksView))),u||e.views.main&&(u=e.views.main),!u||!u.router)return;i[0].f7RouteProps&&(d.props=i[0].f7RouteProps),i.hasClass("back")?u.router.back(l,d):u.router.navigate(l,d)}}}))}}},je={name:"routerComponentLoader",proto:{componentLoader:function(e,t,n,r,i){void 0===n&&(n={});var a,o=this,s=o.app,l="string"==typeof e?e:t,c=o.replaceRequestUrlParams(l,n);function d(e){var t=n.context||{};if("function"==typeof t)t=t.call(o);else if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw i(e),e}var a,l,c=S({},t,{f7route:n.route,f7router:o}),d=S(n.route&&n.route.params||{},n.props||{},n.routeProps||{});n.componentOptions&&n.componentOptions.el&&(a=n.componentOptions.el),n.componentOptions&&n.componentOptions.root&&(l=n.componentOptions.root),s.component.create(e,d,{context:c,el:a,root:l}).then((function(e){r(e.el)})).catch((function(e){throw i(e),new Error(e)}))}c&&o.params.componentCache&&o.cache.components.forEach((function(e){e.url===c&&(a=e.component)})),c&&a?d(a):c&&!a?(o.xhrAbortController&&(o.xhrAbortController.abort(),o.xhrAbortController=!1),o.xhrRequest(l,n).then((function(e){var t=s.component.parse(e);o.params.componentCache&&o.cache.components.push({url:c,component:t}),d(t)})).catch((function(e){throw i(),e}))):d(e)},modalComponentLoader:function(e){var t=void 0===e?{}:e,n=t.component,r=t.componentUrl,i=t.options,a=t.resolve,o=t.reject;this.componentLoader(n,r,i,(function(e){a(e)}),o)},tabComponentLoader:function(e){var t=void 0===e?{}:e,n=t.component,r=t.componentUrl,i=t.options,a=t.resolve,o=t.reject;this.componentLoader(n,r,i,(function(e){a(e)}),o)},pageComponentLoader:function(e){var t=void 0===e?{}:e,n=t.component,r=t.componentUrl,i=t.options,a=t.resolve,o=t.reject;this.componentLoader(n,r,i,(function(e,t){void 0===t&&(t={}),a(e,t)}),o)}}};var Ue=function(e,t,n,r){var i;t[0]=0;for(var a=1;a<t.length;a++){var o=t[a++],s=t[a]?(t[0]|=o?1:2,n[t[a++]]):t[++a];3===o?r[0]=s:4===o?r[1]=Object.assign(r[1]||{},s):5===o?(r[1]=r[1]||{})[t[++a]]=s:6===o?r[1][t[++a]]+=s+"":o?(i=e.apply(s,Ue(e,s,n,["",null])),r.push(i),s[0]?t[0]|=2:(t[a-2]=0,t[a]=i)):r.push(s)}return r},qe=new Map,Ke=[!1,null,"",void 0],Je=function(e){var t=qe.get(this);return t||(t=new Map,qe.set(this,t)),(t=Ue(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,r=1,i="",a="",o=[0],s=function(e){1===r&&(e||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?o.push(0,e,i):3===r&&(e||i)?(o.push(3,e,i),r=2):2===r&&"..."===i&&e?o.push(4,e,0):2===r&&i&&!e?o.push(5,0,!0,i):r>=5&&((i||!e&&5===r)&&(o.push(r,0,i,n),r=6),e&&(o.push(r,e,0,n),r=6)),i=""},l=0;l<e.length;l++){l&&(1===r&&s(),s(l));for(var c=0;c<e[l].length;c++)t=e[l][c],1===r?"<"===t?(s(),o=[o],r=3):i+=t:4===r?"--"===i&&">"===t?(r=1,i=""):i=t+i[0]:a?t===a?a="":i+=t:'"'===t||"'"===t?a=t:">"===t?(s(),r=1):r&&("="===t?(r=5,n=i,i=""):"/"===t&&(r<5||">"===e[l][c+1])?(s(),3===r&&(o=o[0]),r=o,(o=o[0]).push(2,0,r),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(s(),r=2):i+=t),3===r&&"!--"===i&&(r=4,o=o[0])}return s(),o}(e)),t),arguments,[])).length>1?t:t[0]}.bind((function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return{type:e,props:t||{},children:R(r.filter((function(e){return Ke.indexOf(e)<0})))}}));const Qe=Je;function Ye(e,t,n,r,i){return{sel:e,data:t,children:n,text:r,elm:i,key:void 0===t?void 0:t.key}}const Xe=Ye;var Ze=Array.isArray;function et(e){return"string"==typeof e||"number"==typeof e}function tt(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(var r=0;r<t.length;++r){var i=t[r].data;void 0!==i&&tt(i,t[r].children,t[r].sel)}}const nt=function(e,t,n){var r,i,a,o={};if(void 0!==n?(o=t,Ze(n)?r=n:et(n)?i=n:n&&n.sel&&(r=[n])):void 0!==t&&(Ze(t)?r=t:et(t)?i=t:t&&t.sel?r=[t]:o=t),Ze(r))for(a=0;a<r.length;++a)et(r[a])&&(r[a]=Ye(void 0,void 0,void 0,r[a],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||tt(o,r,e),Ye(e,o,r,i,void 0)},rt={};var it="area base br col command embed hr img input keygen link menuitem meta param source track wbr".split(" "),at="hidden checked disabled readonly selected autofocus autoplay required multiple value indeterminate routeProps innerHTML".split(" "),ot="hidden checked disabled readonly selected autofocus autoplay required multiple readOnly indeterminate".split(" "),st=function(e){return"function"==typeof e.type?e.type.name||"CustomComponent":e.type},lt=function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){void 0===t&&(t={}),Object.keys(t).forEach((function(n){var r;e[(r=n,r.split("-").map((function(e,t){return 0===t?e.toLowerCase():e[0].toUpperCase()+e.substr(1)})).join(""))]=t[n]}))})),e},ct=function(e){return"function"==typeof e||e&&e.indexOf("-")>0&&rt[e]};var dt=function(e,t,n,r){if(e&&e.type&&it.indexOf(e.type)>=0)return[];for(var i=[],a=e.children,o=0;o<a.length;o+=1){var s=a[o],l=ut(s,t,n,r,!1);Array.isArray(l)?i.push.apply(i,l):l&&i.push(l)}return i},ut=function(e,t,n,r,i){if(!function(e){return E(e)&&"props"in e&&"type"in e&&"children"in e}(e))return String(e);if("slot"===e.type)return function(e,t,n,r){var i=e.props.name||"default",a=(t.children||[]).filter((function(e){var t="default";return e.props&&(t=e.props.slot||"default"),t===i}));return 0===a.length?dt(e,t,n,r):a.map((function(e){return ut(e,t,n,r)}))}(e,t,n,r);var a=function(e,t,n,r,i){var a={component:t,treeNode:e},o=st(e);Object.keys(e.props).forEach((function(t){var n=e.props[t];if(void 0!==n)if(at.indexOf(t)>=0)a.props||(a.props={}),"readonly"===t&&(t="readOnly"),"routeProps"===t&&(t="f7RouteProps"),"option"===o&&"value"===t&&(a.attrs||(a.attrs={}),a.attrs.value=n),ot.indexOf(t)>=0?a.props[t]=!1!==n:a.props[t]=n;else if("key"===t)a.key=n;else if(0===t.indexOf("@")||0===t.indexOf("on")&&t.length>2){a.on||(a.on={});var r=0===t.indexOf("@")?t.substr(1):m(t.substr(2)),s=!1,l=!1,c=!1;r.indexOf(".")>=0&&r.split(".").forEach((function(e,t){0===t?r=e:("stop"===e&&(s=!0),"prevent"===e&&(l=!0),"once"===e&&(c=!0))})),a.on[r]=function(e,t){var n=void 0===t?{}:t,r=n.stop,i=n.prevent,a=n.once,o=!1;return function(){var t=arguments.length<=0?void 0:arguments[0];a&&o||(r&&t.stopPropagation(),i&&t.preventDefault(),o=!0,e.apply(void 0,arguments))}}(n,{stop:s,prevent:l,once:c})}else"style"===t?"string"!=typeof n?a.style=n:(a.attrs||(a.attrs={}),a.attrs.style=n):(a.attrs||(a.attrs={}),a.attrs[t]=n,"id"!==t||a.key||i||(a.key=n))}));var s=function(e,t,n,r,i){var a={},o=[],s=[],l=[],c=[],d=!1,u=st(e);t&&t.attrs&&t.attrs.component&&(t.attrs.component,function(e){throw new TypeError('"tagName" is read-only')}(),delete t.attrs.component,d=!0);var p=ct(e.type);if(p&&(o.push((function(r){(r.sel===u||d)&&function(e){var t=e.f7,n=e.treeNode,r=e.vnode,i=e.data,a="function"==typeof n.type?n.type:rt[n.type];t.component.create(a,lt(i.attrs||{},i.props||{}),{el:r.elm,children:n.children}).then((function(e){r.data&&r.data.on&&e&&e.$el&&Object.keys(r.data.on).forEach((function(t){e.$el.on(t,r.data.on[t])})),r.elm.__component__=e}))}({f7:n,treeNode:e,vnode:r,data:t})})),s.push((function(e){!function(e){var t=e&&e.elm&&e.elm.__component__;if(t){var n=t.el,r=t.$el;e.data&&e.data.on&&r&&Object.keys(e.data.on).forEach((function(t){r.off(t,e.data.on[t])})),t.destroy&&t.destroy(),n&&n.parentNode&&n.parentNode.removeChild(n),delete e.elm.__component__}}(e)})),l.push((function(e,t){!function(e){var t=e&&e.elm&&e.elm.__component__;if(t){var n=lt(e.data.attrs||{},e.data.props||{});t.children=e.data.treeNode.children,Object.assign(t.props,n),t.update()}}(t)}))),!p){if(!t||!t.attrs||!t.attrs.class)return a;t.attrs.class.split(" ").forEach((function(e){r||o.push.apply(o,n.getVnodeHooks("insert",e)),s.push.apply(s,n.getVnodeHooks("destroy",e)),l.push.apply(l,n.getVnodeHooks("update",e)),c.push.apply(c,n.getVnodeHooks("postpatch",e))}))}return i&&!r&&c.push((function(e,t){var n=t||e;n&&n.data&&n.data.component&&n.data.component.hook("onUpdated")})),0===o.length&&0===s.length&&0===l.length&&0===c.length||(o.length&&(a.insert=function(e){o.forEach((function(t){return t(e)}))}),s.length&&(a.destroy=function(e){s.forEach((function(t){return t(e)}))}),l.length&&(a.update=function(e,t){l.forEach((function(n){return n(e,t)}))}),c.length&&(a.postpatch=function(e,t){c.forEach((function(n){return n(e,t)}))})),a}(e,a,n,r,i);return s.prepatch=function(e,t){e&&t&&e&&e.data&&e.data.props&&Object.keys(e.data.props).forEach((function(n){ot.indexOf(n)<0||(t.data||(t.data={}),t.data.props||(t.data.props={}),!0!==e.data.props[n]||n in t.data.props||(t.data.props[n]=!1))}))},a.hook=s,a}(e,t,n,r,i),o=ct(e.type)?[]:dt(e,t,n,r);return nt(st(e),a,o)};function pt(e,t,n){return void 0===e&&(e={}),ut(e,t,t.f7,n,!0)}const ht={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){n&&n.parentNode!==e&&n.__component__&&(n=n.__component__.el),e.insertBefore(t,n)},removeChild:function(e,t){e&&e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}};function ft(e){return void 0===e}function mt(e){return void 0!==e}var gt=Xe("",{},[],void 0,void 0);function vt(e,t){return e.key===t.key&&e.sel===t.sel}function bt(e,t,n){var r,i,a,o={};for(r=t;r<=n;++r)null!=(a=e[r])&&void 0!==(i=a.key)&&(o[i]=r);return o}var yt=["create","update","remove","destroy","pre","post"];function _t(e,t){var n,r=t.elm,i=e.data.attrs,a=t.data.attrs;if((i||a)&&i!==a){for(n in i=i||{},a=a||{}){var o=a[n];i[n]!==o&&(!0===o?r.setAttribute(n,""):!1===o?r.removeAttribute(n):120!==n.charCodeAt(0)?r.setAttribute(n,o):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,o):58===n.charCodeAt(5)?r.setAttributeNS("http://www.w3.org/1999/xlink",n,o):r.setAttribute(n,o))}for(n in i)n in a||r.removeAttribute(n)}}const wt={create:_t,update:_t};function Ct(e,t){var n,r,i=t.elm,a=e.data.props,o=t.data.props;if((a||o)&&a!==o){for(n in o=o||{},a=a||{})o[n]||delete i[n];for(n in o)r=o[n],a[n]===r||"value"===n&&i[n]===r||(i[n]=r)}}const xt={create:Ct,update:Ct};var kt="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,Et=function(e){kt((function(){kt(e)}))};function St(e,t,n){Et((function(){e[t]=n}))}function Tt(e,t){var n,r,i=t.elm,a=e.data.style,o=t.data.style;if((a||o)&&a!==o){o=o||{};var s="delayed"in(a=a||{});for(r in a)o[r]||("-"===r[0]&&"-"===r[1]?i.style.removeProperty(r):i.style[r]="");for(r in o)if(n=o[r],"delayed"===r&&o.delayed)for(var l in o.delayed)n=o.delayed[l],s&&n===a.delayed[l]||St(i.style,l,n);else"remove"!==r&&n!==a[r]&&("-"===r[0]&&"-"===r[1]?i.style.setProperty(r,n):i.style[r]=n)}}var Mt={create:Tt,update:Tt,destroy:function(e){var t,n,r=e.elm,i=e.data.style;if(i&&(t=i.destroy))for(n in t)r.style[n]=t[n]},remove:function(e,t){var n=e.data.style;if(n&&n.remove){var r,i=e.elm,a=0,o=n.remove,s=0,l=[];for(r in o)l.push(r),i.style[r]=o[r];for(var c=getComputedStyle(i)["transition-property"].split(", ");a<c.length;++a)-1!==l.indexOf(c[a])&&s++;i.addEventListener("transitionend",(function(e){e.target===i&&--s,0===s&&t()}))}else t()}};function It(e,t){var n=e.data.on,r=e.listener,i=e.elm,o=t&&t.data.on,s=t&&t.elm;if(n!==o&&(n&&r&&(o?Object.keys(n).forEach((function(e){o[e]||a(i).off(e,r)})):Object.keys(n).forEach((function(e){a(i).off(e,r)}))),o)){var l=e.listener||function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];!function(e,t,n){var r=e.type,i=n.data.on;i&&i[r]&&function(e,t,n){"function"==typeof e&&e.apply(void 0,[t].concat(n))}(i[r],e,t)}(t,r,e.vnode)};t.listener=l,l.vnode=t,n?Object.keys(o).forEach((function(e){n[e]||a(s).on(e,l)})):Object.keys(o).forEach((function(e){a(s).on(e,l)}))}}var Lt=function(e,t){var n,r,i={},a=ht;for(n=0;n<yt.length;++n)for(i[yt[n]]=[],r=0;r<e.length;++r){var o=e[r][yt[n]];void 0!==o&&i[yt[n]].push(o)}function s(e,t){return function(){if(0==--t){var n=a.parentNode(e);a.removeChild(n,e)}}}function l(e,t){var n,r=e.data;void 0!==r&&mt(n=r.hook)&&mt(n=n.init)&&(n(e),r=e.data);var o=e.children,s=e.sel;if("!"===s)ft(e.text)&&(e.text=""),e.elm=a.createComment(e.text);else if(void 0!==s){var c=s.indexOf("#"),d=s.indexOf(".",c),u=c>0?c:s.length,p=d>0?d:s.length,h=-1!==c||-1!==d?s.slice(0,Math.min(u,p)):s,f=e.elm=mt(r)&&mt(n=r.ns)?a.createElementNS(n,h):a.createElement(h);for(u<p&&f.setAttribute("id",s.slice(u+1,p)),d>0&&f.setAttribute("class",s.slice(p+1).replace(/\./g," ")),n=0;n<i.create.length;++n)i.create[n](gt,e);if(Ze(o))for(n=0;n<o.length;++n){var m=o[n];null!=m&&a.appendChild(f,l(m,t))}else et(e.text)&&a.appendChild(f,a.createTextNode(e.text));mt(n=e.data.hook)&&(n.create&&n.create(gt,e),n.insert&&t.push(e))}else e.elm=a.createTextNode(e.text);return e.elm}function c(e,t,n,r,i,o){for(;r<=i;++r){var s=n[r];null!=s&&a.insertBefore(e,l(s,o),t)}}function d(e){var t,n,r=e.data;if(void 0!==r){for(mt(t=r.hook)&&mt(t=t.destroy)&&t(e),t=0;t<i.destroy.length;++t)i.destroy[t](e);if(void 0!==e.children)for(n=0;n<e.children.length;++n)null!=(t=e.children[n])&&"string"!=typeof t&&d(t)}}function u(e,t,n,r){for(;n<=r;++n){var o=void 0,l=void 0,c=void 0,u=t[n];if(null!=u)if(mt(u.sel)){for(d(u),l=i.remove.length+1,c=s(u.elm,l),o=0;o<i.remove.length;++o)i.remove[o](u,c);mt(o=u.data)&&mt(o=o.hook)&&mt(o=o.remove)?o(u,c):c()}else a.removeChild(e,u.elm)}}function p(e,t,n){var r,o;mt(r=t.data)&&mt(o=r.hook)&&mt(r=o.prepatch)&&r(e,t);var s=t.elm=e.elm,d=e.children,h=t.children;if(e!==t){if(void 0!==t.data){for(r=0;r<i.update.length;++r)i.update[r](e,t);mt(r=t.data.hook)&&mt(r=r.update)&&r(e,t)}ft(t.text)?mt(d)&&mt(h)?d!==h&&function(e,t,n,r){for(var i,o,s,d=0,h=0,f=t.length-1,m=t[0],g=t[f],v=n.length-1,b=n[0],y=n[v];d<=f&&h<=v;)null==m?m=t[++d]:null==g?g=t[--f]:null==b?b=n[++h]:null==y?y=n[--v]:vt(m,b)?(p(m,b,r),m=t[++d],b=n[++h]):vt(g,y)?(p(g,y,r),g=t[--f],y=n[--v]):vt(m,y)?(p(m,y,r),a.insertBefore(e,m.elm,a.nextSibling(g.elm)),m=t[++d],y=n[--v]):vt(g,b)?(p(g,b,r),a.insertBefore(e,g.elm,m.elm),g=t[--f],b=n[++h]):(void 0===i&&(i=bt(t,d,f)),ft(o=i[b.key])?(a.insertBefore(e,l(b,r),m.elm),b=n[++h]):((s=t[o]).sel!==b.sel?a.insertBefore(e,l(b,r),m.elm):(p(s,b,r),t[o]=void 0,a.insertBefore(e,s.elm,m.elm)),b=n[++h]));(d<=f||h<=v)&&(d>f?c(e,null==n[v+1]?null:n[v+1].elm,n,h,v,r):u(e,t,d,f))}(s,d,h,n):mt(h)?(mt(e.text)&&a.setTextContent(s,""),c(s,null,h,0,h.length-1,n)):mt(d)?u(s,d,0,d.length-1):mt(e.text)&&a.setTextContent(s,""):e.text!==t.text&&a.setTextContent(s,t.text),mt(o)&&mt(r=o.postpatch)&&r(e,t)}}return function(e,t){var n,r,o,s=[];for(n=0;n<i.pre.length;++n)i.pre[n]();for(function(e){return void 0!==e.sel}(e)||(e=function(e){var t=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return Xe(a.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}(e)),vt(e,t)?p(e,t,s):(r=e.elm,o=a.parentNode(r),l(t,s),null!==o&&(a.insertBefore(o,t.elm,a.nextSibling(r)),u(o,[e],0,0))),n=0;n<s.length;++n)s[n].data.hook.insert(s[n]);for(n=0;n<i.post.length;++n)i.post[n]();return t}}([wt,xt,Mt,{create:It,update:It,destroy:It}]);const $t=Lt;var Pt=function(){function e(e,t,n,r){var i=this;void 0===n&&(n={});var s=void 0===r?{}:r,l=s.el,d=s.context,u=s.children,p=(0,o.Me)();return S(this,{f7:e,props:n||{},context:d||{},id:t.id||c(),children:u||[],theme:{ios:"ios"===e.theme,md:"md"===e.theme,aurora:"aurora"===e.theme},style:t.style,__updateQueue:[],__eventHandlers:[],__onceEventHandlers:[],__onBeforeMount:[],__onMounted:[],__onBeforeUpdate:[],__onUpdated:[],__onBeforeUnmount:[],__onUnmounted:[]}),new Promise((function(e,n){var r;(r=t(i.props,i.getComponentContext(!0)),new Promise((function(e,t){"function"==typeof r?e(r):r instanceof Promise?r.then((function(t){e(t)})).catch((function(e){t(e)})):t(new Error('Framework7: Component render function is not a "function" type. Didn\'t you forget to "return $render"?'))}))).then((function(t){i.renderFunction=t;var n=i.render();if(l)return i.vnode=pt(n,i,!0),i.style&&(i.styleEl=p.createElement("style"),i.styleEl.innerHTML=i.style),i.el=l,$t(i.el,i.vnode),i.el=i.vnode.elm,i.$el=a(i.el),i.attachEvents(),i.el.f7Component=i,i.mount(),void e(i);n&&(i.vnode=pt(n,i,!0),i.el=p.createElement(i.vnode.sel||"div"),$t(i.el,i.vnode),i.$el=a(i.el)),i.style&&(i.styleEl=p.createElement("style"),i.styleEl.innerHTML=i.style),i.attachEvents(),i.el&&(i.el.f7Component=i),e(i)})).catch((function(e){n(e)}))}))}var t=e.prototype;return t.on=function(e,t){this.__eventHandlers&&this.__eventHandlers.push({eventName:e,handler:t})},t.once=function(e,t){this.__eventHandlers&&this.__onceEventHandlers.push({eventName:e,handler:t})},t.getComponentRef=function(){var e=this;return function(t){var n=t,r={};return Object.defineProperty(r,"value",{get:function(){return n},set:function(t){n=t,e.update()}}),r}},t.getComponentStore=function(){var e=this,t=this.f7.store,n=t.state,r=t._gettersPlain,i={state:n,dispatch:t.dispatch};return i.getters=new Proxy(r,{get:function(t,n){var r=t[n];return r.onUpdated((function(t){r.value=t,e.update()})),r}}),i},t.getComponentContext=function(e){var t=this,n={$f7route:this.context.f7route,$f7router:this.context.f7router,$h:Qe,$:a,$id:this.id,$f7:this.f7,$f7ready:this.f7ready.bind(this),$theme:this.theme,$tick:this.tick.bind(this),$update:this.update.bind(this),$emit:this.emit.bind(this),$store:this.getComponentStore(),$ref:this.getComponentRef(),$el:{}};return Object.defineProperty(n.$el,"value",{get:function(){return t.$el}}),e&&Object.assign(n,{$on:this.on.bind(this),$once:this.once.bind(this),$onBeforeMount:function(e){return t.__onBeforeMount.push(e)},$onMounted:function(e){return t.__onMounted.push(e)},$onBeforeUpdate:function(e){return t.__onBeforeUpdate.push(e)},$onUpdated:function(e){return t.__onUpdated.push(e)},$onBeforeUnmount:function(e){return t.__onBeforeUnmount.push(e)},$onUnmounted:function(e){return t.__onUnmounted.push(e)}}),n},t.render=function(){return this.renderFunction(this.getComponentContext())},t.emit=function(e,t){this.el&&this.$el.trigger(e,t)},t.attachEvents=function(){var e=this.$el;this.__eventHandlers&&(this.__eventHandlers.forEach((function(t){var n=t.eventName,r=t.handler;e.on(m(n),r)})),this.__onceEventHandlers.forEach((function(t){var n=t.eventName,r=t.handler;e.once(m(n),r)})))},t.detachEvents=function(){var e=this.$el;this.__eventHandlers&&(this.__eventHandlers.forEach((function(t){var n=t.eventName,r=t.handler;e.on(m(n),r)})),this.__onceEventHandlers.forEach((function(t){var n=t.eventName,r=t.handler;e.once(m(n),r)})))},t.startUpdateQueue=function(){var e=this,t=(0,o.Jj)();this.__requestAnimationFrameId||(this.__requestAnimationFrameId=t.requestAnimationFrame((function(){e.__updateIsPending&&function(){e.hook("onBeforeUpdate");var t=e.render();if(t){var n=pt(t,e,!1);e.vnode=$t(e.vnode,n)}}();var n=[].concat(e.__updateQueue);e.__updateQueue=[],e.__updateIsPending=!1,t.cancelAnimationFrame(e.__requestAnimationFrameId),delete e.__requestAnimationFrameId,delete e.__updateIsPending,n.forEach((function(e){return e()})),n=[]})))},t.tick=function(e){var t=this;return new Promise((function(n){t.__updateQueue.push((function(){n(),e&&e()})),t.startUpdateQueue()}))},t.update=function(e){var t=this;return this.__destroyed?new Promise((function(){})):new Promise((function(n){t.__updateIsPending=!0,t.__updateQueue.push((function(){n(),e&&e()})),t.startUpdateQueue()}))},t.setState=function(e){return this.update(e)},t.f7ready=function(e){var t=this;this.f7.initialized?e(this.f7):this.f7.once("init",(function(){e(t.f7)}))},t.mount=function(e){this.hook("onBeforeMount",this.$el),this.styleEl&&a("head").append(this.styleEl),e&&e(this.el),this.hook("onMounted",this.$el)},t.destroy=function(){if(!this.__destroyed){var e=(0,o.Jj)();this.hook("onBeforeUnmount"),this.styleEl&&a(this.styleEl).remove(),this.detachEvents(),this.hook("onUnmounted"),this.el&&this.el.f7Component&&(this.el.f7Component=null,delete this.el.f7Component),this.vnode&&(this.vnode=$t(this.vnode,{sel:this.vnode.sel,data:{}})),e.cancelAnimationFrame(this.__requestAnimationFrameId),this.__updateQueue=[],this.__eventHandlers=[],this.__onceEventHandlers=[],this.__onBeforeMount=[],this.__onMounted=[],this.__onBeforeUpdate=[],this.__onUpdated=[],this.__onBeforeUnmount=[],this.__onUnmounted=[],g(this),this.__destroyed=!0}},t.hook=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.__destroyed||this["__"+e].forEach((function(e){e.apply(void 0,n)}))},e}();const Ot=Pt;function Bt(e,t){rt[e]=t}function At(e){delete rt[e]}const Rt={name:"component",static:{Component:Ot,registerComponent:Bt,unregisterComponent:At},create:function(){var e=this;e.component={registerComponent:Bt,unregisterComponent:At,parse:function(e){return function(e){var t,n=(0,o.Jj)(),r=(0,o.Me)(),i=c(),s="f7_component_create_callback_"+i;e.match(/<template([ ]?)([a-z0-9-]*)>/)&&(t=e.split(/<template[ ]?[a-z0-9-]*>/).filter((function(e,t){return t>0})).join("<template>").split("</template>").filter((function(e,t,n){return t<n.length-1})).join("</template>").replace(/{{#raw}}([ \n]*)<template/g,"{{#raw}}<template").replace(/\/template>([ \n]*){{\/raw}}/g,"/template>{{/raw}}").replace(/([ \n])<template/g,"$1{{#raw}}<template").replace(/\/template>([ \n])/g,"/template>{{/raw}}$1"));var l,d=null;if(e.indexOf("<style>")>=0&&(d=e.split("<style>")[1].split("</style>")[0]),e.indexOf("<style scoped>")>=0&&(d=e.split("<style scoped>")[1].split("</style>")[0]),e.indexOf("<script>")>=0){var u=e.split("<script>");l=u[u.length-1].split("<\/script>")[0].trim()}else l="return () => {return $render}";l&&l.trim()||(l="return () => {return $render}"),t&&(l=l.replace("$render","function ($$ctx) {\n          var $ = $$ctx.$$;\n          var $h = $$ctx.$h;\n          var $root = $$ctx.$root;\n          var $f7 = $$ctx.$f7;\n          var $f7route = $$ctx.$f7route;\n          var $f7router = $$ctx.$f7router;\n          var $theme = $$ctx.$theme;\n          var $update = $$ctx.$update;\n          var $store = $$ctx.$store;\n          var $ref = $$ctx.$ref;\n\n          return $h`"+t+"`\n        }\n        ").replace(/export default/g,"return")),l="window."+s+" = function () {"+l+"}";var p=r.createElement("script");p.innerHTML=l,a("head").append(p);var h=n[s]();return a(p).remove(),n[s]=null,delete n[s],d&&(h.style=d),h.id=i,h}(e)},create:function(t,n,r){var i=r.root,a=r.el,o=r.context,s=r.children;return new Ot(e,t,n,{root:i,el:a,context:o,children:s})}}}};var Dt=[!1,null,"",void 0];const Nt=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=R((r||[]).filter((function(e){return Dt.indexOf(e)<0})));return"Fragment"===e?a:{type:e,props:t||{},children:a}},Gt={name:"history",static:{history:ke},on:{init:function(){ke.init(this)}}};var zt={registrations:[],register:function(e,t){var n=this;return"serviceWorker"in(0,o.Jj)().navigator&&n.serviceWorker.container?new Promise((function(r,i){n.serviceWorker.container.register(e,t?{scope:t}:{}).then((function(e){zt.registrations.push(e),n.emit("serviceWorkerRegisterSuccess",e),r(e)})).catch((function(e){n.emit("serviceWorkerRegisterError",e),i(e)}))})):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))},unregister:function(e){var t,n=this;return"serviceWorker"in(0,o.Jj)().navigator&&n.serviceWorker.container?(t=e?Array.isArray(e)?e:[e]:zt.registrations,Promise.all(t.map((function(e){return new Promise((function(t,r){e.unregister().then((function(){zt.registrations.indexOf(e)>=0&&zt.registrations.splice(zt.registrations.indexOf(e),1),n.emit("serviceWorkerUnregisterSuccess",e),t()})).catch((function(t){n.emit("serviceWorkerUnregisterError",e,t),r(t)}))}))})))):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))}};const Ht={name:"sw",params:{serviceWorker:{path:void 0,scope:void 0}},create:function(){var e=this,t=(0,o.Jj)();T(e,{serviceWorker:{container:"serviceWorker"in t.navigator?t.navigator.serviceWorker:void 0,registrations:zt.registrations,register:zt.register.bind(e),unregister:zt.unregister.bind(e)}})},on:{init:function(){var e=(0,o.Jj)();if("serviceWorker"in e.navigator){var t=this;if(!(t.device.cordova||e.Capacitor&&e.Capacitor.isNative)&&t.serviceWorker.container){var n=t.params.serviceWorker.path,r=t.params.serviceWorker.scope;!n||Array.isArray(n)&&!n.length||(Array.isArray(n)?n:[n]).forEach((function(e){t.serviceWorker.register(e,r)}))}}}}};function Ft(){return Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ft.apply(this,arguments)}const Vt=function(e){void 0===e&&(e={});var t={__store:!0},n=Ft({},e.state||{}),r=Ft({},e.actions||{}),i=Ft({},e.getters||{}),a=T({},n),o=[],s={},l={};Object.keys(i).forEach((function(e){s[e]=[],l[e]=[]}));var c=function(e){return i[e]({state:t.state})},d=function(e,t){l[e]||(l[e]=[]),l[e].push(t)};t.__removeCallback=function(e){!function(e){Object.keys(l).forEach((function(t){var n=l[t];n.indexOf(e)>=0&&n.splice(n.indexOf(e),1)}))}(e)};var u=function(e,t){if(void 0===t&&(t=!0),"constructor"!==e){o=[];var n=c(e);!function(e,t){s[e]||(s[e]=[]),t.forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))}(e,o);var r={value:n,onUpdated:function(t){d(e,t)}};if(!t)return r;var i=function(e){r.value=e};return r.__callback=i,d(e,i),r}};return t.state=new Proxy(a,{set:function(e,t,n){var r;return e[t]=n,r=t,Object.keys(s).filter((function(e){return s[e].indexOf(r)>=0})).forEach((function(e){l[e]&&l[e].length&&l[e].forEach((function(t){t(c(e))}))})),!0},get:function(e,t){return o.push(t),e[t]}}),t.getters=new Proxy(i,{set:function(){return!1},get:function(e,t){if(e[t])return u(t,!0)}}),t._gettersPlain=new Proxy(i,{set:function(){return!1},get:function(e,t){if(e[t])return u(t,!1)}}),t.dispatch=function(e,n){return new Promise((function(i,a){if(!r[e])throw a(),new Error('Framework7: Store action "'+e+'" is not found');i(r[e]({state:t.state,dispatch:t.dispatch},n))}))},t},Wt={name:"store",static:{createStore:Vt},proto:{createStore:Vt}};var jt=function(){var e=(0,o.Jj)();return e.Capacitor&&e.Capacitor.isNative&&e.Capacitor.Plugins&&e.Capacitor.Plugins.StatusBar},Ut={hide:function(){var e=(0,o.Jj)();N().cordova&&e.StatusBar&&e.StatusBar.hide(),jt()&&e.Capacitor.Plugins.StatusBar.hide()},show:function(){var e=(0,o.Jj)();N().cordova&&e.StatusBar&&e.StatusBar.show(),jt()&&e.Capacitor.Plugins.StatusBar.show()},onClick:function(){var e;(e=a(".popup.modal-in").length>0?a(".popup.modal-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):a(".panel.panel-in").length>0?a(".panel.panel-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):a(".views > .view.tab-active").length>0?a(".views > .view.tab-active").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):a(".views").length>0?a(".views").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):this.$el.children(".view").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"))&&e.length>0&&(e.hasClass("tab")&&(e=e.parent(".tabs").children(".page-content.tab-active")),e.length>0&&e.scrollTop(0,300))},setTextColor:function(e){var t=(0,o.Jj)();N().cordova&&t.StatusBar&&("white"===e?t.StatusBar.styleLightContent():t.StatusBar.styleDefault()),jt()&&("white"===e?t.Capacitor.Plugins.StatusBar.setStyle({style:"DARK"}):t.Capacitor.Plugins.StatusBar.setStyle({style:"LIGHT"}))},setBackgroundColor:function(e){var t=(0,o.Jj)();N().cordova&&t.StatusBar&&t.StatusBar.backgroundColorByHexString(e),jt()&&t.Capacitor.Plugins.StatusBar.setBackgroundColor({color:e})},isVisible:function(){var e=(0,o.Jj)(),t=N();return new Promise((function(n){t.cordova&&e.StatusBar&&n(e.StatusBar.isVisible),jt()&&e.Capacitor.Plugins.StatusBar.getInfo().then((function(e){n(e.visible)})),n(!1)}))},overlaysWebView:function(e){void 0===e&&(e=!0);var t=(0,o.Jj)();N().cordova&&t.StatusBar&&t.StatusBar.overlaysWebView(e),jt()&&t.Capacitor.Plugins.StatusBar.setOverlaysWebView({overlay:e})},init:function(){var e=(0,o.Jj)(),t=N(),n=this.params.statusbar;if(n.enabled){var r=t.cordova&&e.StatusBar,i=jt();(r||i)&&(n.scrollTopOnClick&&a(e).on("statusTap",Ut.onClick.bind(this)),t.ios&&(n.iosOverlaysWebView?Ut.overlaysWebView(!0):Ut.overlaysWebView(!1),"white"===n.iosTextColor?Ut.setTextColor("white"):Ut.setTextColor("black")),t.android&&(n.androidOverlaysWebView?Ut.overlaysWebView(!0):Ut.overlaysWebView(!1),"white"===n.androidTextColor?Ut.setTextColor("white"):Ut.setTextColor("black"))),n.iosBackgroundColor&&t.ios&&Ut.setBackgroundColor(n.iosBackgroundColor),n.androidBackgroundColor&&t.android&&Ut.setBackgroundColor(n.androidBackgroundColor)}}};const qt={name:"statusbar",params:{statusbar:{enabled:!0,scrollTopOnClick:!0,iosOverlaysWebView:!0,iosTextColor:"black",iosBackgroundColor:null,androidOverlaysWebView:!1,androidTextColor:"black",androidBackgroundColor:null}},create:function(){A(this,{statusbar:Ut})},on:{init:function(){Ut.init.call(this)}}},Kt={name:"view",params:{view:{init:!0,name:void 0,main:!1,router:!0,linksView:null,stackPages:!1,xhrCache:!0,xhrCacheIgnore:[],xhrCacheIgnoreGetParameters:!1,xhrCacheDuration:6e5,componentCache:!0,preloadPreviousPage:!0,allowDuplicateUrls:!1,reloadPages:!1,reloadDetail:!1,masterDetailBreakpoint:0,masterDetailResizable:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,restoreScrollTopOnBack:!0,unloadTabContent:!0,passRouteQueryToRequest:!0,passRouteParamsToRequest:!1,loadInitialPage:!0,iosSwipeBack:!0,iosSwipeBackAnimateShadow:!0,iosSwipeBackAnimateOpacity:!0,iosSwipeBackActiveArea:30,iosSwipeBackThreshold:0,mdSwipeBack:!1,mdSwipeBackAnimateShadow:!0,mdSwipeBackAnimateOpacity:!1,mdSwipeBackActiveArea:30,mdSwipeBackThreshold:0,auroraSwipeBack:!1,auroraSwipeBackAnimateShadow:!1,auroraSwipeBackAnimateOpacity:!0,auroraSwipeBackActiveArea:30,auroraSwipeBackThreshold:0,browserHistory:!1,browserHistoryRoot:void 0,browserHistoryAnimate:!0,browserHistoryAnimateOnLoad:!1,browserHistorySeparator:"#!",browserHistoryOnLoad:!0,browserHistoryInitialMatch:!1,browserHistoryStoreHistory:!0,animate:!0,iosDynamicNavbar:!0,iosAnimateNavbarBackIcon:!0,iosPageLoadDelay:0,mdPageLoadDelay:0,auroraPageLoadDelay:0,routesBeforeEnter:null,routesBeforeLeave:null}},static:{View:Ve},create:function(){var e=this;T(e,{views:T([],{create:function(t,n){return new Ve(e,t,n)},get:function(e){var t=a(e);if(t.length&&t[0].f7View)return t[0].f7View}})}),Object.defineProperty(e.views,"current",{enumerable:!0,configurable:!0,get:function(){return function(e){var t=a(".popover.modal-in .view"),n=a(".popup.modal-in .view"),r=a(".panel.panel-in .view"),i=a(".views");0===i.length&&(i=e.$el);var o=i.children(".view");if(0===o.length&&(o=i.children(".tabs").children(".view")),o.length>1&&o.hasClass("tab")&&0===(o=i.children(".view.tab-active")).length&&(o=i.children(".tabs").children(".view.tab-active")),t.length>0&&t[0].f7View)return t[0].f7View;if(n.length>0&&n[0].f7View)return n[0].f7View;if(r.length>0&&r[0].f7View)return r[0].f7View;if(o.length>0){if(1===o.length&&o[0].f7View)return o[0].f7View;if(o.length>1)return e.views.main}}(e)}}),e.view=e.views},on:{init:function(){var e=this;a(".view-init").each((function(t){if(!t.f7View){var n=a(t).dataset();e.views.create(t,n)}}))},"modalOpen panelOpen":function(e){var t=this;e.$el.find(".view-init").each((function(e){if(!e.f7View){var n=a(e).dataset();t.views.create(e,n)}}))},"modalBeforeDestroy panelBeforeDestroy":function(e){e&&e.$el&&e.$el.find(".view-init").each((function(e){var t=e.f7View;t&&t.destroy()}))}},vnode:{"view-init":{insert:function(e){var t=e.elm;if(!t.f7View){var n=a(t).dataset();this.views.create(t,n)}},destroy:function(e){var t=e.elm.f7View;t&&t.destroy()}}}};var Jt={size:function(e){var t=this,n=a(e);if(n.hasClass("navbars"))n=n.children(".navbar").each((function(e){t.navbar.size(e)}));else{var r=n.children(".navbar-inner");if(r.length){var i=r.hasClass("navbar-inner-centered-title")||t.params.navbar[t.theme+"CenterTitle"],o="ios"===t.theme&&!t.params.navbar[t.theme+"CenterTitle"];if((i||o)&&!(n.hasClass("stacked")||n.parents(".stacked").length>0||n.parents(".tab:not(.tab-active)").length>0||n.parents(".popup:not(.modal-in)").length>0)){"ios"!==t.theme&&t.params.navbar[t.theme+"CenterTitle"]&&r.addClass("navbar-inner-centered-title"),"ios"!==t.theme||t.params.navbar.iosCenterTitle||r.addClass("navbar-inner-left-title");var s,l,c,d,u=n.parents(".view").eq(0),p=t.rtl?r.children(".right"):r.children(".left"),h=t.rtl?r.children(".left"):r.children(".right"),f=r.children(".title"),m=r.children(".subnavbar"),g=0===p.length,v=0===h.length,b=g?0:p.outerWidth(!0),y=v?0:h.outerWidth(!0),_=f.outerWidth(!0),w=r.styles(),C=r[0].offsetWidth-parseInt(w.paddingLeft,10)-parseInt(w.paddingRight,10),x=n.hasClass("navbar-previous"),k=r.hasClass("sliding");u.length>0&&u[0].f7View&&(l=(s=u[0].f7View.router)&&s.dynamicNavbar),v&&(c=C-_),g&&(c=0),g||v||(c=(C-y-_+b)/2);var E=(C-_)/2;C-b-y>_?(E<b&&(E=b),E+_>C-y&&(E=C-y-_),d=E-c):d=0;var S=t.rtl?-1:1;if(l&&"ios"===t.theme){if(f.hasClass("sliding")||f.length>0&&k){var T=-(c+d)*S,M=(C-c-d-_)*S;if(x&&s&&s.params.iosAnimateNavbarBackIcon){var I=n.parent().find(".navbar-current").children(".left.sliding").find(".back .icon ~ span");I.length>0&&(T+=I[0].offsetLeft)}f[0].f7NavbarLeftOffset=T,f[0].f7NavbarRightOffset=M}if(!g&&(p.hasClass("sliding")||k))if(t.rtl)p[0].f7NavbarLeftOffset=-(C-p[0].offsetWidth)/2*S,p[0].f7NavbarRightOffset=b*S;else if(p[0].f7NavbarLeftOffset=-b,p[0].f7NavbarRightOffset=(C-p[0].offsetWidth)/2,s&&s.params.iosAnimateNavbarBackIcon&&p.find(".back .icon").length>0&&p.find(".back .icon ~ span").length){var L=p[0].f7NavbarLeftOffset,$=p[0].f7NavbarRightOffset;p[0].f7NavbarLeftOffset=0,p[0].f7NavbarRightOffset=0,p.find(".back .icon ~ span")[0].f7NavbarLeftOffset=L,p.find(".back .icon ~ span")[0].f7NavbarRightOffset=$-p.find(".back .icon")[0].offsetWidth}v||!h.hasClass("sliding")&&!k||(t.rtl?(h[0].f7NavbarLeftOffset=-y*S,h[0].f7NavbarRightOffset=(C-h[0].offsetWidth)/2*S):(h[0].f7NavbarLeftOffset=-(C-h[0].offsetWidth)/2,h[0].f7NavbarRightOffset=y)),m.length&&(m.hasClass("sliding")||k)&&(m[0].f7NavbarLeftOffset=t.rtl?m[0].offsetWidth:-m[0].offsetWidth,m[0].f7NavbarRightOffset=-m[0].f7NavbarLeftOffset)}if(i){var P=d;t.rtl&&g&&v&&f.length>0&&(P=-P),f.css({left:P+"px"})}}}}},hide:function(e,t,n,r){void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=this,o=a(e),s=o.hasClass("navbar")&&o.parent(".navbars").length&&!r;if(s&&(o=o.parents(".navbars")),o.length&&!o.hasClass("navbar-hidden")){var l="navbar-hidden"+(t?" navbar-transitioning":"");(s?o.find(".navbar-current .title-large").length:o.find(".title-large").length)&&(l+=" navbar-large-hidden"),n&&(l+=" navbar-hidden-statusbar"),o.transitionEnd((function(){o.removeClass("navbar-transitioning")})),o.addClass(l),s?o.children(".navbar").each((function(e){a(e).trigger("navbar:hide"),i.emit("navbarHide",e)})):(o.trigger("navbar:hide"),i.emit("navbarHide",o[0]))}},show:function(e,t,n){void 0===e&&(e=".navbar-hidden"),void 0===t&&(t=!0),void 0===n&&(n=!1);var r=this,i=a(e),o=i.hasClass("navbar")&&i.parent(".navbars").length&&!n;o&&(i=i.parents(".navbars")),i.length&&i.hasClass("navbar-hidden")&&(t&&(i.addClass("navbar-transitioning"),i.transitionEnd((function(){i.removeClass("navbar-transitioning")}))),i.removeClass("navbar-hidden navbar-large-hidden navbar-hidden-statusbar"),o?i.children(".navbar").each((function(e){a(e).trigger("navbar:show"),r.emit("navbarShow",e)})):(i.trigger("navbar:show"),r.emit("navbarShow",i[0])))},getElByPage:function(e){var t,n,r;if(e.$navbarEl||e.$el?(r=e,t=e.$el):(t=a(e)).length>0&&(r=t[0].f7Page),r&&r.$navbarEl&&r.$navbarEl.length>0?n=r.$navbarEl:t&&(n=t.children(".navbar")),n&&(!n||0!==n.length))return n[0]},getPageByEl:function(e){var t,n=a(e);return n.parents(".page").length?n.parents(".page")[0]:(n.parents(".view").find(".page").each((function(e){e&&e.f7Page&&e.f7Page.navbarEl&&n[0]===e.f7Page.navbarEl&&(t=e)})),t)},collapseLargeTitle:function(e){var t=this,n=a(e);if(!(n.hasClass("navbars")&&((n=n.find(".navbar")).length>1&&(n=a(e).find(".navbar-large.navbar-current")),n.length>1||!n.length))){var r=a(t.navbar.getPageByEl(n));n.addClass("navbar-large-collapsed"),r.eq(0).addClass("page-with-navbar-large-collapsed").trigger("page:navbarlargecollapsed"),t.emit("pageNavbarLargeCollapsed",r[0]),n.trigger("navbar:collapse"),t.emit("navbarCollapse",n[0])}},expandLargeTitle:function(e){var t=this,n=a(e);if(!(n.hasClass("navbars")&&((n=n.find(".navbar-large")).length>1&&(n=a(e).find(".navbar-large.navbar-current")),n.length>1||!n.length))){var r=a(t.navbar.getPageByEl(n));n.removeClass("navbar-large-collapsed"),r.eq(0).removeClass("page-with-navbar-large-collapsed").trigger("page:navbarlargeexpanded"),t.emit("pageNavbarLargeExpanded",r[0]),n.trigger("navbar:expand"),t.emit("navbarExpand",n[0])}},toggleLargeTitle:function(e){var t=a(e);t.hasClass("navbars")&&((t=t.find(".navbar-large")).length>1&&(t=a(e).find(".navbar-large.navbar-current")),t.length>1||!t.length)||(t.hasClass("navbar-large-collapsed")?this.navbar.expandLargeTitle(t):this.navbar.collapseLargeTitle(t))},initNavbarOnScroll:function(e,t,n,r,i){var o,s,l,c,d,u,p,h,f,m,g,v,b,y,_=this,w=D(),C=a(e),x=a(t),k=x.find(".title-large"),E=k.length||x.hasClass(".navbar-large"),S=44,T=_.params.navbar.snapPageScrollToLargeTitle,M=_.params.navbar.snapPageScrollToTransparentNavbar;(r||n&&E)&&((f=x.css("--f7-navbar-large-title-height"))&&f.indexOf("px")>=0?(f=parseInt(f,10),Number.isNaN(f)&&k.length?f=k[0].offsetHeight:Number.isNaN(f)&&("ios"===_.theme?f=52:"md"===_.theme?f=48:"aurora"===_.theme&&(f=38))):k.length?f=k[0].offsetHeight:"ios"===_.theme?f=52:"md"===_.theme?f=48:"aurora"===_.theme&&(f=38)),n&&E&&(S+=f);function I(){C.find(".page-content").each((function(e){e.f7ScrollableDistance=e.scrollHeight-e.offsetHeight}))}function L(){x.hasClass("with-searchbar-expandable-enabled")||!v||s<0||(s>=f/2&&s<f?a(v).scrollTop(f,100):s<f&&a(v).scrollTop(0,200))}function $(){x.hasClass("with-searchbar-expandable-enabled")||!v||s<0||(s>=m/2&&s<m?a(v).scrollTop(m,100):s<m&&a(v).scrollTop(0,200))}var P=null,O=null;function B(e){v=this,e&&e.target&&e.target!==v||(s=v.scrollTop,g=s,r?function(e){if(!x.hasClass("navbar-hidden")&&!x.parent(".navbars").hasClass("navbar-hidden")){var t=x.hasClass("navbar-large-transparent")||x.hasClass("navbar-large")&&x.hasClass("navbar-transparent");P=O;var n=Math.min(f,e.f7ScrollableDistance||f);O=Math.min(Math.max(s/n,0),1);var r=P>0&&P<1;x.hasClass("with-searchbar-expandable-enabled")||(h=x.hasClass("navbar-large-collapsed"),0===O&&h?_.navbar.expandLargeTitle(x[0]):1!==O||h||_.navbar.collapseLargeTitle(x[0]),0===O&&h||0===O&&r||1===O&&!h||1===O&&r?("md"===_.theme&&x.find(".navbar-inner").css("overflow",""),x.find(".title").css("opacity",""),x.find(".title-large-text, .subnavbar").css("transform",""),t?x.find(".navbar-bg").css("opacity",""):x.find(".navbar-bg").css("transform","")):O>0&&O<1&&("md"===_.theme&&x.find(".navbar-inner").css("overflow","visible"),x.find(".title").css("opacity",O),x.find(".title-large-text, .subnavbar").css("transform","translate3d(0px, "+-1*O*f+"px, 0)"),t?x.find(".navbar-bg").css("opacity",O):x.find(".navbar-bg").css("transform","translate3d(0px, "+-1*O*f+"px, 0)")),T&&(w.touch?y&&(clearTimeout(y),y=null,y=setTimeout((function(){L(),clearTimeout(y),y=null}),70)):(clearTimeout(b),b=setTimeout((function(){L()}),300))))}}(v):i&&function(){var e=x.hasClass("navbar-hidden")||x.parent(".navbars").hasClass("navbar-hidden");if(!x.hasClass("with-searchbar-expandable-enabled")&&!e){m||(m=t.offsetHeight);var n=s/m,r=x.hasClass("navbar-transparent-visible");if(n=Math.max(Math.min(n,1),0),r&&1===n||!r&&0===n)x.find(".navbar-bg, .title").css("opacity","");else{if(r&&0===n)return x.trigger("navbar:transparenthide"),_.emit("navbarTransparentHide",x[0]),x.removeClass("navbar-transparent-visible"),void x.find(".navbar-bg, .title").css("opacity","");if(!r&&1===n)return x.trigger("navbar:transparentshow"),_.emit("navbarTransparentShow",x[0]),x.addClass("navbar-transparent-visible"),void x.find(".navbar-bg, .title").css("opacity","");x.find(".navbar-bg, .title").css("opacity",n),M&&(w.touch?y&&(clearTimeout(y),y=null,y=setTimeout((function(){$(),clearTimeout(y),y=null}),70)):(clearTimeout(b),b=setTimeout((function(){$()}),300)))}}}(),C.hasClass("page-previous")||n&&(C.hasClass("page-with-card-opened")||(l=v.scrollHeight,c=v.offsetHeight,d=s+c>=l,p=x.hasClass("navbar-hidden")||x.parent(".navbars").hasClass("navbar-hidden"),d?_.params.navbar.showOnPageScrollEnd&&(u="show"):u=o>s?_.params.navbar.showOnPageScrollTop||s<=S?"show":"hide":s>S?"hide":"show","show"===u&&p?(_.navbar.show(x,!0,!0),p=!1):"hide"!==u||p||(_.navbar.hide(x,!0,!1,!0),p=!0),o=s)))}function A(){g=!1}function R(){clearTimeout(y),y=null,y=setTimeout((function(){!1!==g&&(i&&!r?$():L(),clearTimeout(y),y=null)}),70)}C.on("scroll",".page-content",B,!0),w.touch&&(r&&T||i&&M)&&(_.on("touchstart:passive",A),_.on("touchend:passive",R)),I(),(r||i)&&C.find(".page-content").each((function(e){e.scrollTop>0&&B.call(e)})),_.on("resize",I),C[0].f7DetachNavbarScrollHandlers=function(){_.off("resize",I),delete C[0].f7DetachNavbarScrollHandlers,C.off("scroll",".page-content",B,!0),w.touch&&(r&&T||i&&M)&&(_.off("touchstart:passive",A),_.off("touchend:passive",R))}}};const Qt={name:"navbar",create:function(){A(this,{navbar:Jt})},params:{navbar:{scrollTopOnTitleClick:!0,iosCenterTitle:!0,mdCenterTitle:!1,auroraCenterTitle:!0,hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0,collapseLargeTitleOnScroll:!0,snapPageScrollToLargeTitle:!0,snapPageScrollToTransparentNavbar:!0}},on:{"panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint":function(){var e=this;a(".navbar").each((function(t){e.navbar.size(t)}))},pageBeforeRemove:function(e){e.$el[0].f7DetachNavbarScrollHandlers&&e.$el[0].f7DetachNavbarScrollHandlers()},pageBeforeIn:function(e){var t=this;if("ios"===t.theme){var n,r=e.$el.parents(".view")[0].f7View,i=t.navbar.getElByPage(e);if(n=i?a(i).parents(".navbars"):e.$el.parents(".view").children(".navbars"),e.$el.hasClass("no-navbar")||r.router.dynamicNavbar&&!i){var o=!!(e.pageFrom&&e.router.history.length>0);t.navbar.hide(n,o)}else t.navbar.show(n)}},pageReinit:function(e){var t=a(this.navbar.getElByPage(e));t&&0!==t.length&&this.navbar.size(t)},pageInit:function(e){var t,n,r,i=this,o=a(i.navbar.getElByPage(e));o&&0!==o.length&&(i.navbar.size(o),o.find(".title-large").length>0&&o.addClass("navbar-large"),o.hasClass("navbar-large")&&(i.params.navbar.collapseLargeTitleOnScroll&&(t=!0),e.$el.addClass("page-with-navbar-large")),!t&&o.hasClass("navbar-transparent")&&(n=!0),(i.params.navbar.hideOnPageScroll||e.$el.find(".hide-navbar-on-scroll").length||e.$el.hasClass("hide-navbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll"))&&(r=!(e.$el.find(".keep-navbar-on-scroll").length||e.$el.hasClass("keep-navbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))),(t||r||n)&&i.navbar.initNavbarOnScroll(e.el,o[0],r,t,n))},"panelOpen panelSwipeOpen modalOpen":function(e){var t=this;e.$el.find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))},tabShow:function(e){var t=this;a(e).find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))}},clicks:{".navbar .title":function(e,t,n){if(this.params.navbar.scrollTopOnTitleClick&&!(a(n.target).closest("a, button").length>0)){var r,i=e.parents(".navbar"),o=i.parents(".navbars");0===(r=i.parents(".page-content")).length&&(i.parents(".page").length>0&&(r=i.parents(".page").find(".page-content")),0===r.length&&o.length&&o.nextAll(".page-current:not(.stacked)").length>0&&(r=o.nextAll(".page-current:not(.stacked)").find(".page-content")),0===r.length&&i.nextAll(".page-current:not(.stacked)").length>0&&(r=i.nextAll(".page-current:not(.stacked)").find(".page-content"))),r&&r.length>0&&(r.hasClass("tab")&&(r=r.parent(".tabs").children(".page-content.tab-active")),r.length>0&&r.scrollTop(0,300))}}},vnode:{navbar:{postpatch:function(e){this.navbar.size(e.elm)}}}};var Yt={setHighlight:function(e){if("ios"!==this.theme){var t=a(e);if(0!==t.length&&(t.hasClass("tabbar")||t.hasClass("tabbar-labels"))){var n=t.find(".tab-link-highlight"),r=t.find(".tab-link").length;if(0!==r){0===n.length?(t.children(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),n=t.find(".tab-link-highlight")):n.next().length&&t.children(".toolbar-inner").append(n);var i,o,s=t.find(".tab-link-active");if(t.hasClass("tabbar-scrollable")&&s&&s[0])i=s[0].offsetWidth+"px",o=s[0].offsetLeft+"px";else{var l=s.index();i=100/r+"%",o=100*(this.rtl?-l:l)+"%"}_((function(){n.css("width",i).transform("translate3d("+o+",0,0)")}))}else n.remove()}}},init:function(e){this.toolbar.setHighlight(e)},hide:function(e,t){void 0===t&&(t=!0);var n=a(e);if(!n.hasClass("toolbar-hidden")){var r="toolbar-hidden"+(t?" toolbar-transitioning":"");n.transitionEnd((function(){n.removeClass("toolbar-transitioning")})),n.addClass(r),n.trigger("toolbar:hide"),this.emit("toolbarHide",n[0])}},show:function(e,t){void 0===t&&(t=!0);var n=a(e);n.hasClass("toolbar-hidden")&&(t&&(n.addClass("toolbar-transitioning"),n.transitionEnd((function(){n.removeClass("toolbar-transitioning")}))),n.removeClass("toolbar-hidden"),n.trigger("toolbar:show"),this.emit("toolbarShow",n[0]))},initToolbarOnScroll:function(e){var t,n,r,i,o,s,l,c=this,d=a(e),u=d.parents(".view").children(".toolbar");function p(e){if(!d.hasClass("page-with-card-opened")&&!d.hasClass("page-previous")){var a=this;e&&e.target&&e.target!==a||(n=a.scrollTop,r=a.scrollHeight,i=a.offsetHeight,o=n+i>=r,l=u.hasClass("toolbar-hidden"),o?c.params.toolbar.showOnPageScrollEnd&&(s="show"):s=t>n?c.params.toolbar.showOnPageScrollTop||n<=44?"show":"hide":n>44?"hide":"show","show"===s&&l?(c.toolbar.show(u),l=!1):"hide"!==s||l||(c.toolbar.hide(u),l=!0),t=n)}}0===u.length&&(u=d.find(".toolbar")),0===u.length&&(u=d.parents(".views").children(".tabbar, .tabbar-labels")),0!==u.length&&(d.on("scroll",".page-content",p,!0),d[0].f7ScrollToolbarHandler=p)}};const Xt={name:"toolbar",create:function(){A(this,{toolbar:Yt})},params:{toolbar:{hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0}},on:{pageBeforeRemove:function(e){e.$el[0].f7ScrollToolbarHandler&&e.$el.off("scroll",".page-content",e.$el[0].f7ScrollToolbarHandler,!0)},pageBeforeIn:function(e){var t=e.$el.parents(".view").children(".toolbar");0===t.length&&(t=e.$el.parents(".views").children(".tabbar, .tabbar-labels")),0===t.length&&(t=e.$el.find(".toolbar")),0!==t.length&&(e.$el.hasClass("no-toolbar")?this.toolbar.hide(t):this.toolbar.show(t))},pageInit:function(e){var t=this;if(e.$el.find(".tabbar, .tabbar-labels").each((function(e){t.toolbar.init(e)})),t.params.toolbar.hideOnPageScroll||e.$el.find(".hide-toolbar-on-scroll").length||e.$el.hasClass("hide-toolbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll")){if(e.$el.find(".keep-toolbar-on-scroll").length||e.$el.hasClass("keep-toolbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))return;t.toolbar.initToolbarOnScroll(e.el)}},init:function(){var e=this;e.$el.find(".tabbar, .tabbar-labels").each((function(t){e.toolbar.init(t)}))}},vnode:{tabbar:{insert:function(e){this.toolbar.init(e.elm)}}}},Zt={name:"subnavbar",on:{pageInit:function(e){e.$navbarEl&&e.$navbarEl.length&&e.$navbarEl.find(".subnavbar").length&&e.$el.addClass("page-with-subnavbar"),e.$el.find(".subnavbar").filter((function(t){return a(t).parents(".page")[0]===e.$el[0]})).length&&e.$el.addClass("page-with-subnavbar")}}};var en=function(){function e(e,t,n,r){var i=this;if(t){var o=t[0].getBoundingClientRect(),s=o.left,l=o.top,c=o.width,d=o.height,u=n-s,p=r-l,h=Math.max(Math.pow(Math.pow(d,2)+Math.pow(c,2),.5),48),f=!1,m=e.params.touch.touchRippleInsetElements||"";if(m&&t.is(m)&&(f=!0),f&&(h=Math.max(Math.min(c,d),48)),f||"hidden"!==t.css("overflow"))i.rippleTransform="translate3d("+(c/2-u)+"px, "+(d/2-p)+"px, 0) scale(1)";else{var g=(h/2+Math.pow(Math.pow(u-c/2,2)+Math.pow(p-d/2,2),.5))/(h/2);i.rippleTransform="translate3d(0px, 0px, 0) scale("+g+")"}return f&&t.addClass("ripple-inset"),i.$rippleWaveEl=a('<div class="ripple-wave" style="width: '+h+"px; height: "+h+"px; margin-top:-"+h/2+"px; margin-left:-"+h/2+"px; left:"+u+"px; top:"+p+"px; --f7-ripple-transform: "+i.rippleTransform+'"></div>'),t.prepend(i.$rippleWaveEl),i.$rippleWaveEl.animationEnd((function(){i.$rippleWaveEl&&(i.$rippleWaveEl.hasClass("ripple-wave-out")||(i.$rippleWaveEl.addClass("ripple-wave-in"),i.shouldBeRemoved&&i.out()))})),i}}var t=e.prototype;return t.destroy=function(){var e=this;e.$rippleWaveEl&&e.$rippleWaveEl.remove(),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},t.out=function(){var e=this,t=this.$rippleWaveEl;clearTimeout(e.removeTimeout),t.addClass("ripple-wave-out"),e.removeTimeout=setTimeout((function(){e.destroy()}),300),t.animationEnd((function(){clearTimeout(e.removeTimeout),e.destroy()}))},t.remove=function(){var e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout((function(){e.destroy()}),400),e.shouldBeRemoved=!0,e.$rippleWaveEl.hasClass("ripple-wave-in")&&e.out())},e}();function tn(e,t,n){return tn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&nn(i,n.prototype),i},tn.apply(null,arguments)}function nn(e,t){return nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nn(e,t)}const rn={name:"touch-ripple",static:{TouchRipple:en},create:function(){this.touchRipple={create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tn(en,t)}}}};function an(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function on(e,t){return on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},on(e,t)}var sn=[],ln=[],cn=function(e){var t,n;function r(t,n){var r,i=an(r=e.call(this,n,[t])||this),o={};i.useModulesParams(o),i.params=T(o,n),i.opened=!1;var s=i.params.containerEl?a(i.params.containerEl).eq(0):t.$el;return s.length||(s=t.$el),i.$containerEl=s,i.containerEl=s[0],i.useModules(),an(r)||an(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,on(t,n);var i=r.prototype;return i.onOpen=function(){var e=this;e.opened=!0,sn.push(e),a("html").addClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:open "+e.type.toLowerCase()+":open"),e.emit("local::open modalOpen "+e.type+"Open",e)},i.onOpened=function(){var e=this;e.$el.trigger("modal:opened "+e.type.toLowerCase()+":opened"),e.emit("local::opened modalOpened "+e.type+"Opened",e)},i.onClose=function(){var e=this;e.opened=!1,e.type&&e.$el&&(sn.splice(sn.indexOf(e),1),a("html").removeClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:close "+e.type.toLowerCase()+":close"),e.emit("local::close modalClose "+e.type+"Close",e))},i.onClosed=function(){var e=this;e.type&&e.$el&&(e.$el.removeClass("modal-out"),e.$el.hide(),e.$el.trigger("modal:closed "+e.type.toLowerCase()+":closed"),e.emit("local::closed modalClosed "+e.type+"Closed",e))},i.open=function(e){var t,n=this,r=(0,o.Me)(),i=n.app,s=n.$el,l=n.$backdropEl,c=n.type,d=!0;if(void 0!==e?d=e:void 0!==n.params.animate&&(d=n.params.animate),!s||s.hasClass("modal-in"))return!1===e&&s[0]&&"dialog"!==c&&(s[0].style.display="block"),n;if("dialog"===c&&i.params.modal.queueDialogs&&(a(".dialog.modal-in").length>0?t=!0:sn.length>0&&sn.forEach((function(e){"dialog"===e.type&&(t=!0)})),t))return ln.push(n),n;var u=s.parent(),p=s.parents(r).length>0;function h(){s.hasClass("modal-out")?n.onClosed():s.hasClass("modal-in")&&n.onOpened()}return u.is(n.$containerEl)||(n.$containerEl.append(s),n.once(c+"Closed",(function(){p?u.append(s):s.remove()}))),s.show(),n._clientLeft=s[0].clientLeft,d?(l&&(l.removeClass("not-animated"),l.addClass("backdrop-in")),s.animationEnd((function(){h()})),s.transitionEnd((function(){h()})),s.removeClass("modal-out not-animated").addClass("modal-in"),n.onOpen()):(l&&l.addClass("backdrop-in not-animated"),s.removeClass("modal-out").addClass("modal-in not-animated"),n.onOpen(),n.onOpened()),n},i.close=function(e){var t=this,n=t.$el,r=t.$backdropEl,i=!0;if(void 0!==e?i=e:void 0!==t.params.animate&&(i=t.params.animate),!n||!n.hasClass("modal-in"))return ln.indexOf(t)>=0&&ln.splice(ln.indexOf(t),1),t;if(r){var a=!0;"popup"===t.type&&t.$el.prevAll(".popup.modal-in").add(t.$el.nextAll(".popup.modal-in")).each((function(e){var n=e.f7Modal;n&&n.params.closeByBackdropClick&&n.params.backdrop&&n.backdropEl===t.backdropEl&&(a=!1)})),a&&(r[i?"removeClass":"addClass"]("not-animated"),r.removeClass("backdrop-in"))}function o(){n.hasClass("modal-out")?t.onClosed():n.hasClass("modal-in")&&t.onOpened()}return n[i?"removeClass":"addClass"]("not-animated"),i?(n.animationEnd((function(){o()})),n.transitionEnd((function(){o()})),n.removeClass("modal-in").addClass("modal-out"),t.onClose()):(n.addClass("not-animated").removeClass("modal-in").addClass("modal-out"),t.onClose(),t.onClosed()),"dialog"===t.type&&0!==ln.length&&ln.shift().open(),t},i.destroy=function(){var e=this;e.destroyed||(e.emit("local::beforeDestroy modalBeforeDestroy "+e.type+"BeforeDestroy",e),e.$el&&(e.$el.trigger("modal:beforedestroy "+e.type.toLowerCase()+":beforedestroy"),e.$el.length&&e.$el[0].f7Modal&&delete e.$el[0].f7Modal),g(e),e.destroyed=!0)},r}(W);const dn=cn;function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e,t){return pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pn(e,t)}const hn=function(e){var t,n;function r(t,n){var r,i,o,s=T({backdrop:!0,closeByBackdropClick:!0,on:{}},n),l=un(r=e.call(this,t,s)||this);if(l.params=s,(i=l.params.el?a(l.params.el):a(l.params.content))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal||un(r);if(0===i.length)return l.destroy()||un(r);function c(e){l&&!l.destroyed&&o&&e.target===o[0]&&l.close()}return l.params.backdrop&&0===(o=t.$el.children(".custom-modal-backdrop")).length&&(o=a('<div class="custom-modal-backdrop"></div>'),t.$el.append(o)),l.on("customModalOpened",(function(){l.params.closeByBackdropClick&&l.params.backdrop&&t.on("click",c)})),l.on("customModalClose",(function(){l.params.closeByBackdropClick&&l.params.backdrop&&t.off("click",c)})),T(l,{app:t,$el:i,el:i[0],$backdropEl:o,backdropEl:o&&o[0],type:"customModal"}),i[0].f7Modal=l,l||un(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,pn(t,n),r}(dn),fn={name:"modal",static:{Modal:dn,CustomModal:hn},create:function(){var e=this;e.customModal={create:function(t){return new hn(e,t)}}},params:{modal:{queueDialogs:!0}}},mn=function(e,t){for(var n=t||{},r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=i||[],s=Object.keys(n).map((function(e){return"_"===e[0]?n[e]?e.replace("_",""):"":e+'="'+n[e]+'"'})).filter((function(e){return!!e})).join(" ");return["path","img","circle","polygon","line","input"].indexOf(e)>=0?("<"+e+" "+s+" />").trim():("<"+e+" "+s+">"+o.filter((function(e){return!!e})).map((function(e){return Array.isArray(e)?e.join(""):e})).join("")+"</"+e+">").trim()};function gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e,t){return vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vn(e,t)}var bn=function(e){var t,n;function r(t,n){var r,i=T({title:t.params.dialog.title,text:void 0,content:"",buttons:[],verticalButtons:!1,onClick:void 0,cssClass:void 0,destroyOnClose:!1,on:{}},n);void 0===i.closeByBackdropClick&&(i.closeByBackdropClick=t.params.dialog.closeByBackdropClick),void 0===i.backdrop&&(i.backdrop=t.params.dialog.backdrop);var s,l,c,d=gn(r=e.call(this,t,i)||this),u=N(),p=(0,o.Me)(),h=i.title,f=i.text,m=i.content,g=i.buttons,v=i.verticalButtons,b=i.cssClass,y=i.backdrop;if(d.params=i,d.params.el)s=a(d.params.el);else{var _=["dialog"];0===g.length&&_.push("dialog-no-buttons"),g.length>0&&_.push("dialog-buttons-"+g.length),v&&_.push("dialog-buttons-vertical"),b&&_.push(b);var w="";g.length>0&&(w=mn("div",{class:"dialog-buttons"},g.map((function(e){return mn("span",{class:"dialog-button"+(e.bold?" dialog-button-bold":"")+(e.color?" color-"+e.color:"")+(e.cssClass?" "+e.cssClass:"")},e.text)}))));var C=mn("div",{class:_.join(" ")},mn("div",{class:"dialog-inner"},h&&mn("div",{class:"dialog-title"},h),f&&mn("div",{class:"dialog-text"},f),m),w);s=a(C)}if(s&&s.length>0&&s[0].f7Modal)return s[0].f7Modal||gn(r);if(0===s.length)return d.destroy()||gn(r);function x(e){var t=a(this).index(),n=g[t];n.onClick&&n.onClick(d,e),d.params.onClick&&d.params.onClick(d,t),!1!==n.close&&d.close()}function k(e){var t=e.keyCode;g.forEach((function(n,r){n.keyCodes&&n.keyCodes.indexOf(t)>=0&&(p.activeElement&&p.activeElement.blur(),n.onClick&&n.onClick(d,e),d.params.onClick&&d.params.onClick(d,r),!1!==n.close&&d.close())}))}function E(e){var t=e.target;0===a(t).closest(d.el).length&&d.params.closeByBackdropClick&&d.backdropEl&&d.backdropEl===t&&d.close()}return y&&0===(l=t.$el.children(".dialog-backdrop")).length&&(l=a('<div class="dialog-backdrop"></div>'),t.$el.append(l)),g&&g.length>0&&(d.on("open",(function(){s.find(".dialog-button").each((function(e,t){g[t].keyCodes&&(c=!0),a(e).on("click",x)})),!c||u.ios||u.android||u.cordova||u.capacitor||a(p).on("keydown",k)})),d.on("close",(function(){s.find(".dialog-button").each((function(e){a(e).off("click",x)})),!c||u.ios||u.android||u.cordova||u.capacitor||a(p).off("keydown",k),c=!1}))),T(d,{app:t,$el:s,el:s[0],$backdropEl:l,backdropEl:l&&l[0],type:"dialog",setProgress:function(e,n){return t.progressbar.set(s.find(".progressbar"),e,n),d},setText:function(e){var t=s.find(".dialog-text");return 0===t.length&&(t=a('<div class="dialog-text"></div>'),void 0!==h?t.insertAfter(s.find(".dialog-title")):s.find(".dialog-inner").prepend(t)),t.html(e),d.params.text=e,d},setTitle:function(e){var t=s.find(".dialog-title");return 0===t.length&&(t=a('<div class="dialog-title"></div>'),s.find(".dialog-inner").prepend(t)),t.html(e),d.params.title=e,d}}),d.on("opened",(function(){d.params.closeByBackdropClick&&t.on("click",E)})),d.on("close",(function(){d.params.closeByBackdropClick&&t.off("click",E)})),s[0].f7Modal=d,d.params.destroyOnClose&&d.once("closed",(function(){setTimeout((function(){d.destroy()}),0)})),d||gn(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,vn(t,n),r}(dn);const yn=bn;function _n(){return _n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_n.apply(this,arguments)}const wn={name:"dialog",params:{dialog:{title:void 0,buttonOk:"OK",buttonCancel:"Cancel",usernamePlaceholder:"Username",passwordPlaceholder:"Password",preloaderTitle:"Loading... ",progressTitle:"Loading... ",backdrop:!0,closeByBackdropClick:!1,destroyPredefinedDialogs:!0,keyboardActions:!0,autoFocus:!0}},static:{Dialog:yn},create:function(){var e=this;function t(){return e.params.dialog.title||e.name}var n=e.params.dialog.destroyPredefinedDialogs,r=e.params.dialog.keyboardActions,i=e.params.dialog.autoFocus?{on:{opened:function(e){e.$el.find("input").eq(0).focus()}}}:{};e.dialog=T(J({app:e,constructor:yn,defaultSelector:".dialog.modal-in"}),{alert:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1],c=a[2];return 2===a.length&&"function"==typeof a[1]&&(s=a[0],c=a[1],l=a[2]),new yn(e,{title:void 0===l?t():l,text:s,buttons:[{text:e.params.dialog.buttonOk,bold:!0,onClick:c,keyCodes:r?[13,27]:null}],destroyOnClose:n}).open()},prompt:function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=o[1],d=o[2],u=o[3],p=o[4];return"function"==typeof o[1]&&(l=o[0],d=o[1],u=o[2],p=o[3],c=o[4]),p=null==p?"":p,new yn(e,_n({title:void 0===c?t():c,text:l,content:'<div class="dialog-input-field input"><input type="text" class="dialog-input" value="'+p+'"></div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:r?[13]:null}],onClick:function(e,t){var n=e.$el.find(".dialog-input").val();0===t&&u&&u(n),1===t&&d&&d(n)},destroyOnClose:n},i)).open()},confirm:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1],c=a[2],d=a[3];return"function"==typeof a[1]&&(s=a[0],c=a[1],d=a[2],l=a[3]),new yn(e,{title:void 0===l?t():l,text:s,buttons:[{text:e.params.dialog.buttonCancel,onClick:d,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,onClick:c,keyCodes:r?[13]:null}],destroyOnClose:n}).open()},login:function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=o[1],d=o[2],u=o[3];return"function"==typeof o[1]&&(l=o[0],d=o[1],u=o[2],c=o[3]),new yn(e,_n({title:void 0===c?t():c,text:l,content:'\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="text" name="dialog-username" placeholder="'+e.params.dialog.usernamePlaceholder+'" class="dialog-input">\n              </div>\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:r?[13]:null}],onClick:function(e,t){var n=e.$el.find('[name="dialog-username"]').val(),r=e.$el.find('[name="dialog-password"]').val();0===t&&u&&u(n,r),1===t&&d&&d(n,r)},destroyOnClose:n},i)).open()},password:function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=o[1],d=o[2],u=o[3];return"function"==typeof o[1]&&(l=o[0],d=o[1],u=o[2],c=o[3]),new yn(e,_n({title:void 0===c?t():c,text:l,content:'\n              <div class="dialog-input-field input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:r?[13]:null}],onClick:function(e,t){var n=e.$el.find('[name="dialog-password"]').val();0===t&&u&&u(n),1===t&&d&&d(n)},destroyOnClose:n},i)).open()},preloader:function(t,r){var i={iosPreloaderContent:h,mdPreloaderContent:p,auroraPreloaderContent:f}[e.theme+"PreloaderContent"]||"";return new yn(e,{title:null==t?e.params.dialog.preloaderTitle:t,content:'<div class="preloader'+(r?" color-"+r:"")+'">'+i+"</div>",cssClass:"dialog-preloader",destroyOnClose:n}).open()},progress:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r[0],o=r[1],s=r[2];2===r.length?"number"==typeof r[0]?(o=r[0],s=r[1],a=r[2]):"string"==typeof r[0]&&"string"==typeof r[1]&&(a=r[0],s=r[1],o=r[2]):1===r.length&&"number"==typeof r[0]&&(o=r[0],a=r[1],s=r[2]);var l=void 0===o,c=new yn(e,{title:void 0===a?e.params.dialog.progressTitle:a,cssClass:"dialog-progress",content:'\n              <div class="progressbar'+(l?"-infinite":"")+(s?" color-"+s:"")+'">\n                '+(l?"":"<span></span>")+"\n              </div>\n            ",destroyOnClose:n});return l||c.setProgress(o),c.open()}})}};function Cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e,t){return xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xn(e,t)}var kn=function(e){var t,n;function r(t,n){var r,i,s,l,c,d=T({on:{}},t.params.popup,n),u=Cn(r=e.call(this,t,d)||this),p=(0,o.Jj)(),h=(0,o.Me)(),f=D(),m=N();if(u.params=d,(i=u.params.el?a(u.params.el).eq(0):a(u.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal||Cn(r);if(0===i.length)return u.destroy()||Cn(r);function g(e){var t=e.target,n=a(t);if((m.desktop||!m.cordova||!(p.Keyboard&&p.Keyboard.isVisible||p.cordova.plugins&&p.cordova.plugins.Keyboard&&p.cordova.plugins.Keyboard.isVisible))&&0===n.closest(u.el).length&&u.params&&u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t){var r=!0;u.$el.nextAll(".popup.modal-in").each((function(e){var t=e.f7Modal;t&&t.params.closeByBackdropClick&&t.params.backdrop&&t.backdropEl===u.backdropEl&&(r=!1)})),r&&u.close()}}function v(e){27===e.keyCode&&u.params.closeOnEscape&&u.close()}function b(e){return(t.height-2*e)/t.height}u.params.backdrop&&u.params.backdropEl?s=a(u.params.backdropEl):u.params.backdrop&&0===(s=u.$containerEl.children(".popup-backdrop")).length&&(s=a('<div class="popup-backdrop"></div>'),u.$containerEl.append(s)),T(u,{app:t,push:i.hasClass("popup-push")||u.params.push,$el:i,el:i[0],$backdropEl:s,backdropEl:s&&s[0],type:"popup",$htmlEl:a("html")}),u.params.push&&i.addClass("popup-push");var _,C,x,k,E,S,M,I,L,$,P,O=!0,B=!1,A=!1;function R(e){!B&&O&&u.params.swipeToClose&&(u.params.swipeHandler&&0===a(e.target).closest(u.params.swipeHandler).length||(B=!0,A=!1,_={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},k=w(),x=void 0,u.params.swipeHandler||"touchstart"!==e.type||(S=a(e.target).closest(".page-content")[0])))}function G(e){if(B){if(C={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===x&&(x=!!(x||Math.abs(C.x-_.x)>Math.abs(C.y-_.y))),x)return B=!1,void(A=!1);E=_.y-C.y,c&&l&&E>0&&(E=0);var n=E<0?"to-bottom":"to-top";if(i.transition(0),"string"==typeof u.params.swipeToClose&&n!==u.params.swipeToClose)return i.transform(""),void i.transition("");if(A)u.emit("local::swipeMove popupSwipeMove",u),u.$el.trigger("popup:swipemove");else{if(c&&l&&($=i[0].offsetHeight,0===(P=i.prevAll(".popup.modal-in").eq(0)).length&&(P=t.$el.children(".view, .views"))),S&&(M=S.scrollTop,L=S.scrollHeight,I=S.offsetHeight,!(L===I||"to-bottom"===n&&0===M||"to-top"===n&&M===L-I)))return i.transform(""),i.transition(""),B=!1,void(A=!1);A=!0,u.emit("local::swipeStart popupSwipeStart",u),u.$el.trigger("popup:swipestart")}if(e.preventDefault(),c&&l){var r=1-Math.abs(E/$),a=1-(1-b(l))*r;P.hasClass("popup")?P.hasClass("popup-push")?P.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, calc(-1 * "+r+" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale("+a+")","important")})):P.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, 0px , 0px) scale("+a+")","important")})):P.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+a+")","important")}))}i.transition(0).transform("translate3d(0,"+-E+"px,0)")}}function z(){if(B=!1,A){u.emit("local::swipeEnd popupSwipeEnd",u),u.$el.trigger("popup:swipeend"),A=!1,O=!1,i.transition(""),c&&l&&P.transition("").transform("");var e=E<=0?"to-bottom":"to-top";if("string"==typeof u.params.swipeToClose&&e!==u.params.swipeToClose)return i.transform(""),void(O=!0);var t=Math.abs(E),n=(new Date).getTime()-k;n<300&&t>20||n>=300&&t>100?y((function(){"to-bottom"===e?i.addClass("swipe-close-to-bottom"):i.addClass("swipe-close-to-top"),i.transform(""),u.emit("local::swipeclose popupSwipeClose",u),u.$el.trigger("popup:swipeclose"),u.close(),O=!0})):(O=!0,i.transform(""))}}var H,F=!!f.passiveListener&&{passive:!0};u.params.swipeToClose&&(i.on(t.touchEvents.start,R,F),t.on("touchmove",G),t.on("touchend:passive",z),u.once("popupDestroy",(function(){i.off(t.touchEvents.start,R,F),t.off("touchmove",G),t.off("touchend:passive",z)})));var V=function(){var e=c;u.push&&(c=u.push&&(t.width<630||t.height<630||i.hasClass("popup-tablet-fullscreen"))),c&&!e?W():c&&e?u.$htmlEl[0].style.setProperty("--f7-popup-push-scale",b(l)):!c&&e&&(u.$htmlEl.removeClass("with-modal-popup-push"),u.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))},W=function(){t.off("resize",V),u.push&&(c=u.push&&(t.width<630||t.height<630||i.hasClass("popup-tablet-fullscreen"))),c&&(l=parseInt(i.css("--f7-popup-push-offset"),10),Number.isNaN(l)&&(l=0),l&&(i.addClass("popup-push"),u.$htmlEl.addClass("with-modal-popup-push"),u.$htmlEl[0].style.setProperty("--f7-popup-push-scale",b(l)))),t.on("resize",V)};return u.on("open",(function(){H=!1,u.params.closeOnEscape&&a(h).on("keydown",v),i.prevAll(".popup.modal-in").addClass("popup-behind"),W()})),u.on("opened",(function(){i.removeClass("swipe-close-to-bottom swipe-close-to-top"),u.params.closeByBackdropClick&&t.on("click",g)})),u.on("close",(function(){H=u.$el.prevAll(".popup-push.modal-in").length>0,u.params.closeOnEscape&&a(h).off("keydown",v),u.params.closeByBackdropClick&&t.off("click",g),i.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),c&&l&&!H&&(u.$htmlEl.removeClass("with-modal-popup-push"),u.$htmlEl.addClass("with-modal-popup-push-closing")),t.off("resize",V)})),u.on("closed",(function(){i.removeClass("popup-behind"),c&&l&&!H&&(u.$htmlEl.removeClass("with-modal-popup-push-closing"),u.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))})),i[0].f7Modal=u,u||Cn(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,xn(t,n),r}(dn);const En=kn,Sn={name:"popup",params:{popup:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,swipeToClose:!1,swipeHandler:null,push:!1,containerEl:null}},static:{Popup:En},create:function(){this.popup=J({app:this,constructor:En,defaultSelector:".popup.modal-in",parentSelector:".popup"})},clicks:{".popup-open":function(e,t){void 0===t&&(t={}),this.popup.open(t.popup,t.animate,e)},".popup-close":function(e,t){void 0===t&&(t={}),this.popup.close(t.popup,t.animate,e)}}};function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t){return Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mn(e,t)}const In=function(e){var t,n;function r(t,n){var r,i,o=T({on:{}},n),s=Tn(r=e.call(this,t,o)||this);return s.params=o,(i=s.params.el?a(s.params.el).eq(0):a(s.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&i.length>0&&i[0].f7Modal?i[0].f7Modal||Tn(r):0===i.length?s.destroy()||Tn(r):(T(s,{app:t,$el:i,el:i[0],type:"loginScreen"}),i[0].f7Modal=s,s||Tn(r))}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Mn(t,n),r}(dn),Ln={name:"loginScreen",static:{LoginScreen:In},create:function(){this.loginScreen=J({app:this,constructor:In,defaultSelector:".login-screen.modal-in"})},clicks:{".login-screen-open":function(e,t){void 0===t&&(t={}),this.loginScreen.open(t.loginScreen,t.animate,e)},".login-screen-close":function(e,t){void 0===t&&(t={}),this.loginScreen.close(t.loginScreen,t.animate,e)}}};function $n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e,t){return Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pn(e,t)}var On=function(e){var t,n;function r(t,n){var r,i,s=T({on:{}},t.params.popover,n),l=$n(r=e.call(this,t,s)||this),c=N(),d=(0,o.Jj)(),u=(0,o.Me)();if(l.params=s,(i=l.params.el?a(l.params.el).eq(0):a(l.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal||$n(r);var p,h,f=a(l.params.targetEl).eq(0);if(0===i.length)return l.destroy()||$n(r);l.params.backdrop&&l.params.backdropEl?p=a(l.params.backdropEl):l.params.backdrop&&0===(p=l.$containerEl.children(".popover-backdrop")).length&&(p=a('<div class="popover-backdrop"></div>'),l.$containerEl.append(p)),0===i.find(".popover-angle").length?(h=a('<div class="popover-angle"></div>'),i.prepend(h)):h=i.find(".popover-angle");var m=l.open;function g(){l.resize()}T(l,{app:t,$el:i,el:i[0],$targetEl:f,targetEl:f[0],$angleEl:h,angleEl:h[0],$backdropEl:p,backdropEl:p&&p[0],type:"popover",open:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1];return"boolean"==typeof t[0]&&(i=t[0],r=t[1]),r&&(l.$targetEl=a(r),l.targetEl=l.$targetEl[0]),m.call(l,i)}}),l.on("popoverOpen",(function(){l.resize(),t.on("resize",g),a(d).on("keyboardDidShow keyboardDidHide",g),l.on("popoverClose popoverBeforeDestroy",(function(){t.off("resize",g),a(d).off("keyboardDidShow keyboardDidHide",g)}))}));var v=null;function b(e){v=e.target}function y(e){var t=e.target,n=a(t);!c.desktop&&c.cordova&&(d.Keyboard&&d.Keyboard.isVisible||d.cordova.plugins&&d.cordova.plugins.Keyboard&&d.cordova.plugins.Keyboard.isVisible)||0===n.closest(l.el).length&&(l.params.closeByBackdropClick&&l.params.backdrop&&l.backdropEl&&l.backdropEl===t&&v===t||l.params.closeByOutsideClick&&v===t)&&l.close()}function _(e){27===e.keyCode&&l.params.closeOnEscape&&l.close()}return l.params.closeOnEscape&&(l.on("popoverOpen",(function(){a(u).on("keydown",_)})),l.on("popoverClose",(function(){a(u).off("keydown",_)}))),l.on("popoverOpened",(function(){(l.params.closeByOutsideClick||l.params.closeByBackdropClick)&&(t.on("touchstart",b),t.on("click",y))})),l.on("popoverClose",(function(){(l.params.closeByOutsideClick||l.params.closeByBackdropClick)&&(t.off("touchstart",b),t.off("click",y))})),i[0].f7Modal=l,l||$n(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Pn(t,n),r.prototype.resize=function(){var e=this,t=e.app,n=e.$el,r=e.$targetEl,i=e.$angleEl,o=e.params,s=o.targetX,l=o.targetY;n.css({left:"",top:""});var c,d,u,p,h,f,m=[n.width(),n.height()],g=m[0],v=m[1],b=0;"ios"===t.theme||"aurora"===t.theme?(i.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}),b=i.width()/2):n.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle").css({left:"",top:""});var y=parseInt(a("html").css("--f7-safe-area-top"),10),_=parseInt(a("html").css("--f7-safe-area-left"),10),w=parseInt(a("html").css("--f7-safe-area-right"),10);if(Number.isNaN(y)&&(y=0),Number.isNaN(_)&&(_=0),Number.isNaN(w)&&(w=0),r&&r.length>0){u=r.outerWidth(),p=r.outerHeight();var C=r.offset();h=C.left-t.left,f=C.top-t.top;var x=r.parents(".page");x.length>0&&(f-=x[0].scrollTop)}else void 0!==s&&"undefined"!==l&&(h=s,f=l,u=e.params.targetWidth||0,p=e.params.targetHeight||0);var k,E=0,S=0,T=0,M="md"===t.theme?"bottom":"top";"md"===t.theme?(v<t.height-f-p?(M="bottom",S=f+p):v<f-y?(S=f-v,M="top"):(M="middle",S=p/2+f-v/2),S=Math.max(8,Math.min(S,t.height-v-8)),h<t.width/2?(k="right",E="middle"===M?h+u:h):(k="left",E="middle"===M?h-g:h+u-g),E=Math.max(8,Math.min(E,t.width-g-8-w),_),n.addClass("popover-on-"+M+" popover-on-"+k)):(v+b<f-y?S=f-v-b:v+b<t.height-f-p?(M="bottom",S=f+p+b):(M="middle",T=S=p/2+f-v/2,T-=S=Math.max(5,Math.min(S,t.height-v-5))),"top"===M||"bottom"===M?(T=E=u/2+h-g/2,E=Math.max(5,Math.min(E,t.width-g-5)),_&&(E=Math.max(E,_)),w&&E+g>t.width-5-w&&(E=t.width-5-w-g),"top"===M&&i.addClass("on-bottom"),"bottom"===M&&i.addClass("on-top"),c=g/2-b+(T-=E),c=Math.max(Math.min(c,g-2*b-13),13),i.css({left:c+"px"})):"middle"===M&&(E=h-g-b,i.addClass("on-right"),(E<5||E+g+w>t.width||E<_)&&(E<5&&(E=h+u+b),E+g+w>t.width&&(E=t.width-g-5-w),E<_&&(E=_),i.removeClass("on-right").addClass("on-left")),d=v/2-b+T,d=Math.max(Math.min(d,v-2*b-13),13),i.css({top:d+"px"}))),n.css({top:S+"px",left:E+"px"})},r}(dn);const Bn=On,An={name:"popover",params:{popover:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!0,closeOnEscape:!1,containerEl:null}},static:{Popover:Bn},create:function(){var e=this;e.popover=T(J({app:e,constructor:Bn,defaultSelector:".popover.modal-in"}),{open:function(t,n,r){var i=a(t);if(i.length>1){var o=a(n).parents(".page");o.length&&i.each((function(e){var t=a(e);t.parents(o)[0]===o[0]&&(i=t)}))}i.length>1&&(i=i.eq(i.length-1));var s=i[0].f7Modal,l=i.dataset();return s||(s=new Bn(e,Object.assign({el:i,targetEl:n},l))),s.open(n,r)}})},clicks:{".popover-open":function(e,t){void 0===t&&(t={}),this.popover.open(t.popover,e,t.animate)},".popover-close":function(e,t){void 0===t&&(t={}),this.popover.close(t.popover,t.animate,e)}}};function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Dn(e,t)}var Nn=function(e){var t,n;function r(t,n){var r,i,s,l,c=T({on:{}},t.params.actions,n),d=Rn(r=e.call(this,t,c)||this),u=N(),p=(0,o.Jj)(),h=(0,o.Me)();if(d.params=c,d.params.buttons&&(i=d.params.buttons,Array.isArray(i[0])||(i=[i])),d.groups=i,d.params.el?s=a(d.params.el).eq(0):d.params.content?s=a(d.params.content).filter((function(e){return 1===e.nodeType})).eq(0):d.params.buttons&&(d.params.convertToPopover&&(d.popoverHtml=d.renderPopover()),d.actionsHtml=d.render()),s&&s.length>0&&s[0].f7Modal)return s[0].f7Modal||Rn(r);if(s&&0===s.length&&!d.actionsHtml&&!d.popoverHtml)return d.destroy()||Rn(r);d.params.backdrop&&d.params.backdropEl?l=a(d.params.backdropEl):d.params.backdrop&&0===(l=d.$containerEl.children(".actions-backdrop")).length&&(l=a('<div class="actions-backdrop"></div>'),d.$containerEl.append(l));var f,m=d.open,g=d.close;function v(e){var t,n,r=a(this);if(r.hasClass("list-button")||r.hasClass("item-link")?(t=r.parents("li").index(),n=r.parents(".list").index()):(t=r.index(),n=r.parents(".actions-group").index()),void 0!==i){var o=i[n][t];o.onClick&&o.onClick(d,e),d.params.onClick&&d.params.onClick(d,e),!1!==o.close&&d.close()}}function b(e){var t=e.target,n=a(t);!u.desktop&&u.cordova&&(p.Keyboard&&p.Keyboard.isVisible||p.cordova.plugins&&p.cordova.plugins.Keyboard&&p.cordova.plugins.Keyboard.isVisible)||0===n.closest(d.el).length&&(d.params.closeByBackdropClick&&d.params.backdrop&&d.backdropEl&&d.backdropEl===t||d.params.closeByOutsideClick)&&d.close()}function _(e){27===e.keyCode&&d.params.closeOnEscape&&d.close()}return d.open=function(e){var n=!1,r=d.params,i=r.targetEl,o=r.targetX,s=r.targetY,l=r.targetWidth,c=r.targetHeight;return d.params.convertToPopover&&(i||void 0!==o&&void 0!==s)&&(d.params.forceToPopover||u.ios&&u.ipad||t.width>=768||u.desktop&&"aurora"===t.theme)&&(n=!0),n&&d.popoverHtml?((f=t.popover.create({containerEl:d.params.containerEl,content:d.popoverHtml,backdrop:d.params.backdrop,targetEl:i,targetX:o,targetY:s,targetWidth:l,targetHeight:c,on:{open:function(){d.$el||(d.$el=f.$el),d.$el.trigger("modal:open "+d.type.toLowerCase()+":open"),d.emit("local::open modalOpen "+d.type+"Open",d)},opened:function(){d.$el||(d.$el=f.$el),d.$el.trigger("modal:opened "+d.type.toLowerCase()+":opened"),d.emit("local::opened modalOpened "+d.type+"Opened",d)},close:function(){d.$el||(d.$el=f.$el),d.$el.trigger("modal:close "+d.type.toLowerCase()+":close"),d.emit("local::close modalClose "+d.type+"Close",d)},closed:function(){d.$el||(d.$el=f.$el),d.$el.trigger("modal:closed "+d.type.toLowerCase()+":closed"),d.emit("local::closed modalClosed "+d.type+"Closed",d)}}})).open(e),f.once("popoverOpened",(function(){f.$el.find(".list-button, .item-link").each((function(e){a(e).on("click",v)}))})),f.once("popoverClosed",(function(){f.$el.find(".list-button, .item-link").each((function(e){a(e).off("click",v)})),y((function(){f.destroy(),f=void 0}))}))):(d.$el=d.actionsHtml?a(d.actionsHtml):d.$el,d.$el[0].f7Modal=d,d.groups&&(d.$el.find(".actions-button").each((function(e){a(e).on("click",v)})),d.once("actionsClosed",(function(){d.$el.find(".actions-button").each((function(e){a(e).off("click",v)}))}))),d.el=d.$el[0],m.call(d,e)),d},d.close=function(e){return f?f.close(e):g.call(d,e),d},T(d,{app:t,$el:s,el:s?s[0]:void 0,$backdropEl:l,backdropEl:l&&l[0],type:"actions"}),d.params.closeOnEscape&&(d.on("open",(function(){a(h).on("keydown",_)})),d.on("close",(function(){a(h).off("keydown",_)}))),d.on("opened",(function(){(d.params.closeByBackdropClick||d.params.closeByOutsideClick)&&t.on("click",b)})),d.on("close",(function(){(d.params.closeByBackdropClick||d.params.closeByOutsideClick)&&t.off("click",b)})),s&&(s[0].f7Modal=d),d||Rn(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Dn(t,n);var i=r.prototype;return i.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.groups,n=e.params.cssClass;return mn("div",{class:"actions-modal"+(e.params.grid?" actions-grid":"")+" "+(n||"")},t.map((function(e){return mn("div",{class:"actions-group"},e.map((function(e){var t=["actions-"+(e.label?"label":"button")],n=e.color,r=e.bg,i=e.bold,a=e.disabled,o=e.label,s=e.text,l=e.icon;return n&&t.push("color-"+n),r&&t.push("bg-color-"+r),i&&t.push("actions-button-bold"),a&&t.push("disabled"),o?mn("div",{class:t.join(" ")},s):mn("div",{class:t.join(" ")},l&&mn("div",{class:"actions-button-media"},l),mn("div",{class:"actions-button-text"},s))})))})))},i.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e);var t=e.groups,n=e.params.cssClass;return mn("div",{class:"popover popover-from-actions "+(n||"")},mn("div",{class:"popover-inner"},t.map((function(e){return mn("div",{class:"list"},mn("ul",null,e.map((function(e){var t=[],n=e.color,r=e.bg,i=e.bold,a=e.disabled,o=e.label,s=e.text,l=e.icon;return n&&t.push("color-"+n),r&&t.push("bg-color-"+r),i&&t.push("popover-from-actions-bold"),a&&t.push("disabled"),o?(t.push("popover-from-actions-label"),'<li class="'+t.join(" ")+'">'+s+"</li>"):l?(t.push("item-link item-content"),mn("li",null,mn("a",{class:t.join(" ")},mn("div",{class:"item-media"},l),mn("div",{class:"item-inner"},mn("div",{class:"item-title"},s))))):(t.push("list-button"),mn("li",null,mn("a",{class:t.join(" ")},s)))}))))}))))},r}(dn);const Gn=Nn,zn={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,backdrop:!0,backdropEl:void 0,cssClass:null,closeByBackdropClick:!0,closeOnEscape:!1,render:null,renderPopover:null,containerEl:null}},static:{Actions:Gn},create:function(){this.actions=J({app:this,constructor:Gn,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(e,t){void 0===t&&(t={}),this.actions.open(t.actions,t.animate,e)},".actions-close":function(e,t){void 0===t&&(t={}),this.actions.close(t.actions,t.animate,e)}}};function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e,t){return Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fn(e,t)}var Vn=function(e){var t,n;function r(t,n){var r,i,s,l,c,d=T({on:{}},t.params.sheet,n),u=Hn(r=e.call(this,t,d)||this),p=(0,o.Jj)(),h=(0,o.Me)(),f=D(),m=N();if(u.params=d,void 0===u.params.backdrop&&(u.params.backdrop="ios"!==t.theme),(i=u.params.el?a(u.params.el).eq(0):a(u.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal||Hn(r);if(0===i.length)return u.destroy()||Hn(r);function g(e){var t=e.target,n=a(t);!m.desktop&&m.cordova&&(p.Keyboard&&p.Keyboard.isVisible||p.cordova.plugins&&p.cordova.plugins.Keyboard&&p.cordova.plugins.Keyboard.isVisible)||0===n.closest(u.el).length&&(u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t||u.params.closeByOutsideClick)&&u.close()}function v(e){27===e.keyCode&&u.params.closeOnEscape&&u.close()}function b(e){return(t.height-2*e)/t.height}u.params.backdrop&&u.params.backdropEl?s=a(u.params.backdropEl):u.params.backdrop&&0===(s=u.$containerEl.children(".sheet-backdrop")).length&&(s=a('<div class="sheet-backdrop"></div>'),u.$containerEl.append(s)),T(u,{app:t,push:i.hasClass("sheet-modal-push")||u.params.push,$el:i,el:i[0],$backdropEl:s,backdropEl:s&&s[0],type:"sheet",$htmlEl:a("html")}),u.params.push&&i.addClass("sheet-modal-push");var y,_,C,k,E,S,M,I,L,$,P,O,B,A,R,G,z,H,F=!1,V=!1;function W(e){F||!u.params.swipeToClose&&!u.params.swipeToStep||u.params.swipeHandler&&0===a(e.target).closest(u.params.swipeHandler).length||(F=!0,V=!1,y={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},k=w(),C=void 0,S=i.hasClass("sheet-modal-top"),u.params.swipeHandler||"touchstart"!==e.type||(R=a(e.target).closest(".page-content")[0]))}function j(e){if(F){if(_={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===C&&(C=!!(C||Math.abs(_.x-y.x)>Math.abs(_.y-y.y))),C)return F=!1,void(V=!1);var n,r=(E=y.y-_.y)<0?"to-bottom":"to-top";if(!V){if(R&&!i.hasClass("modal-in-swipe-step")&&(G=R.scrollTop,z=R.scrollHeight,H=R.offsetHeight,!(z===H||"to-bottom"===r&&0===G||"to-top"===r&&G===z-H)))return i.transform(""),F=!1,void(V=!1);u.push&&c&&(B=t.$el.children(".view, .views")),$=i[0].offsetHeight,I=x(i[0],"y"),S?(P=u.params.swipeToClose?-$:-M,O=0):(P=0,O=u.params.swipeToClose?$:M),V=!0}if(L=I-E,L=Math.min(Math.max(L,P),O),e.preventDefault(),u.push&&c){var a=(L-I)/$;u.params.swipeToStep&&(a=S?L/M:1-(M-L)/M),a=Math.abs(a);var o=1-(a=Math.min(Math.max(a,0),1)),s=1-(1-b(c))*o;B.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+s+")","important")})),u.params.swipeToStep&&B.css("border-radius",A*o+"px")}i.transition(0).transform("translate3d(0,"+L+"px,0)"),u.params.swipeToStep&&(n=S?1-L/M:(M-L)/M,n=Math.min(Math.max(n,0),1),i.trigger("sheet:stepprogress",n),u.emit("local::stepProgress sheetStepProgress",u,n))}}function U(){if(F=!1,V){V=!1,i.transform("").transition(""),u.push&&c&&(B.transition("").transform(""),B.css("border-radius",""));var e=E<0?"to-bottom":"to-top",t=Math.abs(E);if(0!==t&&L!==I){var n=(new Date).getTime()-k;if(u.params.swipeToStep){var r=S?"to-bottom":"to-top",a=S?"to-top":"to-bottom",o=Math.abs(L),s=Math.abs(M);if(n<300&&t>10)return e===r&&o<s&&(i.removeClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",1),u.emit("local::stepProgress sheetStepProgress",u,1),u.emit("local::_swipeStep",!1),i.trigger("sheet:stepopen"),u.emit("local::stepOpen sheetStepOpen",u),u.push&&c&&(u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",b(c)),B.css("border-radius",""))),e===a&&o>s&&(u.params.swipeToClose?u.close():(i.addClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),i.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&c&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),B.css("border-radius","0px")))),void(e===a&&o<=s&&(i.addClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),i.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&c&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),B.css("border-radius","0px"))));if(n>=300){var l=!i.hasClass("modal-in-swipe-step");l?l&&(o>s+($-s)/2?u.params.swipeToClose&&u.close():o>s/2&&(i.addClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),i.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&c&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),B.css("border-radius","0px")))):o<s/2?(i.removeClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",1),u.emit("local::stepProgress sheetStepProgress",u,1),u.emit("local::_swipeStep",!1),i.trigger("sheet:stepopen"),u.emit("local::stepOpen sheetStepOpen",u),u.push&&c&&(u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",b(c)),B.css("border-radius",""))):o-s>($-s)/2&&u.params.swipeToClose&&u.close()}}else{if(e!==(S?"to-top":"to-bottom"))return;(n<300&&t>20||n>=300&&t>$/2)&&u.close()}}}}function q(){u.setSwipeStep(!0)}u.setSwipeStep=function(e){void 0===e&&(e=!0);var t=i.find(".sheet-modal-swipe-step").eq(0);t.length&&(M=i.hasClass("sheet-modal-top")?-(t.offset().top-i.offset().top+t[0].offsetHeight):i[0].offsetHeight-(t.offset().top-i.offset().top+t[0].offsetHeight),i[0].style.setProperty("--f7-sheet-swipe-step",M+"px"),e||(i.addClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!0)))};var K=!!f.passiveListener&&{passive:!0};return(u.params.swipeToClose||u.params.swipeToStep)&&(i.on(t.touchEvents.start,W,K),t.on("touchmove",j),t.on("touchend:passive",U),u.once("sheetDestroy",(function(){i.off(t.touchEvents.start,W,K),t.off("touchmove",j),t.off("touchend:passive",U)}))),u.on("open",(function(){u.params.closeOnEscape&&a(h).on("keydown",v),i.prevAll(".popup.modal-in").addClass("popup-behind"),u.params.swipeToStep&&(u.setSwipeStep(!1),t.on("resize",q)),u.params.scrollToEl&&function(){var e=a(u.params.scrollToEl).eq(0);if(0!==e.length&&0!==(l=e.parents(".page-content")).length){var t,n=parseInt(l.css("padding-top"),10),r=parseInt(l.css("padding-bottom"),10),o=l[0].offsetHeight-n-i.height(),s=l[0].scrollHeight-n-i.height(),c=l.scrollTop(),d=e.offset().top-n+e[0].offsetHeight;if(d>o){var p=c+d-o;p+o>s&&(t=p+o-s+r,o===s&&(t=i.height()),l.css({"padding-bottom":t+"px"})),l.scrollTop(p,300)}}}(),u.push&&(c=parseInt(i.css("--f7-sheet-push-offset"),10),Number.isNaN(c)&&(c=0),c&&(i.addClass("sheet-modal-push"),u.$htmlEl.addClass("with-modal-sheet-push"),u.params.swipeToStep?(B=t.$el.children(".view, .views"),A=parseFloat(i.css("border-"+(S?"bottom":"top")+"-left-radius")),B.css("border-radius","0px")):u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",b(c))))})),u.on("opened",(function(){(u.params.closeByOutsideClick||u.params.closeByBackdropClick)&&t.on("click",g)})),u.on("close",(function(){u.params.swipeToStep&&(i.removeClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!1),t.off("resize",q)),u.params.closeOnEscape&&a(h).off("keydown",v),u.params.scrollToEl&&l&&l.length>0&&l.css({"padding-bottom":""}),(u.params.closeByOutsideClick||u.params.closeByBackdropClick)&&t.off("click",g),i.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),u.push&&c&&(u.$htmlEl.removeClass("with-modal-sheet-push"),u.$htmlEl.addClass("with-modal-sheet-push-closing"))})),u.on("closed",(function(){u.push&&c&&(u.$htmlEl.removeClass("with-modal-sheet-push-closing"),u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"))})),u.stepOpen=function(){i.removeClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!1),u.push&&(c||(c=parseInt(i.css("--f7-sheet-push-offset"),10),Number.isNaN(c)&&(c=0)),c&&u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",b(c)))},u.stepClose=function(){i.addClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!0),u.push&&u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale")},u.stepToggle=function(){i.toggleClass("modal-in-swipe-step"),u.emit("local::_swipeStep",i.hasClass("modal-in-swipe-step"))},i[0].f7Modal=u,u||Hn(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Fn(t,n),r}(dn);const Wn=Vn,jn={name:"sheet",params:{sheet:{push:!1,backdrop:void 0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!1,closeOnEscape:!1,swipeToClose:!1,swipeToStep:!1,swipeHandler:null,containerEl:null}},static:{Sheet:Wn},create:function(){var e=this;e.sheet=T({},J({app:e,constructor:Wn,defaultSelector:".sheet-modal.modal-in"}),{stepOpen:function(t){var n=e.sheet.get(t);if(n&&n.stepOpen)return n.stepOpen()},stepClose:function(t){var n=e.sheet.get(t);if(n&&n.stepClose)return n.stepClose()},stepToggle:function(t){var n=e.sheet.get(t);if(n&&n.stepToggle)return n.stepToggle()}})},clicks:{".sheet-open":function(e,t){void 0===t&&(t={}),a(".sheet-modal.modal-in").length>0&&t.sheet&&a(t.sheet)[0]!==a(".sheet-modal.modal-in")[0]&&this.sheet.close(".sheet-modal.modal-in"),this.sheet.open(t.sheet,t.animate,e)},".sheet-close":function(e,t){void 0===t&&(t={}),this.sheet.close(t.sheet,t.animate,e)}}};function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t){return qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qn(e,t)}var Kn=function(e){var t,n;function r(t,n){var r,i=T({on:{}},t.params.toast,n),s=Un(r=e.call(this,t,i)||this),l=(0,o.Jj)();s.app=t,s.params=i;var c,d,u=s.params,p=u.closeButton,h=u.closeTimeout;if(s.params.el)c=a(s.params.el);else{var f=s.render();c=a(f)}return c&&c.length>0&&c[0].f7Modal?c[0].f7Modal||Un(r):0===c.length?s.destroy()||Un(r):(T(s,{$el:c,el:c[0],type:"toast"}),c[0].f7Modal=s,p&&(c.find(".toast-button").on("click",(function(){s.emit("local::closeButtonClick toastCloseButtonClick",s),s.close()})),s.on("beforeDestroy",(function(){c.find(".toast-button").off("click")}))),s.on("open",(function(){a(".toast.modal-in").each((function(e){var n=t.toast.get(e);e!==s.el&&n&&n.close()})),h&&(d=y((function(){s.close()}),h))})),s.on("close",(function(){l.clearTimeout(d)})),s.params.destroyOnClose&&s.once("closed",(function(){setTimeout((function(){s.destroy()}),0)})),s||Un(r))}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,qn(t,n),r.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,n=t.position,r=t.horizontalPosition,i=t.cssClass,a=t.icon,o=t.text,s=t.closeButton,l=t.closeButtonColor,c=t.closeButtonText;return mn("div",{class:"toast toast-"+n+" "+("top"===n||"bottom"===n?"toast-horizontal-"+r:"")+" "+(i||"")+" "+(a?"toast-with-icon":"")},mn("div",{class:"toast-content"},a&&mn("div",{class:"toast-icon"},a),mn("div",{class:"toast-text"},o),s&&!a&&mn("a",{class:"toast-button button "+(l?"color-"+l:"")},c)))},r}(dn);const Jn=Kn,Qn={name:"toast",static:{Toast:Jn},create:function(){var e=this;e.toast=T({},J({app:e,constructor:Jn,defaultSelector:".toast.modal-in"}),{show:function(t){return T(t,{destroyOnClose:!0}),new Jn(e,t).open()}})},params:{toast:{icon:null,text:null,position:"bottom",horizontalPosition:"left",closeButton:!1,closeButtonColor:null,closeButtonText:"Ok",closeTimeout:null,cssClass:null,render:null,containerEl:null}}};var Yn={init:function(e){var t={iosPreloaderContent:h,mdPreloaderContent:p,auroraPreloaderContent:f},n=a(e);0===n.length||n.children(".preloader-inner").length>0||n.children(".preloader-inner-line").length>0||n.append(t[this.theme+"PreloaderContent"])},visible:!1,show:function(e){if(void 0===e&&(e="white"),!Yn.visible){var t={iosPreloaderContent:h,mdPreloaderContent:p,auroraPreloaderContent:f}[this.theme+"PreloaderContent"]||"";a("html").addClass("with-modal-preloader"),this.$el.append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+e+'">'+t+"</div>\n      </div>\n    "),Yn.visible=!0}},showIn:function(e,t){void 0===t&&(t="white");var n={iosPreloaderContent:h,mdPreloaderContent:p,auroraPreloaderContent:f}[this.theme+"PreloaderContent"]||"";a(e||"html").addClass("with-modal-preloader"),a(e||this.$el).append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+t+'">'+n+"</div>\n      </div>\n    ")},hide:function(){Yn.visible&&(a("html").removeClass("with-modal-preloader"),this.$el.find(".preloader-backdrop, .preloader-modal").remove(),Yn.visible=!1)},hideIn:function(e){a(e||"html").removeClass("with-modal-preloader"),a(e||this.$el).find(".preloader-backdrop, .preloader-modal").remove()}};const Xn={name:"preloader",create:function(){A(this,{preloader:Yn})},on:{photoBrowserOpen:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))},tabMounted:function(e){var t=this;a(e).find(".preloader").each((function(e){t.preloader.init(e)}))},pageInit:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))}},vnode:{preloader:{insert:function(e){var t=e.elm;this.preloader.init(t)}}}};var Zn={set:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2];if("number"==typeof t[0]&&(i=t[0],o=t[1],r=this.$el),null==i)return r;i||(i=0);var s=a(r||this.$el);if(0===s.length)return r;var l,c=Math.min(Math.max(i,0),100);if(0===(l=s.hasClass("progressbar")?s.eq(0):s.children(".progressbar")).length||l.hasClass("progressbar-infinite"))return l;var d=l.children("span");return 0===d.length&&(d=a("<span></span>"),l.append(d)),d.transition(void 0!==o?o:"").transform("translate3d("+(-100+c)+"%,0,0)"),l[0]},show:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2],l="determined";2===n.length?"string"!=typeof n[0]&&"object"!=typeof n[0]||"string"!=typeof n[1]?"number"==typeof n[0]&&"string"==typeof n[1]&&(o=n[0],s=n[1],i=e.$el):(i=n[0],s=n[1],o=n[2],l="infinite"):1===n.length?"number"==typeof n[0]?(i=e.$el,o=n[0]):"string"==typeof n[0]&&(l="infinite",i=e.$el,s=n[0]):0===n.length&&(l="infinite",i=e.$el);var c,d=a(i);if(0!==d.length)return d.hasClass("progressbar")||d.hasClass("progressbar-infinite")?c=d:0===(c=d.children(".progressbar:not(.progressbar-out), .progressbar-infinite:not(.progressbar-out)")).length&&(c=a('\n          <span class="progressbar'+("infinite"===l?"-infinite":"")+(s?" color-"+s:"")+' progressbar-in">\n            '+("infinite"===l?"":"<span></span>")+"\n          </span>"),d.append(c)),void 0!==o&&e.progressbar.set(c,o),c[0]},hide:function(e,t){void 0===t&&(t=!0);var n,r=a(e||this.$el);if(0!==r.length)return 0===(n=r.hasClass("progressbar")||r.hasClass("progressbar-infinite")?r:r.children(".progressbar, .progressbar-infinite")).length||!n.hasClass("progressbar-in")||n.hasClass("progressbar-out")||n.removeClass("progressbar-in").addClass("progressbar-out").animationEnd((function(){t&&n.remove()})),n}};const er={name:"progressbar",create:function(){A(this,{progressbar:Zn})},on:{tabMounted:function(e){var t=this;a(e).find(".progressbar").each((function(e){var n=a(e);t.progressbar.set(n,n.attr("data-progress"))}))},pageInit:function(e){var t=this;e.$el.find(".progressbar").each((function(e){var n=a(e);t.progressbar.set(n,n.attr("data-progress"))}))}},vnode:{progressbar:{insert:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))},update:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))}}}};var tr={init:function(){var e,t,n,r,i,s,l,c,d,u,p,h,f,m,g,v,b,y,_,w,C,x=this,k=(0,o.Me)();function E(r,o){t=!1,e=!0,C=!1,n="touchstart"===r.type?r.targetTouches[0].pageY:r.pageY,i=a(r.target).closest("li").eq(0),f=i.index(),l=i.parents(".sortable");var c=i.parents(".list-group");c.length&&c.parents(l).length&&(l=c),s=l.children("ul").children("li:not(.disallow-sorting):not(.no-sorting)"),x.panel&&(x.panel.allowOpen=!1),x.swipeout&&(x.swipeout.allow=!1),o&&(i.addClass("sorting"),l.addClass("sortable-sorting"),C=!0)}var S=!!D().passiveListener&&{passive:!1,capture:!1};a(k).on(x.touchEvents.start,".list.sortable .sortable-handler",E,S),x.on("touchmove:active",(function(o){if(e&&i){var f="touchmove"===o.type?o.targetTouches[0].pageY:o.pageY;if(!t){m=i.parents(".page"),g=i.parents(".page-content");var C=parseInt(g.css("padding-top"),10),x=parseInt(g.css("padding-bottom"),10);w=g[0].scrollTop,b=m.offset().top+C,v=m.height()-C-x,i.addClass("sorting"),l.addClass("sortable-sorting"),y=i[0].offsetTop,d=i[0].offsetTop,u=i.parent().height()-y-i.height(),c=i[0].offsetHeight,_=i.offset().top}t=!0,o.preventDefault(),o.f7PreventSwipePanel=!0,r=f-n;var k=g[0].scrollTop-w,E=Math.min(Math.max(r+k,-d),u);i.transform("translate3d(0,"+E+"px,0)");var S,T=44,M=!0;r+k+T<-d&&(M=!1),r+k-T>u&&(M=!1),h=void 0,p=void 0,M&&(_+r+c+T>b+v&&(S=_+r+c+T-(b+v)),_+r<b+T&&(S=_+r-b-T),S&&(g[0].scrollTop+=S)),s.each((function(e){var t=a(e);if(t[0]!==i[0]){var n=t[0].offsetTop,r=t.height(),o=y+E;o>=n-r/2&&i.index()<t.index()?(t.transform("translate3d(0, "+-c+"px,0)"),p=t,h=void 0):o<=n+r/2&&i.index()>t.index()?(t.transform("translate3d(0, "+c+"px,0)"),p=void 0,h||(h=t)):t.transform("translate3d(0, 0%,0)")}}))}})),x.on("touchend:passive",(function(){if(!e||!t)return e&&!t&&(x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),C&&(i.removeClass("sorting"),l.removeClass("sortable-sorting"))),e=!1,void(t=!1);var n;x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),s.transform(""),i.removeClass("sorting"),l.removeClass("sortable-sorting"),p?n=p.index():h&&(n=h.index());var r=l.dataset().sortableMoveElements;if(void 0===r&&(r=x.params.sortable.moveElements),r&&(p&&i.insertAfter(p),h&&i.insertBefore(h)),(p||h)&&l.hasClass("virtual-list")){void 0===(f=i[0].f7VirtualListIndex)&&(f=i.attr("data-virtual-list-index")),h?void 0===(n=h[0].f7VirtualListIndex)&&(n=h.attr("data-virtual-list-index")):void 0===(n=p[0].f7VirtualListIndex)&&(n=p.attr("data-virtual-list-index")),n=null!==n?parseInt(n,10):void 0;var a=l[0].f7VirtualList;f&&(f=parseInt(f,10)),n&&(n=parseInt(n,10)),a&&a.moveItem(f,n)}void 0===n||Number.isNaN(n)||n===f||(i.trigger("sortable:sort",{from:f,to:n}),x.emit("sortableSort",i[0],{from:f,to:n,el:i[0]},l[0])),h=void 0,p=void 0,e=!1,t=!1})),a(k).on("taphold",".sortable-tap-hold",(function(e,t){E(t,!0)}))},enable:function(e){void 0===e&&(e=".list.sortable");var t=a(e);0!==t.length&&(t.addClass("sortable-enabled"),t.trigger("sortable:enable"),this.emit("sortableEnable",t[0]))},disable:function(e){void 0===e&&(e=".list.sortable");var t=a(e);0!==t.length&&(t.removeClass("sortable-enabled"),t.trigger("sortable:disable"),this.emit("sortableDisable",t[0]))},toggle:function(e){void 0===e&&(e=".list.sortable");var t=a(e);0!==t.length&&(t.hasClass("sortable-enabled")?this.sortable.disable(t):this.sortable.enable(t))}};const nr={name:"sortable",params:{sortable:{moveElements:!0}},create:function(){A(this,{sortable:tr})},on:{init:function(){this.params.sortable&&this.sortable.init()}},clicks:{".sortable-enable":function(e,t){void 0===t&&(t={}),this.sortable.enable(t.sortable)},".sortable-disable":function(e,t){void 0===t&&(t={}),this.sortable.disable(t.sortable)},".sortable-toggle":function(e,t){void 0===t&&(t={}),this.sortable.toggle(t.sortable)}}};var rr={init:function(){var e,t,n,r,i,s,l,c,d,u,p,h,f,m,g,v,b,y,_,w,C,x=this,k=(0,o.Me)(),E={},S=!!D().passiveListener&&{passive:!0};x.on("touchstart",(function(e){if(rr.el){var t=a(e.target);a(rr.el).is(t[0])||t.parents(".swipeout").is(rr.el)||t.hasClass("modal-in")||(t.attr("class")||"").indexOf("-backdrop")>0||t.hasClass("actions-modal")||t.parents(".actions-modal.modal-in, .dialog.modal-in").length>0||x.swipeout.close(rr.el)}})),a(k).on(x.touchEvents.start,"li.swipeout",(function(i){x.swipeout.allow&&(t=!1,e=!0,n=void 0,E.x="touchstart"===i.type?i.targetTouches[0].pageX:i.pageX,E.y="touchstart"===i.type?i.targetTouches[0].pageY:i.pageY,r=(new Date).getTime(),s=a(this))}),S),x.on("touchmove:active",(function(r){if(e){var o="touchmove"===r.type?r.targetTouches[0].pageX:r.pageX,k="touchmove"===r.type?r.targetTouches[0].pageY:r.pageY;if(void 0===n&&(n=!!(n||Math.abs(k-E.y)>Math.abs(o-E.x))),n)e=!1;else{if(!t){if(a(".list.sortable-opened").length>0)return;l=s.find(".swipeout-content"),c=s.find(".swipeout-actions-right"),d=s.find(".swipeout-actions-left"),u=null,p=null,g=null,v=null,_=null,y=null,d.length>0&&(u=d.outerWidth(),g=d.children("a"),y=d.find(".swipeout-overswipe")),c.length>0&&(p=c.outerWidth(),v=c.children("a"),_=c.find(".swipeout-overswipe")),(f=s.hasClass("swipeout-opened"))&&(m=s.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),s.removeClass("swipeout-transitioning"),x.params.swipeout.noFollow||(s.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),s.removeClass("swipeout-opened"))}if(t=!0,r.cancelable&&r.preventDefault(),i=o-E.x,h=i,f&&("right"===m?h-=p:h+=u),h>0&&0===d.length||h<0&&0===c.length){if(!f)return e=!1,t=!1,l.transform(""),v&&v.length>0&&v.transform(""),void(g&&g.length>0&&g.transform(""));h=0}var S,T;if(h<0?b="to-left":h>0?b="to-right":b||(b="to-left"),r.f7PreventSwipePanel=!0,x.params.swipeout.noFollow)return f?("right"===m&&i>0&&x.swipeout.close(s),"left"===m&&i<0&&x.swipeout.close(s)):(i<0&&c.length>0&&x.swipeout.open(s,"right"),i>0&&d.length>0&&x.swipeout.open(s,"left")),e=!1,void(t=!1);if(w=!1,C=!1,c.length>0){var M=h;if(T=M/p,M<-p){var I=M/-p;M=-p-Math.pow(-M-p,.8),h=M,_.length>0&&I>x.params.swipeout.overswipeRatio&&(C=!0)}"to-left"!==b&&(T=0,M=0),v.each((function(e){var t=a(e);void 0===e.f7SwipeoutButtonOffset&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),S=e.f7SwipeoutButtonOffset,_.length>0&&t.hasClass("swipeout-overswipe")&&"to-left"===b&&(t.css({left:(C?-S:0)+"px"}),C?(t.hasClass("swipeout-overswipe-active")||(s.trigger("swipeout:overswipeenter"),x.emit("swipeoutOverswipeEnter",s[0])),t.addClass("swipeout-overswipe-active")):(t.hasClass("swipeout-overswipe-active")&&(s.trigger("swipeout:overswipeexit"),x.emit("swipeoutOverswipeExit",s[0])),t.removeClass("swipeout-overswipe-active"))),t.transform("translate3d("+(M-S*(1+Math.max(T,-1)))+"px,0,0)")}))}if(d.length>0){var L=h;if(T=L/u,L>u){var $=L/p;L=u+Math.pow(L-u,.8),h=L,y.length>0&&$>x.params.swipeout.overswipeRatio&&(w=!0)}"to-right"!==b&&(L=0,T=0),g.each((function(e,t){var n=a(e);void 0===e.f7SwipeoutButtonOffset&&(n[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),S=e.f7SwipeoutButtonOffset,y.length>0&&n.hasClass("swipeout-overswipe")&&"to-right"===b&&(n.css({left:(w?S:0)+"px"}),w?(n.hasClass("swipeout-overswipe-active")||(s.trigger("swipeout:overswipeenter"),x.emit("swipeoutOverswipeEnter",s[0])),n.addClass("swipeout-overswipe-active")):(n.hasClass("swipeout-overswipe-active")&&(s.trigger("swipeout:overswipeexit"),x.emit("swipeoutOverswipeExit",s[0])),n.removeClass("swipeout-overswipe-active"))),g.length>1&&n.css("z-index",g.length-t),n.transform("translate3d("+(L+S*(1-Math.min(T,1)))+"px,0,0)")}))}s.trigger("swipeout",T),x.emit("swipeout",s[0],T),l.transform("translate3d("+h+"px,0,0)")}}})),x.on("touchend:passive",(function(){if(!e||!t)return e=!1,void(t=!1);e=!1,t=!1;var n,o,m,y,_=(new Date).getTime()-r,k="to-left"===b?c:d,E="to-left"===b?p:u;if(n=_<300&&(i<-10&&"to-left"===b||i>10&&"to-right"===b)||_>=300&&Math.abs(h)>E/2?"open":"close",_<300&&(0===Math.abs(h)&&(n="close"),Math.abs(h)===E&&(n="open")),"open"===n){rr.el=s[0],s.trigger("swipeout:open"),x.emit("swipeoutOpen",s[0]),s.addClass("swipeout-opened swipeout-transitioning");var S="to-left"===b?-E:E;if(l.transform("translate3d("+S+"px,0,0)"),k.addClass("swipeout-actions-opened"),o="to-left"===b?v:g)for(m=0;m<o.length;m+=1)a(o[m]).transform("translate3d("+S+"px,0,0)");C&&c.find(".swipeout-overswipe").trigger("click","f7Overswipe"),w&&d.find(".swipeout-overswipe").trigger("click","f7Overswipe")}else s.trigger("swipeout:close"),x.emit("swipeoutClose",s[0]),rr.el=void 0,s.addClass("swipeout-transitioning").removeClass("swipeout-opened"),l.transform(""),k.removeClass("swipeout-actions-opened");g&&g.length>0&&g!==o&&g.each((function(e){var t=a(e);void 0===(y=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),t.transform("translate3d("+y+"px,0,0)")})),v&&v.length>0&&v!==o&&v.each((function(e){var t=a(e);void 0===(y=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),t.transform("translate3d("+-y+"px,0,0)")})),l.transitionEnd((function(){f&&"open"===n||!f&&"close"===n||(s.trigger("open"===n?"swipeout:opened":"swipeout:closed"),x.emit("open"===n?"swipeoutOpened":"swipeoutClosed",s[0]),s.removeClass("swipeout-transitioning"),f&&"close"===n&&(c.length>0&&v.transform(""),d.length>0&&g.transform("")))}))}))},allow:!0,el:void 0,open:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2];"function"==typeof n[1]&&(i=n[0],s=n[1],o=n[2]);var l=a(i).eq(0);if(0!==l.length&&l.hasClass("swipeout")&&!l.hasClass("swipeout-opened")){o||(o=l.find(".swipeout-actions-right").length>0?"right":"left");var c=l.find(".swipeout-actions-"+o),d=l.find(".swipeout-content");if(0!==c.length){l.trigger("swipeout:open").addClass("swipeout-opened").removeClass("swipeout-transitioning"),e.emit("swipeoutOpen",l[0]),c.addClass("swipeout-actions-opened");var u=c.children("a"),p=c.outerWidth(),h="right"===o?-p:p;u.length>1&&u.each((function(e,t){var n=a(e);"right"===o?n.transform("translate3d("+-e.offsetLeft+"px,0,0)"):n.css("z-index",u.length-t).transform("translate3d("+(p-e.offsetWidth-e.offsetLeft)+"px,0,0)")})),l.addClass("swipeout-transitioning"),d.transitionEnd((function(){l.trigger("swipeout:opened"),e.emit("swipeoutOpened",l[0]),s&&s.call(l[0])})),_((function(){u.transform("translate3d("+h+"px,0,0)"),d.transform("translate3d("+h+"px,0,0)")})),rr.el=l[0]}}},close:function(e,t){var n=this,r=a(e).eq(0);if(0!==r.length&&r.hasClass("swipeout-opened")){var i,o=r.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",s=r.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),l=s.children("a"),c=s.outerWidth();n.swipeout.allow=!1,r.trigger("swipeout:close"),n.emit("swipeoutClose",r[0]),r.removeClass("swipeout-opened").addClass("swipeout-transitioning"),r.find(".swipeout-content").transform("").transitionEnd(d),i=setTimeout(d,500),l.each((function(e){var t=a(e);"right"===o?t.transform("translate3d("+-e.offsetLeft+"px,0,0)"):t.transform("translate3d("+(c-e.offsetWidth-e.offsetLeft)+"px,0,0)"),t.css({left:"0px"}).removeClass("swipeout-overswipe-active")})),rr.el&&rr.el===r[0]&&(rr.el=void 0)}function d(){n.swipeout.allow=!0,r.hasClass("swipeout-opened")||(r.removeClass("swipeout-transitioning"),l.transform(""),r.trigger("swipeout:closed"),n.emit("swipeoutClosed",r[0]),t&&t.call(r[0]),i&&clearTimeout(i))}},delete:function(e,t){var n=this,r=a(e).eq(0);0!==r.length&&(rr.el=void 0,r.trigger("swipeout:delete"),n.emit("swipeoutDelete",r[0]),r.css({height:r.outerHeight()+"px"}),r.transitionEnd((function(){if(r.trigger("swipeout:deleted"),n.emit("swipeoutDeleted",r[0]),t&&t.call(r[0]),r.parents(".virtual-list").length>0){var e=r.parents(".virtual-list")[0].f7VirtualList,i=r[0].f7VirtualListIndex;e&&void 0!==i&&e.deleteItem(i)}else n.params.swipeout.removeElements?n.params.swipeout.removeElementsWithTimeout?setTimeout((function(){r.remove()}),n.params.swipeout.removeElementsTimeout):r.remove():r.removeClass("swipeout-deleting swipeout-transitioning")})),_((function(){r.addClass("swipeout-deleting swipeout-transitioning").css({height:"0px"}).find(".swipeout-content").transform("translate3d(-100%,0,0)")})))}};const ir={name:"swipeout",params:{swipeout:{actionsNoFold:!1,noFollow:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,overswipeRatio:1.2}},create:function(){A(this,{swipeout:rr})},clicks:{".swipeout-open":function(e,t){void 0===t&&(t={}),this.swipeout.open(t.swipeout,t.side)},".swipeout-close":function(e){var t=e.closest(".swipeout");0!==t.length&&this.swipeout.close(t)},".swipeout-delete":function(e,t){void 0===t&&(t={});var n=this,r=e.closest(".swipeout");if(0!==r.length){var i=t,a=i.confirm,o=i.confirmTitle;t.confirm?n.dialog.confirm(a,o,(function(){n.swipeout.delete(r)})):n.swipeout.delete(r)}}},on:{init:function(){this.params.swipeout&&this.swipeout.init()}}};var ar={toggleClicked:function(e){var t=e.closest(".accordion-item").eq(0);t.length||(t=e.parents("li").eq(0));var n=e.parents(".accordion-item-content").eq(0);n.length&&n.parents(t).length||e.parents("li").length>1&&e.parents("li")[0]!==t[0]||this.accordion.toggle(t)},open:function(e){var t=this,n=a(e),r=!1;function i(){r=!0}if(n.trigger("accordion:beforeopen",{prevent:i},i),t.emit("accordionBeforeOpen",n[0],i),!r){var o=n.parents(".accordion-list").eq(0),s=n.children(".accordion-item-content");if(s.removeAttr("aria-hidden"),0===s.length&&(s=n.find(".accordion-item-content")),0!==s.length){var l=o.length>0&&n.parent().children(".accordion-item-opened");l.length>0&&t.accordion.close(l),s.transitionEnd((function(){n.hasClass("accordion-item-opened")?(s.transition(0),s.css("height","auto"),_((function(){s.transition(""),n.trigger("accordion:opened"),t.emit("accordionOpened",n[0])}))):(s.css("height",""),n.trigger("accordion:closed"),t.emit("accordionClosed",n[0]))})),s.css("height",s[0].scrollHeight+"px"),n.trigger("accordion:open"),n.addClass("accordion-item-opened"),t.emit("accordionOpen",n[0])}}},close:function(e){var t=this,n=a(e),r=!1;function i(){r=!0}if(n.trigger("accordion:beforeclose",{prevent:i},i),t.emit("accordionBeforeClose",n[0],i),!r){var o=n.children(".accordion-item-content");0===o.length&&(o=n.find(".accordion-item-content")),n.removeClass("accordion-item-opened"),o.attr("aria-hidden",!0),o.transition(0),o.css("height",o[0].scrollHeight+"px"),o.transitionEnd((function(){n.hasClass("accordion-item-opened")?(o.transition(0),o.css("height","auto"),_((function(){o.transition(""),n.trigger("accordion:opened"),t.emit("accordionOpened",n[0])}))):(o.css("height",""),n.trigger("accordion:closed"),t.emit("accordionClosed",n[0]))})),_((function(){o.transition(""),o.css("height",""),n.trigger("accordion:close"),t.emit("accordionClose",n[0])}))}},toggle:function(e){var t=a(e);0!==t.length&&(t.hasClass("accordion-item-opened")?this.accordion.close(e):this.accordion.open(e))}};const or={name:"accordion",create:function(){A(this,{accordion:ar})},clicks:{".accordion-item .item-link, .accordion-item-toggle, .links-list.accordion-list > ul > li > a":function(e){ar.toggleClicked.call(this,e)}}};function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e,t){return lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lr(e,t)}var cr=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i,s=sr(r=e.call(this,n,[t])||this),l=N(),c=(0,o.Me)();"md"===t.theme?i=48:"ios"===t.theme?i=44:"aurora"===t.theme&&(i=38);var d={cols:1,height:i,cache:!0,dynamicHeightBufferSize:1,showFilteredItemsOnly:!1,renderExternal:void 0,setListHeight:!0,searchByItem:void 0,searchAll:void 0,ul:null,createUl:!0,scrollableParentEl:void 0,renderItem:function(e){return('\n          <li>\n            <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">'+e+"</div>\n              </div>\n            </div>\n          </li>\n        ").trim()},on:{}};if(s.useModulesParams(d),s.params=T(d,n),void 0!==s.params.height&&s.params.height||(s.params.height=i),s.$el=a(n.el),s.el=s.$el[0],0===s.$el.length)return sr(r);s.$el[0].f7VirtualList=s,s.items=s.params.items,s.params.showFilteredItemsOnly&&(s.filteredItems=[]),s.params.renderItem&&(s.renderItem=s.params.renderItem),s.$pageContentEl=s.$el.parents(".page-content"),s.pageContentEl=s.$pageContentEl[0],s.$scrollableParentEl=s.params.scrollableParentEl?a(s.params.scrollableParentEl).eq(0):s.$pageContentEl,!s.$scrollableParentEl.length&&s.$pageContentEl.length&&(s.$scrollableParentEl=s.$pageContentEl),s.scrollableParentEl=s.$scrollableParentEl[0],void 0!==s.params.updatableScroll?s.updatableScroll=s.params.updatableScroll:(s.updatableScroll=!0,l.ios&&l.osVersion.split(".")[0]<8&&(s.updatableScroll=!1));var u,p=s.params.ul;s.$ul=p?a(s.params.ul):s.$el.children("ul"),0===s.$ul.length&&s.params.createUl&&(s.$el.append("<ul></ul>"),s.$ul=s.$el.children("ul")),s.ul=s.$ul[0],u=s.ul||s.params.createUl?s.$ul:s.$el,T(s,{$itemsWrapEl:u,itemsWrapEl:u[0],domCache:{},displayDomCache:{},tempDomElement:c.createElement("ul"),lastRepaintY:null,fragment:c.createDocumentFragment(),pageHeight:void 0,rowsPerScreen:void 0,rowsBefore:void 0,rowsAfter:void 0,rowsToRender:void 0,maxBufferHeight:0,listHeight:void 0,dynamicHeight:"function"==typeof s.params.height}),s.useModules();var h,f,m,g,v=s.handleScroll.bind(s),b=s.handleResize.bind(s);return s.attachEvents=function(){h=s.$el.parents(".page").eq(0),f=s.$el.parents(".tab").filter((function(e){return 0===a(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0),m=s.$el.parents(".panel").eq(0),g=s.$el.parents(".popup").eq(0),s.$scrollableParentEl.on("scroll",v),h.length&&h.on("page:reinit",b),f.length&&f.on("tab:show",b),m.length&&m.on("panel:open",b),g.length&&g.on("popup:open",b),t.on("resize",b)},s.detachEvents=function(){s.$scrollableParentEl.off("scroll",v),h.length&&h.off("page:reinit",b),f.length&&f.off("tab:show",b),m.length&&m.off("panel:open",b),g.length&&g.off("popup:open",b),t.off("resize",b)},s.init(),s||sr(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,lr(t,n);var i=r.prototype;return i.setListSize=function(){var e=this,t=e.filteredItems||e.items;if(e.pageHeight=e.$scrollableParentEl[0].offsetHeight,e.dynamicHeight){e.listHeight=0,e.heights=[];for(var n=0;n<t.length;n+=1){var r=e.params.height(t[n]);e.listHeight+=r,e.heights.push(r)}}else e.listHeight=Math.ceil(t.length/e.params.cols)*e.params.height,e.rowsPerScreen=Math.ceil(e.pageHeight/e.params.height),e.rowsBefore=e.params.rowsBefore||2*e.rowsPerScreen,e.rowsAfter=e.params.rowsAfter||e.rowsPerScreen,e.rowsToRender=e.rowsPerScreen+e.rowsBefore+e.rowsAfter,e.maxBufferHeight=e.rowsBefore/2*e.params.height;(e.updatableScroll||e.params.setListHeight)&&e.$itemsWrapEl.css({height:e.listHeight+"px"})},i.render=function(e,t){var n=this;e&&(n.lastRepaintY=null);var r=-(n.$el[0].getBoundingClientRect().top-n.$scrollableParentEl[0].getBoundingClientRect().top);if(void 0!==t&&(r=t),null===n.lastRepaintY||Math.abs(r-n.lastRepaintY)>n.maxBufferHeight||!n.updatableScroll&&n.$scrollableParentEl[0].scrollTop+n.pageHeight>=n.$scrollableParentEl[0].scrollHeight){n.lastRepaintY=r;var i,a,o,s=n.filteredItems||n.items,l=0,c=0;if(n.dynamicHeight){var d,u=0;n.maxBufferHeight=n.pageHeight;for(var p=0;p<n.heights.length;p+=1)d=n.heights[p],void 0===i&&(u+d>=r-2*n.pageHeight*n.params.dynamicHeightBufferSize?i=p:l+=d),void 0===a&&((u+d>=r+2*n.pageHeight*n.params.dynamicHeightBufferSize||p===n.heights.length-1)&&(a=p+1),c+=d),u+=d;a=Math.min(a,s.length)}else(i=(parseInt(r/n.params.height,10)-n.rowsBefore)*n.params.cols)<0&&(i=0),a=Math.min(i+n.rowsToRender*n.params.cols,s.length);var h,f=[];for(n.reachEnd=!1,h=i;h<a;h+=1){var m=void 0,g=n.items.indexOf(s[h]);h===i&&(n.currentFromIndex=g),h===a-1&&(n.currentToIndex=g),n.filteredItems?n.items[g]===n.filteredItems[n.filteredItems.length-1]&&(n.reachEnd=!0):g===n.items.length-1&&(n.reachEnd=!0),n.params.renderExternal?f.push(s[h]):n.domCache[g]?(m=n.domCache[g]).f7VirtualListIndex=g:(n.renderItem?n.tempDomElement.innerHTML=n.renderItem(s[h],g).trim():n.tempDomElement.innerHTML=s[h].toString().trim(),m=n.tempDomElement.childNodes[0],n.params.cache&&(n.domCache[g]=m),m.f7VirtualListIndex=g),h===i&&(o=n.dynamicHeight?l:h*n.params.height/n.params.cols),n.params.renderExternal||(m.style.top=o+"px",n.emit("local::itemBeforeInsert vlItemBeforeInsert",n,m,s[h]),n.fragment.appendChild(m))}n.updatableScroll||(n.dynamicHeight?n.itemsWrapEl.style.height=c+"px":n.itemsWrapEl.style.height=h*n.params.height/n.params.cols+"px"),n.params.renderExternal?s&&0===s.length&&(n.reachEnd=!0):(n.emit("local::beforeClear vlBeforeClear",n,n.fragment),n.itemsWrapEl.innerHTML="",n.emit("local::itemsBeforeInsert vlItemsBeforeInsert",n,n.fragment),s&&0===s.length?(n.reachEnd=!0,n.params.emptyTemplate&&(n.itemsWrapEl.innerHTML=n.params.emptyTemplate)):n.itemsWrapEl.appendChild(n.fragment),n.emit("local::itemsAfterInsert vlItemsAfterInsert",n,n.fragment)),void 0!==t&&e&&n.$scrollableParentEl.scrollTop(t,0),n.params.renderExternal&&n.params.renderExternal(n,{fromIndex:i,toIndex:a,listHeight:n.listHeight,topPosition:o,items:f})}},i.filterItems=function(e,t){void 0===t&&(t=!0);var n=this;n.filteredItems=[];for(var r=0;r<e.length;r+=1)n.filteredItems.push(n.items[e[r]]);t&&(n.$scrollableParentEl[0].scrollTop=0),n.update()},i.resetFilter=function(){var e=this;e.params.showFilteredItemsOnly?e.filteredItems=[]:(e.filteredItems=null,delete e.filteredItems),e.update()},i.scrollToItem=function(e){var t=this;if(e>t.items.length)return!1;var n=0;if(t.dynamicHeight)for(var r=0;r<e;r+=1)n+=t.heights[r];else n=e*t.params.height;var i=t.$el[0].offsetTop;return t.render(!0,i+n-parseInt(t.$scrollableParentEl.css("padding-top"),10)),!0},i.handleScroll=function(){this.render()},i.isVisible=function(){var e=this;return!!(e.el.offsetWidth||e.el.offsetHeight||e.el.getClientRects().length)},i.handleResize=function(){var e=this;e.isVisible()&&(e.setListSize(),e.render(!0))},i.appendItems=function(e){for(var t=0;t<e.length;t+=1)this.items.push(e[t]);this.update()},i.appendItem=function(e){this.appendItems([e])},i.replaceAllItems=function(e){var t=this;t.items=e,delete t.filteredItems,t.domCache={},t.update()},i.replaceItem=function(e,t){var n=this;n.items[e]=t,n.params.cache&&delete n.domCache[e],n.update()},i.prependItems=function(e){for(var t=this,n=e.length-1;n>=0;n-=1)t.items.unshift(e[n]);if(t.params.cache){var r={};Object.keys(t.domCache).forEach((function(n){r[parseInt(n,10)+e.length]=t.domCache[n]})),t.domCache=r}t.update()},i.prependItem=function(e){this.prependItems([e])},i.moveItem=function(e,t){var n=this,r=e,i=t;if(r!==i){var a=n.items.splice(r,1)[0];if(i>=n.items.length?(n.items.push(a),i=n.items.length-1):n.items.splice(i,0,a),n.params.cache){var o={};Object.keys(n.domCache).forEach((function(e){var t=parseInt(e,10),a=r<i?r:i,s=r<i?i:r,l=r<i?-1:1;(t<a||t>s)&&(o[t]=n.domCache[t]),t===a&&(o[s]=n.domCache[t]),t>a&&t<=s&&(o[t+l]=n.domCache[t])})),n.domCache=o}n.update()}},i.insertItemBefore=function(e,t){var n=this;if(0!==e)if(e>=n.items.length)n.appendItem(t);else{if(n.items.splice(e,0,t),n.params.cache){var r={};Object.keys(n.domCache).forEach((function(t){var i=parseInt(t,10);i>=e&&(r[i+1]=n.domCache[i])})),n.domCache=r}n.update()}else n.prependItem(t)},i.deleteItems=function(e){for(var t,n=this,r=0,i=function(i){var a=e[i];void 0!==t&&a>t&&(r=-i),a+=r,t=e[i];var o=n.items.splice(a,1)[0];if(n.filteredItems&&n.filteredItems.indexOf(o)>=0&&n.filteredItems.splice(n.filteredItems.indexOf(o),1),n.params.cache){var s={};Object.keys(n.domCache).forEach((function(e){var t=parseInt(e,10);t===a?delete n.domCache[a]:parseInt(e,10)>a?s[t-1]=n.domCache[e]:s[t]=n.domCache[e]})),n.domCache=s}},a=0;a<e.length;a+=1)i(a);n.update()},i.deleteAllItems=function(){var e=this;e.items=[],delete e.filteredItems,e.params.cache&&(e.domCache={}),e.update()},i.deleteItem=function(e){this.deleteItems([e])},i.clearCache=function(){this.domCache={}},i.update=function(e){var t=this;e&&t.params.cache&&(t.domCache={}),t.setListSize(),t.render(!0)},i.init=function(){var e=this;e.attachEvents(),e.setListSize(),e.render()},i.destroy=function(){var e=this;e.detachEvents(),e.$el[0].f7VirtualList=null,delete e.$el[0].f7VirtualList,g(e),e=null},r}(W);const dr=cr,ur={name:"virtualList",static:{VirtualList:dr},create:function(){this.virtualList=q({defaultSelector:".virtual-list",constructor:dr,app:this,domProp:"f7VirtualList"})}};function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(e,t){return hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hr(e,t)}var fr=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i,o,s,l,c=pr(r=e.call(this,n,[t])||this),d={el:null,listEl:null,indexes:"auto",iosItemHeight:14,mdItemHeight:14,auroraItemHeight:14,scrollList:!0,label:!1,renderItem:function(e,t){return("\n          <li>"+e+"</li>\n        ").trim()},renderSkipPlaceholder:function(){return'<li class="list-index-skip-placeholder"></li>'},on:{}};if(c.useModulesParams(d),c.params=T(d,n),!c.params.el)return c||pr(r);if((i=a(c.params.el))[0].f7ListIndex)return i[0].f7ListIndex||pr(r);if(0===(l=i.find("ul")).length&&(l=a("<ul></ul>"),i.append(l)),c.params.listEl&&(o=a(c.params.listEl)),"auto"===c.params.indexes&&!o)return c||pr(r);function u(){var e={index:c};c.calcSize(),e!==c.height&&c.render()}function p(e){var t=a(e.target).closest("li");if(t.length){var n=t.index();if(c.skipRate>0){var r=n/(t.siblings("li").length-1);n=Math.round((c.indexes.length-1)*r)}var i=c.indexes[n];c.$el.trigger("listindex:click",{content:i,index:n}),c.emit("local::click listIndexClick",c,i,n),c.$el.trigger("listindex:select",{content:i,index:n}),c.emit("local::select listIndexSelect",c,i,n),c.$listEl&&c.params.scrollList&&c.scrollListToIndex(i,n)}}o?s=o.parents(".page-content").eq(0):0===(s=i.siblings(".page-content").eq(0)).length&&(s=i.parents(".page").eq(0).find(".page-content").eq(0)),i[0].f7ListIndex=c,T(c,{app:t,$el:i,el:i&&i[0],$ul:l,ul:l&&l[0],$listEl:o,listEl:o&&o[0],$pageContentEl:s,pageContentEl:s&&s[0],indexes:n.indexes,height:0,skipRate:0}),c.useModules();var h,f,m,g,v,b={},y=null;function _(e){var t=l.children();t.length&&(m=t[0].getBoundingClientRect().top,g=t[t.length-1].getBoundingClientRect().top+t[0].offsetHeight,b.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,b.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,h=!0,f=!1,y=null)}function w(e){if(h){!f&&c.params.label&&(v=a('<span class="list-index-label"></span>'),i.append(v)),f=!0;var t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;e.preventDefault();var n=(t-m)/(g-m);n=Math.min(Math.max(n,0),1);var r=Math.round((c.indexes.length-1)*n),o=c.indexes[r],s=g-m,l=(c.height-s)/2+(1-n)*s;r!==y&&(c.params.label&&v.html(o).transform("translateY(-"+l+"px)"),c.$listEl&&c.params.scrollList&&c.scrollListToIndex(o,r)),y=r,c.$el.trigger("listindex:select"),c.emit("local::select listIndexSelect",c,o,r)}}function C(){h&&(h=!1,f=!1,c.params.label&&(v&&v.remove(),v=void 0))}var x=!!D().passiveListener&&{passive:!0};return c.attachEvents=function(){i.parents(".tab").on("tab:show",u),i.parents(".page").on("page:reinit",u),i.parents(".panel").on("panel:open",u),i.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").on("modal:open",u),t.on("resize",u),i.on("click",p),i.on(t.touchEvents.start,_,x),t.on("touchmove:active",w),t.on("touchend:passive",C)},c.detachEvents=function(){i.parents(".tab").off("tab:show",u),i.parents(".page").off("page:reinit",u),i.parents(".panel").off("panel:open",u),i.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").off("modal:open",u),t.off("resize",u),i.off("click",p),i.off(t.touchEvents.start,_,x),t.off("touchmove:active",w),t.off("touchend:passive",C)},c.init(),c||pr(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,hr(t,n);var i=r.prototype;return i.scrollListToIndex=function(e,t){var n,r=this,i=r.$listEl,o=r.$pageContentEl,s=r.app;if(!i||!o||0===o.length)return r;if(i.find(".list-group-title, .item-divider").each((function(t){if(!n){var r=a(t);r.text()===e&&(n=r)}})),!n||0===n.length)return r;var l=n.parent().offset().top,c=parseInt(o.css("padding-top"),10),d=o[0].scrollTop,u=n.offset().top;if(o.parents(".page-with-navbar-large").length){var p=s.navbar.getElByPage(o.parents(".page-with-navbar-large").eq(0)),h=a(p).find(".title-large");h.length&&(c-=h[0].offsetHeight||0)}return l<=c?o.scrollTop(l+d-c):o.scrollTop(u+d-c),r},i.renderSkipPlaceholder=function(){return this.params.renderSkipPlaceholder.call(this)},i.renderItem=function(e,t){return this.params.renderItem.call(this,e,t)},i.render=function(){var e,t=this,n=t.$ul,r=t.indexes,i=t.skipRate,a=r.map((function(n,r){if(r%i!=0&&i>0)return e=!0,"";var a=t.renderItem(n,r);return e&&(a=t.renderSkipPlaceholder()+a),e=!1,a})).join("");return n.html(a),t},i.calcSize=function(){var e=this,t=e.app,n=e.params,r=e.el,i=e.indexes,a=r.offsetHeight,o=n[t.theme+"ItemHeight"],s=Math.floor(a/o),l=i.length,c=0;return l>s&&(c=Math.ceil((2*l-1)/s)),e.height=a,e.skipRate=c,e},i.calcIndexes=function(){var e=this;return"auto"===e.params.indexes?(e.indexes=[],e.$listEl.find(".list-group-title, .item-divider").each((function(t){var n=a(t).text();e.indexes.indexOf(n)<0&&e.indexes.push(n)}))):e.indexes=e.params.indexes,e},i.update=function(){var e=this;return e.calcIndexes(),e.calcSize(),e.render(),e},i.init=function(){var e=this;e.calcIndexes(),e.calcSize(),e.render(),e.attachEvents()},i.destroy=function(){var e=this;e.$el.trigger("listindex:beforedestroy",e),e.emit("local::beforeDestroy listIndexBeforeDestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7ListIndex=null,delete e.$el[0].f7ListIndex),g(e),e=null},r}(W);const mr=fr,gr={name:"listIndex",static:{ListIndex:mr},create:function(){this.listIndex=q({defaultSelector:".list-index",constructor:mr,app:this,domProp:"f7ListIndex"})},on:{tabMounted:function(e){var t=this;a(e).find(".list-index-init").each((function(e){var n=T(a(e).dataset(),{el:e});t.listIndex.create(n)}))},tabBeforeRemove:function(e){a(e).find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".list-index-init").each((function(e){var n=T(a(e).dataset(),{el:e});t.listIndex.create(n)}))},pageBeforeRemove:function(e){e.$el.find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))}},vnode:{"list-index-init":{insert:function(e){var t=e.elm,n=T(a(t).dataset(),{el:t});this.listIndex.create(n)},destroy:function(e){var t=e.elm;t.f7ListIndex&&t.f7ListIndex.destroy()}}}};var vr={show:function(){for(var e,t,n,r,i,o=this,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];1===l.length&&l[0]&&l[0].constructor===Object?(e=l[0].tabEl,t=l[0].tabLinkEl,n=l[0].animate,r=l[0].tabRoute,i=l[0].animatedInit):(e=l[0],t=l[1],n=l[2],r=l[3],"boolean"==typeof l[1]&&(e=l[0],n=l[1],t=l[2],r=l[3],l.length>2&&t.constructor===Object&&(e=l[0],n=l[1],r=l[2],t=l[3]))),void 0===n&&(n=!0);var d,u=a(e);if(r&&u[0]&&(u[0].f7TabRoute=r),!i&&(0===u.length||u.hasClass("tab-active")))return{$newTabEl:u,newTabEl:u[0]};t&&(d=a(t));var p=u.parent(".tabs");if(0===p.length)return{$newTabEl:u,newTabEl:u[0]};o.swipeout&&(o.swipeout.allowOpen=!0);var h=[];function f(){h.forEach((function(e){e()}))}var m,g=!1;if(p.parent().hasClass("tabs-animated-wrap")){p.parent()[n?"removeClass":"addClass"]("not-animated");var v=parseFloat(p.css("transition-duration").replace(",","."));n&&v&&(p.transitionEnd(f),g=!0);var b=100*(o.rtl?u.index():-u.index());p.transform("translate3d("+b+"%,0,0)")}p.parent().hasClass("tabs-swipeable-wrap")&&o.swiper&&((m=p.parent()[0].swiper)&&m.activeIndex!==u.index()?(g=!0,m.once("slideChangeTransitionEnd",(function(){f()})).slideTo(u.index(),n?void 0:0)):m&&m.animating&&(g=!0,m.once("slideChangeTransitionEnd",(function(){f()}))));var y=p.children(".tab-active");if(y.removeClass("tab-active"),!i&&(!m||m&&!m.animating||m&&r)&&(y.hasClass("view")&&y.children(".page").length&&y.children(".page").each((function(e){a(e).trigger("page:tabhide"),o.emit("pageTabHide",e)})),y.trigger("tab:hide"),o.emit("tabHide",y[0])),u.addClass("tab-active"),!i&&(!m||m&&!m.animating||m&&r)&&(u.hasClass("view")&&u.children(".page").length&&u.children(".page").each((function(e){a(e).trigger("page:tabshow"),o.emit("pageTabShow",e)})),u.trigger("tab:show"),o.emit("tabShow",u[0])),!d&&((!(d=a("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+u.attr("id")+'"]'))||d&&0===d.length)&&a("[data-tab]").each((function(e){u.is(a(e).attr("data-tab"))&&(d=a(e))})),r&&(!d||d&&0===d.length)&&0===(d=a('[data-route-tab-id="'+r.route.tab.id+'"]')).length&&(d=a('.tab-link[href="'+r.url+'"]')),d.length>1&&u.parents(".page").length&&(d=d.filter((function(e){return a(e).parents(".page")[0]===u.parents(".page")[0]})),"ios"===o.theme&&0===d.length&&r))){var _=u.parents(".page"),w=a(o.navbar.getElByPage(_));0===(d=w.find('[data-route-tab-id="'+r.route.tab.id+'"]')).length&&(d=w.find('.tab-link[href="'+r.url+'"]'))}if(d.length>0){var C;if(y&&y.length>0){var x=y.attr("id");x&&(!(C=a('.tab-link[href="#'+x+'"]'))||C&&0===C.length)&&(C=a('.tab-link[data-route-tab-id="'+x+'"]')),(!C||C&&0===C.length)&&a("[data-tab]").each((function(e){y.is(a(e).attr("data-tab"))&&(C=a(e))})),(!C||C&&0===C.length)&&(C=d.siblings(".tab-link-active"))}else r&&(C=d.siblings(".tab-link-active"));if(C&&C.length>1&&y&&y.parents(".page").length&&(C=C.filter((function(e){return a(e).parents(".page")[0]===y.parents(".page")[0]}))),C&&C.length>0&&C.removeClass("tab-link-active"),d&&d.length>0&&(d.addClass("tab-link-active"),"ios"!==o.theme&&o.toolbar)){var k=d.parents(".tabbar, .tabbar-labels");k.length>0&&o.toolbar.setHighlight(k)}}return{$newTabEl:u,newTabEl:u[0],$oldTabEl:y,oldTabEl:y[0],onTabsChanged:function(e){h.push(e)},animated:g}}};const br={name:"tabs",create:function(){T(this,{tab:{show:vr.show.bind(this)}})},on:{"pageInit tabMounted":function(e){var t=a(e.el||e).find(".tabs-animated-wrap > .tabs > .tab-active")[0];t&&this.tab.show({tabEl:t,animatedInit:!0,animate:!1})}},clicks:{".tab-link":function(e,t){void 0===t&&(t={}),(e.attr("href")&&0===e.attr("href").indexOf("#")||e.attr("data-tab"))&&this.tab.show({tabEl:t.tab||e.attr("href"),tabLinkEl:e,animate:t.animate})}}};function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(e,t){return _r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_r(e,t)}var wr=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i,o=T({on:{}},t.params.panel,n),s=yr(r=e.call(this,o,[t])||this);if(s.params=o,s.$containerEl=s.params.containerEl?a(s.params.containerEl).eq(0):t.$el,s.containerEl=s.$containerEl[0],s.containerEl||(s.$containerEl=t.$el,s.containerEl=t.$el[0]),s.params.el?i=a(s.params.el).eq(0):s.params.content&&(i=a(s.params.content).filter((function(e){return 1===e.nodeType})).eq(0)),0===i.length)return s||yr(r);if(i[0].f7Panel)return i[0].f7Panel||yr(r);i[0].f7Panel=s;var l,c=s.params,d=c.side,u=c.effect,p=c.resizable;return void 0===d&&(d=i.hasClass("panel-left")?"left":"right"),void 0===u&&(u=i.hasClass("panel-cover")?"cover":i.hasClass("panel-push")?"push":"reveal"),void 0===p&&(p=i.hasClass("panel-resizable")),s.params.backdrop&&s.params.backdropEl?l=a(s.params.backdropEl):s.params.backdrop&&0===(l=s.$containerEl.children(".panel-backdrop")).length&&(l=a('<div class="panel-backdrop"></div>'),s.$containerEl.prepend(l)),T(s,{app:t,side:d,effect:u,resizable:p,$el:i,el:i[0],opened:!1,$backdropEl:l,backdropEl:l&&l[0]}),s.useModules(),s.init(),s||yr(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,_r(t,n);var i=r.prototype;return i.getViewEl=function(){var e=this;return e.$containerEl.children(".views").length>0?e.$containerEl.children(".views")[0]:e.$containerEl.children(".view")[0]},i.setStateClasses=function(e){var t=this,n=t.side,r=t.el,i=t.getViewEl(),o=i&&i.contains(r),s=!i||o?t.$containerEl:a("html");"open"===e&&s.addClass("with-panel with-panel-"+t.side+"-"+t.effect),"before-closing"===e&&s.addClass("with-panel-closing"),"closing"===e&&(s.addClass("with-panel-closing"),s.removeClass("with-panel with-panel-"+t.side+"-"+t.effect)),"after-closing"===e&&s.removeClass("with-panel-closing"),"closed"===e&&s.removeClass("with-panel-"+n+"-reveal with-panel-"+n+"-cover with-panel-"+n+"-push with-panel")},i.enableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!1,e.setVisibleBreakpoint(),e},i.disableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!0,e.setVisibleBreakpoint(),e},i.toggleVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!e.visibleBreakpointDisabled,e.setVisibleBreakpoint(),e},i.setVisibleBreakpoint=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.visibleBreakpointResizeHandler||(t.visibleBreakpointResizeHandler=function(){t.setVisibleBreakpoint()},n.on("resize",t.visibleBreakpointResizeHandler));var r,i,o=t.side,s=t.$el,l=t.$containerEl,c=t.params,d=t.visibleBreakpointDisabled,u=c.visibleBreakpoint,p=a(t.getViewEl()),h=s.hasClass("panel-in-breakpoint");if(l&&l.hasClass("page")&&p.add(l.children(".page-content, .tabs, .fab")),n.width>=u&&null!=u&&!d)h?p.css(((r={})["margin-"+o]=s.width()+"px",r)):(t.setStateClasses("closed"),s.addClass("panel-in-breakpoint").removeClass("panel-in panel-in-collapsed"),t.onOpen(!1),t.onOpened(),p.css(((i={})["margin-"+o]=s.width()+"px",i)),n.allowPanelOpen=!0,e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint")));else if(h){var f;s.removeClass("panel-in-breakpoint panel-in"),t.onClose(),t.onClosed(),p.css(((f={})["margin-"+o]="",f)),e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint"))}},i.enableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!1,e.setCollapsedBreakpoint(),e},i.disableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!0,e.setCollapsedBreakpoint(),e},i.toggleCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!e.collapsedBreakpointDisabled,e.setCollapsedBreakpoint(),e},i.setCollapsedBreakpoint=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.collapsedBreakpointResizeHandler||(t.collapsedBreakpointResizeHandler=function(){t.setCollapsedBreakpoint()},n.on("resize",t.collapsedBreakpointResizeHandler));var r=t.$el,i=t.params,a=t.collapsedBreakpointDisabled;if(!r.hasClass("panel-in-breakpoint")){var o=i.collapsedBreakpoint,s=r.hasClass("panel-in-collapsed");n.width>=o&&null!=o&&!a?s||(t.setStateClasses("closed"),r.addClass("panel-in-collapsed").removeClass("panel-in"),t.collapsed=!0,n.allowPanelOpen=!0,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint"))):s&&(r.removeClass("panel-in-collapsed panel-in"),t.collapsed=!1,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint")))}},i.enableResizable=function(){var e=this;return e.resizableInitialized?(e.resizable=!0,e.$el.addClass("panel-resizable")):function(e){var t=e.app,n=D();if(!e.resizableInitialized){T(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var r=a("html"),i=e.$el,o=e.$backdropEl,s=e.side,l=e.effect;if(i){var c,d,u,p,h,f,m,g,v={};0===e.$el.find(".panel-resize-handler").length&&e.$el.append('<div class="panel-resize-handler"></div>'),e.$resizeHandlerEl=e.$el.children(".panel-resize-handler"),i.addClass("panel-resizable");var b=!!n.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".panel-resize-handler",w,b),t.on("touchmove:active",C),t.on("touchend:passive",x),t.on("resize",k),e.on("beforeOpen",k),e.once("panelDestroy",(function(){i.removeClass("panel-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".panel-resize-handler",w,b),t.off("touchmove:active",C),t.off("touchend:passive",x),t.off("resize",k),e.off("beforeOpen",k)}))}}function y(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var n=parseInt(e,10);return Number.isNaN(n)?null:n}function w(t){e.resizable&&i.hasClass("panel-resizable")&&(v.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,v.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,d=!1,c=!0,f=y(i.css("min-width")),m=y(i.css("max-width")),g=i.hasClass("panel-in-breakpoint"))}function C(n){if(c){var b="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX;d||(p=i[0].offsetWidth,i.transition(0),i.addClass("panel-resizing"),r.css("cursor","col-resize"),("cover"!==l||g)&&(h=a(e.getViewEl()),e.$containerEl&&e.$containerEl.hasClass("page")&&h.add(e.$containerEl.children(".page-content, .tabs, .fab"))),"cover"===l||g||(o.transition(0),h.transition(0))),d=!0,n.preventDefault(),u=b-v.x;var y="left"===s?p+u:p-u;f&&!Number.isNaN(f)&&(y=Math.max(y,f)),m&&!Number.isNaN(m)&&(y=Math.min(y,m)),y=Math.min(Math.max(y,0),t.width),e.resizableWidth=y,i[0].style.width=y+"px","cover"===l||g?g&&h&&h.css("margin-"+s,y+"px"):(h&&h.transform("translate3d("+("left"===s?y:-y)+"px, 0, 0)"),o&&o.transform("translate3d("+("left"===s?y:-y)+"px, 0, 0)")),i.trigger("panel:resize",y),e.emit("local::resize panelResize",e,y)}}function x(){if(a("html").css("cursor",""),!c||!d)return c=!1,void(d=!1);c=!1,d=!1,r[0].style.setProperty("--f7-panel-"+s+"-width",e.resizableWidth+"px"),i[0].style.width="","cover"===l||g||(h.transform(""),o.transform("")),i.removeClass("panel-resizing"),_((function(){i.transition(""),"cover"!==l&&(o.transition(""),h&&h.transition(""))}))}function k(){e.opened&&e.resizableWidth&&(f=y(i.css("min-width")),m=y(i.css("max-width")),f&&!Number.isNaN(f)&&e.resizableWidth<f&&(e.resizableWidth=Math.max(e.resizableWidth,f)),m&&!Number.isNaN(m)&&e.resizableWidth>m&&(e.resizableWidth=Math.min(e.resizableWidth,m)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),r[0].style.setProperty("--f7-panel-"+s+"-width",e.resizableWidth+"px"))}}(e),e},i.disableResizable=function(){var e=this;return e.resizable=!1,e.$el.removeClass("panel-resizable"),e},i.enableSwipe=function(){var e=this;return e.swipeInitialized?e.swipeable=!0:function(e){var t=e.app;if(!e.swipeInitialized){T(e,{swipeable:!0,swipeInitialized:!0});var n,r,i,o,s,l,c,d,u,p,h,f,m,g=e.params,v=e.$el,b=e.$backdropEl,y=e.side,C=e.effect,x={},k=0;t.on("touchstart:passive",E),t.on("touchmove:active",S),t.on("touchend:passive",M),t.on("gesturestart",I),t.on("gestureend",L),e.on("panelDestroy",(function(){t.off("touchstart:passive",E),t.off("touchmove:active",S),t.off("touchend:passive",M),t.off("gesturestart",I),t.off("gestureend",L)}))}function E(d){if(e.swipeable&&!i&&t.panel.allowOpen&&(g.swipe||g.swipeOnlyClose)&&!r&&!(a(".modal-in:not(.toast):not(.notification), .photo-browser-in").length>0)){var u=(n=t.panel.get("left"===y?"right":"left")||{}).opened&&n.$el&&!n.$el.hasClass("panel-in-breakpoint");if((e.opened||!u)&&(g.swipeOnlyClose||!u)&&(!d.target||"input"!==d.target.nodeName.toLowerCase()||"range"!==d.target.type)&&!(a(d.target).closest(".range-slider, .tabs-swipeable-wrap, .calendar-months, .no-swipe-panel, .card-opened").length>0)&&(x.x="touchstart"===d.type?d.targetTouches[0].pageX:d.pageX,x.y="touchstart"===d.type?d.targetTouches[0].pageY:d.pageY,!g.swipeOnlyClose||e.opened)){if(g.swipeActiveArea&&!e.opened){if("left"===y&&x.x>g.swipeActiveArea)return;if("right"===y&&x.x<t.width-g.swipeActiveArea)return}k=0,m=a(e.getViewEl()),o=!1,r=!0,s=void 0,l=!1,c=w(),f=void 0}}}function S(n){if(r&&!i&&!l&&!((k+=1)<2))if(n.f7PreventSwipePanel||t.preventSwipePanelBySwipeBack||t.preventSwipePanel)r=!1;else{var a="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,c="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(void 0===s&&(s=!!(s||Math.abs(c-x.y)>Math.abs(a-x.x))),s)r=!1;else{if(!f){if(f=a>x.x?"to-right":"to-left",g.swipeActiveArea>0&&!e.opened){if("left"===y&&x.x>g.swipeActiveArea)return void(r=!1);if("right"===y&&x.x<t.width-g.swipeActiveArea)return void(r=!1)}if(v.hasClass("panel-in-breakpoint"))return void(r=!1);if("left"===y&&"to-left"===f&&!v.hasClass("panel-in")||"right"===y&&"to-right"===f&&!v.hasClass("panel-in"))return void(r=!1)}var _=e.opened?0:-g.swipeThreshold;"right"===y&&(_=-_),o||(e.opened||(e.insertToRoot(),v.addClass("panel-in-swipe"),b.css("visibility","visible"),v.trigger("panel:swipeopen"),e.emit("local::swipeOpen panelSwipeOpen",e)),h=v[0].offsetWidth,"reveal"===C&&v.hasClass("panel-in-collapsed")&&(h-=parseFloat(m.css("margin-"+y))),v.transition(0)),o=!0,n.cancelable&&n.preventDefault(),d=a-x.x+_,"right"===y?"cover"===C||"push"===C?((u=d+(e.opened?0:h))<0&&(u=0),u>h&&(u=h)):((u=d-(e.opened?h:0))>0&&(u=0),u<-h&&(u=-h)):((u=d+(e.opened?h:0))<0&&(u=0),u>h&&(u=h));var w=Math.abs(u/h);if("reveal"===C)g.swipeNoFollow||(m.transform("translate3d("+u+"px,0,0)").transition(0),b.transform("translate3d("+u+"px,0,0)").transition(0)),v.trigger("panel:swipe",Math.abs(u/h)),e.emit("local::swipe panelSwipe",e,Math.abs(u/h));else{if("left"===y&&(u-=h),!g.swipeNoFollow&&(b.transition(0),p=1-Math.abs(u/h),b.css({opacity:p}),v.transform("translate3d("+u+"px,0,0)").transition(0),"push"===C)){var E="left"===y?u+h:u-h;m.transform("translate3d("+E+"px,0,0)").transition(0),b.transform("translate3d("+E+"px,0,0)").transition(0)}v.trigger("panel:swipe",Math.abs(u/h)),e.emit("local::swipe panelSwipe",e,Math.abs(u/h))}g.swipeNoFollow&&(e.opened&&0===w||!e.opened&&1===w)&&(l=!0,M(n))}}}function M(t){if(!r||!o)return r=!1,void(o=!1);var n="gesturestart"===t.type||i;r=!1,o=!1;var a,s=(new Date).getTime()-c,l=(0===u||Math.abs(u)===h)&&!g.swipeNoFollow,p=g.swipeThreshold||0;"swap"==(a=n?"reset":e.opened?"cover"===C||"push"===C?0===u?"reset":s<300&&Math.abs(u)>0?"swap":s>=300&&Math.abs(u)<h/2?"reset":"swap":u===-h?"reset":s<300&&Math.abs(u)>=0||s>=300&&Math.abs(u)<=h/2?"left"===y&&u===h?"reset":"swap":"reset":Math.abs(d)<p?"reset":"cover"===C||"push"===C?0===u||s<300&&Math.abs(u)>0||s>=300&&Math.abs(u)<h/2?"swap":"reset":0===u?"reset":s<300&&Math.abs(u)>0||s>=300&&Math.abs(u)>=h/2?"swap":"reset")&&(e.opened?e.close(!l):e.open(!l));var f=!0;if("reset"===a&&!e.opened)if(l)v.removeClass("panel-in-swipe");else{f=!1;var w="reveal"===C?m:v;e.setStateClasses("before-closing"),w.transitionEnd((function(){v.hasClass("panel-in")||(v.removeClass("panel-in-swipe"),e.setStateClasses("after-closing"))}))}"reveal"!==C&&"push"!==C||_((function(){m.transition(""),m.transform("")})),f&&v.removeClass("panel-in-swipe"),v.transition("").transform(""),b.transform("").transition("").css({opacity:"",visibility:""})}function I(e){i=!0,M(e)}function L(){i=!1}}(e),e},i.disableSwipe=function(){return this.swipeable=!1,this},i.onOpen=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.opened=!0,n.panel.allowOpen=!1,t.$el.trigger("panel:beforeopen"),t.emit("local::beforeOpen panelBeforeOpen",t),e&&t.setStateClasses("open"),t.$el.trigger("panel:open"),t.emit("local::open panelOpen",t)},i.onOpened=function(){var e=this;e.app.panel.allowOpen=!0,e.$el.trigger("panel:opened"),e.emit("local::opened panelOpened",e)},i.onClose=function(){var e=this,t=e.app;e.opened=!1,t.panel.allowOpen=!1,e.$el.trigger("panel:beforeclose"),e.emit("local::beforeClose panelBeforeClose",e),e.setStateClasses("closing"),e.$el.trigger("panel:close"),e.emit("local::close panelClose",e)},i.onClosed=function(){var e=this,t=e.app;if(t.panel.allowOpen=!0,e.setStateClasses("after-closing"),e.$el.removeClass("panel-out"),e.$backdropEl){var n=t.panel.get(".panel-in");(!n||n&&!n.$backdropEl)&&e.$backdropEl.removeClass("panel-backdrop-in")}e.$el.trigger("panel:closed"),e.emit("local::closed panelClosed",e)},i.toggle=function(e){void 0===e&&(e=!0);var t=this,n=t.params.visibleBreakpoint;return t.app.width>=n&&null!=n?t.toggleVisibleBreakpoint():(t.opened?t.close(e):t.open(e),t)},i.insertToRoot=function(){var e=this,t=(0,o.Me)(),n=e.$el,r=e.$backdropEl,i=e.$containerEl,a=n.parent(),s=n.parents(t).length>0;if(!a.is(i)||n.prevAll(".views, .view").length){var l=i.children(".panel, .views, .view").eq(0),c=i.children(".panel-backdrop").eq(0);l.length?n.insertBefore(l):c?n.insertBefore(c):i.prepend(n),r&&r.length&&(!r.parent().is(i)&&0===r.nextAll(".panel").length||r.parent().is(i)&&0===r.nextAll(".panel").length)&&r.insertBefore(n),e.once("panelClosed",(function(){s?a.append(n):n.remove()}))}},i.open=function(e){void 0===e&&(e=!0);var t=this,n=t.app;if(!n.panel.allowOpen)return!1;var r=t.effect,i=t.$el,o=t.$backdropEl,s=t.opened,l=t.$containerEl;if(!i||i.hasClass("panel-in"))return t;if(t.insertToRoot(),s||i.hasClass("panel-in-breakpoint")||i.hasClass("panel-in"))return!1;var c=n.panel.get(".panel-in");c&&c!==t&&c.close(e),i[e?"removeClass":"addClass"]("not-animated"),i.addClass("panel-in"),o&&(o.addClass("panel-backdrop-in"),o[e?"removeClass":"addClass"]("not-animated")),"cover"!==t.effect&&"push"!==t.effect||(t._clientLeft=i[0].clientLeft);var d=a(t.getViewEl());l&&l.hasClass("page")&&d.add(l.children(".page-content, .tabs"));var u="reveal"===r?d:i;return e?(o&&o.removeClass("not-animated"),function e(){u.transitionEnd((function(n){a(n.target).is(u)?i.hasClass("panel-out")?t.onClosed():t.onOpened():e()}))}(),i.removeClass("panel-out not-animated").addClass("panel-in"),t.onOpen()):(o&&o.addClass("not-animated"),i.removeClass("panel-out").addClass("panel-in not-animated"),t.onOpen(),t.onOpened()),!0},i.close=function(e){void 0===e&&(e=!0);var t=this,n=t.effect,r=t.$el,i=t.$backdropEl,o=t.opened,s=t.$containerEl;if(!o||r.hasClass("panel-in-breakpoint")||!r.hasClass("panel-in"))return t;r[e?"removeClass":"addClass"]("not-animated"),i&&i[e?"removeClass":"addClass"]("not-animated");var l=a(t.getViewEl());return s&&s.hasClass("page")&&l.add(s.children(".page-content, .tabs")),e?(("reveal"===n?l:r).transitionEnd((function(){r.hasClass("panel-out")?t.onClosed():r.hasClass("panel-in")&&t.onOpened(),t.setStateClasses("after-closing")})),r.removeClass("panel-in").addClass("panel-out"),t.onClose()):(r.addClass("not-animated").removeClass("panel-in").addClass("panel-out"),t.onClose(),t.onClosed()),t},i.init=function(){var e=this;void 0!==e.params.visibleBreakpoint&&e.setVisibleBreakpoint(),void 0!==e.params.collapsedBreakpoint&&e.setCollapsedBreakpoint(),e.params.swipe&&e.enableSwipe(),e.resizable&&e.enableResizable()},i.destroy=function(){var e=this,t=e.app,n=e.$containerEl;if(e.$el){if(e.emit("local::beforeDestroy panelBeforeDestroy",e),e.$el.trigger("panel:beforedestroy"),e.visibleBreakpointResizeHandler&&t.off("resize",e.visibleBreakpointResizeHandler),e.collapsedBreakpointResizeHandler&&t.off("resize",e.collapsedBreakpointResizeHandler),e.$el.hasClass("panel-in-breakpoint")||e.$el.hasClass("panel-in-collapsed")){var r,i=a(e.getViewEl());n&&n.hasClass("page")&&i.add(n.children(".page-content, .tabs")),e.$el.removeClass("panel-in-breakpoint panel-in-collapsed panel-in"),i.css(((r={})["margin-"+e.side]="",r)),e.emit("local::breakpoint panelBreakpoint",e),e.$el.trigger("panel:breakpoint")}e.$el.trigger("panel:destroy"),e.emit("local::destroy panelDestroy",e),e.el&&(e.el.f7Panel=null,delete e.el.f7Panel),g(e),e=null}},r}(W);const Cr=wr,xr={name:"panel",params:{panel:{opened:void 0,side:void 0,effect:void 0,resizable:void 0,backdrop:!0,backdropEl:void 0,visibleBreakpoint:void 0,collapsedBreakpoint:void 0,swipe:!1,swipeNoFollow:!1,swipeOnlyClose:!1,swipeActiveArea:0,swipeThreshold:0,closeByBackdropClick:!0,containerEl:void 0}},static:{Panel:Cr},create:function(){var e=this;T(e,{panel:{allowOpen:!0,create:function(t){return new Cr(e,t)},get:function(e){if(void 0===e&&(e=".panel"),e instanceof Cr)return e;"left"!==e&&"right"!==e||(e=".panel-"+e);var t=a(e);return 0===t.length||t.length>1?void 0:t[0].f7Panel},destroy:function(t){void 0===t&&(t=".panel");var n=e.panel.get(t);if(n&&n.destroy)return n.destroy()},open:function(t,n){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var r=e.panel.get(t);return r&&r.open?r.open(n):r?void 0:(r=e.panel.create({el:t})).open(n)},close:function(t,n){void 0===t&&(t=".panel-in"),"left"!==t&&"right"!==t||(t=".panel-"+t);var r=e.panel.get(t);return r&&r.open?r.close(n):r?void 0:(r=e.panel.create({el:t})).close(n)},toggle:function(t,n){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var r=e.panel.get(t);return r&&r.toggle?r.toggle(n):r?void 0:(r=e.panel.create({el:t})).toggle(n)}}})},on:{init:function(){var e=this;a(".panel-init").each((function(t){var n=Object.assign({el:t},a(t).dataset()||{});e.panel.create(n)}))},pageInit:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var n=Object.assign({el:e},a(e).dataset()||{});t.panel.create(n)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var n=t.panel.get(e);n&&n.destroy&&n.destroy()}))}},vnode:{"panel-init":{insert:function(e){var t=e.elm,n=Object.assign({el:t},a(t).dataset()||{});this.panel.create(n)},destroy:function(e){var t=e.elm,n=this.panel.get(t);n&&n.destroy&&n.destroy()}}},clicks:{".panel-open":function(e,t){void 0===t&&(t={}),this.panel.open(t.panel,t.animate)},".panel-close":function(e,t){void 0===t&&(t={}),this.panel.close(t.panel,t.animate)},".panel-toggle":function(e,t){void 0===t&&(t={}),this.panel.toggle(t.panel,t.animate)},".panel-backdrop":function(){var e=this,t=a(".panel-in:not(.panel-out)");if(t.length){var n=t[0]&&t[0].f7Panel;t.trigger("panel:backdrop-click"),n&&n.emit("backdropClick",n),e.emit("panelBackdropClick",n||t[0]),e.params.panel.closeByBackdropClick&&e.panel.close()}}}};var kr={open:function(e,t){void 0===e&&(e=".card-expandable"),void 0===t&&(t=!0);var n=this,r=N(),i=(0,o.Me)(),s=D(),l=a(e).eq(0);if(l&&l.length&&!(l.hasClass("card-opened")||l.hasClass("card-opening")||l.hasClass("card-closing"))){var c,d=l.parents(".page").eq(0);if(d.length&&!d.find(".card-opened").length&&(l.trigger("card:beforeopen",{prevent:ee}),n.emit("cardBeforeOpen",l[0],ee),!c)){var u,p,h,f=Object.assign({animate:t},n.params.card,l.dataset()),m=l.parents(".page-content");l.attr("data-backdrop-el")&&(u=a(l.attr("data-backdrop-el"))),!u&&f.backdrop&&((u=m.find(".card-backdrop")).length||(u=a('<div class="card-backdrop"></div>'),m.append(u))),f.hideNavbarOnOpen&&((p=d.children(".navbar")).length||d[0].f7Page&&(p=d[0].f7Page.$navbarEl)),f.hideToolbarOnOpen&&((h=d.children(".toolbar")).length||(h=d.parents(".view").children(".toolbar")),h.length||(h=d.parents(".views").children(".toolbar")));var g,v=l.css("transform");v&&v.match(/[2-9]/)&&(g=!0);var b=l.children(".card-content"),y=a(i.createElement("div")).addClass("card-expandable-size");l.append(y);var _,w=l[0].offsetWidth,C=l[0].offsetHeight,x=d[0].offsetWidth,k=d[0].offsetHeight,E=y[0].offsetWidth||x,S=y[0].offsetHeight||k;p&&!f.hideStatusbarOnOpen&&S===k&&(_=parseInt(p.css("--f7-safe-area-top"),10),Number.isNaN(_)&&(_=0)),_&&(S-=_);var T,M,I=E/w,L=S/C,$=l.offset(),P=d.offset();if(_&&(P.top+=_/2),$.left-=P.left,g){var O=v.replace(/matrix\(|\)/g,"").split(",").map((function(e){return e.trim()}));if(O&&O.length>1){var B=parseFloat(O[0]);T=$.left-w*(1-B)/2,M=$.top-P.top-C*(1-B)/2,n.rtl&&(T-=l[0].scrollLeft)}else T=l[0].offsetLeft,M=l[0].offsetTop-(m.length?m[0].scrollTop:0)}else T=$.left,M=$.top-P.top,n.rtl&&(T-=l[0].scrollLeft);M-=(k-S)/2;var A=E-w-(T-=(x-E)/2);if(n.rtl){var R=[A,T];T=R[0],A=R[1]}var G,z,H,F,V,W,j,U,q,K,J,Q,Y=S-C-M,X=(A-T)/2,Z=(Y-M)/2;f.hideNavbarOnOpen&&p&&p.length&&(p.closest(".navbar-hidden").length?l[0].f7KeepNavbarOnClose=!0:(delete l[0].f7KeepNavbarOnClose,n.navbar.hide(p,f.animate,f.hideStatusbarOnOpen,!0))),f.hideToolbarOnOpen&&h&&h.length&&(h.closest(".toolbar-hidden").length?l[0].f7KeepToolbarOnClose=!0:(delete l[0].f7KeepToolbarOnClose,n.toolbar.hide(h,f.animate))),u&&u.removeClass("card-backdrop-out").addClass("card-backdrop-in"),l.removeClass("card-transitioning"),f.animate&&l.addClass("card-opening"),l.trigger("card:open"),n.emit("cardOpen",l[0]),b.css({width:E+"px",height:S+"px"}).transform("translate3d("+(n.rtl?T+X:-T-X)+"px, 0px, 0) scale("+1/I+", "+1/L+")"),l.transform("translate3d("+(n.rtl?-X:X)+"px, "+Z+"px, 0) scale("+I+", "+L+")"),f.animate?l.transitionEnd((function(){te()})):te(),l[0].detachEventHandlers=function(){n.off("resize",ne),s.touch&&f.swipeToClose&&(n.off("touchstart:passive",re),n.off("touchmove:active",ie),n.off("touchend:passive",ae))},n.on("resize",ne),s.touch&&f.swipeToClose&&(n.on("touchstart:passive",re),n.on("touchmove:active",ie),n.on("touchend:passive",ae))}}function ee(){c=!0}function te(){d.addClass("page-with-card-opened"),r.ios&&m.length&&(m.css("height",m[0].offsetHeight+1+"px"),setTimeout((function(){m.css("height","")}))),l.addClass("card-opened"),l.removeClass("card-opening"),l.trigger("card:opened"),n.emit("cardOpened",l[0],d[0])}function ne(){if(l.removeClass("card-transitioning"),w=l[0].offsetWidth,C=l[0].offsetHeight,x=d[0].offsetWidth,k=d[0].offsetHeight,E=y[0].offsetWidth||x,S=y[0].offsetHeight||k,_=0,p&&!f.hideStatusbarOnOpen&&S===k&&(_=parseInt(p.css("--f7-safe-area-top"),10),Number.isNaN(_)&&(_=0)),_&&(S-=_),I=E/w,L=S/C,l.transform("translate3d(0px, 0px, 0) scale(1)"),$=l.offset(),P=d.offset(),_&&(P.top+=_/2),$.left-=P.left,$.top-=P.top,T=$.left-(x-E)/2,n.rtl&&(T-=l[0].scrollLeft),M=$.top-(k-S)/2,A=E-w-T,Y=S-C-M,n.rtl){var e=[A,T];T=e[0],A=e[1]}X=(A-T)/2,Z=(Y-M)/2,l.transform("translate3d("+(n.rtl?-X:X)+"px, "+Z+"px, 0) scale("+I+", "+L+")"),b.css({width:E+"px",height:S+"px"}).transform("translate3d("+(n.rtl?T+X:-T-X)+"px, 0px, 0) scale("+1/I+", "+1/L+")")}function re(e){a(e.target).closest(l).length&&l.hasClass("card-opened")&&(Q=l.find(f.scrollableEl),G=Q[0]&&Q[0]!==b[0]&&!Q[0].contains(e.target)?0:Q.scrollTop(),z=!0,F=e.targetTouches[0].pageX,V=e.targetTouches[0].pageY,U=void 0,K=!1,J=!1)}function ie(e){if(z){if(W=e.targetTouches[0].pageX,j=e.targetTouches[0].pageY,void 0===U&&(U=!!(U||Math.abs(j-V)>Math.abs(W-F))),J||K||(!U&&e.targetTouches[0].clientX<=50?J=!0:K=!0),!J&&!K||K&&0!==G)return z=!0,void(H=!0);H||l.removeClass("card-transitioning"),H=!0,((q=K?Math.max((j-V)/150,0):Math.max((W-F)/(w/2),0))>0&&K||J)&&(K&&r.ios&&Q[0]===b[0]&&(Q.css("-webkit-overflow-scrolling","auto"),Q.scrollTop(0)),e.preventDefault()),q>1&&(q=Math.pow(q,.3)),q>(K?1.3:1.1)?(z=!1,H=!1,n.card.close(l)):l.transform("translate3d("+(n.rtl?-X:X)+"px, "+Z+"px, 0) scale("+I*(1-.2*q)+", "+L*(1-.2*q)+")")}}function ae(){z&&H&&(z=!1,H=!1,r.ios&&Q.css("-webkit-overflow-scrolling",""),q>=.8?n.card.close(l):l.addClass("card-transitioning").transform("translate3d("+(n.rtl?-X:X)+"px, "+Z+"px, 0) scale("+I+", "+L+")"))}},close:function(e,t){void 0===e&&(e=".card-expandable.card-opened"),void 0===t&&(t=!0);var n=this,r=N(),i=a(e).eq(0);if(i&&i.length&&i.hasClass("card-opened")&&!i.hasClass("card-opening")&&!i.hasClass("card-closing")){var o=i.children(".card-content"),s=i.parents(".page-content"),l=i.parents(".page").eq(0);if(l.length){var c,d,u,p=Object.assign({animate:t},n.params.card,i.dataset()),h=i.find(p.scrollableEl);i.attr("data-backdrop-el")&&(u=a(i.attr("data-backdrop-el"))),p.backdrop&&(u=i.parents(".page-content").find(".card-backdrop")),p.hideNavbarOnOpen&&((c=l.children(".navbar")).length||l[0].f7Page&&(c=l[0].f7Page.$navbarEl),c&&c.length&&!i[0].f7KeepNavbarOnClose&&n.navbar.show(c,p.animate,!0)),p.hideToolbarOnOpen&&((d=l.children(".toolbar")).length||(d=l.parents(".view").children(".toolbar")),d.length||(d=l.parents(".views").children(".toolbar")),d&&d.length&&!i[0].f7KeepToolbarOnClose&&n.toolbar.show(d,p.animate)),l.removeClass("page-with-card-opened"),r.ios&&s.length&&(s.css("height",s[0].offsetHeight+1+"px"),setTimeout((function(){s.css("height","")}))),u&&u.length&&u.removeClass("card-backdrop-in").addClass("card-backdrop-out"),i.removeClass("card-opened card-transitioning"),p.animate?i.addClass("card-closing"):i.addClass("card-no-transition"),i.transform(""),i.trigger("card:close"),n.emit("cardClose",i[0],l[0]);var f=i.hasClass("card-expandable-animate-width");f&&o.css({width:"",height:""}),o.transform("").scrollTop(0,t?300:0),h.length&&h[0]!==o[0]&&h.scrollTop(0,t?300:0),t?o.transitionEnd((function(){m()})):m(),i[0].detachEventHandlers&&(i[0].detachEventHandlers(),delete i[0].detachEventHandlers)}}function m(){f||o.css({width:"",height:""}),u&&u.length&&u.removeClass("card-backdrop-in card-backdrop-out"),i.removeClass("card-closing card-no-transition"),i.trigger("card:closed"),i.find(".card-expandable-size").remove(),n.emit("cardClosed",i[0],l[0])}},toggle:function(e,t){void 0===e&&(e=".card-expandable");var n=a(e).eq(0);n.length&&(n.hasClass("card-opened")?this.card.close(n,t):this.card.open(n,t))}};const Er={name:"card",params:{card:{hideNavbarOnOpen:!0,hideStatusbarOnOpen:!0,hideToolbarOnOpen:!0,scrollableEl:".card-content",swipeToClose:!0,closeByBackdropClick:!0,backdrop:!0}},create:function(){A(this,{card:kr})},on:{pageBeforeIn:function(e){var t=this;if(t.params.card.hideNavbarOnOpen&&e.navbarEl&&e.$el.find(".card-opened.card-expandable").length&&t.navbar.hide(e.navbarEl,!0,t.params.card.hideStatusbarOnOpen,!0),t.params.card.hideToolbarOnOpen&&e.$el.find(".card-opened.card-expandable").length){var n=e.$el.children(".toolbar");n.length||(n=e.$el.parents(".view").children(".toolbar")),n.length||(n=e.$el.parents(".views").children(".toolbar")),n&&n.length&&t.toolbar.hide(n)}}},clicks:{".card-close":function(e,t){this.card.close(t.card,t.animate)},".card-open":function(e,t){this.card.open(t.card,t.animate)},".card-expandable":function(e,t,n){e.hasClass("card-opened")||e.hasClass("card-opening")||e.hasClass("card-closing")||a(n.target).closest(".card-prevent-open, .card-close").length||this.card.open(e)},".card-backdrop-in":function(){var e=!1;this.params.card.closeByBackdropClick&&(e=!0);var t=a(".card-opened");t.length&&("true"===t.attr("data-close-by-backdrop-click")?e=!0:"false"===t.attr("data-close-by-backdrop-click")&&(e=!1),e&&this.card.close(t))}}};var Sr={store:function(e,t){var n=(0,o.Jj)(),r=e,i=a(e);i.length&&i.is("form")&&i.attr("id")&&(r=i.attr("id")),this.form.data["form-"+r]=t,n.localStorage["f7form-"+r]=JSON.stringify(t)},get:function(e){var t=(0,o.Jj)(),n=e,r=a(e);return r.length&&r.is("form")&&r.attr("id")&&(n=r.attr("id")),t.localStorage["f7form-"+n]?JSON.parse(t.localStorage["f7form-"+n]):this.form.data["form-"+n]?this.form.data["form-"+n]:void 0},remove:function(e){var t=this,n=(0,o.Jj)(),r=e,i=a(e);i.length&&i.is("form")&&i.attr("id")&&(r=i.attr("id")),t.form.data["form-"+r]&&(t.form.data["form-"+r]="",delete t.form.data["form-"+r]),n.localStorage["f7form-"+r]&&(n.localStorage["f7form-"+r]="",n.localStorage.removeItem("f7form-"+r))}},Tr={init:function(e){var t=this,n=a(e),r=n.attr("id");if(r){var i=t.form.getFormData(r);i&&t.form.fillFromData(n,i),n.on("change submit",(function(){var e=t.form.convertToData(n);e&&(t.form.storeFormData(r,e),n.trigger("form:storedata",e),t.emit("formStoreData",n[0],e))}))}},destroy:function(e){a(e).off("change submit")}};function Mr(e){var t=a(e).eq(0);if(0!==t.length){var n={},r=["submit","image","button","file"],i=[];return t.find("input, select, textarea").each((function(e){var o=a(e);if(!o.hasClass("ignore-store-data")&&!o.hasClass("no-store-data")){var s=o.attr("name"),l=o.attr("type"),c=e.nodeName.toLowerCase();if(!(r.indexOf(l)>=0)&&!(i.indexOf(s)>=0)&&s)if("select"===c&&o.prop("multiple"))i.push(s),n[s]=[],t.find('select[name="'+s+'"] option').each((function(e){e.selected&&n[s].push(e.value)}));else switch(l){case"checkbox":i.push(s),n[s]=[],t.find('input[name="'+s+'"]').each((function(e){e.checked&&n[s].push(e.value)}));break;case"radio":i.push(s),t.find('input[name="'+s+'"]').each((function(e){e.checked&&(n[s]=e.value)}));break;default:n[s]=o.val()}}})),t.trigger("form:todata",n),this.emit("formToData",t[0],n),n}}function Ir(e,t){var n=a(e).eq(0);if(n.length){var r=t,i=n.attr("id");if(!r&&i&&(r=this.form.getFormData(i)),r){var o=["submit","image","button","file"],s=[];n.find("input, select, textarea").each((function(e){var t=a(e);if(!t.hasClass("ignore-store-data")&&!t.hasClass("no-store-data")){var i=t.attr("name"),l=t.attr("type"),c=e.nodeName.toLowerCase();if(void 0!==r[i]&&null!==r[i]&&!(o.indexOf(l)>=0)&&!(s.indexOf(i)>=0)&&i){if("select"===c&&t.prop("multiple"))s.push(i),n.find('select[name="'+i+'"] option').each((function(e){var t=e;r[i].indexOf(e.value)>=0?t.selected=!0:t.selected=!1}));else switch(l){case"checkbox":s.push(i),n.find('input[name="'+i+'"]').each((function(e){var t=e;r[i].indexOf(e.value)>=0?t.checked=!0:t.checked=!1}));break;case"radio":s.push(i),n.find('input[name="'+i+'"]').each((function(e){var t=e;r[i]===e.value?t.checked=!0:t.checked=!1}));break;default:t.val(r[i])}"select"!==c&&"input"!==c&&"textarea"!==c||t.trigger("change","fromdata")}}})),n.trigger("form:fromdata",r),this.emit("formFromData",n[0],r)}}}function Lr(){var e=this,t=(0,o.Jj)(),n=(0,o.Me)();a(n).on("submit change","form.form-ajax-submit, form.form-ajax-submit-onchange",(function(n,r){var i=a(this);if(("change"!==n.type||i.hasClass("form-ajax-submit-onchange"))&&("submit"===n.type&&n.preventDefault(),"change"!==n.type||"fromdata"!==r)){var o,s=(i.attr("method")||"GET").toUpperCase(),l=i.prop("enctype")||i.attr("enctype"),c=i.attr("action");c&&(o="POST"===s?"application/x-www-form-urlencoded"===l?e.form.convertToData(i[0]):new t.FormData(i[0]):k(e.form.convertToData(i[0])),e.request({method:s,url:c,contentType:l,data:o,beforeSend:function(t){i.trigger("formajax:beforesend",{data:o,xhr:t}),e.emit("formAjaxBeforeSend",i[0],o,t)},error:function(t){i.trigger("formajax:error",{data:o,xhr:t}),e.emit("formAjaxError",i[0],o,t)},complete:function(t){i.trigger("formajax:complete",{data:o,xhr:t}),e.emit("formAjaxComplete",i[0],o,t)},success:function(t,n,r){i.trigger("formajax:success",{data:o,xhr:r}),e.emit("formAjaxSuccess",i[0],o,r)}}))}}))}const $r={name:"form",create:function(){var e=this;T(e,{form:{data:{},storeFormData:Sr.store.bind(e),getFormData:Sr.get.bind(e),removeFormData:Sr.remove.bind(e),convertToData:Mr.bind(e),fillFromData:Ir.bind(e),storage:{init:Tr.init.bind(e),destroy:Tr.destroy.bind(e)}}})},on:{init:function(){Lr.call(this)},tabBeforeRemove:function(e){var t=this;a(e).find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},tabMounted:function(e){var t=this;a(e).find(".form-store-data").each((function(e){t.form.storage.init(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.init(e)}))}}};var Pr={ignoreTypes:["checkbox","button","submit","range","radio","image"],createTextareaResizableShadow:function(){var e=(0,o.Me)(),t=a(e.createElement("textarea"));t.addClass("textarea-resizable-shadow"),t.prop({disabled:!0,readonly:!0}),Pr.textareaResizableShadow=t},textareaResizableShadow:void 0,resizeTextarea:function(e){var t=(0,o.Jj)(),n=a(e);Pr.textareaResizableShadow||Pr.createTextareaResizableShadow();var r=Pr.textareaResizableShadow;if(n.length&&n.hasClass("resizable")){0===Pr.textareaResizableShadow.parents().length&&this.$el.append(r);var i=t.getComputedStyle(n[0]);"padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display".split(" ").forEach((function(e){var t=i[e];"font-size line-height letter-spacing width".split(" ").indexOf(e)>=0&&(t=t.replace(",",".")),r.css(e,t)}));var s=n[0].clientHeight;r.val("");var l=r[0].scrollHeight;r.val(n.val()),r.css("height",0);var c=r[0].scrollHeight;s!==c&&(c>l?n.css("height",c+"px"):c<s&&n.css("height",""),(c>l||c<s)&&(n.trigger("textarea:resize",{initialHeight:l,currentHeight:s,scrollHeight:c}),this.emit("textareaResize",{initialHeight:l,currentHeight:s,scrollHeight:c})))}},validate:function(e){var t=a(e);if(!t.length)return!0;var n=t.parents(".item-input"),r=t.parents(".input");function i(){t[0].f7ValidateReadonly&&(t[0].readOnly=!0)}t[0].f7ValidateReadonly&&(t[0].readOnly=!1);var o=t[0].validity,s=t.dataset().errorMessage||t[0].validationMessage||"";if(!o)return i(),!0;if(!o.valid){var l=t.nextAll(".item-input-error-message, .input-error-message");return s&&(0===l.length&&(l=a('<div class="'+(r.length?"input-error-message":"item-input-error-message")+'"></div>')).insertAfter(t),l.text(s)),l.length>0&&(n.addClass("item-input-with-error-message"),r.addClass("input-with-error-message")),n.addClass("item-input-invalid"),r.addClass("input-invalid"),t.addClass("input-invalid"),i(),!1}return n.removeClass("item-input-invalid item-input-with-error-message"),r.removeClass("input-invalid input-with-error-message"),t.removeClass("input-invalid"),i(),!0},validateInputs:function(e){var t=this;return a(e).find("input, textarea, select").map((function(e){return t.input.validate(e)})).indexOf(!1)<0},focus:function(e){var t=a(e),n=t.attr("type");Pr.ignoreTypes.indexOf(n)>=0||(t.parents(".item-input").addClass("item-input-focused"),t.parents(".input").addClass("input-focused"),t.addClass("input-focused"))},blur:function(e){var t=a(e);t.parents(".item-input").removeClass("item-input-focused"),t.parents(".input").removeClass("input-focused"),t.removeClass("input-focused")},checkEmptyState:function(e){var t=a(e);if(t.is("input, select, textarea, .item-input [contenteditable]")||(t=t.find("input, select, textarea, .item-input [contenteditable]").eq(0)),t.length){var n;n=t[0].hasAttribute("contenteditable")?t.find(".text-editor-placeholder").length?"":t.html():t.val();var r=t.parents(".item-input"),i=t.parents(".input");n&&"string"==typeof n&&""!==n.trim()||Array.isArray(n)&&n.length>0?(r.addClass("item-input-with-value"),i.addClass("input-with-value"),t.addClass("input-with-value"),t.trigger("input:notempty"),this.emit("inputNotEmpty",t[0])):(r.removeClass("item-input-with-value"),i.removeClass("input-with-value"),t.removeClass("input-with-value"),t.trigger("input:empty"),this.emit("inputEmpty",t[0]))}},scrollIntoView:function(e,t,n,r){void 0===t&&(t=0);var i=a(e),o=i.parents(".page-content, .panel, .card-expandable .card-content").eq(0);if(!o.length)return!1;var s=o[0].offsetHeight,l=o[0].scrollTop,c=parseInt(o.css("padding-top"),10),d=parseInt(o.css("padding-bottom"),10),u=o.offset().top-l,p=i.offset().top-u,h=p+l-c,f=p+l-s+d+i[0].offsetHeight,m=h+(f-h)/2;return l>h?(o.scrollTop(n?m:h,t),!0):l<f?(o.scrollTop(n?m:f,t),!0):(r&&o.scrollTop(n?m:f,t),!1)},init:function(){var e=this,t=N(),n=(0,o.Jj)(),r=(0,o.Me)();Pr.createTextareaResizableShadow(),a(r).on("click",".input-clear-button",(function(){var t=a(this).siblings("input, textarea").eq(0),n=t.val();t.val("").trigger("input change").focus().trigger("input:clear",n),e.emit("inputClear",n)})),a(r).on("mousedown",".input-clear-button",(function(e){e.preventDefault()})),a(r).on("change input","input, textarea, select, .item-input [contenteditable]",(function(){var t=a(this),n=t.attr("type"),r=t[0].nodeName.toLowerCase(),i=t[0].hasAttribute("contenteditable");Pr.ignoreTypes.indexOf(n)>=0||(e.input.checkEmptyState(t),i||(null!==t.attr("data-validate-on-blur")||!t.dataset().validate&&null===t.attr("validate")||e.input.validate(t),"textarea"===r&&t.hasClass("resizable")&&e.input.resizeTextarea(t)))}),!0),a(r).on("focus","input, textarea, select, .item-input [contenteditable]",(function(){var i=this;e.params.input.scrollIntoViewOnFocus&&(t.android?a(n).once("resize",(function(){r&&r.activeElement===i&&e.input.scrollIntoView(i,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)})):e.input.scrollIntoView(i,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)),e.input.focus(i)}),!0),a(r).on("blur","input, textarea, select, .item-input [contenteditable]",(function(){var t=a(this),n=t[0].nodeName.toLowerCase();e.input.blur(t),(t.dataset().validate||null!==t.attr("validate")||null!==t.attr("data-validate-on-blur"))&&e.input.validate(t),"textarea"===n&&t.hasClass("resizable")&&Pr.textareaResizableShadow&&Pr.textareaResizableShadow.remove()}),!0),a(r).on("invalid","input, textarea, select",(function(t){var n=a(this);null!==n.attr("data-validate-on-blur")||!n.dataset().validate&&null===n.attr("validate")||(t.preventDefault(),e.input.validate(n))}),!0)}};const Or={name:"input",params:{input:{scrollIntoViewOnFocus:void 0,scrollIntoViewCentered:!1,scrollIntoViewDuration:0,scrollIntoViewAlways:!1}},create:function(){var e=this;void 0===e.params.input.scrollIntoViewOnFocus&&(e.params.input.scrollIntoViewOnFocus=N().android),A(e,{input:Pr})},on:{init:function(){this.input.init()},tabMounted:function(e){var t=this,n=a(e);n.find(".item-input, .input").each((function(e){a(e).find("input, select, textarea, [contenteditable]").each((function(e){var n=a(e);Pr.ignoreTypes.indexOf(n.attr("type"))>=0||t.input.checkEmptyState(n)}))})),n.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},pageInit:function(e){var t=this,n=e.$el;n.find(".item-input, .input").each((function(e){a(e).find("input, select, textarea, [contenteditable]").each((function(e){var n=a(e);Pr.ignoreTypes.indexOf(n.attr("type"))>=0||t.input.checkEmptyState(n)}))})),n.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},"panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint":function(e){var t=this;e&&e.$el?e.$el.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)})):a("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))}}};function Br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e,t){return Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ar(e,t)}var Rr=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=Br(r=e.call(this,n,[t])||this),o=D(),s={};i.useModulesParams(s),i.params=T(s,n);var l=i.params.el;if(!l)return i||Br(r);var c=a(l);if(0===c.length)return i||Br(r);if(c[0].f7Toggle)return c[0].f7Toggle||Br(r);var d,u=c.children('input[type="checkbox"]');T(i,{app:t,$el:c,el:c[0],$inputEl:u,inputEl:u[0],disabled:c.hasClass("disabled")||u.hasClass("disabled")||u.attr("disabled")||u[0].disabled}),Object.defineProperty(i,"checked",{enumerable:!0,configurable:!0,set:function(e){i&&void 0!==i.$inputEl&&i.checked!==e&&(u[0].checked=e,i.$inputEl.trigger("change"))},get:function(){return u[0].checked}}),c[0].f7Toggle=i;var p,h,f,m,g,v={};function b(e){d||i.disabled||(v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,h=0,d=!0,p=void 0,m=w(),g=i.checked,f=c[0].offsetWidth,y((function(){d&&c.addClass("toggle-active-state")})))}function _(e){if(d&&!i.disabled){var n,r="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,o=t.rtl?-1:1;void 0===p&&(p=!!(p||Math.abs(a-v.y)>Math.abs(r-v.x))),p?d=!1:(e.preventDefault(),(h=r-v.x)*o<0&&Math.abs(h)>f/3&&g&&(n=!0),h*o>0&&Math.abs(h)>f/3&&!g&&(n=!0),n&&(v.x=r,i.checked=!g,g=!g))}}function C(){if(!d||i.disabled)return p&&c.removeClass("toggle-active-state"),void(d=!1);var e,n=t.rtl?-1:1;d=!1,c.removeClass("toggle-active-state"),w()-m<300&&(h*n<0&&g&&(e=!0),h*n>0&&!g&&(e=!0),e&&(i.checked=!g))}function x(){i.$el.trigger("toggle:change"),i.emit("local::change toggleChange",i)}return i.attachEvents=function(){var e=!!o.passiveListener&&{passive:!0};c.on(t.touchEvents.start,b,e),t.on("touchmove",_),t.on("touchend:passive",C),i.$inputEl.on("change",x)},i.detachEvents=function(){var e=!!o.passiveListener&&{passive:!0};c.off(t.touchEvents.start,b,e),t.off("touchmove",_),t.off("touchend:passive",C),i.$inputEl.off("change",x)},i.useModules(),i.init(),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ar(t,n);var i=r.prototype;return i.toggle=function(){this.checked=!this.checked},i.init=function(){this.attachEvents()},i.destroy=function(){var e=this;e.$el.trigger("toggle:beforedestroy"),e.emit("local::beforeDestroy toggleBeforeDestroy",e),delete e.$el[0].f7Toggle,e.detachEvents(),g(e),e=null},r}(W);const Dr=Rr,Nr={name:"toggle",create:function(){this.toggle=q({defaultSelector:".toggle",constructor:Dr,app:this,domProp:"f7Toggle"})},static:{Toggle:Dr},on:{tabMounted:function(e){var t=this;a(e).find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},tabBeforeRemove:function(e){a(e).find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},pageBeforeRemove:function(e){e.$el.find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))}},vnode:{"toggle-init":{insert:function(e){var t=e.elm;this.toggle.create({el:t})},destroy:function(e){var t=e.elm;t.f7Toggle&&t.f7Toggle.destroy()}}}};function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zr(e,t){return zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zr(e,t)}var Hr=function(e){var t,n;function r(t,n){var r,i=Gr(r=e.call(this,n,[t])||this),o=D(),s={el:null,inputEl:null,dual:!1,step:1,label:!1,min:0,max:100,value:0,draggableBar:!0,vertical:!1,verticalReversed:!1,formatLabel:null,scale:!1,scaleSteps:5,scaleSubSteps:0,formatScaleLabel:null,limitKnobPosition:"ios"===t.theme};i.useModulesParams(s),i.params=T(s,n);var l=i.params.el;if(!l)return i||Gr(r);var c=a(l);if(0===c.length)return i||Gr(r);if(c[0].f7Range)return c[0].f7Range||Gr(r);var d,u=c.dataset();"step min max value scaleSteps scaleSubSteps".split(" ").forEach((function(e){void 0===n[e]&&void 0!==u[e]&&(i.params[e]=parseFloat(u[e]))})),"dual label vertical verticalReversed scale".split(" ").forEach((function(e){void 0===n[e]&&void 0!==u[e]&&(i.params[e]=u[e])})),i.params.value||(void 0!==u.value&&(i.params.value=u.value),void 0!==u.valueLeft&&void 0!==u.valueRight&&(i.params.value=[parseFloat(u.valueLeft),parseFloat(u.valueRight)])),i.params.dual||(i.params.inputEl?d=a(i.params.inputEl):c.find('input[type="range"]').length&&(d=c.find('input[type="range"]').eq(0)));var p=i.params,h=p.dual,f=p.step,m=p.label,g=p.min,v=p.max,b=p.value,_=p.vertical,w=p.verticalReversed,C=p.scale,x=p.scaleSteps,k=p.scaleSubSteps,E=p.limitKnobPosition;T(i,{app:t,$el:c,el:c[0],$inputEl:d,inputEl:d?d[0]:void 0,dual:h,step:f,label:m,min:g,max:v,value:b,previousValue:b,vertical:_,verticalReversed:w,scale:C,scaleSteps:x,scaleSubSteps:k,limitKnobPosition:E}),d&&("step min max".split(" ").forEach((function(e){!n[e]&&d.attr(e)&&(i.params[e]=parseFloat(d.attr(e)),i[e]=parseFloat(d.attr(e)))})),void 0!==d.val()&&(i.params.value=parseFloat(d.val()),i.value=parseFloat(d.val()))),i.dual&&c.addClass("range-slider-dual"),i.label&&c.addClass("range-slider-label"),i.vertical?(c.addClass("range-slider-vertical"),i.verticalReversed&&c.addClass("range-slider-vertical-reversed")):c.addClass("range-slider-horizontal");var S=a('<div class="range-bar"></div>'),M=a('<div class="range-bar-active"></div>');S.append(M);var I='\n      <div class="range-knob-wrap">\n        <div class="range-knob"></div>\n        '+(i.label?'<div class="range-knob-label"></div>':"")+"\n      </div>\n    ",L=[a(I)];i.dual&&L.push(a(I)),c.append(S),L.forEach((function(e){c.append(e)}));var $,P,O=[];i.label&&(O.push(L[0].find(".range-knob-label")),i.dual&&O.push(L[1].find(".range-knob-label"))),i.scale&&i.scaleSteps>=1&&($=a('\n        <div class="range-scale">\n          '+i.renderScale()+"\n        </div>\n      "),c.append($)),T(i,{knobs:L,labels:O,$barEl:S,$barActiveEl:M,$scaleEl:$}),c[0].f7Range=i;var B,A,R,N,G,z,H,F,V,W,j,U={};function q(){H=!0}function K(e){if(!P&&(i.params.draggableBar||0!==a(e.target).closest(".range-knob").length)){var t;H=!1,U.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,U.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,"touchstart"===e.type&&(F=e.targetTouches[0].identifier),P=!0,B=void 0,A=c.offset(),R=A.left,N=A.top,i.vertical?(t=(U.y-N)/i.rangeHeight,i.verticalReversed||(t=1-t)):t=i.app.rtl?(R+i.rangeWidth-U.x)/i.rangeWidth:(U.x-R)/i.rangeWidth;var n=t*(i.max-i.min)+i.min;i.dual?Math.abs(i.value[0]-n)<Math.abs(i.value[1]-n)?(z=0,G=i.knobs[0],n=[n,i.value[1]]):(z=1,G=i.knobs[1],n=[i.value[0],n]):(G=i.knobs[0],n=t*(i.max-i.min)+i.min),y((function(){P&&G.addClass("range-knob-active-state")}),70),i.on("change",q),i.setValue(n,!0)}}function J(e){if(P){var t,n;if("touchmove"===e.type)for(var r=0;r<e.targetTouches.length;r+=1)e.targetTouches[r].identifier===F&&(t=e.targetTouches[r].pageX,n=e.targetTouches[r].pageY);else t=e.pageX,n=e.pageY;if(void 0!==t||void 0!==n)if(void 0!==B||i.vertical||(B=!!(B||Math.abs(n-U.y)>Math.abs(t-U.x))),B)P=!1;else{var a;e.preventDefault(),i.vertical?(a=(n-N)/i.rangeHeight,i.verticalReversed||(a=1-a)):a=i.app.rtl?(R+i.rangeWidth-t)/i.rangeWidth:(t-R)/i.rangeWidth;var o,s,l=a*(i.max-i.min)+i.min;i.dual&&(0===z?(o=l)>(s=i.value[1])&&(s=o):(s=l)<(o=i.value[0])&&(o=s),l=[o,s]),i.setValue(l,!0)}}}function Q(e){if("touchend"===e.type){for(var t,n=0;n<e.changedTouches.length;n+=1)e.changedTouches[n].identifier===F&&(t=!0);if(!t)return}if(!P)return B&&G.removeClass("range-knob-active-state"),void(P=!1);i.off("change",q),P=!1,G.removeClass("range-knob-active-state"),H&&i.$inputEl&&!i.dual&&i.$inputEl.trigger("change"),H=!1,void 0!==i.previousValue&&(i.dual&&(i.previousValue[0]!==i.value[0]||i.previousValue[1]!==i.value[1])||!i.dual&&i.previousValue!==i.value)&&(i.$el.trigger("range:changed",i.value),i.emit("local::changed rangeChanged",i,i.value))}function Y(){i.calcSize(),i.layout()}return i.attachEvents=function(){var e=!!o.passiveListener&&{passive:!0};i.$el.on(t.touchEvents.start,K,e),t.on("touchmove",J),t.on("touchend:passive",Q),t.on("tabShow",Y),t.on("resize",Y),(V=i.$el.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast")).on("modal:open",Y),(W=i.$el.parents(".panel")).on("panel:open panel:resize",Y),(j=i.$el.parents(".page").eq(0)).on("page:reinit",Y)},i.detachEvents=function(){var e=!!o.passiveListener&&{passive:!0};i.$el.off(t.touchEvents.start,K,e),t.off("touchmove",J),t.off("touchend:passive",Q),t.off("tabShow",Y),t.off("resize",Y),V&&V.off("modal:open",Y),W&&W.off("panel:open panel:resize",Y),j&&j.off("page:reinit",Y),V=null,W=null,j=null},i.useModules(),i.init(),i||Gr(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,zr(t,n);var i=r.prototype;return i.calcSize=function(){var e=this;if(e.vertical){var t=e.$el.outerHeight();if(0===t)return;e.rangeHeight=t,e.knobHeight=e.knobs[0].outerHeight()}else{var n=e.$el.outerWidth();if(0===n)return;e.rangeWidth=n,e.knobWidth=e.knobs[0].outerWidth()}},i.layout=function(){var e=this,t=e.app,n=e.knobWidth,r=e.knobHeight,i=e.rangeWidth,a=e.rangeHeight,o=e.min,s=e.max,l=e.knobs,c=e.$barActiveEl,d=e.value,u=e.label,p=e.labels,h=e.vertical,f=e.verticalReversed,m=e.limitKnobPosition,g=h?r:n,v=h?a:i,b=h?f?"top":"bottom":t.rtl?"right":"left";if(e.dual){var y,_=[(d[0]-o)/(s-o),(d[1]-o)/(s-o)];c.css(((y={})[b]=100*_[0]+"%",y[h?"height":"width"]=100*(_[1]-_[0])+"%",y)),l.forEach((function(t,n){var r=v*_[n];if(m){var i=v*_[n]-g/2;i<0&&(r=g/2),i+g>v&&(r=v-g/2)}t.css(b,r+"px"),u&&p[n].text(e.formatLabel(d[n],p[n][0]))}))}else{var w=(d-o)/(s-o);c.css(h?"height":"width",100*w+"%");var C=v*w;if(m){var x=v*w-g/2;x<0&&(C=g/2),x+g>v&&(C=v-g/2)}l[0].css(b,C+"px"),u&&p[0].text(e.formatLabel(d,p[0][0]))}e.dual&&d.indexOf(o)>=0||!e.dual&&d===o?e.$el.addClass("range-slider-min"):e.$el.removeClass("range-slider-min"),e.dual&&d.indexOf(s)>=0||!e.dual&&d===s?e.$el.addClass("range-slider-max"):e.$el.removeClass("range-slider-max")},i.setValue=function(e,t){var n,r,i=this,a=i.step,o=i.min,s=i.max;if(i.dual){r=[i.value[0],i.value[1]];var l=e;if(Array.isArray(l)||(l=[e,e]),e[0]>e[1]&&(l=[l[0],l[0]]),l=l.map((function(e){return Math.max(Math.min(Math.round(e/a)*a,s),o)})),l[0]===i.value[0]&&l[1]===i.value[1])return i;l.forEach((function(e,t){i.value[t]=e})),n=r[0]!==l[0]||r[1]!==l[1],i.layout()}else{r=i.value;var c=Math.max(Math.min(Math.round(e/a)*a,s),o);i.value=c,i.layout(),n=r!==c}return n&&(i.previousValue=r),n?(i.$el.trigger("range:change",i.value),i.$inputEl&&!i.dual&&(i.$inputEl.val(i.value),t?i.$inputEl.trigger("input"):i.$inputEl.trigger("input change")),t||(i.$el.trigger("range:changed",i.value),i.emit("local::changed rangeChanged",i,i.value)),i.emit("local::change rangeChange",i,i.value),i):i},i.getValue=function(){return this.value},i.formatLabel=function(e,t){var n=this;return n.params.formatLabel?n.params.formatLabel.call(n,e,t):e},i.formatScaleLabel=function(e){var t=this;return t.params.formatScaleLabel?t.params.formatScaleLabel.call(t,e):e},i.renderScale=function(){var e=this,t=e.app,n=e.verticalReversed,r=e.vertical?n?"top":"bottom":t.rtl?"right":"left",i="";return Array.from({length:e.scaleSteps+1}).forEach((function(t,n){var a=(e.max-e.min)/e.scaleSteps,o=e.min+a*n,s=(o-e.min)/(e.max-e.min);i+='<div class="range-scale-step" style="'+r+": "+100*s+'%">'+e.formatScaleLabel(o)+"</div>",e.scaleSubSteps&&e.scaleSubSteps>1&&n<e.scaleSteps&&Array.from({length:e.scaleSubSteps-1}).forEach((function(t,n){var s=a/e.scaleSubSteps,l=(o+s*(n+1)-e.min)/(e.max-e.min);i+='<div class="range-scale-step range-scale-substep" style="'+r+": "+100*l+'%"></div>'}))})),i},i.updateScale=function(){var e=this;if(!e.scale||e.scaleSteps<1)return e.$scaleEl&&e.$scaleEl.remove(),void delete e.$scaleEl;e.$scaleEl||(e.$scaleEl=a('<div class="range-scale"></div>'),e.$el.append(e.$scaleEl)),e.$scaleEl.html(e.renderScale())},i.init=function(){var e=this;return e.calcSize(),e.layout(),e.attachEvents(),e},i.destroy=function(){var e=this;e.$el.trigger("range:beforedestroy"),e.emit("local::beforeDestroy rangeBeforeDestroy",e),delete e.$el[0].f7Range,e.detachEvents(),g(e),e=null},r}(W);const Fr=Hr,Vr={name:"range",create:function(){var e=this;e.range=T(q({defaultSelector:".range-slider",constructor:Fr,app:e,domProp:"f7Range"}),{getValue:function(t){void 0===t&&(t=".range-slider");var n=e.range.get(t);if(n)return n.getValue()},setValue:function(t,n){void 0===t&&(t=".range-slider");var r=e.range.get(t);if(r)return r.setValue(n)}})},static:{Range:Fr},on:{tabMounted:function(e){var t=this;a(e).find(".range-slider-init").each((function(e){return new Fr(t,{el:e})}))},tabBeforeRemove:function(e){a(e).find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".range-slider-init").each((function(e){return new Fr(t,{el:e})}))},pageBeforeRemove:function(e){e.$el.find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))}},vnode:{"range-slider-init":{insert:function(e){var t=e.elm;this.range.create({el:t})},destroy:function(e){var t=e.elm;t.f7Range&&t.f7Range.destroy()}}}};function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jr(e,t){return jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jr(e,t)}var Ur=function(e){var t,n;function r(t,n){var r,i=Wr(r=e.call(this,n,[t])||this),o={el:null,inputEl:null,valueEl:null,value:0,formatValue:null,step:1,min:0,max:100,watchInput:!0,autorepeat:!1,autorepeatDynamic:!1,wraps:!1,manualInputMode:!1,decimalPoint:4,buttonsEndInputMode:!0};i.useModulesParams(o),i.params=T(o,n),i.params.value<i.params.min&&(i.params.value=i.params.min),i.params.value>i.params.max&&(i.params.value=i.params.max);var s=i.params.el;if(!s)return i||Wr(r);var l,c,d=a(s);if(0===d.length)return i||Wr(r);if(d[0].f7Stepper)return d[0].f7Stepper||Wr(r);if(i.params.inputEl?l=a(i.params.inputEl):d.find(".stepper-input-wrap").find("input, textarea").length&&(l=d.find(".stepper-input-wrap").find("input, textarea").eq(0)),l&&l.length){"step min max".split(" ").forEach((function(e){!n[e]&&l.attr(e)&&(i.params[e]=parseFloat(l.attr(e)))}));var u=parseInt(i.params.decimalPoint,10);Number.isNaN(u)?i.params.decimalPoint=0:i.params.decimalPoint=u;var p=parseFloat(l.val());void 0!==n.value||Number.isNaN(p)||!p&&0!==p||(i.params.value=p)}i.params.valueEl?c=a(i.params.valueEl):d.find(".stepper-value").length&&(c=d.find(".stepper-value").eq(0));var h=d.find(".stepper-button-plus"),f=d.find(".stepper-button-minus"),m=i.params,g=m.step,v=m.min,b=m.max,y=m.value,_=m.decimalPoint;T(i,{app:t,$el:d,el:d[0],$buttonPlusEl:h,buttonPlusEl:h[0],$buttonMinusEl:f,buttonMinusEl:f[0],$inputEl:l,inputEl:l?l[0]:void 0,$valueEl:c,valueEl:c?c[0]:void 0,step:g,min:v,max:b,value:y,decimalPoint:_,typeModeChanged:!1}),d[0].f7Stepper=i;var w,C,x,k,E,S={},M=null,I=!1,L=!1;function $(e,t,n,r,i,a){clearTimeout(E),E=setTimeout((function(){1===e&&(x=!0,I=!0),clearInterval(k),a(),k=setInterval((function(){a()}),i),e<t&&$(e+1,t,n,r,i/2,a)}),1===e?n:r)}function P(e){w||L||(a(e.target).closest(h).length?M="increment":a(e.target).closest(f).length&&(M="decrement"),M&&(S.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,S.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,w=!0,C=void 0,$(1,i.params.autorepeatDynamic?4:1,500,1e3,300,(function(){i[M]()}))))}function O(e){if(w&&!L){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;void 0!==C||I||(C=!!(C||Math.abs(n-S.y)>Math.abs(t-S.x)));var r=Math.pow(Math.pow(t-S.x,2)+Math.pow(n-S.y,2),.5);(C||r>20)&&(w=!1,clearTimeout(E),clearInterval(k))}}function B(){clearTimeout(E),clearInterval(k),M=null,I=!1,w=!1}function A(){L?i.params.buttonsEndInputMode&&(L=!1,i.endTypeMode(!0)):x?x=!1:i.decrement(!0)}function R(){L?i.params.buttonsEndInputMode&&(L=!1,i.endTypeMode(!0)):x?x=!1:i.increment(!0)}function D(e){!e.target.readOnly&&i.params.manualInputMode&&(L=!0,"number"==typeof e.target.selectionStart&&(e.target.selectionStart=e.target.value.length,e.target.selectionEnd=e.target.value.length))}function N(e){13!==e.keyCode&&13!==e.which||(e.preventDefault(),L=!1,i.endTypeMode())}function G(){L=!1,i.endTypeMode(!0)}function z(e){L?i.typeValue(e.target.value):e.detail&&e.detail.sentByF7Stepper||i.setValue(e.target.value,!0)}return i.attachEvents=function(){f.on("click",A),h.on("click",R),i.params.watchInput&&l&&l.length&&(l.on("input",z),l.on("click",D),l.on("blur",G),l.on("keyup",N)),i.params.autorepeat&&(t.on("touchstart:passive",P),t.on("touchmove:active",O),t.on("touchend:passive",B))},i.detachEvents=function(){f.off("click",A),h.off("click",R),i.params.watchInput&&l&&l.length&&(l.off("input",z),l.off("click",D),l.off("blur",G),l.off("keyup",N))},i.useModules(),i.init(),i||Wr(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,jr(t,n);var i=r.prototype;return i.minus=function(){return this.decrement()},i.plus=function(){return this.increment()},i.decrement=function(){var e=this;return e.setValue(e.value-e.step,!1,!0)},i.increment=function(){var e=this;return e.setValue(e.value+e.step,!1,!0)},i.setValue=function(e,t,n){var r=this,i=r.step,a=r.min,o=r.max,s=r.value,l=Math.round(e/i)*i;if(r.params.wraps&&n?(l>o&&(l=a),l<a&&(l=o)):l=Math.max(Math.min(l,o),a),Number.isNaN(l)&&(l=s),r.value=l,s===l&&!t)return r;r.$el.trigger("stepper:change",r.value);var c=r.formatValue(r.value);return r.$inputEl&&r.$inputEl.length&&(r.$inputEl.val(c),r.$inputEl.trigger("input change",{sentByF7Stepper:!0})),r.$valueEl&&r.$valueEl.length&&r.$valueEl.html(c),r.emit("local::change stepperChange",r,r.value),r},i.endTypeMode=function(e){var t=this,n=t.min,r=t.max,i=parseFloat(t.value);if(Number.isNaN(i)&&(i=0),i=Math.max(Math.min(i,r),n),t.value=i,!t.typeModeChanged)return t.$inputEl&&t.$inputEl.length&&!e&&t.$inputEl.blur(),t;t.typeModeChanged=!1,t.$el.trigger("stepper:change",t.value);var a=t.formatValue(t.value);return t.$inputEl&&t.$inputEl.length&&(t.$inputEl.val(a),t.$inputEl.trigger("input change",{sentByF7Stepper:!0}),e||t.$inputEl.blur()),t.$valueEl&&t.$valueEl.length&&t.$valueEl.html(a),t.emit("local::change stepperChange",t,t.value),t},i.typeValue=function(e){var t=this;t.typeModeChanged=!0;var n=String(e);if(1===n.length&&"-"===n)return t;if(n.lastIndexOf(".")+1!==n.length&&n.lastIndexOf(",")+1!==n.length){var r=parseFloat(n.replace(",","."));if(0===r)return t.value=n.replace(",","."),t.$inputEl.val(t.value),t;if(Number.isNaN(r))return t.value=0,t.$inputEl.val(t.value),t;var i=Math.pow(10,t.params.decimalPoint);return r=Math.round(r*i).toFixed(t.params.decimalPoint+1)/i,t.value=parseFloat(String(r).replace(",",".")),t.$inputEl.val(t.value),t}return n.lastIndexOf(".")!==n.indexOf(".")||n.lastIndexOf(",")!==n.indexOf(",")?(n=n.slice(0,-1),t.value=n,t.$inputEl.val(t.value),t):(t.value=n,t.$inputEl.val(n),t)},i.getValue=function(){return this.value},i.formatValue=function(e){var t=this;return t.params.formatValue?t.params.formatValue.call(t,e):e},i.init=function(){var e=this;if(e.attachEvents(),e.$valueEl&&e.$valueEl.length){var t=e.formatValue(e.value);e.$valueEl.html(t)}return e},i.destroy=function(){var e=this;e.$el.trigger("stepper:beforedestroy"),e.emit("local::beforeDestroy stepperBeforeDestroy",e),delete e.$el[0].f7Stepper,e.detachEvents(),g(e),e=null},r}(W);const qr=Ur,Kr={name:"stepper",create:function(){var e=this;e.stepper=T(q({defaultSelector:".stepper",constructor:qr,app:e,domProp:"f7Stepper"}),{getValue:function(t){void 0===t&&(t=".stepper");var n=e.stepper.get(t);if(n)return n.getValue()},setValue:function(t,n){void 0===t&&(t=".stepper");var r=e.stepper.get(t);if(r)return r.setValue(n)}})},static:{Stepper:qr},on:{tabMounted:function(e){var t=this;a(e).find(".stepper-init").each((function(e){var n=a(e).dataset();t.stepper.create(T({el:e},n||{}))}))},tabBeforeRemove:function(e){a(e).find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".stepper-init").each((function(e){var n=a(e).dataset();t.stepper.create(T({el:e},n||{}))}))},pageBeforeRemove:function(e){e.$el.find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))}},vnode:{"stepper-init":{insert:function(e){var t=e.elm,n=a(t).dataset();this.stepper.create(T({el:t},n||{}))},destroy:function(e){var t=e.elm;t.f7Stepper&&t.f7Stepper.destroy()}}}};function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yr(e,t){return Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yr(e,t)}var Xr=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=Qr(r=e.call(this,n,[t])||this),o=T({on:{}},t.params.smartSelect);void 0===o.searchbarDisableButton&&(o.searchbarDisableButton="aurora"!==t.theme),i.useModulesParams(o),i.params=T({},o,n),i.app=t;var s=a(i.params.el).eq(0);if(0===s.length)return i||Qr(r);if(s[0].f7SmartSelect)return s[0].f7SmartSelect||Qr(r);var l,d=s.find("select").eq(0);if(0===d.length)return i||Qr(r);i.params.setValueText&&(0===(l=a(i.params.valueEl)).length&&(l=s.find(".item-after")),0===l.length&&(l=a('<div class="item-after"></div>')).insertAfter(s.find(".item-title")));var u=n.url;u||(s.attr("href")&&"#"!==s.attr("href")?u=s.attr("href"):d.attr("name")&&(u=d.attr("name").toLowerCase()+"-select/")),u||(u=i.params.url);var p=d[0].multiple,h=p?"checkbox":"radio",f=c();function m(){i.open()}function g(){var e=i.$selectEl.val();i.$el.trigger("smartselect:change",e),i.emit("local::change smartSelectChange",i,e),i.vl&&i.vl.clearCache(),i.setValueText()}function v(){var e,t,n,r=this,o=r.value,s=[];if("checkbox"===r.type){for(var l=0;l<i.selectEl.options.length;l+=1)(e=i.selectEl.options[l]).value===o&&(e.selected=r.checked),e.selected&&(t=(n=e.dataset?e.dataset.displayAs:a(e).data("display-value-as"))&&void 0!==n?n:e.textContent,s.push(t.trim()));i.maxLength&&i.checkMaxLength()}else(e=i.$selectEl.find('option[value="'+o+'"]')[0])||(e=i.$selectEl.find("option").filter((function(e){return e.value===o}))[0]),s=[t=(n=e.dataset?e.dataset.displayAs:a(e).data("display-as"))&&void 0!==n?n:e.textContent],i.selectEl.value=o;i.$selectEl.trigger("change"),i.params.setValueText&&i.$valueEl.text(i.formatValueText(s)),i.params.closeOnSelect&&"radio"===i.inputType&&i.close()}return T(i,{$el:s,el:s[0],$selectEl:d,selectEl:d[0],$valueEl:l,valueEl:l&&l[0],url:u,multiple:p,inputType:h,id:f,inputName:h+"-"+f,selectName:d.attr("name"),maxLength:d.attr("maxlength")||n.maxLength}),s[0].f7SmartSelect=i,i.attachEvents=function(){s.on("click",m),s.on("change","select",g)},i.detachEvents=function(){s.off("click",m),s.off("change","select",g)},i.attachInputsEvents=function(){i.$containerEl.on("change",'input[type="checkbox"], input[type="radio"]',v)},i.detachInputsEvents=function(){i.$containerEl.off("change",'input[type="checkbox"], input[type="radio"]',v)},i.useModules(),i.init(),i||Qr(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Yr(t,n);var i,o,s=r.prototype;return s.setValue=function(e){var t,n,r,i=this,o=e,s=[];if(i.multiple){Array.isArray(o)||(o=[o]);for(var l=0;l<i.selectEl.options.length;l+=1)t=i.selectEl.options[l],o.indexOf(t.value)>=0?t.selected=!0:t.selected=!1,t.selected&&(r=(n=t.dataset?t.dataset.displayAs:a(t).data("display-value-as"))&&void 0!==n?n:t.textContent,s.push(r.trim()))}else(t=i.$selectEl.find('option[value="'+o+'"]')[0])&&(s=[r=(n=t.dataset?t.dataset.displayAs:a(t).data("display-as"))&&void 0!==n?n:t.textContent]),i.selectEl.value=o;return i.params.setValueText&&i.$valueEl.text(i.formatValueText(s)),i.$selectEl.trigger("change"),i},s.unsetValue=function(){var e=this;e.params.setValueText&&e.$valueEl.text(e.formatValueText([])),e.$selectEl.find("option").each((function(e){e.selected=!1,e.checked=!1})),e.$selectEl[0].value=null,e.$containerEl&&e.$containerEl.find('input[name="'+e.inputName+'"][type="checkbox"], input[name="'+e.inputName+'"][type="radio"]').prop("checked",!1),e.$selectEl.trigger("change")},s.getValue=function(){return this.$selectEl.val()},s.checkMaxLength=function(){var e=this,t=e.$containerEl;e.selectEl.selectedOptions.length>=e.maxLength?t.find('input[type="checkbox"]').each((function(e){e.checked?a(e).parents("li").removeClass("disabled"):a(e).parents("li").addClass("disabled")})):t.find(".disabled").removeClass("disabled")},s.formatValueText=function(e){var t=this;return t.params.formatValueText?t.params.formatValueText.call(t,e,t):e.join(", ")},s.setValueText=function(e){var t=this,n=[];void 0!==e?n=Array.isArray(e)?e:[e]:t.$selectEl.find("option").each((function(e){var t=a(e);if(e.selected){var r=e.dataset?e.dataset.displayAs:t.data("display-value-as");r&&void 0!==r?n.push(r):n.push(e.textContent.trim())}})),t.params.setValueText&&t.$valueEl.text(t.formatValueText(n))},s.getItemsData=function(){var e,t=this,n=t.app.theme,r=[];return t.$selectEl.find("option").each((function(i){var o=a(i),s=o.dataset(),l=s.optionImage||t.params.optionImage,c=s.optionIcon||t.params.optionIcon,d="ios"===n&&(s.optionIconIos||t.params.optionIconIos),u="md"===n&&(s.optionIconMd||t.params.optionIconMd),p="aurora"===n&&(s.optionIconAurora||t.params.optionIconAurora),h=l||c||d||u||p,f=s.optionColor,m=s.optionClass||"";o[0].disabled&&(m+=" disabled");var g=o.parent("optgroup")[0],v=g&&g.label,b=!1;g&&g!==e&&(b=!0,e=g,r.push({groupLabel:v,isLabel:b})),r.push({value:o[0].value,text:o[0].textContent.trim(),selected:o[0].selected,groupEl:g,groupLabel:v,image:l,icon:c,iconIos:d,iconMd:u,iconAurora:p,color:f,className:m,disabled:o[0].disabled,id:t.id,hasMedia:h,checkbox:"checkbox"===t.inputType,radio:"radio"===t.inputType,inputName:t.inputName,inputType:t.inputType})})),t.items=r,r},s.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):mn("form",{class:"searchbar"},mn("div",{class:"searchbar-inner"},mn("div",{class:"searchbar-input-wrap"},mn("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),mn("i",{class:"searchbar-icon"}),mn("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&mn("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},s.renderItem=function(e,t){var n,r,i=this;if(i.params.renderItem)return i.params.renderItem.call(i,e,t);if(e.isLabel)n='<li class="item-divider">'+e.groupLabel+"</li>";else{var a,o=e.selected;if(i.params.virtualList){var s=i.getValue();o=i.multiple?s.indexOf(e.value)>=0:s===e.value,i.multiple&&(a=i.multiple&&!o&&s.length===parseInt(i.maxLength,10))}var l=e.icon,c=e.iconIos,d=e.iconMd,u=e.iconAurora,p=l||c||d||u,h=(void 0===(r=l||c||d||u||"")&&(r=""),r.indexOf(":")>=0?r.split(":")[1]:""),f=function(e){if(void 0===e&&(e=""),e.indexOf(":")>=0){var t=e.split(":")[0];return"f7"===t&&(t="f7-icons"),"material"===t&&(t="material-icons"),t}return e}(l||c||d||u||"");n=mn("li",{class:(e.className||"")+(a?" disabled":"")},mn("label",{class:"item-"+e.inputType+" item-content"},mn("input",{type:e.inputType,name:e.inputName,value:e.value,_checked:o}),mn("i",{class:"icon icon-"+e.inputType}),e.hasMedia&&mn("div",{class:"item-media"},p&&mn("i",{class:"icon "+f},h),e.image&&mn("img",{src:e.image})),mn("div",{class:"item-inner"},mn("div",{class:"item-title"+(e.color?" text-color-"+e.color:"")},e.text))))}return n},s.renderItems=function(){var e=this;return e.params.renderItems?e.params.renderItems.call(e,e.items):"\n      "+e.items.map((function(t,n){return""+e.renderItem(t,n)})).join("")+"\n    "},s.renderPage=function(){var e=this;if(e.params.renderPage)return e.params.renderPage.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var n=e.$el.find(".item-title");t=n.length?n.text().trim():""}var r=e.params.cssClass;return mn("div",{class:"page smart-select-page "+r,"data-name":"smart-select-page","data-select-name":e.selectName},mn("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},mn("div",{class:"navbar-bg"}),mn("div",{class:"navbar-inner sliding "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},mn("div",{class:"left"},mn("a",{class:"link back"},mn("i",{class:"icon icon-back"}),mn("span",{class:"if-not-md"},e.params.pageBackLinkText))),t&&mn("div",{class:"title"},t),e.params.searchbar&&mn("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&mn("div",{class:"searchbar-backdrop"}),mn("div",{class:"page-content"},mn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},mn("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},s.renderPopup=function(){var e=this;if(e.params.renderPopup)return e.params.renderPopup.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var n=e.$el.find(".item-title");t=n.length?n.text().trim():""}var r=e.params.cssClass||"";return mn("div",{class:"popup smart-select-popup "+r+" "+(e.params.popupTabletFullscreen?"popup-tablet-fullscreen":""),"data-select-name":e.selectName},mn("div",{class:"view"},mn("div",{class:"page smart-select-page "+(e.params.searchbar?"page-with-subnavbar":""),"data-name":"smart-select-page"},mn("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},mn("div",{class:"navbar-bg"}),mn("div",{class:"navbar-inner sliding"},t&&mn("div",{class:"title"},t),mn("div",{class:"right"},mn("a",{class:"link popup-close","data-popup":".smart-select-popup[data-select-name='"+e.selectName+"']"},e.params.popupCloseLinkText)),e.params.searchbar&&mn("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&mn("div",{class:"searchbar-backdrop"}),mn("div",{class:"page-content"},mn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},mn("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))))},s.renderSheet=function(){var e=this;if(e.params.renderSheet)return e.params.renderSheet.call(e,e.items);var t=e.params.cssClass;return mn("div",{class:"sheet-modal smart-select-sheet "+t,"data-select-name":e.selectName},mn("div",{class:"toolbar toolbar-top "+(e.params.toolbarColorTheme?"color-"+e.params.toolbarColorTheme:"")},mn("div",{class:"toolbar-inner"},mn("div",{class:"left"}),mn("div",{class:"right"},mn("a",{class:"link sheet-close"},e.params.sheetCloseLinkText)))),mn("div",{class:"sheet-modal-inner"},mn("div",{class:"page-content"},mn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},mn("ul",null,!e.params.virtualList&&e.renderItems(e.items))))))},s.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e.items);var t=e.params.cssClass;return mn("div",{class:"popover smart-select-popover "+t,"data-select-name":e.selectName},mn("div",{class:"popover-inner"},mn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},mn("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},s.scrollToSelectedItem=function(){var e=this,t=e.params,n=e.$containerEl;if(!e.opened)return e;if(t.virtualList){var r;e.vl.items.forEach((function(e,t){void 0===r&&e.selected&&(r=t)})),void 0!==r&&e.vl.scrollToItem(r)}else{var i=n.find("input:checked").parents("li");if(!i.length)return e;var a=n.find(".page-content, .popover-inner");if(!a.length)return e;a.scrollTop(i.offset().top-a.offset().top-parseInt(a.css("padding-top"),10))}return e},s.onOpen=function(e,t){var n=this,r=n.app,i=a(t);if(n.$containerEl=i,n.openedIn=e,n.opened=!0,n.params.virtualList&&(n.vl=r.virtualList.create({el:i.find(".virtual-list"),items:n.items,renderItem:n.renderItem.bind(n),height:n.params.virtualListHeight,searchByItem:function(e,t){return!!(t.text&&t.text.toLowerCase().indexOf(e.trim().toLowerCase())>=0)}})),n.params.scrollToSelectedItem&&n.scrollToSelectedItem(),n.params.searchbar){var o=i.find(".searchbar");if("page"===e&&"ios"===r.theme&&(o=a(r.navbar.getElByPage(i)).find(".searchbar")),n.params.appendSearchbarNotFound&&("page"===e||"popup"===e)){var s;(s="string"==typeof n.params.appendSearchbarNotFound?a('<div class="block searchbar-not-found">'+n.params.appendSearchbarNotFound+"</div>"):"boolean"==typeof n.params.appendSearchbarNotFound?a('<div class="block searchbar-not-found">Nothing found</div>'):n.params.appendSearchbarNotFound)&&i.find(".page-content").append(s[0])}var l=T({el:o,backdropEl:i.find(".searchbar-backdrop"),searchContainer:".smart-select-list-"+n.id,searchIn:".item-title"},"object"==typeof n.params.searchbar?n.params.searchbar:{});n.searchbar=r.searchbar.create(l)}n.maxLength&&n.checkMaxLength(),n.params.closeOnSelect&&n.$containerEl.find('input[type="radio"][name="'+n.inputName+'"]:checked').parents("label").once("click",(function(){n.close()})),n.attachInputsEvents(),n.$el.trigger("smartselect:open"),n.emit("local::open smartSelectOpen",n)},s.onOpened=function(){var e=this;e.$el.trigger("smartselect:opened"),e.emit("local::opened smartSelectOpened",e)},s.onClose=function(){var e=this;e.destroyed||(e.vl&&e.vl.destroy&&(e.vl.destroy(),e.vl=null,delete e.vl),e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),e.detachInputsEvents(),e.$el.trigger("smartselect:close"),e.emit("local::close smartSelectClose",e))},s.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$containerEl=null,delete e.$containerEl,e.$el.trigger("smartselect:closed"),e.emit("local::closed smartSelectClosed",e))},s.openPage=function(){var e=this;if(e.opened)return e;e.getItemsData();var t=e.renderPage(e.items);return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}}}}),e},s.openPopup=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopup(e.items),push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},s.openSheet=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderSheet(e.items),backdrop:e.params.sheetBackdrop,scrollToEl:e.$el,closeByOutsideClick:!0,push:e.params.sheetPush,swipeToClose:e.params.sheetSwipeToClose,on:{sheetOpen:function(t){e.onOpen("sheet",t.el)},sheetOpened:function(t){e.onOpened("sheet",t.el)},sheetClose:function(t){e.onClose("sheet",t.el)},sheetClosed:function(t){e.onClosed("sheet",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,sheet:t}}):e.modal=e.app.sheet.create(t).open(),e},s.openPopover=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopover(e.items),targetEl:e.$el,on:{popoverOpen:function(t){e.onOpen("popover",t.el)},popoverOpened:function(t){e.onOpened("popover",t.el)},popoverClose:function(t){e.onClose("popover",t.el)},popoverClosed:function(t){e.onClosed("popover",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popover:t}}):e.modal=e.app.popover.create(t).open(),e},s.open=function(e){var t=this;if(t.opened)return t;var n=!1;function r(){n=!0}return t.$el&&t.$el.trigger("smartselect:beforeopen",{prevent:r}),t.emit("local::beforeOpen smartSelectBeforeOpen",t,r),n||t["open"+(e||t.params.openIn).split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),t},s.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){y((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},s.init=function(){this.attachEvents(),this.setValueText()},s.destroy=function(){var e=this;e.emit("local::beforeDestroy smartSelectBeforeDestroy",e),e.$el.trigger("smartselect:beforedestroy"),e.detachEvents(),delete e.$el[0].f7SmartSelect,g(e),e.destroyed=!0},i=r,o=[{key:"view",get:function(){var e,t=this.params,n=this.$el;if(t.view&&(e=t.view),e||(e=n.parents(".view").length&&n.parents(".view")[0].f7View),!e&&"page"===t.openIn)throw Error("Smart Select requires initialized View");return e}}],o&&Jr(i.prototype,o),r}(W);const Zr=Xr,ei={name:"smartSelect",params:{smartSelect:{el:void 0,valueEl:void 0,setValueText:!0,formatValueText:null,openIn:"page",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,sheetBackdrop:!1,pageTitle:void 0,pageBackLinkText:"Back",popupCloseLinkText:"Close",popupTabletFullscreen:!1,sheetCloseLinkText:"Done",searchbar:!1,searchbarPlaceholder:"Search",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,closeOnSelect:!1,virtualList:!1,virtualListHeight:void 0,scrollToSelectedItem:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",cssClass:"",renderPage:void 0,renderPopup:void 0,renderSheet:void 0,renderPopover:void 0,renderItems:void 0,renderItem:void 0,renderSearchbar:void 0}},static:{SmartSelect:Zr},create:function(){var e=this;e.smartSelect=T(q({defaultSelector:".smart-select",constructor:Zr,app:e,domProp:"f7SmartSelect"}),{open:function(t){var n=e.smartSelect.get(t);if(n&&n.open)return n.open()},close:function(t){var n=e.smartSelect.get(t);if(n&&n.close)return n.close()}})},on:{tabMounted:function(e){var t=this;a(e).find(".smart-select-init").each((function(e){t.smartSelect.create(T({el:e},a(e).dataset()))}))},tabBeforeRemove:function(e){a(e).find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".smart-select-init").each((function(e){t.smartSelect.create(T({el:e},a(e).dataset()))}))},pageBeforeRemove:function(e){e.$el.find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))}},clicks:{".smart-select":function(e,t){e[0].f7SmartSelect||this.smartSelect.create(T({el:e},t)).open()}},vnode:{"smart-select-init":{insert:function(e){var t=e.elm;this.smartSelect.create(T({el:t},a(t).dataset()))},destroy:function(e){var t=e.elm;t.f7SmartSelect&&t.f7SmartSelect.destroy&&t.f7SmartSelect.destroy()}}}};function ti(e,t){var n=t.css("min-"+e);return"auto"===n||"none"===n?n=0:n.indexOf("px")>=0?n=parseFloat(n):n.indexOf("%")>=0&&(n=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(n)/100),n}function ni(e,t){var n=t.css("max-"+e);return"auto"===n||"none"===n?n=null:n.indexOf("px")>=0?n=parseFloat(n):n.indexOf("%")>=0&&(n=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(n)/100),n}var ri={init:function(){var e,t,n,r,i,s,l,c,d,u,p,h,f,m,g,v,b,y=this,_=(0,o.Me)();a(_).on(y.touchEvents.start,".col > .resize-handler, .row > .resize-handler",(function(o){e||t||(i=a(o.target).closest(".resize-handler"),n="touchstart"===o.type?o.targetTouches[0].pageX:o.pageX,r="touchstart"===o.type?o.targetTouches[0].pageY:o.pageY,e=!0,s=void 0,l=void 0,b=void 0)})),y.on("touchmove",(function(a){if(e){var o=1===i.parent(".row").length,_=o?"height":"width",w=o?"offsetHeight":"offsetWidth";t||(!(s=i.parent(o?".row":".col")).length||s.hasClass("resizable")&&!s.hasClass("resizable-fixed")||(s=s.prevAll(".resizable:not(.resizable-fixed)").eq(0)),!(l=s.next(o?".row":".col")).length||l.hasClass("resizable")&&!l.hasClass("resizable-fixed")||(l=l.nextAll(".resizable:not(.resizable-fixed)").eq(0)),s.length&&(c=s[0][w],d=ti(_,s),u=ni(_,s),m=s.parent()[0][w],g=s.parent().children(o?".row":'[class*="col-"], .col').length,v=parseFloat(s.css(o?"--f7-grid-row-gap":"--f7-grid-gap"))),l.length&&(p=l[0][w],h=ti(_,l),f=ni(_,l),s.length||(m=l.parent()[0][w],g=l.parent().children(o?".row":'[class*="col-"], .col').length,v=parseFloat(l.css(o?"--f7-grid-row-gap":"--f7-grid-gap"))))),t=!0;var C="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,x="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY;if(void 0!==b||o||(b=!!(b||Math.abs(x-r)>Math.abs(C-n))),b)return e=!1,void(t=!1);var k=s.hasClass("resizable-absolute")||l.hasClass("resizable-absolute"),E=!o||o&&!k;if(E&&!l.length||!s.length)return e=!1,void(t=!1);a.preventDefault();var S,T,M=o?x-r:C-n;if(s.length&&((S=c+M)<d&&(M=(S=d)-c),u&&S>u&&(M=(S=u)-c)),l.length&&E&&((T=p-M)<h&&(S=c+(M=p-(T=h))),f&&T>f&&(S=c+(M=p-(T=f)))),k)return s[0].style[_]=S+"px",E&&(l[0].style[_]=T+"px"),s.trigger("grid:resize"),l.trigger("grid:resize"),y.emit("gridResize",s[0]),void y.emit("gridResize",l[0]);var I=(g-1)*v/g,L=o?g-1+" * var(--f7-grid-row-gap) / "+g:"(var(--f7-cols-per-row) - 1) * var(--f7-grid-gap) / var(--f7-cols-per-row)",$=S+I,P=T+I;s[0].style[_]="calc("+$/m*100+"% - "+L+")",l[0].style[_]="calc("+P/m*100+"% - "+L+")",s.trigger("grid:resize"),l.trigger("grid:resize"),y.emit("gridResize",s[0]),y.emit("gridResize",l[0])}})),y.on("touchend",(function(){e&&(t||(e=!1),e=!1,t=!1)}))}};const ii={name:"grid",create:function(){T(this,{grid:{init:ri.init.bind(this)}})},on:{init:function(){this.grid.init()}}};function ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function si(e,t){return si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},si(e,t)}var li=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i,o,s=oi(r=e.call(this,n,[t])||this);if(s.params=T({},t.params.calendar,n),s.params.containerEl&&0===(i=a(s.params.containerEl)).length)return s||oi(r);s.params.inputEl&&(o=a(s.params.inputEl));var l="horizontal"===s.params.direction,c=1;l&&(c=t.rtl?-1:1),T(s,{app:t,$containerEl:i,containerEl:i&&i[0],inline:i&&i.length>0,$inputEl:o,inputEl:o&&o[0],initialized:!1,opened:!1,url:s.params.url,isHorizontal:l,inverter:c,animating:!1,allowTouchMove:!0,hasTimePicker:s.params.timePicker&&!s.params.rangePicker&&!s.params.multiple}),s.dayFormatter=new Intl.DateTimeFormat(s.params.locale,{day:"numeric"}),s.monthFormatter=new Intl.DateTimeFormat(s.params.locale,{month:"long"}),s.yearFormatter=new Intl.DateTimeFormat(s.params.locale,{year:"numeric"}),s.timeSelectorFormatter=new Intl.DateTimeFormat(s.params.locale,s.params.timePickerFormat);var d=s.timeSelectorFormatter.format(new Date).toLowerCase();s.is12HoursFormat=d.indexOf("pm")>=0||d.indexOf("am")>=0;var u=s.params,p=u.monthNames,h=u.monthNamesShort,f=u.dayNames,m=u.dayNamesShort,g=s.getIntlNames(),v=g.monthNamesIntl,b=g.monthNamesShortIntl,y=g.dayNamesIntl,_=g.dayNamesShortIntl;function w(){s.open()}function C(e){e.preventDefault()}function x(){s.setValue([]),s.opened&&s.update()}function k(e){var t=a(e.target);!s.destroyed&&s.params&&(s.isPopover()||s.opened&&!s.closing&&(t.closest('[class*="backdrop"]').length||(o&&o.length>0?t[0]!==o[0]&&0===t.closest(".sheet-modal, .calendar-modal").length&&s.close():0===a(e.target).closest(".sheet-modal, .calendar-modal").length&&s.close())))}return"auto"===p&&(p=v),"auto"===h&&(h=b),"auto"===f&&(f=y),"auto"===m&&(m=_),T(s,{monthNames:p,monthNamesShort:h,dayNames:f,dayNamesShort:m}),T(s,{attachInputEvents:function(){s.$inputEl.on("click",w),s.$inputEl.on("input:clear",x),s.params.inputReadOnly&&(s.$inputEl.on("focus mousedown",C),s.$inputEl[0]&&(s.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){s.$inputEl.off("click",w),s.$inputEl.off("input:clear",x),s.params.inputReadOnly&&(s.$inputEl.off("focus mousedown",C),s.$inputEl[0]&&delete s.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",k)},detachHtmlEvents:function(){t.off("click",k)}}),s.attachCalendarEvents=function(){var e,n,r,i,o,l,c,d,u,p,h,f,m,g=!0,v=s.$el,b=s.$wrapperEl;function y(t){n||e||(e=!0,r="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,o=r,i="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,l=i,c=(new Date).getTime(),h=0,g=!0,m=void 0,d=s.monthsTranslate)}function _(t){if(e){var a=s.isHorizontal;o="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,l="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,void 0===m&&(m=!!(m||Math.abs(l-i)>Math.abs(o-r))),a&&m||!s.allowTouchMove?e=!1:(t.preventDefault(),s.animating?e=!1:(g=!1,n||(n=!0,u=b[0].offsetWidth,p=b[0].offsetHeight,b.transition(0)),h=(f=a?o-r:l-i)/(a?u:p),d=100*(s.monthsTranslate*s.inverter+h),b.transform("translate3d("+(a?d:0)+"%, "+(a?0:d)+"%, 0)")))}}function w(){if(!e||!n)return e=!1,void(n=!1);e=!1,n=!1,(new Date).getTime()-c<300?Math.abs(f)<10?s.resetMonth():f>=10?t.rtl?s.nextMonth():s.prevMonth():t.rtl?s.prevMonth():s.nextMonth():h<=-.5?t.rtl?s.prevMonth():s.nextMonth():h>=.5?t.rtl?s.nextMonth():s.prevMonth():s.resetMonth(),setTimeout((function(){g=!0}),100)}function C(e){if(g){var t=a(e.target).parents(".calendar-day");if(0===t.length&&a(e.target).hasClass("calendar-day")&&(t=a(e.target)),0!==t.length&&!t.hasClass("calendar-day-disabled")){s.params.rangePicker||(t.hasClass("calendar-day-next")&&s.nextMonth(),t.hasClass("calendar-day-prev")&&s.prevMonth());var n=parseInt(t.attr("data-year"),10),r=parseInt(t.attr("data-month"),10),i=parseInt(t.attr("data-day"),10);if(s.emit("local::dayClick calendarDayClick",s,t[0],n,r,i),!t.hasClass("calendar-day-selected")||s.params.multiple||s.params.rangePicker){var o=new Date(n,r,i,0,0,0);s.hasTimePicker&&(s.value&&s.value[0]?o.setHours(s.value[0].getHours(),s.value[0].getMinutes()):o.setHours((new Date).getHours(),(new Date).getMinutes())),s.addValue(o)}s.params.closeOnSelect&&(s.params.rangePicker&&2===s.value.length||!s.params.rangePicker)&&s.close()}}}function x(){s.nextMonth()}function k(){s.prevMonth()}function E(){s.nextYear()}function S(){s.prevYear()}function T(){v.append(s.renderMonthPicker())}function M(){var e=a(this);if(e.hasClass("calendar-month-picker-item-current"))v.find(".calendar-month-picker").remove();else{v.find(".calendar-month-picker-item-current").add(e).toggleClass("calendar-month-picker-item-current");var t=e.index()-(parseInt(s.$el.find(".calendar-month-current").attr("data-locale-month"),10)-s.currentMonth);s.setYearMonth(s.currentYear,t,0),setTimeout((function(){v.find(".calendar-month-picker").remove()}),200)}}function I(){v.append(s.renderYearPicker());var e=v.find(".calendar-year-picker-item-current"),t=v.find(".calendar-year-picker");e&&e.length&&t.scrollTop(e[0].offsetTop-t[0].offsetHeight/2+e[0].offsetHeight/2)}function L(){var e=a(this);if(e.hasClass("calendar-year-picker-item-current"))v.find(".calendar-year-picker").remove();else{v.find(".calendar-year-picker-item-current").add(e).toggleClass("calendar-year-picker-item-current");var t=parseInt(e.attr("data-year"),10);s.setYearMonth(t,void 0,0),setTimeout((function(){v.find(".calendar-year-picker").remove()}),200)}}function $(){s.openTimePicker()}function P(){s.closeTimePicker()}var O=!("touchstart"!==t.touchEvents.start||!D().passiveListener)&&{passive:!0,capture:!1};v.find(".calendar-prev-month-button").on("click",k),v.find(".calendar-next-month-button").on("click",x),v.find(".calendar-prev-year-button").on("click",S),v.find(".calendar-next-year-button").on("click",E),s.params.monthPicker&&(v.find(".current-month-value").on("click",T),v.on("click",".calendar-month-picker-item",M)),s.params.yearPicker&&(v.find(".current-year-value").on("click",I),v.on("click",".calendar-year-picker-item",L)),s.hasTimePicker&&(v.find(".calendar-time-selector a").on("click",$),v.on("click",".calendar-time-picker-close",P)),b.on("click",C),s.params.touchMove&&(b.on(t.touchEvents.start,y,O),t.on("touchmove:active",_),t.on("touchend:passive",w)),s.detachCalendarEvents=function(){v.find(".calendar-prev-month-button").off("click",k),v.find(".calendar-next-month-button").off("click",x),v.find(".calendar-prev-year-button").off("click",S),v.find(".calendar-next-year-button").off("click",E),s.params.monthPicker&&(v.find(".current-month-value").off("click",T),v.off("click",".calendar-month-picker-item",M)),s.params.yearPicker&&(v.find(".current-year-value").off("click",I),v.off("click",".calendar-year-picker-item",L)),s.hasTimePicker&&(v.find(".calendar-time-selector a").off("click",$),v.off("click",".calendar-time-picker-close",P)),b.off("click",C),s.params.touchMove&&(b.off(t.touchEvents.start,y,O),t.off("touchmove:active",_),t.off("touchend:passive",w))}},s.init(),s||oi(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,si(t,n);var i,o,s=r.prototype;return s.getIntlNames=function(){for(var e,t,n,r=this.params.locale,i=[],a=[],o=[],s=[],l=new Intl.DateTimeFormat(r,{month:"long"}),c=new Intl.DateTimeFormat(r,{month:"short"}),d=new Intl.DateTimeFormat(r,{weekday:"long"}),u=new Intl.DateTimeFormat(r,{weekday:"short"}),p=0;p<24;p+=1){var h=(new Date).setMonth(p,1),f=this.yearFormatter.format(h);e&&f!==e&&(t&&(n=!0),t=!0,e=f),e||(e=f),t&&e===f&&!n&&(i.push(l.format(h)),a.push(c.format(h)))}for(var m=(new Date).getDay(),g=0;g<7;g+=1){var v=(new Date).getTime()+24*(g-m)*60*60*1e3;o.push(d.format(v)),s.push(u.format(v))}return{monthNamesIntl:i,monthNamesShortIntl:a,dayNamesIntl:o,dayNamesShortIntl:s}},s.normalizeDate=function(e){var t=new Date(e);return this.hasTimePicker?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()):new Date(t.getFullYear(),t.getMonth(),t.getDate())},s.normalizeValues=function(e){var t=this,n=[];return e&&Array.isArray(e)&&(n=e.map((function(e){return t.normalizeDate(e)}))),n},s.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},s.isPopover=function(){var e=this,t=e.app,n=e.modal,r=e.params,i=N();if("sheet"===r.openIn)return!1;if(n&&"popover"!==n.type)return!1;if(!e.inline&&e.inputEl){if("popover"===r.openIn)return!0;if(i.ios)return!!i.ipad;if(t.width>=768)return!0;if(i.desktop&&"aurora"===t.theme)return!0}return!1},s.formatDate=function(e){var t=this,n=new Date(e),r=n.getFullYear(),i=n.getMonth(),a=i+1,o=n.getDate(),s=n.getDay(),l=t.monthNames,c=t.monthNamesShort,d=t.dayNames,u=t.dayNamesShort,p=t.params,h=p.dateFormat,f=p.locale;function m(e){return e<10?"0"+e:e}if("string"==typeof h){var g={yyyy:r,yy:String(r).substring(2),mm:m(a),m:a,MM:l[i],M:c[i],dd:m(o),d:o,DD:d[s],D:u[s]};if(t.params.timePicker){var v=n.getHours(),b=n.getMinutes(),y=n.getSeconds(),_=v;v>12&&(_=v-12),0===v&&(_=12);var w=v>=12&&0!==v?"pm":"am";Object.assign(g,{HH:m(v),H:v,hh:m(_),h:_,ss:m(y),s:y,":mm":m(b),":m":b,a:w,A:w.toUpperCase()})}var C=new RegExp(Object.keys(g).map((function(e){return"("+e+")"})).join("|"),"g");return h.replace(C,(function(e){return e in g?g[e]:e}))}return"function"==typeof h?h(n):new Intl.DateTimeFormat(f,h).format(n)},s.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.map((function(t){return e.formatDate(t)})).join(e.params.rangePicker?" - ":", ")},s.addValue=function(e){var t=this,n=t.params,r=n.multiple,i=n.rangePicker,a=n.rangePickerMinDays,o=n.rangePickerMaxDays;if(r){var s;t.value||(t.value=[]);for(var l=0;l<t.value.length;l+=1)new Date(e).getTime()===new Date(t.value[l]).getTime()&&(s=l);void 0===s?t.value.push(e):t.value.splice(s,1),t.updateValue()}else i?(t.value||(t.value=[]),2!==t.value.length&&0!==t.value.length||(t.value=[]),0===t.value.length||Math.abs(t.value[0].getTime()-e.getTime())>=60*(a-1)*60*24*1e3&&(0===o||Math.abs(t.value[0].getTime()-e.getTime())<=60*(o-1)*60*24*1e3)?t.value.push(e):t.value=[],t.value.sort((function(e,t){return e-t})),t.updateValue()):(t.value=[e],t.updateValue())},s.setValue=function(e){var t=this,n=t.value;if(Array.isArray(n)&&Array.isArray(e)&&n.length===e.length){var r=!0;if(n.forEach((function(t,n){t!==e[n]&&(r=!1)})),r)return}t.value=e,t.updateValue()},s.getValue=function(){return this.value},s.updateValue=function(e){var t,n,r=this,i=r.$el,a=r.$wrapperEl,o=r.$inputEl,s=r.value,l=r.params;if(i&&i.length>0)if(a.find(".calendar-day-selected").removeClass("calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right"),l.rangePicker&&2===s.length){var c=new Date(s[0]).getTime(),d=new Date(s[1]).getTime();for(t=c;t<=d;t+=864e5){n=new Date(t);var u="calendar-day-selected";c!==d&&(t!==c&&t!==d&&(u+=" calendar-day-selected-range"),t===c&&(u+=" calendar-day-selected-left"),t===d&&(u+=" calendar-day-selected-right")),a.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass(u)}n=new Date(c),a.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-left"),n=new Date(d),a.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-right")}else for(t=0;t<r.value.length;t+=1)n=new Date(s[t]),a.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass("calendar-day-selected");if(e||r.emit("local::change calendarChange",r,s),i&&i.length>0&&r.hasTimePicker&&i.find(".calendar-time-selector a").text(s&&s.length?r.timeSelectorFormatter.format(s[0]):r.params.timePickerPlaceholder),o&&o.length||l.header){var p=r.formatValue(s);l.header&&i&&i.length&&i.find(".calendar-selected-date").text(p),o&&o.length&&!e&&(o.val(p),o.trigger("change"))}},s.updateCurrentMonthYear=function(e){var t,n,r=this,i=r.$months,a=r.$el,o=r.monthNames;void 0===e?(r.currentMonth=parseInt(i.eq(1).attr("data-month"),10),r.currentYear=parseInt(i.eq(1).attr("data-year"),10),t=i.eq(1).attr("data-locale-month"),n=i.eq(1).attr("data-locale-year")):(r.currentMonth=parseInt(i.eq("next"===e?i.length-1:0).attr("data-month"),10),r.currentYear=parseInt(i.eq("next"===e?i.length-1:0).attr("data-year"),10),t=i.eq("next"===e?i.length-1:0).attr("data-locale-month"),n=i.eq("next"===e?i.length-1:0).attr("data-locale-year")),a.find(".current-month-value").text(o[t]),a.find(".current-year-value").text(n)},s.update=function(){var e=this,t=e.currentYear,n=e.currentMonth,r=e.$wrapperEl,i=new Date(t,n),a=e.renderMonth(i,"prev"),o=e.renderMonth(i),s=e.renderMonth(i,"next");r.transition(0).html(""+a+o+s).transform("translate3d(0,0,0)"),e.$months=r.find(".calendar-month"),e.monthsTranslate=0,e.setMonthsTranslate(),e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)}))},s.onMonthChangeStart=function(e){var t=this,n=t.$months,r=t.currentYear,i=t.currentMonth;t.updateCurrentMonthYear(e),n.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var a="next"===e?n.length-1:0;n.eq(a).addClass("calendar-month-current"),n.eq("next"===e?a-1:a+1).addClass("next"===e?"calendar-month-prev":"calendar-month-next"),t.emit("local::monthYearChangeStart calendarMonthYearChangeStart",t,r,i)},s.onMonthChangeEnd=function(e,t){var n,r,i,a=this,o=a.currentYear,s=a.currentMonth,l=a.$wrapperEl,c=a.monthsTranslate;a.animating=!1,l.find(".calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)").remove(),void 0===e&&(e="next",t=!0),t?(l.find(".calendar-month-next, .calendar-month-prev").remove(),r=a.renderMonth(new Date(o,s),"prev"),n=a.renderMonth(new Date(o,s),"next")):i=a.renderMonth(new Date(o,s),e),("next"===e||t)&&l.append(i||n),("prev"===e||t)&&l.prepend(i||r);var d=l.find(".calendar-month");a.$months=d,a.setMonthsTranslate(c),a.emit("local::monthAdd calendarMonthAdd",a,"next"===e?d.eq(d.length-1)[0]:d.eq(0)[0]),a.emit("local::monthYearChangeEnd calendarMonthYearChangeEnd",a,o,s)},s.setMonthsTranslate=function(e){var t=this,n=t.$months,r=t.isHorizontal,i=t.inverter;e=e||t.monthsTranslate||0,void 0===t.monthsTranslate&&(t.monthsTranslate=e),n.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var a=100*-(e+1)*i,o=100*-e*i,s=100*-(e-1)*i;n.eq(0).transform("translate3d("+(r?a:0)+"%, "+(r?0:a)+"%, 0)").addClass("calendar-month-prev"),n.eq(1).transform("translate3d("+(r?o:0)+"%, "+(r?0:o)+"%, 0)").addClass("calendar-month-current"),n.eq(2).transform("translate3d("+(r?s:0)+"%, "+(r?0:s)+"%, 0)").addClass("calendar-month-next")},s.nextMonth=function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.inverter,o=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",n.animate||(e=0));var s=parseInt(t.$months.eq(t.$months.length-1).attr("data-month"),10),l=parseInt(t.$months.eq(t.$months.length-1).attr("data-year"),10),c=new Date(l,s).getTime(),d=!t.animating;if(n.maxDate&&c>new Date(n.maxDate).getTime())t.resetMonth();else{if(t.monthsTranslate-=1,s===t.currentMonth){var u=100*-t.monthsTranslate*i,p=a(t.renderMonth(c,"next")).transform("translate3d("+(o?u:0)+"%, "+(o?0:u)+"%, 0)").addClass("calendar-month-next");r.append(p[0]),t.$months=r.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(t.$months.length-1)[0])}t.animating=!0,t.onMonthChangeStart("next");var h=100*t.monthsTranslate*i;r.transition(e).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)"),d&&r.transitionEnd((function(){t.onMonthChangeEnd("next")})),n.animate||t.onMonthChangeEnd("next")}},s.prevMonth=function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.inverter,o=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",n.animate||(e=0));var s=parseInt(t.$months.eq(0).attr("data-month"),10),l=parseInt(t.$months.eq(0).attr("data-year"),10),c=new Date(l,s+1,-1).getTime(),d=!t.animating;if(n.minDate){var u=new Date(n.minDate);if(c<(u=new Date(u.getFullYear(),u.getMonth(),1)).getTime())return void t.resetMonth()}if(t.monthsTranslate+=1,s===t.currentMonth){var p=100*-t.monthsTranslate*i,h=a(t.renderMonth(c,"prev")).transform("translate3d("+(o?p:0)+"%, "+(o?0:p)+"%, 0)").addClass("calendar-month-prev");r.prepend(h[0]),t.$months=r.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(0)[0])}t.animating=!0,t.onMonthChangeStart("prev");var f=100*t.monthsTranslate*i;r.transition(e).transform("translate3d("+(o?f:0)+"%, "+(o?0:f)+"%, 0)"),d&&r.transitionEnd((function(){t.onMonthChangeEnd("prev")})),n.animate||t.onMonthChangeEnd("prev")},s.resetMonth=function(e){void 0===e&&(e="");var t=this,n=t.$wrapperEl,r=t.inverter,i=t.isHorizontal,a=100*t.monthsTranslate*r;n.transition(e).transform("translate3d("+(i?a:0)+"%, "+(i?0:a)+"%, 0)")},s.setYearMonth=function(e,t,n){var r,i=this,a=i.params,o=i.isHorizontal,s=i.$wrapperEl,l=i.inverter;if(void 0===e&&(e=i.currentYear),void 0===t&&(t=i.currentMonth),void 0!==n&&"object"!=typeof n||(n="",a.animate||(n=0)),r=e<i.currentYear?new Date(e,t+1,-1).getTime():new Date(e,t).getTime(),a.maxDate&&r>new Date(a.maxDate).getTime())return!1;if(a.minDate){var c=new Date(a.minDate);if(r<(c=new Date(c.getFullYear(),c.getMonth(),1)).getTime())return!1}var d=new Date(i.currentYear,i.currentMonth).getTime(),u=r>d?"next":"prev",p=i.renderMonth(new Date(e,t));i.monthsTranslate=i.monthsTranslate||0;var h,f=i.monthsTranslate,m=!i.animating&&0!==n;r>d?(i.monthsTranslate-=1,i.animating||i.$months.eq(i.$months.length-1).remove(),s.append(p),i.$months=s.find(".calendar-month"),h=100*-(f-1)*l,i.$months.eq(i.$months.length-1).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)").addClass("calendar-month-next")):(i.monthsTranslate+=1,i.animating||i.$months.eq(0).remove(),s.prepend(p),i.$months=s.find(".calendar-month"),h=100*-(f+1)*l,i.$months.eq(0).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)").addClass("calendar-month-prev")),i.emit("local::monthAdd calendarMonthAdd","next"===u?i.$months.eq(i.$months.length-1)[0]:i.$months.eq(0)[0]),i.animating=!0,i.onMonthChangeStart(u);var g=100*i.monthsTranslate*l;s.transition(n).transform("translate3d("+(o?g:0)+"%, "+(o?0:g)+"%, 0)"),m&&s.transitionEnd((function(){i.onMonthChangeEnd(u,!0)})),a.animate&&0!==n||i.onMonthChangeEnd(u,!0)},s.nextYear=function(){this.setYearMonth(this.currentYear+1)},s.prevYear=function(){this.setYearMonth(this.currentYear-1)},s.dateInRange=function(e,t){var n,r=!1;if(!t)return!1;if(Array.isArray(t))for(n=0;n<t.length;n+=1)t[n].from||t[n].to?t[n].from&&t[n].to?e<=new Date(t[n].to).getTime()&&e>=new Date(t[n].from).getTime()&&(r=!0):t[n].from?e>=new Date(t[n].from).getTime()&&(r=!0):t[n].to&&e<=new Date(t[n].to).getTime()&&(r=!0):t[n].date?e===new Date(t[n].date).getTime()&&(r=!0):e===new Date(t[n]).getTime()&&(r=!0);else t.from||t.to?t.from&&t.to?e<=new Date(t.to).getTime()&&e>=new Date(t.from).getTime()&&(r=!0):t.from?e>=new Date(t.from).getTime()&&(r=!0):t.to&&e<=new Date(t.to).getTime()&&(r=!0):t.date?r=e===new Date(t.date).getTime():"function"==typeof t&&(r=t(new Date(e)));return r},s.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},s.renderMonths=function(e){var t=this;return t.params.renderMonths?t.params.renderMonths.call(t,e):mn("div",{class:"calendar-months-wrapper"},t.renderMonth(e,"prev"),t.renderMonth(e),t.renderMonth(e,"next"))},s.renderMonth=function(e,t){var n=this,r=n.params,i=n.value;if(r.renderMonth)return r.renderMonth.call(n,e,t);var a=new Date(e),o=a.getFullYear(),s=a.getMonth(),l=n.monthNames.indexOf(n.monthFormatter.format(a));l<0&&(l=s);var c=n.yearFormatter.format(a);"next"===t&&(a=11===s?new Date(o+1,0):new Date(o,s+1,1)),"prev"===t&&(a=0===s?new Date(o-1,11):new Date(o,s-1,1)),"next"!==t&&"prev"!==t||(s=a.getMonth(),o=a.getFullYear(),(l=n.monthNames.indexOf(n.monthFormatter.format(a)))<0&&(l=s),c=n.yearFormatter.format(a));var d,u,p=[],h=(new Date).setHours(0,0,0,0),f=r.minDate?new Date(r.minDate).getTime():null,m=r.maxDate?new Date(r.maxDate).getTime():null,g=n.daysInMonth(new Date(a.getFullYear(),a.getMonth()).getTime()-864e6),v=n.daysInMonth(a),b=6===r.firstDay?0:1,y="",_=r.firstDay-1+0,w=new Date(a.getFullYear(),a.getMonth()).getDay();if(0===w&&(w=7),i&&i.length)for(var C=0;C<i.length;C+=1)p.push(new Date(i[C]).setHours(0,0,0,0));for(var x=1;x<=6;x+=1){for(var k="",E=function(e){var t=void 0,i=(_+=1)-w,a="";1===x&&1===e&&i>b&&1!==r.firstDay&&(i=(_-=7)-w);var l=e-1+r.firstDay>6?e-1-7+r.firstDay:e-1+r.firstDay;i<0?(i=g+i+1,a+=" calendar-day-prev",t=new Date(s-1<0?o-1:o,s-1<0?11:s-1,i).getTime()):(i+=1)>v?(i-=v,a+=" calendar-day-next",t=new Date(s+1>11?o+1:o,s+1>11?0:s+1,i).getTime()):t=new Date(o,s,i).getTime(),t===h&&(a+=" calendar-day-today"),r.rangePicker&&2===p.length?(t>=p[0]&&t<=p[1]&&(a+=" calendar-day-selected"),p[0]!==p[1]&&(t>p[0]&&t<p[1]&&(a+=" calendar-day-selected-range"),t===p[0]&&(a+=" calendar-day-selected-left"),t===p[1]&&(a+=" calendar-day-selected-right"))):p.indexOf(t)>=0&&(a+=" calendar-day-selected"),r.weekendDays.indexOf(l)>=0&&(a+=" calendar-day-weekend");var c="";if(u=!1,r.events&&n.dateInRange(t,r.events)&&(u=!0),u&&(a+=" calendar-day-has-events",c='\n            <span class="calendar-day-events">\n              <span class="calendar-day-event"></span>\n            </span>\n          ',Array.isArray(r.events))){var y=[];r.events.forEach((function(e){var r=e.color||"";y.indexOf(r)<0&&n.dateInRange(t,e)&&y.push(r)})),c='\n              <span class="calendar-day-events">\n                '+y.map((function(e){return('\n                  <span class="calendar-day-event" style="'+(e?"background-color: "+e:"")+'"></span>\n                ').trim()})).join("")+"\n              </span>\n            "}if(r.rangesClasses)for(var C=0;C<r.rangesClasses.length;C+=1)n.dateInRange(t,r.rangesClasses[C].range)&&(a+=" "+r.rangesClasses[C].cssClass);d=!1,(f&&t<f||m&&t>m)&&(d=!0),r.disabled&&n.dateInRange(t,r.disabled)&&(d=!0),d&&(a+=" calendar-day-disabled");var E=(t=new Date(t)).getFullYear(),S=t.getMonth(),T=n.dayFormatter.format(t);k+=('\n          <div data-year="'+E+'" data-month="'+S+'" data-day="'+i+'" class="calendar-day'+a+'" data-date="'+E+"-"+S+"-"+i+'">\n            <span class="calendar-day-number">'+T+c+"</span>\n          </div>").trim()},S=1;S<=7;S+=1)E(S);y+='<div class="calendar-row">'+k+"</div>"}return'<div class="calendar-month" data-year="'+o+'" data-month="'+s+'" data-locale-year="'+c+'" data-locale-month="'+l+'">'+y+"</div>"},s.renderWeekHeader=function(){var e=this;if(e.params.renderWeekHeader)return e.params.renderWeekHeader.call(e);for(var t=e.params,n="",r=0;r<7;r+=1){var i=r+t.firstDay>6?r-7+t.firstDay:r+t.firstDay;n+='<div class="calendar-week-day">'+e.dayNamesShort[i]+"</div>"}return mn("div",{class:"calendar-week-header"},n)},s.renderMonthSelector=function(){var e=this;return e.params.renderMonthSelector?e.params.renderMonthSelector.call(e):mn("div",{class:"calendar-month-selector"},mn("a",{class:"link icon-only calendar-prev-month-button"},mn("i",{class:"icon icon-prev"})),e.params.monthPicker?mn("a",{class:"current-month-value link"}):mn("span",{class:"current-month-value"}),mn("a",{class:"link icon-only calendar-next-month-button"},mn("i",{class:"icon icon-next"})))},s.renderMonthPicker=function(){var e=parseInt(this.$el.find(".calendar-month-current").attr("data-locale-month"),10);return mn("div",{class:"calendar-month-picker"},this.monthNames.map((function(t,n){return mn("div",{class:"calendar-month-picker-item "+(e===n?"calendar-month-picker-item-current":"")},mn("span",null,t))})))},s.renderYearSelector=function(){var e=this;return e.params.renderYearSelector?e.params.renderYearSelector.call(e):mn("div",{class:"calendar-year-selector"},mn("a",{class:"link icon-only calendar-prev-year-button"},mn("i",{class:"icon icon-prev"})),e.params.yearPicker?mn("a",{class:"current-year-value link"}):mn("span",{class:"current-year-value"}),mn("a",{class:"link icon-only calendar-next-year-button"},mn("i",{class:"icon icon-next"})))},s.renderYearPicker=function(){var e=this,t=e.currentYear,n=e.params.yearPickerMin||(new Date).getFullYear()-100;e.params.minDate&&(n=Math.max(n,new Date(e.params.minDate).getFullYear()));var r=e.params.yearPickerMax||(new Date).getFullYear()+100;e.params.maxDate&&(r=Math.min(r,new Date(e.params.maxDate).getFullYear()));for(var i=[],a=n;a<=r;a+=1)i.push(a);return mn("div",{class:"calendar-year-picker"},i.map((function(n){return mn("div",{"data-year":n,class:"calendar-year-picker-item "+(n===t?"calendar-year-picker-item-current":"")},mn("span",null,e.yearFormatter.format((new Date).setFullYear(n))))})))},s.renderTimeSelector=function(){var e,t=this,n=t.value&&t.value[0];return n&&(e=t.timeSelectorFormatter.format(n)),mn("div",{class:"calendar-time-selector"},mn("a",{class:"link"},e||t.params.timePickerPlaceholder))},s.renderHeader=function(){var e=this;return e.params.renderHeader?e.params.renderHeader.call(e):mn("div",{class:"calendar-header"},mn("div",{class:"calendar-selected-date"},e.params.headerPlaceholder))},s.renderFooter=function(){var e=this,t=e.app;return e.params.renderFooter?e.params.renderFooter.call(e):mn("div",{class:"calendar-footer"},mn("a",{class:("md"===t.theme?"button":"link")+" calendar-close sheet-close popover-close"},e.params.toolbarCloseText))},s.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):mn("div",{class:"toolbar toolbar-top no-shadow"},mn("div",{class:"toolbar-inner"},e.params.monthSelector?e.renderMonthSelector():"",e.params.yearSelector?e.renderYearSelector():""))},s.renderInline=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,i=t.header,a=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,d=l&&l.length?l[0]:(new Date).setHours(0,0,0);return mn("div",{class:"calendar calendar-inline "+(o?"calendar-range":"")+" "+(n||"")},i&&e.renderHeader(),r&&e.renderToolbar(),s&&e.renderWeekHeader(),mn("div",{class:"calendar-months"},e.renderMonths(d)),c&&e.renderTimeSelector(),a&&e.renderFooter())},s.renderCustomModal=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,i=t.header,a=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,d=l&&l.length?l[0]:(new Date).setHours(0,0,0);return mn("div",{class:"calendar calendar-modal "+(o?"calendar-range":"")+" "+(n||"")},i&&e.renderHeader(),r&&e.renderToolbar(),s&&e.renderWeekHeader(),mn("div",{class:"calendar-months"},e.renderMonths(d)),c&&e.renderTimeSelector(),a&&e.renderFooter())},s.renderSheet=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,i=t.header,a=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,d=l&&l.length?l[0]:(new Date).setHours(0,0,0);return mn("div",{class:"sheet-modal calendar calendar-sheet "+(o?"calendar-range":"")+" "+(n||"")},i&&e.renderHeader(),r&&e.renderToolbar(),s&&e.renderWeekHeader(),mn("div",{class:"sheet-modal-inner calendar-months"},e.renderMonths(d)),c&&e.renderTimeSelector(),a&&e.renderFooter())},s.renderPopover=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,i=t.header,a=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,d=l&&l.length?l[0]:(new Date).setHours(0,0,0);return mn("div",{class:"popover calendar-popover"},mn("div",{class:"popover-inner"},mn("div",{class:"calendar "+(o?"calendar-range":"")+" "+(n||"")},i&&e.renderHeader(),r&&e.renderToolbar(),s&&e.renderWeekHeader(),mn("div",{class:"calendar-months"},e.renderMonths(d)),c&&e.renderTimeSelector(),a&&e.renderFooter())))},s.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(!e.inline){var n=t.openIn;return"auto"===n&&(n=e.isPopover()?"popover":"sheet"),"popover"===n?e.renderPopover():"sheet"===n?e.renderSheet():e.renderCustomModal()}return e.renderInline()},s.openTimePicker=function(){var e=this,t=e.$el,n=e.app,r=e.is12HoursFormat;if(t&&t.length){t.append('<div class="calendar-time-picker"></div>');for(var i,a=[],o=[],s=r?12:23,l=r?1:0;l<=s;l+=1)a.push(l);for(var c=0;c<=59;c+=1)o.push(c);i=e.value&&e.value.length?[e.value[0].getHours(),e.value[0].getMinutes()]:[(new Date).getHours(),(new Date).getMinutes()],r&&(i.push(i[0]<12?"AM":"PM"),i[0]>12&&(i[0]-=12),0===i[0]&&(i[0]=12)),e.timePickerInstance=n.picker.create({containerEl:t.find(".calendar-time-picker"),value:i,toolbar:!0,rotateEffect:!1,toolbarCloseText:e.params.toolbarCloseText,cols:[{values:a},{divider:!0,content:":"},{values:o,displayValues:o.map((function(e){return e<10?"0"+e:e}))}].concat(r?[{values:["AM","PM"]}]:[])}),e.timePickerInstance.$el.find(".toolbar a").removeClass("sheet-close popover-close").addClass("calendar-time-picker-close")}},s.closeTimePicker=function(){var e=this,t=e.is12HoursFormat;if(e.timePickerInstance){var n=e.timePickerInstance.value,r=parseInt(n[0],10),i=parseInt(n[1],10),a=e.timePickerInstance.value[2];t&&("AM"===a&&12===r?r=0:"PM"===a&&12!==r&&(r+=12));var o=e.value&&e.value.length&&e.value[0];o?(o=new Date(o)).setHours(r,i):(o=new Date).setHours(r,i,0,0),e.setValue([o]),e.timePickerInstance.close(),e.timePickerInstance.destroy(),delete e.timePickerInstance}e.$el&&e.$el.length&&e.$el.find(".calendar-time-picker").remove()},s.onOpen=function(){var e=this,t=e.initialized,n=e.$el,r=e.app,i=e.$inputEl,a=e.inline,o=e.value,s=e.params;e.closing=!1,e.opened=!0,e.opening=!0,e.attachCalendarEvents();var l=!o&&s.value;t?o&&e.setValue(o,0):o?e.setValue(o,0):s.value&&e.setValue(e.normalizeValues(s.value),0),e.updateCurrentMonthYear(),e.monthsTranslate=0,e.setMonthsTranslate(),l?e.updateValue():s.header&&o&&e.updateValue(!0),!a&&i&&i.length&&"md"===r.theme&&i.trigger("focus"),e.initialized=!0,e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)})),n&&n.trigger("calendar:open"),i&&i.trigger("calendar:open"),e.emit("local::open calendarOpen",e)},s.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("calendar:opened"),e.$inputEl&&e.$inputEl.trigger("calendar:opened"),e.emit("local::opened calendarOpened",e)},s.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var n=e.$inputEl.attr("validate"),r=e.$inputEl.attr("required");n&&r&&t.input.validate(e.$inputEl)}e.detachCalendarEvents&&e.detachCalendarEvents(),e.$el&&e.$el.trigger("calendar:close"),e.$inputEl&&e.$inputEl.trigger("calendar:close"),e.emit("local::close calendarClose",e)},s.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||y((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),e.$el&&e.$el.trigger("calendar:closed"),e.$inputEl&&e.$inputEl.trigger("calendar:closed"),e.emit("local::closed calendarClosed",e)},s.open=function(){var e=this,t=e.app,n=e.opened,r=e.inline,i=e.$inputEl,o=e.params;if(!n){if(r)return e.$el=a(e.render()),e.$el[0].f7Calendar=e,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var s=o.openIn;"auto"===s&&(s=e.isPopover()?"popover":"sheet");var l,c=e.render(),d={targetEl:i,scrollToEl:o.scrollToInput?i:void 0,content:c,backdrop:!0===o.backdrop||"popover"===s&&!1!==t.params.popover.backdrop&&!1!==o.backdrop,closeByBackdropClick:o.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===s?t.$el.find(".calendar"):t.$el,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$el[0].f7Calendar=e,"customModal"===s&&a(e.$el).find(".calendar-close").once("click",(function(){e.close()})),e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};"sheet"===s&&(d.push=o.sheetPush,d.swipeToClose=o.sheetSwipeToClose),o.routableModals&&e.view?e.view.router.navigate({url:e.url,route:(l={path:e.url},l[s]=d,l)}):(e.modal=t[s].create(d),e.modal.open())}},s.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},s.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init calendarInit",e);!e.initialized&&e.params.value&&e.setValue(e.normalizeValues(e.params.value)),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init calendarInit",e)},s.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy calendarBeforeDestroy",e),t&&t.trigger("calendar:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),t&&t.length&&delete e.$el[0].f7Calendar,g(e),e.destroyed=!0}},i=r,o=[{key:"view",get:function(){var e,t=this.$inputEl,n=this.app,r=this.params;return r.view?e=r.view:t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),e||(e=n.views.main),e}}],o&&ai(i.prototype,o),r}(W);const ci=li,di={name:"calendar",static:{Calendar:ci},create:function(){var e=this;e.calendar=q({defaultSelector:".calendar",constructor:ci,app:e,domProp:"f7Calendar"}),e.calendar.close=function(e){void 0===e&&(e=".calendar");var t=a(e);if(0!==t.length){var n=t[0].f7Calendar;!n||n&&!n.opened||n.close()}}},params:{calendar:{dateFormat:void 0,monthNames:"auto",monthNamesShort:"auto",dayNames:"auto",dayNamesShort:"auto",locale:void 0,firstDay:1,weekendDays:[0,6],multiple:!1,rangePicker:!1,rangePickerMinDays:1,rangePickerMaxDays:0,direction:"horizontal",minDate:null,maxDate:null,disabled:null,events:null,rangesClasses:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthSelector:!0,monthPicker:!0,yearSelector:!0,yearPicker:!0,yearPickerMin:void 0,yearPickerMax:void 0,timePicker:!1,timePickerFormat:{hour:"numeric",minute:"numeric"},timePickerPlaceholder:"Select time",weekHeader:!0,value:null,containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,header:!1,headerPlaceholder:"Select date",toolbar:!0,toolbarCloseText:"Done",footer:!1,cssClass:null,routableModals:!1,view:null,url:"date/",backdrop:null,closeByBackdropClick:!0,renderWeekHeader:null,renderMonths:null,renderMonth:null,renderMonthSelector:null,renderYearSelector:null,renderHeader:null,renderFooter:null,renderToolbar:null,renderInline:null,renderPopover:null,renderSheet:null,render:null}}};function ui(e,t){var n=this,r=n.app,i=a(e),o=i.index(),s=n.cols[o];if(!s.divider){var l,c,d,u,p;s.$el=i,s.el=i[0],s.$itemsEl=s.$el.find(".picker-items"),s.items=s.$itemsEl.find(".picker-item"),s.replaceValues=function(e,t){s.detachEvents(),s.values=e,s.displayValues=t,s.$itemsEl.html(n.renderColumn(s,!0)),s.items=s.$itemsEl.find(".picker-item"),s.calcSize(),s.setValue(s.values[0],0,!0),s.attachEvents()},s.calcSize=function(){n.params.rotateEffect&&(s.$el.removeClass("picker-column-absolute"),s.width||s.$el.css({width:""}));var e=0,t=s.$el[0].offsetHeight;l=s.items[0].offsetHeight,c=l*s.items.length,d=t/2-c+l/2,u=t/2-l/2,s.width&&(e=s.width,parseInt(e,10)===e&&(e+="px"),s.$el.css({width:e})),n.params.rotateEffect&&(s.width||(s.items.each((function(t){var n=a(t).children("span");e=Math.max(e,n[0].offsetWidth)})),s.$el.css({width:e+2+"px"})),s.$el.addClass("picker-column-absolute"))},s.setValue=function(e,t,r){void 0===t&&(t="");var i=s.$itemsEl.find('.picker-item[data-picker-value="'+e+'"]').index();if(void 0!==i&&-1!==i){var a=-i*l+u;s.$itemsEl.transition(t),s.$itemsEl.transform("translate3d(0,"+a+"px,0)"),n.params.updateValuesOnMomentum&&s.activeIndex&&s.activeIndex!==i&&(cancelAnimationFrame(p),s.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)})),M()),s.updateItems(i,a,t,r)}},s.updateItems=function(e,t,r,i){void 0===t&&(t=x(s.$itemsEl[0],"y")),void 0===e&&(e=-Math.round((t-u)/l)),e<0&&(e=0),e>=s.items.length&&(e=s.items.length-1);var o=s.activeIndex;s.activeIndex=e,s.$itemsEl.find(".picker-item-selected").removeClass("picker-item-selected"),s.items.transition(r);var c=s.items.eq(e).addClass("picker-item-selected").transform("");n.params.rotateEffect&&s.items.each((function(e){var r=a(e),i=(r.index()*l-(u-t))/l,o=Math.ceil(s.height/l/2)+1,c=-18*i;c>180&&(c=180),c<-180&&(c=-180),Math.abs(i)>o?r.addClass("picker-item-far"):r.removeClass("picker-item-far"),r.transform("translate3d(0, "+(-t+u)+"px, "+(n.needsOriginFix?-110:0)+"px) rotateX("+c+"deg)")})),(i||void 0===i)&&(s.value=c.attr("data-picker-value"),s.displayValue=s.displayValues?s.displayValues[e]:s.value,o!==e&&(s.onChange&&s.onChange(n,s.value,s.displayValue),n.updateValue()))};var h,f,m,g,b,y,_,w,C,k,E,S=!0,T=!!D().passiveListener&&{passive:!1,capture:!1};s.attachEvents=function(){s.$el.on(r.touchEvents.start,I,T),r.on("touchmove:active",L),r.on("touchend:passive",$),n.params.mousewheel&&s.$el.on("wheel",P),s.items.on("click",O)},s.detachEvents=function(){s.$el.off(r.touchEvents.start,I,T),r.off("touchmove:active",L),r.off("touchend:passive",$),n.params.mousewheel&&s.$el.off("wheel",P),s.items.off("click",O)},s.init=function(){s.calcSize(),s.$itemsEl.transform("translate3d(0,"+u+"px,0)").transition(0),0===o&&s.$el.addClass("picker-column-first"),o===n.cols.length-1&&s.$el.addClass("picker-column-last"),t&&s.updateItems(0,u,0),s.attachEvents()},s.destroy=function(){s.detachEvents()},s.init()}function M(){p=v((function(){s.updateItems(void 0,void 0,0),M()}))}function I(e){f||h||(e.preventDefault(),h=!0,m="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,g=m,b=(new Date).getTime(),S=!0,y=x(s.$itemsEl[0],"y"),w=y)}function L(e){h&&(e.preventDefault(),S=!1,g="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,f||(cancelAnimationFrame(p),f=!0,y=x(s.$itemsEl[0],"y"),w=y,s.$itemsEl.transition(0)),_=void 0,(w=y+(g-m))<d&&(w=d-Math.pow(d-w,.8),_="min"),w>u&&(w=u+Math.pow(w-u,.8),_="max"),s.$itemsEl.transform("translate3d(0,"+w+"px,0)"),s.updateItems(void 0,w,0,n.params.updateValuesOnTouchmove),k=w-C||w,C=w)}function $(){if(!h||!f)return h=!1,void(f=!1);var e;h=!1,f=!1,s.$itemsEl.transition(""),_&&("min"===_?s.$itemsEl.transform("translate3d(0,"+d+"px,0)"):s.$itemsEl.transform("translate3d(0,"+u+"px,0)")),e=(new Date).getTime()-b>300?w:w+k*n.params.momentumRatio,e=Math.max(Math.min(e,u),d);var t=Math.round(Math.abs((e-u)/l));n.params.freeMode||(e=-t*l+u),s.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),s.updateItems(t,e,"",!0),n.params.updateValuesOnMomentum&&(M(),s.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)}))),setTimeout((function(){S=!0}),100)}function P(e){var t=e.deltaX,r=e.deltaY;Math.abs(t)>Math.abs(r)||(clearTimeout(E),e.preventDefault(),cancelAnimationFrame(p),y=x(s.$itemsEl[0],"y"),s.$itemsEl.transition(0),_=void 0,(w=y-r)<d&&(w=d,_="min"),w>u&&(w=u,_="max"),s.$itemsEl.transform("translate3d(0,"+w+"px,0)"),s.updateItems(void 0,w,0,n.params.updateValuesOnMousewheel),E=setTimeout((function(){s.$itemsEl.transition(""),_&&("min"===_?s.$itemsEl.transform("translate3d(0,"+d+"px,0)"):s.$itemsEl.transform("translate3d(0,"+u+"px,0)")),(new Date).getTime();var e=w;e=Math.max(Math.min(e,u),d);var t=Math.round(Math.abs((e-u)/l));n.params.freeMode||(e=-t*l+u),s.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),s.updateItems(t,e,"",!0)}),200))}function O(){if(S){cancelAnimationFrame(p);var e=a(this).attr("data-picker-value");s.setValue(e)}}}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fi(e,t){return fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fi(e,t)}var mi=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i,s,l=hi(r=e.call(this,n,[t])||this),c=N(),d=(0,o.Jj)();if(l.params=T({},t.params.picker,n),l.params.containerEl&&0===(i=a(l.params.containerEl)).length)return l||hi(r);l.params.inputEl&&(s=a(l.params.inputEl));var u=l.params.scrollToInput?s:void 0;if(l.params.scrollToEl){var p=a(l.params.scrollToEl);p.length>0&&(u=p)}function h(){l.resizeCols()}function f(){l.open()}function m(e){e.preventDefault()}T(l,{app:t,$containerEl:i,containerEl:i&&i[0],inline:i&&i.length>0,needsOriginFix:c.ios||d.navigator.userAgent.toLowerCase().indexOf("safari")>=0&&d.navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!c.android,cols:[],$inputEl:s,inputEl:s&&s[0],$scrollToEl:u,initialized:!1,opened:!1,url:l.params.url});var g=null;function v(e){g=e.target}function b(e){if(!l.destroyed&&l.params){var t=a(e.target);l.isPopover()||l.opened&&!l.closing&&(t.closest('[class*="backdrop"]').length||(s&&s.length>0?g===e.target&&t[0]!==s[0]&&0===t.closest(".sheet-modal").length&&l.close():0===a(e.target).closest(".sheet-modal").length&&l.close()))}}return T(l,{attachResizeEvent:function(){t.on("resize",h)},detachResizeEvent:function(){t.off("resize",h)},attachInputEvents:function(){l.$inputEl.on("click",f),l.params.inputReadOnly&&(l.$inputEl.on("focus mousedown",m),l.$inputEl[0]&&(l.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){l.$inputEl.off("click",f),l.params.inputReadOnly&&(l.$inputEl.off("focus mousedown",m),l.$inputEl[0]&&delete l.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",b),t.on("touchstart",v)},detachHtmlEvents:function(){t.off("click",b),t.off("touchstart",v)}}),l.init(),l||hi(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,fi(t,n);var i,s,l=r.prototype;return l.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},l.resizeCols=function(){var e=this;if(e.opened)for(var t=0;t<e.cols.length;t+=1)e.cols[t].divider||(e.cols[t].calcSize(),e.cols[t].setValue(e.cols[t].value,0,!1))},l.isPopover=function(){var e=this,t=e.app,n=e.modal,r=e.params,i=N();if("sheet"===r.openIn)return!1;if(n&&"popover"!==n.type)return!1;if(!e.inline&&e.inputEl){if("popover"===r.openIn)return!0;if(i.ios)return!!i.ipad;if(t.width>=768)return!0;if(i.desktop&&"aurora"===t.theme)return!0}return!1},l.formatValue=function(){var e=this,t=e.value,n=e.displayValue;return e.params.formatValue?e.params.formatValue.call(e,t,n):t.join(" ")},l.setValue=function(e,t){var n=this,r=0;if(0===n.cols.length)return n.value=e,void n.updateValue(e);for(var i=0;i<n.cols.length;i+=1)n.cols[i]&&!n.cols[i].divider&&(n.cols[i].setValue(e[r],t),r+=1)},l.getValue=function(){return this.value},l.updateValue=function(e){var t,n=this,r=e||[],i=[];if(0===n.cols.length)for(var a=n.params.cols.filter((function(e){return!e.divider})),o=0;o<a.length;o+=1)void 0!==(t=a[o]).displayValues&&void 0!==t.values&&-1!==t.values.indexOf(r[o])?i.push(t.displayValues[t.values.indexOf(r[o])]):i.push(r[o]);else for(var s=0;s<n.cols.length;s+=1)n.cols[s].divider||(r.push(n.cols[s].value),i.push(n.cols[s].displayValue));r.indexOf(void 0)>=0||(n.value=r,n.displayValue=i,n.emit("local::change pickerChange",n,n.value,n.displayValue),n.inputEl&&(n.$inputEl.val(n.formatValue()),n.$inputEl.trigger("change")))},l.initColumn=function(e,t){ui.call(this,e,t)},l.destroyColumn=function(e){var t=this,n=a(e).index();t.cols[n]&&t.cols[n].destroy&&t.cols[n].destroy()},l.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):mn("div",{class:"toolbar toolbar-top no-shadow"},mn("div",{class:"toolbar-inner"},mn("div",{class:"left"}),mn("div",{class:"right"},mn("a",{class:"link sheet-close popover-close"},e.params.toolbarCloseText))))},l.renderColumn=function(e,t){var n,r,i="picker-column "+(e.textAlign?"picker-column-"+e.textAlign:"")+" "+(e.cssClass||"");return n=e.divider?'\n        <div class="'+i+' picker-column-divider">'+e.content+"</div>\n      ":'\n        <div class="'+i+'">\n          <div class="picker-items">'+(r=e.values.map((function(t,n){return'\n        <div class="picker-item" data-picker-value="'+t+'">\n          <span>'+(e.displayValues?e.displayValues[n]:t)+"</span>\n        </div>\n      "})).join(""))+"</div>\n        </div>\n      ",t?r.trim():n.trim()},l.renderInline=function(){var e=this,t=e.params,n=t.rotateEffect,r=t.cssClass,i=t.toolbar;return mn("div",{class:"picker picker-inline "+(n?"picker-3d":"")+" "+(r||"")},i&&e.renderToolbar(),mn("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),mn("div",{class:"picker-center-highlight"})))},l.renderSheet=function(){var e=this,t=e.params,n=t.rotateEffect,r=t.cssClass,i=t.toolbar;return mn("div",{class:"sheet-modal picker picker-sheet "+(n?"picker-3d":"")+" "+(r||"")},i&&e.renderToolbar(),mn("div",{class:"sheet-modal-inner picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),mn("div",{class:"picker-center-highlight"})))},l.renderPopover=function(){var e=this,t=e.params,n=t.rotateEffect,r=t.cssClass,i=t.toolbar;return mn("div",{class:"popover picker-popover"},mn("div",{class:"popover-inner"},mn("div",{class:"picker "+(n?"picker-3d":"")+" "+(r||"")},i&&e.renderToolbar(),mn("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),mn("div",{class:"picker-center-highlight"})))))},l.render=function(){var e=this;return e.params.render?e.params.render.call(e):e.inline?e.renderInline():e.isPopover()?e.renderPopover():e.renderSheet()},l.onOpen=function(){var e=this,t=e.initialized,n=e.$el,r=e.app,i=e.$inputEl,a=e.inline,o=e.value,s=e.params;e.opened=!0,e.closing=!1,e.opening=!0,e.attachResizeEvent(),n.find(".picker-column").each((function(n){var r=!0;(!t&&s.value||t&&o)&&(r=!1),e.initColumn(n,r)})),t?o&&e.setValue(o,0):o?e.setValue(o,0):s.value&&e.setValue(s.value,0),!a&&i&&i.length&&"md"===r.theme&&i.trigger("focus"),e.initialized=!0,n&&n.trigger("picker:open"),i&&i.trigger("picker:open"),e.emit("local::open pickerOpen",e)},l.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("picker:opened"),e.$inputEl&&e.$inputEl.trigger("picker:opened"),e.emit("local::opened pickerOpened",e)},l.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.detachResizeEvent(),e.cols.forEach((function(e){e.destroy&&e.destroy()})),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var n=e.$inputEl.attr("validate"),r=e.$inputEl.attr("required");n&&r&&t.input.validate(e.$inputEl)}e.$el&&e.$el.trigger("picker:close"),e.$inputEl&&e.$inputEl.trigger("picker:close"),e.emit("local::close pickerClose",e)},l.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||y((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("picker:closed"),e.$inputEl&&e.$inputEl.trigger("picker:closed"),e.emit("local::closed pickerClosed",e)},l.open=function(){var e=this,t=e.app,n=e.opened,r=e.inline,i=e.$inputEl,o=e.$scrollToEl,s=e.params;if(!n){if(0===e.cols.length&&s.cols.length&&s.cols.forEach((function(t){e.cols.push(t)})),r)return e.$el=a(e.render()),e.$el[0].f7Picker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var l,c=e.isPopover(),d=c?"popover":"sheet",u={targetEl:i,scrollToEl:o,content:e.render(),backdrop:void 0!==s.backdrop?s.backdrop:c,on:{open:function(){var t=this;e.modal=t,e.$el=c?t.$el.find(".picker"):t.$el,e.$el[0].f7Picker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};"sheet"===d&&(u.push=s.sheetPush,u.swipeToClose=s.sheetSwipeToClose),s.routableModals&&e.view?e.view.router.navigate({url:e.url,route:(l={path:e.url},l[d]=u,l)}):(e.modal=t[d].create(u),e.modal.open())}},l.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},l.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init pickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init pickerInit",e)},l.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy pickerBeforeDestroy",e),t&&t.trigger("picker:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7Picker,g(e),e.destroyed=!0}},i=r,s=[{key:"view",get:function(){var e,t=this.app,n=this.params,r=this.$inputEl;return n.view?e=n.view:r&&(e=r.parents(".view").length&&r.parents(".view")[0].f7View),e||(e=t.views.main),e}}],s&&pi(i.prototype,s),r}(W);const gi=mi,vi={name:"picker",static:{Picker:gi},create:function(){var e=this;e.picker=q({defaultSelector:".picker",constructor:gi,app:e,domProp:"f7Picker"}),e.picker.close=function(e){void 0===e&&(e=".picker");var t=a(e);if(0!==t.length){var n=t[0].f7Picker;!n||n&&!n.opened||n.close()}}},params:{picker:{updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,updateValuesOnMousewheel:!0,mousewheel:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,cols:[],containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,backdrop:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,scrollToEl:void 0,toolbar:!0,toolbarCloseText:"Done",cssClass:null,routableModals:!1,view:null,url:"select/",renderToolbar:null,render:null}}};var bi={handle:function(e,t){var n,r=a(e),i=r[0].scrollTop,o=r[0].scrollHeight,s=r[0].offsetHeight,l=r[0].getAttribute("data-infinite-distance"),c=r.find(".virtual-list"),d=r.hasClass("infinite-scroll-top");if(l||(l=50),"string"==typeof l&&l.indexOf("%")>=0&&(l=parseInt(l,10)/100*s),l>s&&(l=s),d)i<l&&(r.trigger("infinite",t),this.emit("infinite",r[0],t));else if(i+s>=o-l){if(c.length>0&&(n=c.eq(-1)[0].f7VirtualList)&&!n.reachEnd&&!n.params.updatableScroll)return;r.trigger("infinite",t),this.emit("infinite",r[0],t)}},create:function(e){var t=a(e),n=this;function r(e){n.infiniteScroll.handle(this,e)}t.each((function(e){e.f7InfiniteScrollHandler=r,e.addEventListener("scroll",e.f7InfiniteScrollHandler)}))},destroy:function(e){a(e).each((function(e){e.removeEventListener("scroll",e.f7InfiniteScrollHandler),delete e.f7InfiniteScrollHandler}))}};const yi={name:"infiniteScroll",create:function(){A(this,{infiniteScroll:bi})},on:{tabMounted:function(e){var t=this,n=a(e),r=n.find(".infinite-scroll-content");n.is(".infinite-scroll-content")&&r.add(n),r.each((function(e){t.infiniteScroll.create(e)}))},tabBeforeRemove:function(e){var t=a(e),n=this,r=t.find(".infinite-scroll-content");t.is(".infinite-scroll-content")&&r.add(t),r.each((function(e){n.infiniteScroll.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.destroy(e)}))}}};function _i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wi(e,t){return wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wi(e,t)}var Ci=function(e){var t,n;function r(t,n){var r,i=_i(r=e.call(this,{},[t])||this),o=N(),s=D(),l=a(n),c=l.find(".ptr-preloader");i.$el=l,i.el=l[0],i.app=t,i.bottom=i.$el.hasClass("ptr-bottom"),i.useModulesParams({});var d,u,p,h="md"===t.theme,f="ios"===t.theme,m="aurora"===t.theme;i.done=function(){var e=h?c:l;return e.on("transitionend",(function t(n){a(n.target).closest(c).length||(l.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing"),l.trigger("ptr:done"),i.emit("local::done ptrDone",l[0]),e.off("transitionend",t))})),l.removeClass("ptr-refreshing").addClass("ptr-transitioning ptr-closing"),i},i.refresh=function(){return l.hasClass("ptr-refreshing")||(l.addClass("ptr-transitioning ptr-refreshing"),l.trigger("ptr:refresh",i.done),i.emit("local::refresh ptrRefresh",l[0],i.done)),i},i.mousewheel="true"===l.attr("data-ptr-mousewheel");var g,v,b,y,_,w,C,x,k,E,S,T,M,I={},L=!1,$=!1,P=!1,O=0,B=!1,A=l.parents(".page");if((A.find(".navbar").length>0||A.parents(".view").children(".navbars").length>0)&&(B=!0),A.hasClass("no-navbar")&&(B=!1),!i.bottom){var R=t.navbar.getElByPage(A[0]);if(R){var G=a(R),z=G.hasClass("navbar-large-transparent")||G.hasClass("navbar-large")&&G.hasClass("navbar-transparent"),H=G.hasClass("navbar-transparent")&&!G.hasClass("navbar-large");z?l.addClass("ptr-with-navbar-large-transparent"):H&&l.addClass("ptr-with-navbar-transparent")}}function F(e){void 0===e&&(e=0);var t=c.find(".preloader-inner-line"),n=1/t.length;t.forEach((function(t,r){var i=(e-r*n)/n;t.style.opacity=.27*Math.max(Math.min(i,1),0)}))}function V(){c.find(".preloader-inner-line").css("opacity","")}function W(e){if(u){if("android"!==o.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}l.hasClass("ptr-refreshing")||a(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length||(p=!1,x=!1,u=!0,g=void 0,_=void 0,"touchstart"===e.type&&(d=e.targetTouches[0].identifier),I.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,I.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function j(e){if(u){var t,r,s;if("touchmove"===e.type){if(d&&e.touches)for(var m=0;m<e.touches.length;m+=1)e.touches[m].identifier===d&&(s=e.touches[m]);s||(s=e.targetTouches[0]),t=s.pageX,r=s.pageY}else t=e.pageX,r=e.pageY;if(t&&r)if(void 0===g&&(g=!!(g||Math.abs(r-I.y)>Math.abs(t-I.x))),g){if(y=l[0].scrollTop,!p){var T;if(l.removeClass("ptr-transitioning"),f&&F(0),k=l[0].scrollHeight,E=l[0].offsetHeight,i.bottom&&(S=k-E),y>k)return void(u=!1);var M=a(e.target).closest(".ptr-watch-scroll");if(M.length&&M.each((function(e){e!==n&&e.scrollHeight>e.offsetHeight&&"auto"===a(e).css("overflow")&&(!i.bottom&&e.scrollTop>0||i.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(T=!0)})),T)return void(u=!1);C&&(w=l.attr("data-ptr-distance")).indexOf("%")>=0&&(w=k*parseInt(w,10)/100),O=l.hasClass("ptr-refreshing")?w:0,$=!(k!==E&&"ios"===o.os&&!h),P=!1}p=!0,v=r-I.y,void 0===_&&(i.bottom?y!==S:0!==y)&&(_=!0),(i.bottom?v<0&&y>=S||y>S:v>0&&y<=0||y<0)?("ios"===o.os&&parseInt(o.osVersion.split(".")[0],10)>7&&(i.bottom||0!==y||_||($=!0),i.bottom&&y===S&&!_&&($=!0)),$||!i.bottom||h||(l.css("-webkit-overflow-scrolling","auto"),l.scrollTop(S),P=!0),$||P?(e.cancelable&&e.preventDefault(),b=(i.bottom?-1*Math.pow(Math.abs(v),.85):Math.pow(v,.85))+O,h?c.transform("translate3d(0,"+b+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(v)/66*180+100)+"deg)"):(i.bottom||f?l.children().transform("translate3d(0,"+b+"px,0)"):l.transform("translate3d(0,"+b+"px,0)"),f&&c.transform("translate3d(0,0px,0)"))):f&&!i.bottom&&c.transform("translate3d(0,"+y+"px,0)"),f&&!L&&F($||P?Math.pow(Math.abs(v),.85)/w:Math.abs(v)/(2*w)),($||P)&&Math.pow(Math.abs(v),.85)>w||!$&&Math.abs(v)>=2*w?(L=!0,l.addClass("ptr-pull-up").removeClass("ptr-pull-down"),V()):(L=!1,l.removeClass("ptr-pull-up").addClass("ptr-pull-down")),x||(l.trigger("ptr:pullstart"),i.emit("local::pullStart ptrPullStart",l[0]),x=!0),l.trigger("ptr:pullmove",{event:e,scrollTop:y,translate:b,touchesDiff:v}),i.emit("local::pullMove ptrPullMove",l[0],{event:e,scrollTop:y,translate:b,touchesDiff:v})):(x=!1,l.removeClass("ptr-pull-up ptr-pull-down"),L=!1)}else u=!1}}function U(e){return"touchend"===e.type&&e.changedTouches&&e.changedTouches.length>0&&d&&e.changedTouches[0].identifier!==d?(u=!1,g=!1,p=!1,void(d=null)):u&&p?(b&&(l.addClass("ptr-transitioning"),b=0),h?c.transform("").find(".ptr-arrow").transform(""):(c.transform(""),i.bottom||f?l.children().transform(""):l.transform("")),$||!i.bottom||h||l.css("-webkit-overflow-scrolling",""),L?(l.addClass("ptr-refreshing"),l.trigger("ptr:refresh",i.done),i.emit("local::refresh ptrRefresh",l[0],i.done)):l.removeClass("ptr-pull-down"),u=!1,p=!1,void(x&&(l.trigger("ptr:pullend"),i.emit("local::pullEnd ptrPullEnd",l[0])))):(u=!1,void(p=!1))}B||i.bottom||l.addClass("ptr-no-navbar"),l.attr("data-ptr-distance")?C=!0:h?w=66:f?w=44:m&&(w=38);var q=!0,K=0;function J(){q=!0,M=!1,K=0,b&&(l.addClass("ptr-transitioning"),b=0),h?c.transform("").find(".ptr-arrow").transform(""):(c.transform(""),i.bottom?l.children().transform(""):l.transform("")),L?(l.addClass("ptr-refreshing"),l.trigger("ptr:refresh",i.done),i.emit("local::refresh ptrRefresh",l[0],i.done)):l.removeClass("ptr-pull-down"),x&&(l.trigger("ptr:pullend"),i.emit("local::pullEnd ptrPullEnd",l[0]))}function Q(e){if(q){var t=e.deltaX,r=e.deltaY;if(!(Math.abs(t)>Math.abs(r)||l.hasClass("ptr-refreshing")||a(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length)){if(clearTimeout(T),y=l[0].scrollTop,!M){var o;if(l.removeClass("ptr-transitioning"),f&&F(0),k=l[0].scrollHeight,E=l[0].offsetHeight,i.bottom&&(S=k-E),y>k)return void(q=!1);var s=a(e.target).closest(".ptr-watch-scroll");if(s.length&&s.each((function(e){e!==n&&e.scrollHeight>e.offsetHeight&&"auto"===a(e).css("overflow")&&(!i.bottom&&e.scrollTop>0||i.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(o=!0)})),o)return void(q=!1);C&&(w=l.attr("data-ptr-distance")).indexOf("%")>=0&&(w=k*parseInt(w,10)/100)}p=!0,v=K-=r,void 0===_&&(i.bottom?y!==S:0!==y)&&(_=!0),(i.bottom?v<0&&y>=S||y>S:v>0&&y<=0||y<0)?(e.cancelable&&e.preventDefault(),b=v,Math.abs(b)>w&&(b=w+Math.pow(Math.abs(b)-w,.7),i.bottom&&(b=-b)),h?c.transform("translate3d(0,"+b+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(v)/66*180+100)+"deg)"):i.bottom?l.children().transform("translate3d(0,"+b+"px,0)"):(l.transform("translate3d(0,"+b+"px,0)"),f&&c.transform("translate3d(0,"+-b+"px,0)")),f&&!L&&F(Math.abs(b)/w),Math.abs(b)>w?(L=!0,l.addClass("ptr-pull-up").removeClass("ptr-pull-down"),V()):(L=!1,l.removeClass("ptr-pull-up").addClass("ptr-pull-down")),x||(l.trigger("ptr:pullstart"),i.emit("local::pullStart ptrPullStart",l[0]),x=!0),l.trigger("ptr:pullmove",{event:e,scrollTop:y,translate:b,touchesDiff:v}),i.emit("local::pullMove ptrPullMove",l[0],{event:e,scrollTop:y,translate:b,touchesDiff:v})):(x=!1,l.removeClass("ptr-pull-up ptr-pull-down"),L=!1),T=setTimeout(J,300)}}}return A.length&&l.length?(l[0].f7PullToRefresh=i,i.attachEvents=function(){var e=!!s.passiveListener&&{passive:!0};l.on(t.touchEvents.start,W,e),t.on("touchmove:active",j),t.on("touchend:passive",U),i.mousewheel&&!i.bottom&&l.on("wheel",Q)},i.detachEvents=function(){var e=!!s.passiveListener&&{passive:!0};l.off(t.touchEvents.start,W,e),t.off("touchmove:active",j),t.off("touchend:passive",U),i.mousewheel&&!i.bottom&&l.off("wheel",Q)},i.useModules(),i.init(),i||_i(r)):i||_i(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,wi(t,n);var i=r.prototype;return i.init=function(){this.attachEvents()},i.destroy=function(){var e=this;e.emit("local::beforeDestroy ptrBeforeDestroy",e),e.$el.trigger("ptr:beforedestroy"),delete e.el.f7PullToRefresh,e.detachEvents(),g(e),e=null},r}(W);const xi=Ci,ki={name:"pullToRefresh",create:function(){var e=this;e.ptr=T(q({defaultSelector:".ptr-content",constructor:xi,app:e,domProp:"f7PullToRefresh"}),{done:function(t){var n=e.ptr.get(t);if(n)return n.done()},refresh:function(t){var n=e.ptr.get(t);if(n)return n.refresh()}})},static:{PullToRefresh:xi},on:{tabMounted:function(e){var t=this,n=a(e),r=n.find(".ptr-content");n.is(".ptr-content")&&r.add(n),r.each((function(e){t.ptr.create(e)}))},tabBeforeRemove:function(e){var t=a(e),n=this,r=t.find(".ptr-content");t.is(".ptr-content")&&r.add(t),r.each((function(e){n.ptr.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.destroy(e)}))}}};var Ei={destroy:function(e){var t=a(e).closest(".page");t.length&&t[0].f7LazyDestroy&&t[0].f7LazyDestroy()},create:function(e){var t=this,n=(0,o.Jj)(),r=D(),i=a(e).closest(".page").eq(0),s=i.find(".lazy");if(0!==s.length||i.hasClass("lazy")){var l=t.params.lazy.placeholder;!1!==l&&s.each((function(e){a(e).attr("data-src")&&!a(e).attr("src")&&a(e).attr("src",l)}));var c=[],d=!1;if(t.params.lazy.observer&&r.intersectionObserver){var u=i[0].f7LazyObserver;return u||(u=new n.IntersectionObserver((function(e,n){e.forEach((function(e){if(e.isIntersecting){if(t.params.lazy.sequential&&d)return void(c.indexOf(e.target)<0&&c.push(e.target));d=!0,t.lazy.loadImage(e.target,p),n.unobserve(e.target)}}))}),{root:i[0]})),s.each((function(e){e.f7LazyObserverAdded||(e.f7LazyObserverAdded=!0,u.observe(e))})),void(i[0].f7LazyDestroy||(i[0].f7LazyDestroy=function(){u.disconnect(),delete i[0].f7LazyDestroy,delete i[0].f7LazyObserver}))}i[0].f7LazyDestroy||(i[0].f7LazyDestroy=function(){i[0].f7LazyAttached=!1,delete i[0].f7LazyAttached,i.off("lazy",h),i.off("scroll",h,!0),i.find(".tab").off("tab:mounted tab:show",h),t.off("resize",h)}),i[0].f7LazyAttached||(i[0].f7LazyAttached=!0,i.on("lazy",h),i.on("scroll",h,!0),i.find(".tab").on("tab:mounted tab:show",h),t.on("resize",h)),h()}function p(e){c.indexOf(e)>=0&&c.splice(c.indexOf(e),1),d=!1,t.params.lazy.sequential&&c.length>0&&(d=!0,t.lazy.loadImage(c[0],p))}function h(){t.lazy.load(i,(function(e){t.params.lazy.sequential&&d?c.indexOf(e)<0&&c.push(e):(d=!0,t.lazy.loadImage(e,p))}))}},isInViewport:function(e){var t=this,n=e.getBoundingClientRect(),r=t.params.lazy.threshold||0;return n.top>=0-r&&n.left>=0-r&&n.top<=t.height+r&&n.left<=t.width+r},loadImage:function(e,t){var n=this,r=(0,o.Jj)(),i=a(e),s=i.attr("data-background"),l=s||i.attr("data-src");function c(){i.removeClass("lazy").addClass("lazy-loaded"),s?i.css("background-image","url("+l+")"):l&&i.attr("src",l),t&&t(e),i.trigger("lazy:loaded"),n.emit("lazyLoaded",i[0])}if(!l)return i.trigger("lazy:load"),n.emit("lazyLoad",i[0]),void c();var d=new r.Image;d.onload=c,d.onerror=function(){i.removeClass("lazy").addClass("lazy-loaded"),s?i.css("background-image","url("+(n.params.lazy.placeholder||"")+")"):i.attr("src",n.params.lazy.placeholder||""),t&&t(e),i.trigger("lazy:error"),n.emit("lazyError",i[0])},d.src=l,i.removeAttr("data-src").removeAttr("data-background"),i.trigger("lazy:load"),n.emit("lazyLoad",i[0])},load:function(e,t){var n=this,r=a(e);r.hasClass("page")||(r=r.parents(".page").eq(0)),0!==r.length&&r.find(".lazy").each((function(e){a(e).parents(".tab:not(.tab-active)").length>0||n.lazy.isInViewport(e)&&(t?t(e):n.lazy.loadImage(e))}))}};const Si={name:"lazy",params:{lazy:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",threshold:0,sequential:!0,observer:!0}},create:function(){A(this,{lazy:Ei})},on:{pageInit:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageAfterIn:function(e){var t=D();this.params.lazy.observer&&t.intersectionObserver||(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageBeforeRemove:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.destroy(e.$el)},tabMounted:function(e){var t=a(e);(t.find(".lazy").length>0||t.hasClass("lazy"))&&this.lazy.create(t)},tabBeforeRemove:function(e){var t=D();if(!this.params.lazy.observer||!t.intersectionObserver){var n=a(e);(n.find(".lazy").length>0||n.hasClass("lazy"))&&this.lazy.destroy(n)}}}};function Ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e,t){return Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mi(e,t)}var Ii=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=Ti(r=e.call(this,n,[t])||this),o={};i.useModulesParams(o),i.params=T(o,n);var s=a(i.params.el);if(0===s.length)return Ti(r);if(i.$el=s,i.el=s[0],i.$el[0].f7DataTable){var l=i.$el[0].f7DataTable;return i.destroy(),l||Ti(r)}function c(e){if(!e.detail||!e.detail.sentByF7DataTable){var t=a(this),n=t[0].checked,r=t.parents("td,th").index();if(t.parents("thead").length>0)0===r&&s.find("tbody tr")[n?"addClass":"removeClass"]("data-table-row-selected"),s.find("tbody tr td:nth-child("+(r+1)+") input").prop("checked",n).trigger("change",{sentByF7DataTable:!0}),t.prop("indeterminate",!1);else{0===r&&t.parents("tr")[n?"addClass":"removeClass"]("data-table-row-selected");var o=s.find("tbody .checkbox-cell:nth-child("+(r+1)+') input[type="checkbox"]:checked').length,l=s.find("tbody tr").length,c=s.find("thead .checkbox-cell:nth-child("+(r+1)+') input[type="checkbox"]');n?o===l&&c.prop("checked",!0).trigger("change",{sentByF7DataTable:!0}):c.prop("checked",!1),c.prop("indeterminate",o>0&&o<l)}i.checkSelectedHeader()}}function d(){var e,t=a(this),n=t.hasClass("sortable-cell-active"),r=t.hasClass("sortable-desc")?"desc":"asc";n?(e="desc"===r?"asc":"desc",t.removeClass("sortable-desc sortable-asc").addClass("sortable-"+e)):(s.find("thead .sortable-cell-active").removeClass("sortable-cell-active"),t.addClass("sortable-cell-active"),e=r),t.trigger("datatable:sort",e),i.emit("local::sort dataTableSort",i,e)}return i.$el[0].f7DataTable=i,T(i,{collapsible:s.hasClass("data-table-collapsible"),$headerEl:s.find(".data-table-header"),$headerSelectedEl:s.find(".data-table-header-selected")}),i.attachEvents=function(){i.$el.on("change",'.checkbox-cell input[type="checkbox"]',c),i.$el.find("thead .sortable-cell").on("click",d)},i.detachEvents=function(){i.$el.off("change",'.checkbox-cell input[type="checkbox"]',c),i.$el.find("thead .sortable-cell").off("click",d)},i.useModules(),i.init(),i||Ti(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Mi(t,n);var i=r.prototype;return i.setCollapsibleLabels=function(){var e=this;e.collapsible&&e.$el.find("tbody td:not(.checkbox-cell)").each((function(t){var n=a(t),r=n.index(),i=n.attr("data-collapsible-title");i||""===i||n.attr("data-collapsible-title",e.$el.find("thead th").eq(r).text())}))},i.checkSelectedHeader=function(){var e=this;if(e.$headerEl.length>0&&e.$headerSelectedEl.length>0){var t=e.$el.find("tbody .checkbox-cell input:checked").length;e.$el[t>0?"addClass":"removeClass"]("data-table-has-checked"),e.$headerSelectedEl.find(".data-table-selected-count").text(t)}},i.init=function(){var e=this;e.attachEvents(),e.setCollapsibleLabels(),e.checkSelectedHeader()},i.destroy=function(){var e=this;e.$el.trigger("datatable:beforedestroy"),e.emit("local::beforeDestroy dataTableBeforeDestroy",e),e.attachEvents(),e.$el[0]&&(e.$el[0].f7DataTable=null,delete e.$el[0].f7DataTable),g(e),e=null},r}(W);const Li=Ii,$i={name:"dataTable",static:{DataTable:Li},create:function(){this.dataTable=q({defaultSelector:".data-table",constructor:Li,app:this,domProp:"f7DataTable"})},on:{tabBeforeRemove:function(e){var t=this;a(e).find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},tabMounted:function(e){var t=this;a(e).find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))}},vnode:{"data-table-init":{insert:function(e){var t=e.elm;this.dataTable.create({el:t})},destroy:function(e){var t=e.elm;this.dataTable.destroy(t)}}}};function Pi(){return Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pi.apply(this,arguments)}var Oi={morphOpen:function(e,t){var n=this,r=a(e),i=a(t);if(0!==i.length){i.transition(0).addClass("fab-morph-target-visible");var o={width:i[0].offsetWidth,height:i[0].offsetHeight,offset:i.offset(),borderRadius:i.css("border-radius"),zIndex:i.css("z-index")},s={width:r[0].offsetWidth,height:r[0].offsetHeight,offset:r.offset(),translateX:x(r[0],"x"),translateY:x(r[0],"y")};r[0].f7FabMorphData={$targetEl:i,target:o,fab:s};var l=s.offset.left+s.width/2-(o.offset.left+o.width/2)-s.translateX,c=s.offset.top+s.height/2-(o.offset.top+o.height/2)-s.translateY,d=o.width/s.width,u=o.height/s.height,p=Math.ceil(parseInt(o.borderRadius,10)/Math.max(d,u));p>0&&(p+=2),r[0].f7FabMorphResizeHandler=function(){r.transition(0).transform(""),i.transition(0),o.width=i[0].offsetWidth,o.height=i[0].offsetHeight,o.offset=i.offset(),s.offset=r.offset();var e=s.offset.left+s.width/2-(o.offset.left+o.width/2)-s.translateX,t=s.offset.top+s.height/2-(o.offset.top+o.height/2)-s.translateY,n=o.width/s.width,a=o.height/s.height;r.transform("translate3d("+-e+"px, "+-t+"px, 0) scale("+n+", "+a+")")},i.css("opacity",0).transform("scale("+1/d+", "+1/u+")"),r.addClass("fab-opened").css("z-index",o.zIndex-1).transform("translate3d("+-l+"px, "+-c+"px, 0)"),r.transitionEnd((function(){i.transition(""),_((function(){i.css("opacity",1).transform("scale(1,1)"),r.transform("translate3d("+-l+"px, "+-c+"px, 0) scale("+d+", "+u+")").css("border-radius",p+"px").css("box-shadow","none").css("opacity","0")})),n.on("resize",r[0].f7FabMorphResizeHandler),i.parents(".page-content").length>0&&i.parents(".page-content").on("scroll",r[0].f7FabMorphResizeHandler)}))}},morphClose:function(e){var t=a(e),n=t[0].f7FabMorphData;if(n){var r=n.$targetEl,i=n.target,o=n.fab;if(0!==r.length){var s=o.offset.left+o.width/2-(i.offset.left+i.width/2)-o.translateX,l=o.offset.top+o.height/2-(i.offset.top+i.height/2)-o.translateY,c=i.width/o.width,d=i.height/o.height;this.off("resize",t[0].f7FabMorphResizeHandler),r.parents(".page-content").length>0&&r.parents(".page-content").off("scroll",t[0].f7FabMorphResizeHandler),r.css("opacity",0).transform("scale("+1/c+", "+1/d+")"),t.transition("").css("box-shadow","").css("border-radius","").css("opacity","1").transform("translate3d("+-s+"px, "+-l+"px, 0)"),t.transitionEnd((function(){t.css("z-index","").removeClass("fab-opened").transform(""),_((function(){t.transitionEnd((function(){r.removeClass("fab-morph-target-visible").css("opacity","").transform("").transition("")}))}))}))}}},open:function(e,t){var n=this,r=a(e).eq(0),i=r.find(".fab-buttons");if(r.length&&!r.hasClass("fab-opened")&&(i.length||r.hasClass("fab-morph"))){if(n.fab.openedEl){if(n.fab.openedEl===r[0])return;n.fab.close(n.fab.openedEl)}n.fab.openedEl=r[0],r.hasClass("fab-morph")?n.fab.morphOpen(r,t||r.attr("data-morph-to")):r.addClass("fab-opened"),r.siblings(".fab-backdrop").addClass("backdrop-in"),r.trigger("fab:open")}},close:function(e){void 0===e&&(e=".fab-opened");var t=a(e).eq(0),n=t.find(".fab-buttons");t.length&&t.hasClass("fab-opened")&&(n.length||t.hasClass("fab-morph"))&&(this.fab.openedEl=null,t.hasClass("fab-morph")?this.fab.morphClose(t):t.removeClass("fab-opened"),t.siblings(".fab-backdrop").removeClass("backdrop-in"),t.trigger("fab:close"))},toggle:function(e){a(e).hasClass("fab-opened")?this.fab.close(e):this.fab.open(e)}};const Bi={name:"fab",create:function(){A(this,{fab:Pi({openedEl:null},Oi)})},clicks:{".fab > a":function(e){this.fab.toggle(e.parents(".fab"))},".fab-open":function(e,t){void 0===t&&(t={}),this.fab.open(t.fab)},".fab-close":function(e,t){void 0===t&&(t={}),this.fab.close(t.fab)},".fab-backdrop":function(){this.fab.close()}}};for(var Ai=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Ri={},Di=0;Di<Ai.length;Di+=1)for(var Ni=Ai[Di].letters,Gi=0;Gi<Ni.length;Gi+=1)Ri[Ni[Gi]]=Ai[Di].base;const zi=function(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return Ri[e]||e}))};function Hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fi(e,t){return Fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fi(e,t)}var Vi=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=Hi(r=e.call(this,n,[t])||this),o={el:void 0,inputEl:void 0,inputEvents:"change input compositionend",disableButton:!0,disableButtonEl:void 0,backdropEl:void 0,searchContainer:void 0,searchItem:"li",searchIn:void 0,searchGroup:".list-group",searchGroupTitle:".item-divider, .list-group-title",ignore:".searchbar-ignore",foundEl:".searchbar-found",notFoundEl:".searchbar-not-found",hideOnEnableEl:".searchbar-hide-on-enable",hideOnSearchEl:".searchbar-hide-on-search",backdrop:void 0,removeDiacritics:!0,customSearch:!1,hideDividers:!0,hideGroups:!0,disableOnBackdropClick:!0,expandable:!1,inline:!1};i.useModulesParams(o),i.params=T(o,n);var s,l=a(i.params.el);if(0===l.length)return i||Hi(r);if(l[0].f7Searchbar)return l[0].f7Searchbar||Hi(r);l[0].f7Searchbar=i;var c,d,u,p,h=l.parents(".navbar");if(l.parents(".page").length>0)s=l.parents(".page");else if(h.length>0&&!(s=a(t.navbar.getPageByEl(h[0]))).length){var f=l.parents(".view").find(".page-current");f[0]&&f[0].f7Page&&f[0].f7Page.navbarEl===h[0]&&(s=f)}n.foundEl?c=a(n.foundEl):"string"==typeof i.params.foundEl&&s&&(c=s.find(i.params.foundEl)),n.notFoundEl?d=a(n.notFoundEl):"string"==typeof i.params.notFoundEl&&s&&(d=s.find(i.params.notFoundEl)),n.hideOnEnableEl?u=a(n.hideOnEnableEl):"string"==typeof i.params.hideOnEnableEl&&s&&(u=s.find(i.params.hideOnEnableEl)),n.hideOnSearchEl?p=a(n.hideOnSearchEl):"string"==typeof i.params.hideOnSearchEl&&s&&(p=s.find(i.params.hideOnSearchEl));var m,g,v,b,y=i.params.expandable||l.hasClass("searchbar-expandable"),_=i.params.inline||l.hasClass("searchbar-inline");function w(e){e.preventDefault()}function C(e){i.enable(e),i.$el.addClass("searchbar-focused")}function x(){i.$el.removeClass("searchbar-focused"),"aurora"!==t.theme||b&&b.length&&i.params.disableButton||i.query||i.disable()}function k(){var e=i.$inputEl.val().trim();(i.$searchContainer&&i.$searchContainer.length>0&&(i.params.searchIn||i.isVirtualList||i.params.searchIn===i.params.searchItem)||i.params.customSearch)&&i.search(e,!0)}function E(e,t){i.$el.trigger("searchbar:clear",t),i.emit("local::clear searchbarClear",i,t)}function S(e){i.disable(e)}function M(){!i||i&&!i.$el||i.enabled&&(i.$el.removeClass("searchbar-enabled"),i.expandable&&i.$el.parents(".navbar").removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition"))}function I(){!i||i&&!i.$el||i.enabled&&(i.$el.addClass("searchbar-enabled"),i.expandable&&i.$el.parents(".navbar").addClass("with-searchbar-expandable-enabled-no-transition"))}return void 0===i.params.backdrop&&(i.params.backdrop=!_&&"aurora"!==t.theme),i.params.backdrop&&0===(m=i.params.backdropEl?a(i.params.backdropEl):s&&s.length>0?s.find(".searchbar-backdrop"):l.siblings(".searchbar-backdrop")).length&&(m=a('<div class="searchbar-backdrop"></div>'),s&&s.length?l.parents(s).length>0&&h&&0===l.parents(h).length?m.insertBefore(l):m.insertBefore(s.find(".page-content").eq(0)):m.insertBefore(l)),i.params.searchContainer&&(g=a(i.params.searchContainer)),v=i.params.inputEl?a(i.params.inputEl):l.find('input[type="search"]').eq(0),i.params.disableButton&&(b=i.params.disableButtonEl?a(i.params.disableButtonEl):l.find(".searchbar-disable-button")),T(i,{app:t,view:t.views.get(l.parents(".view")),$el:l,el:l[0],$backdropEl:m,backdropEl:m&&m[0],$searchContainer:g,searchContainer:g&&g[0],$inputEl:v,inputEl:v[0],$disableButtonEl:b,disableButtonEl:b&&b[0],disableButtonHasMargin:!1,$pageEl:s,pageEl:s&&s[0],$navbarEl:h,navbarEl:h&&h[0],$foundEl:c,foundEl:c&&c[0],$notFoundEl:d,notFoundEl:d&&d[0],$hideOnEnableEl:u,hideOnEnableEl:u&&u[0],$hideOnSearchEl:p,hideOnSearchEl:p&&p[0],previousQuery:"",query:"",isVirtualList:g&&g.hasClass("virtual-list"),virtualList:void 0,enabled:!1,expandable:y,inline:_}),i.attachEvents=function(){l.on("submit",w),i.params.disableButton&&i.$disableButtonEl.on("click",S),i.params.disableOnBackdropClick&&i.$backdropEl&&i.$backdropEl.on("click",S),i.expandable&&"ios"===t.theme&&i.view&&h.length&&i.$pageEl&&(i.$pageEl.on("page:beforeout",M),i.$pageEl.on("page:beforein",I)),i.$inputEl.on("focus",C),i.$inputEl.on("blur",x),i.$inputEl.on(i.params.inputEvents,k),i.$inputEl.on("input:clear",E)},i.detachEvents=function(){l.off("submit",w),i.params.disableButton&&i.$disableButtonEl.off("click",S),i.params.disableOnBackdropClick&&i.$backdropEl&&i.$backdropEl.off("click",S),i.expandable&&"ios"===t.theme&&i.view&&h.length&&i.$pageEl&&(i.$pageEl.off("page:beforeout",M),i.$pageEl.off("page:beforein",I)),i.$inputEl.off("focus",C),i.$inputEl.off("blur",x),i.$inputEl.off(i.params.inputEvents,k),i.$inputEl.off("input:clear",E)},i.useModules(),i.init(),i||Hi(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Fi(t,n);var i=r.prototype;return i.clear=function(e){var t=this;if(!t.query&&e&&a(e.target).hasClass("searchbar-clear"))return t.disable(),t;var n=t.value;return t.$inputEl.val("").trigger("change").focus(),t.$el.trigger("searchbar:clear",n),t.emit("local::clear searchbarClear",t,n),t},i.setDisableButtonMargin=function(){var e=this;if(!e.expandable){var t=e.app;e.$disableButtonEl.transition(0).show(),e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e._clientLeft=e.$disableButtonEl[0].clientLeft,e.$disableButtonEl.transition(""),e.disableButtonHasMargin=!0}},i.enable=function(e){var t=this;if(t.enabled)return t;var n=t.app,r=(0,o.Me)(),i=N();function a(){if(t.$backdropEl&&(t.$searchContainer&&t.$searchContainer.length||t.params.customSearch)&&!t.$el.hasClass("searchbar-enabled")&&!t.query&&t.backdropShow(),t.$el.addClass("searchbar-enabled"),(!t.$disableButtonEl||t.$disableButtonEl&&0===t.$disableButtonEl.length)&&t.$el.addClass("searchbar-enabled-no-disable-button"),!t.expandable&&t.$disableButtonEl&&t.$disableButtonEl.length>0&&"md"!==n.theme&&(t.disableButtonHasMargin||t.setDisableButtonMargin(),t.$disableButtonEl.css("margin-"+(n.rtl?"left":"right"),"0px")),t.expandable){var e=t.$el.parents(".navbar");if(e.hasClass("navbar-large")&&t.$pageEl){var r=t.$pageEl.find(".page-content"),i=e.find(".title-large");r.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.hasClass("navbar-large-collapsed")&&i.length&&r.length&&(r.transition(0),r[0].scrollTop-=i[0].offsetHeight,setTimeout((function(){r.transition("")}),200))}"md"===n.theme&&e.length?e.addClass("with-searchbar-expandable-enabled"):(e.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.addClass("navbar-large-collapsed"))}t.$hideOnEnableEl&&t.$hideOnEnableEl.addClass("hidden-by-searchbar"),t.$el.trigger("searchbar:enable"),t.emit("local::enable searchbarEnable",t)}t.enabled=!0;var s=!1;return!0===e&&r.activeElement!==t.inputEl&&(s=!0),i.ios&&"ios"===n.theme?t.expandable?(s&&t.$inputEl.focus(),a()):(s&&t.$inputEl.focus(),!e||"focus"!==e.type&&!0!==e?a():y((function(){a()}),400)):(s&&t.$inputEl.focus(),"md"===n.theme&&t.expandable&&t.$el.parents(".page, .view, .navbar-inner, .navbar").scrollLeft(n.rtl?100:0),a()),t},i.disable=function(){var e=this;if(!e.enabled)return e;var t=e.app;if(e.$inputEl.val("").trigger("change"),e.$el.removeClass("searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button"),e.expandable){var n=e.$el.parents(".navbar"),r=e.$pageEl&&e.$pageEl.find(".page-content");if(n.hasClass("navbar-large")&&r.length){var i=n.find(".title-large");if(e.$el.transitionEnd((function(){r.removeClass("with-searchbar-expandable-closing")})),n.hasClass("navbar-large")&&n.hasClass("navbar-large-collapsed")&&i.length){var a=r[0].scrollTop,o=i[0].offsetHeight;a>o&&(r.transition(0),r[0].scrollTop=a+o,setTimeout((function(){r.transition("")}),200))}r.removeClass("with-searchbar-expandable-enabled").addClass("with-searchbar-expandable-closing")}"md"===t.theme&&n.length?(n.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){n.removeClass("with-searchbar-expandable-closing")}))):(n.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){n.removeClass("with-searchbar-expandable-closing")})),e.$pageEl&&e.$pageEl.find(".page-content").trigger("scroll"))}return!e.expandable&&e.$disableButtonEl&&e.$disableButtonEl.length>0&&"md"!==t.theme&&e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e.$backdropEl&&(e.$searchContainer&&e.$searchContainer.length||e.params.customSearch)&&e.backdropHide(),e.enabled=!1,e.$inputEl.blur(),e.$hideOnEnableEl&&e.$hideOnEnableEl.removeClass("hidden-by-searchbar"),e.$el.trigger("searchbar:disable"),e.emit("local::disable searchbarDisable",e),e},i.toggle=function(){var e=this;return e.enabled?e.disable():e.enable(!0),e},i.backdropShow=function(){var e=this;return e.$backdropEl&&e.$backdropEl.addClass("searchbar-backdrop-in"),e},i.backdropHide=function(){var e=this;return e.$backdropEl&&e.$backdropEl.removeClass("searchbar-backdrop-in"),e},i.search=function(e,t){var n=this;if(n.previousQuery=n.query||"",e===n.previousQuery)return n;t||(n.enabled||n.enable(),n.$inputEl.val(e),n.$inputEl.trigger("input")),n.query=e,n.value=e;var r=n.$searchContainer,i=n.$el,o=n.$foundEl,s=n.$notFoundEl,l=n.$hideOnSearchEl,c=n.isVirtualList;if(e.length>0&&l?l.addClass("hidden-by-searchbar"):l&&l.removeClass("hidden-by-searchbar"),(r&&r.length&&i.hasClass("searchbar-enabled")||n.params.customSearch&&i.hasClass("searchbar-enabled"))&&(0===e.length?n.backdropShow():n.backdropHide()),n.params.customSearch)return i.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery}),n.emit("local::search searchbarSearch",n,e,n.previousQuery),n;var d,u=[];if(c){if(n.virtualList=r[0].f7VirtualList,""===e.trim())return n.virtualList.resetFilter(),s&&s.hide(),o&&o.show(),i.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery}),n.emit("local::search searchbarSearch",n,e,n.previousQuery),n;if(d=n.params.removeDiacritics?zi(e):e,n.virtualList.params.searchAll)u=n.virtualList.params.searchAll(d,n.virtualList.items)||[];else if(n.virtualList.params.searchByItem)for(var p=0;p<n.virtualList.items.length;p+=1)n.virtualList.params.searchByItem(d,n.virtualList.items[p],p)&&u.push(p)}else{var h;h=n.params.removeDiacritics?zi(e.trim().toLowerCase()).split(" "):e.trim().toLowerCase().split(" "),r.find(n.params.searchItem).removeClass("hidden-by-searchbar").each((function(e){var t=a(e),r=[],i=n.params.searchIn?t.find(n.params.searchIn):t;n.params.searchIn===n.params.searchItem&&(i=t),i.each((function(e){var t=a(e).text().trim().toLowerCase();n.params.removeDiacritics&&(t=zi(t)),r.push(t)})),r=r.join(" ");for(var o=0,s=0;s<h.length;s+=1)r.indexOf(h[s])>=0&&(o+=1);o===h.length||n.params.ignore&&t.is(n.params.ignore)?u.push(t[0]):t.addClass("hidden-by-searchbar")})),n.params.hideDividers&&r.find(n.params.searchGroupTitle).each((function(e){for(var t=a(e),r=t.nextAll(n.params.searchItem),i=!0,o=0;o<r.length;o+=1){var s=r.eq(o);if(s.is(n.params.searchGroupTitle))break;s.hasClass("hidden-by-searchbar")||(i=!1)}var l=n.params.ignore&&t.is(n.params.ignore);i&&!l?t.addClass("hidden-by-searchbar"):t.removeClass("hidden-by-searchbar")})),n.params.hideGroups&&r.find(n.params.searchGroup).each((function(e){var t=a(e),r=n.params.ignore&&t.is(n.params.ignore);0!==t.find(n.params.searchItem).filter((function(e){return!a(e).hasClass("hidden-by-searchbar")})).length||r?t.removeClass("hidden-by-searchbar"):t.addClass("hidden-by-searchbar")}))}return 0===u.length?(s&&s.show(),o&&o.hide()):(s&&s.hide(),o&&o.show()),c&&n.virtualList&&n.virtualList.filterItems(u),i.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery,foundItems:u}),n.emit("local::search searchbarSearch",n,e,n.previousQuery,u),n},i.init=function(){var e=this;e.expandable&&e.$el&&e.$el.addClass("searchbar-expandable"),e.inline&&e.$el&&e.$el.addClass("searchbar-inline"),e.attachEvents()},i.destroy=function(){var e=this;e.emit("local::beforeDestroy searchbarBeforeDestroy",e),e.$el.trigger("searchbar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Searchbar=null,delete e.$el[0].f7Searchbar),g(e)},r}(W);const Wi=Vi,ji={name:"searchbar",static:{Searchbar:Wi},create:function(){this.searchbar=q({defaultSelector:".searchbar",constructor:Wi,app:this,domProp:"f7Searchbar",addMethods:"clear enable disable toggle search".split(" ")})},on:{tabMounted:function(e){var t=this;a(e).find(".searchbar-init").each((function(e){var n=a(e);t.searchbar.create(T(n.dataset(),{el:e}))}))},tabBeforeRemove:function(e){a(e).find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".searchbar-init").each((function(e){var n=a(e);t.searchbar.create(T(n.dataset(),{el:e}))})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){var n=a(e);t.searchbar.create(T(n.dataset(),{el:e}))}))},pageBeforeRemove:function(e){e.$el.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))}},clicks:{".searchbar-clear":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.clear()},".searchbar-enable":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.enable(!0)},".searchbar-disable":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.disable()},".searchbar-toggle":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.toggle()}},vnode:{"searchbar-init":{insert:function(e){var t=e.elm,n=a(t);this.searchbar.create(T(n.dataset(),{el:t}))},destroy:function(e){var t=e.elm;t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()}}}};function Ui(){return Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ui.apply(this,arguments)}function qi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e,t){return Ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ki(e,t)}var Ji=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=qi(r=e.call(this,n,[t])||this),o={autoLayout:!0,messages:[],newMessagesFirst:!1,scrollMessages:!0,scrollMessagesOnEdge:!0,firstMessageRule:void 0,lastMessageRule:void 0,tailMessageRule:void 0,sameNameMessageRule:void 0,sameHeaderMessageRule:void 0,sameFooterMessageRule:void 0,sameAvatarMessageRule:void 0,customClassMessageRule:void 0,renderMessage:void 0};i.useModulesParams(o),i.params=T(o,n);var s=a(n.el).eq(0);if(0===s.length)return i||qi(r);if(s[0].f7Messages)return s[0].f7Messages||qi(r);s[0].f7Messages=i;var l=s.closest(".page-content").eq(0);return T(i,{messages:i.params.messages,$el:s,el:s[0],$pageContentEl:l,pageContentEl:l[0]}),i.useModules(),i.init(),i||qi(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ki(t,n);var i=r.prototype;return i.getMessageData=function(e){var t=a(e),n={name:t.find(".message-name").html(),header:t.find(".message-header").html(),textHeader:t.find(".message-text-header").html(),textFooter:t.find(".message-text-footer").html(),footer:t.find(".message-footer").html(),isTitle:t.hasClass("messages-title"),type:t.hasClass("message-sent")?"sent":"received",text:t.find(".message-text").html(),image:t.find(".message-image").html(),imageSrc:t.find(".message-image img").attr("src"),typing:t.hasClass("message-typing")};n.isTitle&&(n.text=t.html()),n.text&&n.textHeader&&(n.text=n.text.replace('<div class="message-text-header">'+n.textHeader+"</div>","")),n.text&&n.textFooter&&(n.text=n.text.replace('<div class="message-text-footer">'+n.textFooter+"</div>",""));var r=t.find(".message-avatar").css("background-image");return"none"!==r&&""!==r||(r=void 0),r=r&&"string"==typeof r?r.replace("url(","").replace(")","").replace(/"/g,"").replace(/'/g,""):void 0,n.avatar=r,n},i.getMessagesData=function(){var e=this,t=[];return e.$el.find(".message, .messages-title").each((function(n){t.push(e.getMessageData(n))})),t},i.renderMessage=function(e){var t=this,n=T({type:"sent",attrs:{}},e);return t.params.renderMessage?t.params.renderMessage.call(t,n):n.isTitle?'<div class="messages-title">'+n.text+"</div>":mn("div",Ui({class:"message message-"+n.type+" "+(n.isTyping?"message-typing":"")+" "+(n.cssClass||"")},n.attrs),n.avatar&&mn("div",{class:"message-avatar",style:"background-image:url("+n.avatar+")"}),mn("div",{class:"message-content"},n.name&&mn("div",{class:"message-name"},n.name),n.header&&mn("div",{class:"message-header"},n.header),mn("div",{class:"message-bubble"},n.textHeader&&mn("div",{class:"message-text-header"},n.textHeader),n.image&&mn("div",{class:"message-image"},n.image),n.imageSrc&&!n.image&&mn("div",{class:"message-image"},mn("img",{src:n.imageSrc})),(n.text||n.isTyping)&&mn("div",{class:"message-text"},n.text||"",n.isTyping&&mn("div",{class:"message-typing-indicator"},mn("div",null),mn("div",null),mn("div",null))),n.textFooter&&mn("div",{class:"message-text-footer"},n.textFooter)),n.footer&&mn("div",{class:"message-footer"},n.footer)))},i.renderMessages=function(e,t){void 0===e&&(e=this.messages),void 0===t&&(t=this.params.newMessagesFirst?"prepend":"append");var n=this,r=e.map((function(e){return n.renderMessage(e)})).join("");n.$el[t](r)},i.isFirstMessage=function(){var e;return!!this.params.firstMessageRule&&(e=this.params).firstMessageRule.apply(e,arguments)},i.isLastMessage=function(){var e;return!!this.params.lastMessageRule&&(e=this.params).lastMessageRule.apply(e,arguments)},i.isTailMessage=function(){var e;return!!this.params.tailMessageRule&&(e=this.params).tailMessageRule.apply(e,arguments)},i.isSameNameMessage=function(){var e;return!!this.params.sameNameMessageRule&&(e=this.params).sameNameMessageRule.apply(e,arguments)},i.isSameHeaderMessage=function(){var e;return!!this.params.sameHeaderMessageRule&&(e=this.params).sameHeaderMessageRule.apply(e,arguments)},i.isSameFooterMessage=function(){var e;return!!this.params.sameFooterMessageRule&&(e=this.params).sameFooterMessageRule.apply(e,arguments)},i.isSameAvatarMessage=function(){var e;return!!this.params.sameAvatarMessageRule&&(e=this.params).sameAvatarMessageRule.apply(e,arguments)},i.isCustomClassMessage=function(){var e;if(this.params.customClassMessageRule)return(e=this.params).customClassMessageRule.apply(e,arguments)},i.layout=function(){var e=this;e.$el.find(".message, .messages-title").each((function(t,n){var r=a(t);e.messages||(e.messages=e.getMessagesData());var i=[],o=e.messages[n],s=e.messages[n-1],l=e.messages[n+1];e.isFirstMessage(o,s,l)&&i.push("message-first"),e.isLastMessage(o,s,l)&&i.push("message-last"),e.isTailMessage(o,s,l)&&i.push("message-tail"),e.isSameNameMessage(o,s,l)&&i.push("message-same-name"),e.isSameHeaderMessage(o,s,l)&&i.push("message-same-header"),e.isSameFooterMessage(o,s,l)&&i.push("message-same-footer"),e.isSameAvatarMessage(o,s,l)&&i.push("message-same-avatar");var c=e.isCustomClassMessage(o,s,l);c&&c.length&&("string"==typeof c&&(c=c.split(" ")),c.forEach((function(e){i.push(e)}))),r.removeClass("message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar"),i.forEach((function(e){r.addClass(e)}))}))},i.clear=function(){this.messages=[],this.$el.html("")},i.removeMessage=function(e,t){void 0===t&&(t=!0);var n,r,i=this;return"number"==typeof e?(n=e,r=i.$el.find(".message, .messages-title").eq(n)):i.messages&&i.messages.indexOf(e)>=0?(n=i.messages.indexOf(e),r=i.$el.children().eq(n)):n=(r=a(e)).index(),0===r.length||(r.remove(),i.messages.splice(n,1),i.params.autoLayout&&t&&i.layout()),i},i.removeMessages=function(e,t){void 0===t&&(t=!0);var n=this;if(Array.isArray(e)){var r=[];e.forEach((function(e){r.push(n.$el.find(".message, .messages-title").eq(e))})),r.forEach((function(e){n.removeMessage(e,!1)}))}else a(e).each((function(e){n.removeMessage(e,!1)}));return n.params.autoLayout&&t&&n.layout(),n},i.addMessage=function(){for(var e,t,n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return"boolean"==typeof i[1]?(e=i[0],t=i[1],n=i[2]):(e=i[0],n=i[1],t=i[2]),void 0===t&&(t=!0),void 0===n&&(n=this.params.newMessagesFirst?"prepend":"append"),this.addMessages([e],t,n)},i.setScrollData=function(){var e=this,t=e.pageContentEl.scrollHeight,n=e.pageContentEl.offsetHeight,r=e.pageContentEl.scrollTop;return e.scrollData={scrollHeightBefore:t,heightBefore:n,scrollBefore:r},{scrollHeightBefore:t,heightBefore:n,scrollBefore:r}},i.addMessages=function(){for(var e,t,n,r=this,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];"boolean"==typeof o[1]?(e=o[0],t=o[1],n=o[2]):(e=o[0],n=o[1],t=o[2]),void 0===t&&(t=!0),void 0===n&&(n=r.params.newMessagesFirst?"prepend":"append");var l=r.setScrollData(),c=l.scrollHeightBefore,d=l.scrollBefore,u="",p=r.messages.filter((function(e){return e.isTyping}))[0];e.forEach((function(e){p?"append"===n?r.messages.splice(r.messages.indexOf(p),0,e):r.messages.splice(r.messages.indexOf(p)+1,0,e):r.messages["append"===n?"push":"unshift"](e),u+=r.renderMessage(e)}));var h=a(u);return t&&("append"!==n||r.params.newMessagesFirst||h.addClass("message-appear-from-bottom"),"prepend"===n&&r.params.newMessagesFirst&&h.addClass("message-appear-from-top")),p?"append"===n?h.insertBefore(r.$el.find(".message-typing")):h.insertAfter(r.$el.find(".message-typing")):r.$el[n](h),r.params.autoLayout&&r.layout(),"prepend"!==n||p||(r.pageContentEl.scrollTop=d+(r.pageContentEl.scrollHeight-c)),r.params.scrollMessages&&("append"===n&&!r.params.newMessagesFirst||"prepend"===n&&r.params.newMessagesFirst&&!p)&&r.scrollWithEdgeCheck(t),r},i.showTyping=function(e){void 0===e&&(e={});var t=this,n=t.messages.filter((function(e){return e.isTyping}))[0];return n&&t.removeMessage(t.messages.indexOf(n)),t.addMessage(T({type:"received",isTyping:!0},e)),t},i.hideTyping=function(){var e,t,n=this;if(n.messages.forEach((function(t,n){t.isTyping&&(e=n)})),void 0!==e&&n.$el.find(".message").eq(e).hasClass("message-typing")&&(t=!0,n.removeMessage(e)),!t){var r=n.$el.find(".message-typing");r.length&&n.removeMessage(r)}return n},i.scrollWithEdgeCheck=function(e){var t=this,n=t.scrollData,r=n.scrollBefore,i=n.scrollHeightBefore,a=n.heightBefore;if(t.params.scrollMessagesOnEdge){var o=!1;t.params.newMessagesFirst&&0===r&&(o=!0),!t.params.newMessagesFirst&&r-(i-a)>=-10&&(o=!0),o&&t.scroll(e?void 0:0)}else t.scroll(e?void 0:0)},i.scroll=function(e,t){void 0===e&&(e=300);var n,r=this,i=r.pageContentEl.scrollTop;if(void 0!==t)n=t;else if((n=r.params.newMessagesFirst?0:r.pageContentEl.scrollHeight-r.pageContentEl.offsetHeight)===i)return r;return r.$pageContentEl.scrollTop(n,e),r},i.init=function(){var e=this;e.messages&&0!==e.messages.length||(e.messages=e.getMessagesData()),e.params.messages&&e.params.messages.length&&e.renderMessages(),e.params.autoLayout&&e.layout(),e.params.scrollMessages&&e.scroll(0)},i.destroy=function(){var e=this;e.emit("local::beforeDestroy messagesBeforeDestroy",e),e.$el.trigger("messages:beforedestroy"),e.$el[0]&&(e.$el[0].f7Messages=null,delete e.$el[0].f7Messages),g(e)},r}(W);const Qi=Ji,Yi={name:"messages",static:{Messages:Qi},create:function(){this.messages=q({defaultSelector:".messages",constructor:Qi,app:this,domProp:"f7Messages",addMethods:"renderMessages layout scroll clear removeMessage removeMessages addMessage addMessages".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;a(e).find(".messages-init").each((function(e){t.messages.destroy(e)}))},tabMounted:function(e){var t=this;a(e).find(".messages-init").each((function(e){t.messages.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.create({el:e})}))}},vnode:{"messages-init":{insert:function(e){var t=e.elm;this.messages.create({el:t})},destroy:function(e){var t=e.elm;this.messages.destroy(t)}}}};function Xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zi(e,t){return Zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zi(e,t)}var ea=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=Xi(r=e.call(this,n,[t])||this),o={top:!1,topOffset:0,bottomOffset:0,attachments:[],renderAttachments:void 0,renderAttachment:void 0,maxHeight:null,resizePage:!0};i.useModulesParams(o),i.params=T(o,n);var s=a(i.params.el);if(0===s.length)return i||Xi(r);if(s[0].f7Messagebar)return s[0].f7Messagebar||Xi(r);s[0].f7Messagebar=i;var l,c=s.parents(".page").eq(0),d=c.find(".page-content").eq(0),u=s.find(".messagebar-area");l=i.params.textareaEl?a(i.params.textareaEl):s.find("textarea");var p=s.find(".messagebar-attachments"),h=s.find(".messagebar-sheet");function f(){i.params.resizePage&&i.resizePage()}function m(e){e.preventDefault()}function g(e){var t=a(this).index();a(e.target).closest(".messagebar-attachment-delete").length?(a(this).trigger("messagebar:attachmentdelete",t),i.emit("local::attachmentDelete messagebarAttachmentDelete",i,this,t)):(a(this).trigger("messagebar:attachmentclick",t),i.emit("local::attachmentClick messagebarAttachmentClick",i,this,t))}function v(){i.checkEmptyState(),i.$el.trigger("messagebar:change"),i.emit("local::change messagebarChange",i)}function b(){i.sheetHide(),i.$el.addClass("messagebar-focused"),i.$el.trigger("messagebar:focus"),i.emit("local::focus messagebarFocus",i)}function y(){i.$el.removeClass("messagebar-focused"),i.$el.trigger("messagebar:blur"),i.emit("local::blur messagebarBlur",i)}return i.params.top&&s.addClass("messagebar-top"),T(i,{$el:s,el:s[0],$areaEl:u,areaEl:u[0],$textareaEl:l,textareaEl:l[0],$attachmentsEl:p,attachmentsEl:p[0],attachmentsVisible:p.hasClass("messagebar-attachments-visible"),$sheetEl:h,sheetEl:h[0],sheetVisible:h.hasClass("messagebar-sheet-visible"),$pageEl:c,pageEl:c[0],$pageContentEl:d,pageContentEl:d,top:s.hasClass("messagebar-top")||i.params.top,attachments:[]}),i.attachEvents=function(){s.on("textarea:resize",f),s.on("submit",m),s.on("click",".messagebar-attachment",g),l.on("change input",v),l.on("focus",b),l.on("blur",y),t.on("resize",f)},i.detachEvents=function(){s.off("textarea:resize",f),s.off("submit",m),s.off("click",".messagebar-attachment",g),l.off("change input",v),l.off("focus",b),l.off("blur",y),t.off("resize",f)},i.useModules(),i.init(),i||Xi(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Zi(t,n);var i=r.prototype;return i.focus=function(){return this.$textareaEl.focus(),this},i.blur=function(){return this.$textareaEl.blur(),this},i.clear=function(){return this.$textareaEl.val("").trigger("change"),this},i.getValue=function(){return this.$textareaEl.val().trim()},i.setValue=function(e){return this.$textareaEl.val(e).trigger("change"),this},i.setPlaceholder=function(e){return this.$textareaEl.attr("placeholder",e),this},i.resizePage=function(){var e=this,t=e.params,n=e.$el,r=e.top,i=e.$pageEl,a=e.$pageContentEl,o=e.$areaEl,s=e.$textareaEl,l=e.$sheetEl,c=e.$attachmentsEl,d=n[0].offsetHeight,u=t.maxHeight;if(r);else{var p=parseInt(a.css("padding-bottom"),10),h=d+t.bottomOffset;if(h!==p&&a.length){var f=parseInt(a.css("padding-top"),10),m=a[0].scrollHeight,g=a[0].offsetHeight,v=a[0].scrollTop===m-g;u||(u=i[0].offsetHeight-f-l.outerHeight()-c.outerHeight()-parseInt(o.css("margin-top"),10)-parseInt(o.css("margin-bottom"),10)),s.css("max-height",u+"px"),a.css("padding-bottom",h+"px"),v&&a.scrollTop(a[0].scrollHeight-g),n.trigger("messagebar:resizepage"),e.emit("local::resizePage messagebarResizePage",e)}}},i.checkEmptyState=function(){var e=this.$el,t=this.$textareaEl.val().trim();t&&t.length?e.addClass("messagebar-with-value"):e.removeClass("messagebar-with-value")},i.attachmentsCreate=function(e){void 0===e&&(e="");var t=this,n=a('<div class="messagebar-attachments">'+e+"</div>");return n.insertBefore(t.$textareaEl),T(t,{$attachmentsEl:n,attachmentsEl:n[0]}),t},i.attachmentsShow=function(e){void 0===e&&(e="");var t=this;return t.$attachmentsEl=t.$el.find(".messagebar-attachments"),0===t.$attachmentsEl.length&&t.attachmentsCreate(e),t.$el.addClass("messagebar-attachments-visible"),t.attachmentsVisible=!0,t.params.resizePage&&t.resizePage(),t},i.attachmentsHide=function(){var e=this;return e.$el.removeClass("messagebar-attachments-visible"),e.attachmentsVisible=!1,e.params.resizePage&&e.resizePage(),e},i.attachmentsToggle=function(){var e=this;return e.attachmentsVisible?e.attachmentsHide():e.attachmentsShow(),e},i.renderAttachment=function(e){var t=this;return t.params.renderAttachment?t.params.renderAttachment.call(t,e):'\n      <div class="messagebar-attachment">\n        <img src="'+e+'">\n        <span class="messagebar-attachment-delete"></span>\n      </div>\n    '},i.renderAttachments=function(){var e,t=this;e=t.params.renderAttachments?t.params.renderAttachments.call(t,t.attachments):""+t.attachments.map((function(e){return t.renderAttachment(e)})).join(""),0===t.$attachmentsEl.length?t.attachmentsCreate(e):t.$attachmentsEl.html(e)},i.sheetCreate=function(e){void 0===e&&(e="");var t=this,n=a('<div class="messagebar-sheet">'+e+"</div>");return t.$el.append(n),T(t,{$sheetEl:n,sheetEl:n[0]}),t},i.sheetShow=function(e){void 0===e&&(e="");var t=this;return t.$sheetEl=t.$el.find(".messagebar-sheet"),0===t.$sheetEl.length&&t.sheetCreate(e),t.$el.addClass("messagebar-sheet-visible"),t.sheetVisible=!0,t.params.resizePage&&t.resizePage(),t},i.sheetHide=function(){var e=this;return e.$el.removeClass("messagebar-sheet-visible"),e.sheetVisible=!1,e.params.resizePage&&e.resizePage(),e},i.sheetToggle=function(){var e=this;return e.sheetVisible?e.sheetHide():e.sheetShow(),e},i.init=function(){var e=this;return e.attachEvents(),e.checkEmptyState(),e},i.destroy=function(){var e=this;e.emit("local::beforeDestroy messagebarBeforeDestroy",e),e.$el.trigger("messagebar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Messagebar=null,delete e.$el[0].f7Messagebar),g(e)},r}(W);const ta=ea,na={name:"messagebar",static:{Messagebar:ta},create:function(){this.messagebar=q({defaultSelector:".messagebar",constructor:ta,app:this,domProp:"f7Messagebar",addMethods:"clear getValue setValue setPlaceholder resizePage focus blur attachmentsCreate attachmentsShow attachmentsHide attachmentsToggle renderAttachments sheetCreate sheetShow sheetHide sheetToggle".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;a(e).find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},tabMounted:function(e){var t=this;a(e).find(".messagebar-init").each((function(e){t.messagebar.create(T({el:e},a(e).dataset()))}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.create(T({el:e},a(e).dataset()))}))}},vnode:{"messagebar-init":{insert:function(e){var t=e.elm;this.messagebar.create(T({el:t},a(t).dataset()))},destroy:function(e){var t=e.elm;this.messagebar.destroy(t)}}}};var ra={addClass:i.addClass,removeClass:i.removeClass,hasClass:i.hasClass,toggleClass:i.toggleClass,attr:i.attr,removeAttr:i.removeAttr,transform:i.transform,transition:i.transition,on:i.on,off:i.off,trigger:i.trigger,transitionEnd:i.transitionEnd,outerWidth:i.outerWidth,outerHeight:i.outerHeight,styles:i.styles,offset:i.offset,css:i.css,each:i.each,html:i.html,text:i.text,is:i.is,index:i.index,eq:i.eq,append:i.append,prepend:i.prepend,next:i.next,nextAll:i.nextAll,prev:i.prev,prevAll:i.prevAll,parent:i.parent,parents:i.parents,closest:i.closest,find:i.find,children:i.children,filter:i.filter,remove:i.remove};Object.keys(ra).forEach((function(e){Object.defineProperty(i.$.fn,e,{value:ra[e],writable:!0})}));const ia=i.$;function aa(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function oa(){return Date.now()}function sa(e,t){void 0===t&&(t="x");var n,r,i,a=(0,o.Jj)(),s=function(e){var t,n=(0,o.Jj)();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return a.WebKitCSSMatrix?((r=s.transform||s.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),i=new a.WebKitCSSMatrix("none"===r?"":r)):n=(i=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=a.WebKitCSSMatrix?i.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=a.WebKitCSSMatrix?i.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function la(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function ca(){for(var e,t=Object(arguments.length<=0?void 0:arguments[0]),n=["__proto__","constructor","prototype"],r=1;r<arguments.length;r+=1){var i=r<0||arguments.length<=r?void 0:arguments[r];if(null!=i&&(e=i,!("undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType))))for(var a=Object.keys(Object(i)).filter((function(e){return n.indexOf(e)<0})),o=0,s=a.length;o<s;o+=1){var l=a[o],c=Object.getOwnPropertyDescriptor(i,l);void 0!==c&&c.enumerable&&(la(t[l])&&la(i[l])?i[l].__swiper__?t[l]=i[l]:ca(t[l],i[l]):!la(t[l])&&la(i[l])?(t[l]={},i[l].__swiper__?t[l]=i[l]:ca(t[l],i[l])):t[l]=i[l])}}return t}function da(e,t){Object.keys(t).forEach((function(n){la(t[n])&&Object.keys(t[n]).forEach((function(r){"function"==typeof t[n][r]&&(t[n][r]=t[n][r].bind(e))})),e[n]=t[n]}))}function ua(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function pa(e,t,n,r){var i=(0,o.Me)();return n&&Object.keys(r).forEach((function(n){if(!t[n]&&!0===t.auto){var a=i.createElement("div");a.className=r[n],e.append(a),t[n]=a}})),t}var ha,fa,ma;function ga(){return ha||(ha=function(){var e=(0,o.Jj)(),t=(0,o.Me)();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),ha}const va={name:"resize",create:function(){var e=this;ca(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var n=e.width,r=e.height,i=n,a=r;t.forEach((function(t){var n=t.contentBoxSize,r=t.contentRect,o=t.target;o&&o!==e.el||(i=r?r.width:(n[0]||n).inlineSize,a=r?r.height:(n[0]||n).blockSize)})),i===n&&a===r||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=(0,o.Jj)();e.params.resizeObserver&&void 0!==(0,o.Jj)().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=(0,o.Jj)();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function ba(){return ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ba.apply(this,arguments)}var ya={attach:function(e,t){void 0===t&&(t={});var n=(0,o.Jj)(),r=this,i=new(n.MutationObserver||n.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){r.emit("observerUpdate",e[0])};n.requestAnimationFrame?n.requestAnimationFrame(t):n.setTimeout(t,0)}else r.emit("observerUpdate",e[0])}));i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),r.observer.observers.push(i)},init:function(){var e=this;if(e.support.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),n=0;n<t.length;n+=1)e.observer.attach(t[n]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}};const _a={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){da(this,{observer:ba({},ya,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}},wa={on:function(e,t,n){var r=this;if("function"!=typeof t)return r;var i=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once:function(e,t,n){var r=this;if("function"!=typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(r,a)}return i.__emitterProxy=t,r.on(e,i,n)},onAny:function(e,t){var n=this;if("function"!=typeof e)return n;var r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,i){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners)return r;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return"string"==typeof a[0]||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),n=r):(e=a[0].events,t=a[0].data,n=a[0].context||r),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat(t))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}},Ca={updateSize:function(){var e,t,n=this,r=n.$el;e=void 0!==n.params.width&&null!==n.params.width?n.params.width:r[0].clientWidth,t=void 0!==n.params.height&&null!==n.params.height?n.params.height:r[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),ca(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,i=e.$wrapperEl,a=e.size,o=e.rtlTranslate,s=e.wrongRTL,l=e.virtual&&r.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,d=i.children("."+e.params.slideClass),u=l?e.virtual.slides.length:d.length,p=[],h=[],f=[],m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));var g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));var v=e.snapGrid.length,b=e.slidesGrid.length,y=r.spaceBetween,_=-m,w=0,C=0;if(void 0!==a){var x,k;"string"==typeof y&&y.indexOf("%")>=0&&(y=parseFloat(y.replace("%",""))/100*a),e.virtualSize=-y,o?d.css({marginLeft:"",marginBottom:"",marginTop:""}):d.css({marginRight:"",marginBottom:"",marginTop:""}),r.slidesPerColumn>1&&(x=Math.floor(u/r.slidesPerColumn)===u/e.params.slidesPerColumn?u:Math.ceil(u/r.slidesPerColumn)*r.slidesPerColumn,"auto"!==r.slidesPerView&&"row"===r.slidesPerColumnFill&&(x=Math.max(x,r.slidesPerView*r.slidesPerColumn)));for(var E,S,T,M=r.slidesPerColumn,I=x/M,L=Math.floor(u/r.slidesPerColumn),$=0;$<u;$+=1){k=0;var P=d.eq($);if(r.slidesPerColumn>1){var O=void 0,B=void 0,A=void 0;if("row"===r.slidesPerColumnFill&&r.slidesPerGroup>1){var R=Math.floor($/(r.slidesPerGroup*r.slidesPerColumn)),D=$-r.slidesPerColumn*r.slidesPerGroup*R,N=0===R?r.slidesPerGroup:Math.min(Math.ceil((u-R*M*r.slidesPerGroup)/M),r.slidesPerGroup);O=(B=D-(A=Math.floor(D/N))*N+R*r.slidesPerGroup)+A*x/M,P.css({"-webkit-box-ordinal-group":O,"-moz-box-ordinal-group":O,"-ms-flex-order":O,"-webkit-order":O,order:O})}else"column"===r.slidesPerColumnFill?(A=$-(B=Math.floor($/M))*M,(B>L||B===L&&A===M-1)&&(A+=1)>=M&&(A=0,B+=1)):B=$-(A=Math.floor($/I))*I;P.css(t("margin-top"),0!==A?r.spaceBetween&&r.spaceBetween+"px":"")}if("none"!==P.css("display")){if("auto"===r.slidesPerView){var G=getComputedStyle(P[0]),z=P[0].style.transform,H=P[0].style.webkitTransform;if(z&&(P[0].style.transform="none"),H&&(P[0].style.webkitTransform="none"),r.roundLengths)k=e.isHorizontal()?P.outerWidth(!0):P.outerHeight(!0);else{var F=n(G,"width"),V=n(G,"padding-left"),W=n(G,"padding-right"),j=n(G,"margin-left"),U=n(G,"margin-right"),q=G.getPropertyValue("box-sizing");if(q&&"border-box"===q)k=F+j+U;else{var K=P[0],J=K.clientWidth;k=F+V+W+j+U+(K.offsetWidth-J)}}z&&(P[0].style.transform=z),H&&(P[0].style.webkitTransform=H),r.roundLengths&&(k=Math.floor(k))}else k=(a-(r.slidesPerView-1)*y)/r.slidesPerView,r.roundLengths&&(k=Math.floor(k)),d[$]&&(d[$].style[t("width")]=k+"px");d[$]&&(d[$].swiperSlideSize=k),f.push(k),r.centeredSlides?(_=_+k/2+w/2+y,0===w&&0!==$&&(_=_-a/2-y),0===$&&(_=_-a/2-y),Math.abs(_)<.001&&(_=0),r.roundLengths&&(_=Math.floor(_)),C%r.slidesPerGroup==0&&p.push(_),h.push(_)):(r.roundLengths&&(_=Math.floor(_)),(C-Math.min(e.params.slidesPerGroupSkip,C))%e.params.slidesPerGroup==0&&p.push(_),h.push(_),_=_+k+y),e.virtualSize+=k+y,w=k,C+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+g,o&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:e.virtualSize+r.spaceBetween+"px"}),r.setWrapperSize&&i.css(((S={})[t("width")]=e.virtualSize+r.spaceBetween+"px",S)),r.slidesPerColumn>1&&(e.virtualSize=(k+r.spaceBetween)*x,e.virtualSize=Math.ceil(e.virtualSize/r.slidesPerColumn)-r.spaceBetween,i.css(((T={})[t("width")]=e.virtualSize+r.spaceBetween+"px",T)),r.centeredSlides)){E=[];for(var Q=0;Q<p.length;Q+=1){var Y=p[Q];r.roundLengths&&(Y=Math.floor(Y)),p[Q]<e.virtualSize+p[0]&&E.push(Y)}p=E}if(!r.centeredSlides){E=[];for(var X=0;X<p.length;X+=1){var Z=p[X];r.roundLengths&&(Z=Math.floor(Z)),p[X]<=e.virtualSize-a&&E.push(Z)}p=E,Math.floor(e.virtualSize-a)-Math.floor(p[p.length-1])>1&&p.push(e.virtualSize-a)}if(0===p.length&&(p=[0]),0!==r.spaceBetween){var ee,te=e.isHorizontal()&&o?"marginLeft":t("marginRight");d.filter((function(e,t){return!r.cssMode||t!==d.length-1})).css(((ee={})[te]=y+"px",ee))}if(r.centeredSlides&&r.centeredSlidesBounds){var ne=0;f.forEach((function(e){ne+=e+(r.spaceBetween?r.spaceBetween:0)}));var re=(ne-=r.spaceBetween)-a;p=p.map((function(e){return e<0?-m:e>re?re+g:e}))}if(r.centerInsufficientSlides){var ie=0;if(f.forEach((function(e){ie+=e+(r.spaceBetween?r.spaceBetween:0)})),(ie-=r.spaceBetween)<a){var ae=(a-ie)/2;p.forEach((function(e,t){p[t]=e-ae})),h.forEach((function(e,t){h[t]=e+ae}))}}ca(e,{slides:d,snapGrid:p,slidesGrid:h,slidesSizesGrid:f}),u!==c&&e.emit("slidesLengthChange"),p.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==b&&e.emit("slidesGridLengthChange"),(r.watchSlidesProgress||r.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,n=this,r=[],i=n.virtual&&n.params.virtual.enabled,a=0;"number"==typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return i?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!i)break;r.push(o(s))}else r.push(o(n.activeIndex));for(t=0;t<r.length;t+=1)if(void 0!==r[t]){var l=r[t].offsetHeight;a=l>a?l:a}a&&n.$wrapperEl.css("height",a+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,n=t.params,r=t.slides,i=t.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();var a=-e;i&&(a=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var o=0;o<r.length;o+=1){var s=r[o],l=(a+(n.centeredSlides?t.minTranslate():0)-s.swiperSlideOffset)/(s.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight){var c=-(a-s.swiperSlideOffset),d=c+t.slidesSizesGrid[o];(c>=0&&c<t.size-1||d>1&&d<=t.size||c<=0&&d>=t.size)&&(t.visibleSlides.push(s),t.visibleSlidesIndexes.push(o),r.eq(o).addClass(n.slideVisibleClass))}s.progress=i?-l:l}t.visibleSlides=ia(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var r=t.params,i=t.maxTranslate()-t.minTranslate(),a=t.progress,o=t.isBeginning,s=t.isEnd,l=o,c=s;0===i?(a=0,o=!0,s=!0):(o=(a=(e-t.minTranslate())/i)<=0,s=a>=1),ca(t,{progress:a,isBeginning:o,isEnd:s}),(r.watchSlidesProgress||r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),o&&!l&&t.emit("reachBeginning toEdge"),s&&!c&&t.emit("reachEnd toEdge"),(l&&!o||c&&!s)&&t.emit("fromEdge"),t.emit("progress",a)},updateSlidesClasses:function(){var e,t=this,n=t.slides,r=t.params,i=t.$wrapperEl,a=t.activeIndex,o=t.realIndex,s=t.virtual&&r.virtual.enabled;n.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass),(e=s?t.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+a+'"]'):n.eq(a)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+o+'"]').addClass(r.slideDuplicateActiveClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+o+'"]').addClass(r.slideDuplicateActiveClass));var l=e.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&0===l.length&&(l=n.eq(0)).addClass(r.slideNextClass);var c=e.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&0===c.length&&(c=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(l.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),c.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,r=n.rtlTranslate?n.translate:-n.translate,i=n.slidesGrid,a=n.snapGrid,o=n.params,s=n.activeIndex,l=n.realIndex,c=n.snapIndex,d=e;if(void 0===d){for(var u=0;u<i.length;u+=1)void 0!==i[u+1]?r>=i[u]&&r<i[u+1]-(i[u+1]-i[u])/2?d=u:r>=i[u]&&r<i[u+1]&&(d=u+1):r>=i[u]&&(d=u);o.normalizeSlideIndex&&(d<0||void 0===d)&&(d=0)}if(a.indexOf(r)>=0)t=a.indexOf(r);else{var p=Math.min(o.slidesPerGroupSkip,d);t=p+Math.floor((d-p)/o.slidesPerGroup)}if(t>=a.length&&(t=a.length-1),d!==s){var h=parseInt(n.slides.eq(d).attr("data-swiper-slide-index")||d,10);ca(n,{snapIndex:t,realIndex:h,previousIndex:s,activeIndex:d}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==h&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==c&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,r=n.params,i=ia(e.target).closest("."+r.slideClass)[0],a=!1;if(i)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===i){a=!0,t=o;break}if(!i||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(ia(i).attr("data-swiper-slide-index"),10):n.clickedIndex=t,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}},xa={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,n=t.params,r=t.rtlTranslate,i=t.translate,a=t.$wrapperEl;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;var o=sa(a[0],e);return r&&(o=-o),o||0},setTranslate:function(e,t){var n=this,r=n.rtlTranslate,i=n.params,a=n.$wrapperEl,o=n.wrapperEl,s=n.progress,l=0,c=0;n.isHorizontal()?l=r?-e:e:c=e,i.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),i.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:i.virtualTranslate||a.transform("translate3d("+l+"px, "+c+"px, 0px)"),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c;var d=n.maxTranslate()-n.minTranslate();(0===d?0:(e-n.minTranslate())/d)!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);var a=this,o=a.params,s=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var l,c=a.minTranslate(),d=a.maxTranslate();if(l=r&&e>c?c:r&&e<d?d:e,a.updateProgress(l),o.cssMode){var u,p=a.isHorizontal();return 0===t?s[p?"scrollLeft":"scrollTop"]=-l:s.scrollTo?s.scrollTo(((u={})[p?"left":"top"]=-l,u.behavior="smooth",u)):s[p?"scrollLeft":"scrollTop"]=-l,!0}return 0===t?(a.setTransition(0),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,n&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}},ka={slideTo:function(e,t,n,r,i){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var a=parseInt(e,10);if(!isFinite(a))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=a}var o=this,s=e;s<0&&(s=0);var l=o.params,c=o.snapGrid,d=o.slidesGrid,u=o.previousIndex,p=o.activeIndex,h=o.rtlTranslate,f=o.wrapperEl,m=o.enabled;if(o.animating&&l.preventInteractionOnTransition||!m&&!r&&!i)return!1;var g=Math.min(o.params.slidesPerGroupSkip,s),v=g+Math.floor((s-g)/o.params.slidesPerGroup);v>=c.length&&(v=c.length-1),(p||l.initialSlide||0)===(u||0)&&n&&o.emit("beforeSlideChangeStart");var b,y=-c[v];if(o.updateProgress(y),l.normalizeSlideIndex)for(var _=0;_<d.length;_+=1){var w=-Math.floor(100*y),C=Math.floor(100*d[_]),x=Math.floor(100*d[_+1]);void 0!==d[_+1]?w>=C&&w<x-(x-C)/2?s=_:w>=C&&w<x&&(s=_+1):w>=C&&(s=_)}if(o.initialized&&s!==p){if(!o.allowSlideNext&&y<o.translate&&y<o.minTranslate())return!1;if(!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(p||0)!==s)return!1}if(b=s>p?"next":s<p?"prev":"reset",h&&-y===o.translate||!h&&y===o.translate)return o.updateActiveIndex(s),l.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==l.effect&&o.setTranslate(y),"reset"!==b&&(o.transitionStart(n,b),o.transitionEnd(n,b)),!1;if(l.cssMode){var k,E=o.isHorizontal(),S=-y;return h&&(S=f.scrollWidth-f.offsetWidth-S),0===t?f[E?"scrollLeft":"scrollTop"]=S:f.scrollTo?f.scrollTo(((k={})[E?"left":"top"]=S,k.behavior="smooth",k)):f[E?"scrollLeft":"scrollTop"]=S,!0}return 0===t?(o.setTransition(0),o.setTranslate(y),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,b),o.transitionEnd(n,b)):(o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,b),o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,b))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);var i=this,a=e;return i.params.loop&&(a+=i.loopedSlides),i.slideTo(a,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,i=r.params,a=r.animating;if(!r.enabled)return r;var o=r.activeIndex<i.slidesPerGroupSkip?1:i.slidesPerGroup;if(i.loop){if(a&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return r.slideTo(r.activeIndex+o,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,i=r.params,a=r.animating,o=r.snapGrid,s=r.slidesGrid,l=r.rtlTranslate;if(!r.enabled)return r;if(i.loop){if(a&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var d,u=c(l?r.translate:-r.translate),p=o.map((function(e){return c(e)})),h=o[p.indexOf(u)-1];return void 0===h&&i.cssMode&&o.forEach((function(e){!h&&u>=e&&(h=e)})),void 0!==h&&(d=s.indexOf(h))<0&&(d=r.activeIndex-1),r.slideTo(d,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);var i=this,a=i.activeIndex,o=Math.min(i.params.slidesPerGroupSkip,a),s=o+Math.floor((a-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[s]){var c=i.snapGrid[s];l-c>(i.snapGrid[s+1]-c)*r&&(a+=i.params.slidesPerGroup)}else{var d=i.snapGrid[s-1];l-d<=(i.snapGrid[s]-d)*r&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,i="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,a=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(ia(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?a<t.loopedSlides-i/2||a>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),a=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),aa((function(){t.slideTo(a)}))):t.slideTo(a):a>t.slides.length-i?(t.loopFix(),a=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),aa((function(){t.slideTo(a)}))):t.slideTo(a)}else t.slideTo(a)}},Ea={loopCreate:function(){var e=this,t=(0,o.Me)(),n=e.params,r=e.$wrapperEl;r.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var i=r.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var a=n.slidesPerGroup-i.length%n.slidesPerGroup;if(a!==n.slidesPerGroup){for(var s=0;s<a;s+=1){var l=ia(t.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);r.append(l)}i=r.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=i.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>i.length&&(e.loopedSlides=i.length);var c=[],d=[];i.each((function(t,n){var r=ia(t);n<e.loopedSlides&&d.push(t),n<i.length&&n>=i.length-e.loopedSlides&&c.push(t),r.attr("data-swiper-slide-index",n)}));for(var u=0;u<d.length;u+=1)r.append(ia(d[u].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var p=c.length-1;p>=0;p-=1)r.prepend(ia(c[p].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,r=e.slides,i=e.loopedSlides,a=e.allowSlidePrev,o=e.allowSlideNext,s=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var c=-s[n]-e.getTranslate();n<i?(t=r.length-3*i+n,t+=i,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c)):n>=r.length-i&&(t=-r.length+n+i,t+=i,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c)),e.allowSlidePrev=a,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides;t.children("."+n.slideClass+"."+n.slideDuplicateClass+",."+n.slideClass+"."+n.slideBlankClass).remove(),r.removeAttr("data-swiper-slide-index")}},Sa={appendSlide:function(e){var t=this,n=t.$wrapperEl,r=t.params;if(r.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var i=0;i<e.length;i+=1)e[i]&&n.append(e[i]);else n.append(e);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update()},prependSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.activeIndex;n.loop&&t.loopDestroy();var a=i+1;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)e[o]&&r.prepend(e[o]);a=i+e.length}else r.prepend(e);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),t.slideTo(a,0,!1)},addSlide:function(e,t){var n=this,r=n.$wrapperEl,i=n.params,a=n.activeIndex;i.loop&&(a-=n.loopedSlides,n.loopDestroy(),n.slides=r.children("."+i.slideClass));var o=n.slides.length;if(e<=0)n.prependSlide(t);else if(e>=o)n.appendSlide(t);else{for(var s=a>e?a+1:a,l=[],c=o-1;c>=e;c-=1){var d=n.slides.eq(c);d.remove(),l.unshift(d)}if("object"==typeof t&&"length"in t){for(var u=0;u<t.length;u+=1)t[u]&&r.append(t[u]);s=a>e?a+t.length:a}else r.append(t);for(var p=0;p<l.length;p+=1)r.append(l[p]);i.loop&&n.loopCreate(),i.observer&&n.support.observer||n.update(),i.loop?n.slideTo(s+n.loopedSlides,0,!1):n.slideTo(s,0,!1)}},removeSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,i=t.activeIndex;n.loop&&(i-=t.loopedSlides,t.loopDestroy(),t.slides=r.children("."+n.slideClass));var a,o=i;if("object"==typeof e&&"length"in e){for(var s=0;s<e.length;s+=1)a=e[s],t.slides[a]&&t.slides.eq(a).remove(),a<o&&(o-=1);o=Math.max(o,0)}else a=e,t.slides[a]&&t.slides.eq(a).remove(),a<o&&(o-=1),o=Math.max(o,0);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),n.loop?t.slideTo(o+t.loopedSlides,0,!1):t.slideTo(o,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}};function Ta(e){var t=this,n=(0,o.Me)(),r=(0,o.Jj)(),i=t.touchEventsData,a=t.params,s=t.touches;if(t.enabled&&(!t.animating||!a.preventInteractionOnTransition)){var l=e;l.originalEvent&&(l=l.originalEvent);var c=ia(l.target);if(("wrapper"!==a.touchEventsTarget||c.closest(t.wrapperEl).length)&&(i.isTouchEvent="touchstart"===l.type,(i.isTouchEvent||!("which"in l)||3!==l.which)&&!(!i.isTouchEvent&&"button"in l&&l.button>0||i.isTouched&&i.isMoved))){a.noSwipingClass&&""!==a.noSwipingClass&&l.target&&l.target.shadowRoot&&e.path&&e.path[0]&&(c=ia(e.path[0]));var d=a.noSwipingSelector?a.noSwipingSelector:"."+a.noSwipingClass,u=!(!l.target||!l.target.shadowRoot);if(a.noSwiping&&(u?function(e,t){return void 0===t&&(t=this),function t(n){return n&&n!==(0,o.Me)()&&n!==(0,o.Jj)()?(n.assignedSlot&&(n=n.assignedSlot),n.closest(e)||t(n.getRootNode().host)):null}(t)}(d,l.target):c.closest(d)[0]))t.allowClick=!0;else if(!a.swipeHandler||c.closest(a.swipeHandler)[0]){s.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,s.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var p=s.currentX,h=s.currentY,f=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,m=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(f&&(p<=m||p>=r.innerWidth-m)){if("prevent"!==f)return;e.preventDefault()}if(ca(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=p,s.startY=h,i.touchStartTime=oa(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==l.type){var g=!0;c.is(i.focusableElements)&&(g=!1),n.activeElement&&ia(n.activeElement).is(i.focusableElements)&&n.activeElement!==c[0]&&n.activeElement.blur();var v=g&&t.allowTouchMove&&a.touchStartPreventDefault;!a.touchStartForcePreventDefault&&!v||c[0].isContentEditable||l.preventDefault()}t.emit("touchStart",l)}}}}function Ma(e){var t=(0,o.Me)(),n=this,r=n.touchEventsData,i=n.params,a=n.touches,s=n.rtlTranslate;if(n.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===l.type){var c="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),d="touchmove"===l.type?c.pageX:l.pageX,u="touchmove"===l.type?c.pageY:l.pageY;if(l.preventedByNestedSwiper)return a.startX=d,void(a.startY=u);if(!n.allowTouchMove)return n.allowClick=!1,void(r.isTouched&&(ca(a,{startX:d,startY:u,currentX:d,currentY:u}),r.touchStartTime=oa()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(u<a.startY&&n.translate<=n.maxTranslate()||u>a.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<a.startX&&n.translate<=n.maxTranslate()||d>a.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&ia(l.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){a.currentX=d,a.currentY=u;var p,h=a.currentX-a.startX,f=a.currentY-a.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(f,2))<n.params.threshold))if(void 0===r.isScrolling&&(n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?r.isScrolling=!1:h*h+f*f>=25&&(p=180*Math.atan2(Math.abs(f),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?p>i.touchAngle:90-p>i.touchAngle)),r.isScrolling&&n.emit("touchMoveOpposite",l),void 0===r.startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation(),r.isMoved||(i.loop&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),r.isMoved=!0;var m=n.isHorizontal()?h:f;a.diff=m,m*=i.touchRatio,s&&(m=-m),n.swipeDirection=m>0?"prev":"next",r.currentTranslate=m+r.startTranslate;var g=!0,v=i.resistanceRatio;if(i.touchReleaseOnEdges&&(v=0),m>0&&r.currentTranslate>n.minTranslate()?(g=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+m,v))):m<0&&r.currentTranslate<n.maxTranslate()&&(g=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-m,v))),g&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(m)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,r.currentTranslate=r.startTranslate,void(a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}i.followFinger&&!i.cssMode&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&(0===r.velocities.length&&r.velocities.push({position:a[n.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:a[n.isHorizontal()?"currentX":"currentY"],time:oa()})),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l)}}function Ia(e){var t=this,n=t.touchEventsData,r=t.params,i=t.touches,a=t.rtlTranslate,o=t.$wrapperEl,s=t.slidesGrid,l=t.snapGrid;if(t.enabled){var c=e;if(c.originalEvent&&(c=c.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",c),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var d,u=oa(),p=u-n.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(c),t.emit("tap click",c),p<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",c)),n.lastClickTime=oa(),aa((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=r.followFinger?a?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(r.freeMode){if(d<-t.minTranslate())return void t.slideTo(t.activeIndex);if(d>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(r.freeModeMomentum){if(n.velocities.length>1){var h=n.velocities.pop(),f=n.velocities.pop(),m=h.position-f.position,g=h.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<r.freeModeMinimumVelocity&&(t.velocity=0),(g>150||oa()-h.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=r.freeModeMomentumVelocityRatio,n.velocities.length=0;var v=1e3*r.freeModeMomentumRatio,b=t.velocity*v,y=t.translate+b;a&&(y=-y);var _,w,C=!1,x=20*Math.abs(t.velocity)*r.freeModeMomentumBounceRatio;if(y<t.maxTranslate())r.freeModeMomentumBounce?(y+t.maxTranslate()<-x&&(y=t.maxTranslate()-x),_=t.maxTranslate(),C=!0,n.allowMomentumBounce=!0):y=t.maxTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(y>t.minTranslate())r.freeModeMomentumBounce?(y-t.minTranslate()>x&&(y=t.minTranslate()+x),_=t.minTranslate(),C=!0,n.allowMomentumBounce=!0):y=t.minTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(r.freeModeSticky){for(var k,E=0;E<l.length;E+=1)if(l[E]>-y){k=E;break}y=-(y=Math.abs(l[k]-y)<Math.abs(l[k-1]-y)||"next"===t.swipeDirection?l[k]:l[k-1])}if(w&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(v=a?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity),r.freeModeSticky){var S=Math.abs((a?-y:y)-t.translate),T=t.slidesSizesGrid[t.activeIndex];v=S<T?r.speed:S<2*T?1.5*r.speed:2.5*r.speed}}else if(r.freeModeSticky)return void t.slideToClosest();r.freeModeMomentumBounce&&C?(t.updateProgress(_),t.setTransition(v),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&n.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(r.speed),setTimeout((function(){t.setTranslate(_),o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(y),t.setTransition(v),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(y)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(r.freeModeSticky)return void t.slideToClosest();r.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!r.freeModeMomentum||p>=r.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var M=0,I=t.slidesSizesGrid[0],L=0;L<s.length;L+=L<r.slidesPerGroupSkip?1:r.slidesPerGroup){var $=L<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==s[L+$]?d>=s[L]&&d<s[L+$]&&(M=L,I=s[L+$]-s[L]):d>=s[L]&&(M=L,I=s[s.length-1]-s[s.length-2])}var P=(d-s[M])/I,O=M<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(p>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(P>=r.longSwipesRatio?t.slideTo(M+O):t.slideTo(M)),"prev"===t.swipeDirection&&(P>1-r.longSwipesRatio?t.slideTo(M+O):t.slideTo(M))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||c.target!==t.navigation.nextEl&&c.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(M+O),"prev"===t.swipeDirection&&t.slideTo(M)):c.target===t.navigation.nextEl?t.slideTo(M+O):t.slideTo(M)}}}}function La(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var r=e.allowSlideNext,i=e.allowSlidePrev,a=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}}function $a(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Pa(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=n?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var r=e.maxTranslate()-e.minTranslate();(0===r?0:(e.translate-e.minTranslate())/r)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var Oa=!1;function Ba(){}const Aa={attachEvents:function(){var e=this,t=(0,o.Me)(),n=e.params,r=e.touchEvents,i=e.el,a=e.wrapperEl,s=e.device,l=e.support;e.onTouchStart=Ta.bind(e),e.onTouchMove=Ma.bind(e),e.onTouchEnd=Ia.bind(e),n.cssMode&&(e.onScroll=Pa.bind(e)),e.onClick=$a.bind(e);var c=!!n.nested;if(!l.touch&&l.pointerEvents)i.addEventListener(r.start,e.onTouchStart,!1),t.addEventListener(r.move,e.onTouchMove,c),t.addEventListener(r.end,e.onTouchEnd,!1);else{if(l.touch){var d=!("touchstart"!==r.start||!l.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};i.addEventListener(r.start,e.onTouchStart,d),i.addEventListener(r.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),i.addEventListener(r.end,e.onTouchEnd,d),r.cancel&&i.addEventListener(r.cancel,e.onTouchEnd,d),Oa||(t.addEventListener("touchstart",Ba),Oa=!0)}(n.simulateTouch&&!s.ios&&!s.android||n.simulateTouch&&!l.touch&&s.ios)&&(i.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,c),t.addEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&i.addEventListener("click",e.onClick,!0),n.cssMode&&a.addEventListener("scroll",e.onScroll),n.updateOnWindowResize?e.on(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",La,!0):e.on("observerUpdate",La,!0)},detachEvents:function(){var e=this,t=(0,o.Me)(),n=e.params,r=e.touchEvents,i=e.el,a=e.wrapperEl,s=e.device,l=e.support,c=!!n.nested;if(!l.touch&&l.pointerEvents)i.removeEventListener(r.start,e.onTouchStart,!1),t.removeEventListener(r.move,e.onTouchMove,c),t.removeEventListener(r.end,e.onTouchEnd,!1);else{if(l.touch){var d=!("onTouchStart"!==r.start||!l.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};i.removeEventListener(r.start,e.onTouchStart,d),i.removeEventListener(r.move,e.onTouchMove,c),i.removeEventListener(r.end,e.onTouchEnd,d),r.cancel&&i.removeEventListener(r.cancel,e.onTouchEnd,d)}(n.simulateTouch&&!s.ios&&!s.android||n.simulateTouch&&!l.touch&&s.ios)&&(i.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,c),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&i.removeEventListener("click",e.onClick,!0),n.cssMode&&a.removeEventListener("scroll",e.onScroll),e.off(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",La)}},Ra={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,i=void 0===r?0:r,a=e.params,o=e.$el,s=a.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var l=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(l&&e.currentBreakpoint!==l){var c=l in s?s[l]:void 0;c&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=c[e];void 0!==t&&(c[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var d=c||e.originalParams,u=a.slidesPerColumn>1,p=d.slidesPerColumn>1,h=a.enabled;u&&!p?(o.removeClass(a.containerModifierClass+"multirow "+a.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!u&&p&&(o.addClass(a.containerModifierClass+"multirow"),(d.slidesPerColumnFill&&"column"===d.slidesPerColumnFill||!d.slidesPerColumnFill&&"column"===a.slidesPerColumnFill)&&o.addClass(a.containerModifierClass+"multirow-column"),e.emitContainerClasses());var f=d.direction&&d.direction!==a.direction,m=a.loop&&(d.slidesPerView!==a.slidesPerView||f);f&&n&&e.changeDirection(),ca(e.params,d);var g=e.params.enabled;ca(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!g?e.disable():!h&&g&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",d),m&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",d)}}},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),e&&("container"!==t||n)){var r=!1,i=(0,o.Jj)(),a="window"===t?i.innerHeight:n.clientHeight,s=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:a*t,point:e}}return{value:e,point:e}}));s.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var l=0;l<s.length;l+=1){var c=s[l],d=c.point,u=c.value;"window"===t?i.matchMedia("(min-width: "+u+"px)").matches&&(r=d):u<=n.clientWidth&&(r=d)}return r||"max"}}},Da={addClasses:function(){var e,t,n,r=this,i=r.classNames,a=r.params,o=r.rtl,s=r.$el,l=r.device,c=r.support,d=(e=["initialized",a.direction,{"pointer-events":c.pointerEvents&&!c.touch},{"free-mode":a.freeMode},{autoheight:a.autoHeight},{rtl:o},{multirow:a.slidesPerColumn>1},{"multirow-column":a.slidesPerColumn>1&&"column"===a.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":a.cssMode}],t=a.containerModifierClass,n=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n);i.push.apply(i,d),s.addClass([].concat(i).join(" ")),r.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}},Na={loadImage:function(e,t,n,r,i,a){var s,l=(0,o.Jj)();function c(){a&&a()}ia(e).parent("picture")[0]||e.complete&&i?c():t?((s=new l.Image).onload=c,s.onerror=c,r&&(s.sizes=r),n&&(s.srcset=n),t&&(s.src=t)):c()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}},Ga={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ha={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n];r.params&&ca(e,r.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n],i=e[n]||{};r.on&&t.on&&Object.keys(r.on).forEach((function(e){t.on(e,r.on[e])})),r.create&&r.create.bind(t)(i)}))}},eventsEmitter:wa,update:Ca,translate:xa,transition:{setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,i=n.params,a=n.previousIndex;if(!i.cssMode){i.autoHeight&&n.updateAutoHeight();var o=t;if(o||(o=r>a?"next":r<a?"prev":"reset"),n.emit("transitionStart"),e&&r!==a){if("reset"===o)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===o?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,i=n.previousIndex,a=n.params;if(n.animating=!1,!a.cssMode){n.setTransition(0);var o=t;if(o||(o=r>i?"next":r<i?"prev":"reset"),n.emit("transitionEnd"),e&&r!==i){if("reset"===o)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===o?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}},slide:ka,loop:Ea,grabCursor:{setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n=t.el;n.style.cursor="move",n.style.cursor=e?"-webkit-grabbing":"-webkit-grab",n.style.cursor=e?"-moz-grabbin":"-moz-grab",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}},manipulation:Sa,events:Aa,breakpoints:Ra,checkOverflow:{checkOverflow:function(){var e=this,t=e.params,n=e.isLocked,r=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&r?e.isLocked=r<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,n!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),n&&n!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},classes:Da,images:Na},Fa={},Va=function(){function e(){for(var t,n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?n=i[0]:(t=i[0],n=i[1]),n||(n={}),n=ca({},n),t&&!n.el&&(n.el=t),n.el&&ia(n.el).length>1){var s=[];return ia(n.el).each((function(t){var r=ca({},n,{el:t});s.push(new e(r))})),s}var l,c=this;c.__swiper__=!0,c.support=ga(),c.device=(void 0===(l={userAgent:n.userAgent})&&(l={}),fa||(fa=function(e){var t=(void 0===e?{}:e).userAgent,n=ga(),r=(0,o.Jj)(),i=r.navigator.platform,a=t||r.navigator.userAgent,s={ios:!1,android:!1},l=r.screen.width,c=r.screen.height,d=a.match(/(Android);?[\s\/]+([\d.]+)?/),u=a.match(/(iPad).*OS\s([\d_]+)/),p=a.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===i,m="MacIntel"===i;return!u&&m&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(l+"x"+c)>=0&&((u=a.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),m=!1),d&&!f&&(s.os="android",s.android=!0),(u||h||p)&&(s.os="ios",s.ios=!0),s}(l)),fa),c.browser=(ma||(ma=function(){var e,t=(0,o.Jj)();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),ma),c.eventsListeners={},c.eventsAnyListeners=[],void 0===c.modules&&(c.modules={}),Object.keys(c.modules).forEach((function(e){var t=c.modules[e];if(t.params){var r=Object.keys(t.params)[0],i=t.params[r];if("object"!=typeof i||null===i)return;if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===n[r]&&(n[r]={auto:!0}),!(r in n)||!("enabled"in i))return;!0===n[r]&&(n[r]={enabled:!0}),"object"!=typeof n[r]||"enabled"in n[r]||(n[r].enabled=!0),n[r]||(n[r]={enabled:!1})}}));var d=ca({},Ga);return c.useParams(d),c.params=ca({},d,Fa,n),c.originalParams=ca({},c.params),c.passedParams=ca({},n),c.params&&c.params.on&&Object.keys(c.params.on).forEach((function(e){c.on(e,c.params.on[e])})),c.params&&c.params.onAny&&c.onAny(c.params.onAny),c.$=ia,ca(c,{enabled:c.params.enabled,el:t,classNames:[],slides:ia(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===c.params.direction},isVertical:function(){return"vertical"===c.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["mousedown","mousemove","mouseup"];return c.support.pointerEvents&&(t=["pointerdown","pointermove","pointerup"]),c.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},c.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},c.support.touch||!c.params.simulateTouch?c.touchEventsTouch:c.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:oa(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.useModules(),c.emit("_swiper"),c.params.init&&c.init(),c}var t,n,r=e.prototype;return r.enable=function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))},r.disable=function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))},r.setProgress=function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()},r.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},r.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},r.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}},r.slidesPerViewDynamic=function(){var e=this,t=e.params,n=e.slides,r=e.slidesGrid,i=e.size,a=e.activeIndex,o=1;if(t.centeredSlides){for(var s,l=n[a].swiperSlideSize,c=a+1;c<n.length;c+=1)n[c]&&!s&&(o+=1,(l+=n[c].swiperSlideSize)>i&&(s=!0));for(var d=a-1;d>=0;d-=1)n[d]&&!s&&(o+=1,(l+=n[d].swiperSlideSize)>i&&(s=!0))}else for(var u=a+1;u<n.length;u+=1)r[u]-r[a]<i&&(o+=1);return o},r.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}},r.changeDirection=function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(""+n.params.containerModifierClass+r).addClass(""+n.params.containerModifierClass+e),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n},r.mount=function(e){var t=this;if(t.mounted)return!0;var n=ia(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},i=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=ia(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children(r())}();if(0===i.length&&t.params.createElements){var a=(0,o.Me)().createElement("div");i=ia(a),a.className=t.params.wrapperClass,n.append(a),n.children("."+t.params.slideClass).each((function(e){i.append(e)}))}return ca(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0},r.init=function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t},r.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n,r=this,i=r.params,a=r.$el,o=r.$wrapperEl,s=r.slides;return void 0===r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),t&&(r.removeClasses(),a.removeAttr("style"),o.removeAttr("style"),s&&s.length&&s.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),r.emit("destroy"),Object.keys(r.eventsListeners).forEach((function(e){r.off(e)})),!1!==e&&(r.$el[0].swiper=null,n=r,Object.keys(n).forEach((function(e){try{n[e]=null}catch(e){}try{delete n[e]}catch(e){}}))),r.destroyed=!0),null},e.extendDefaults=function(e){ca(Fa,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var n=t.name||Object.keys(e.prototype.modules).length+"_"+oa();e.prototype.modules[n]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},t=e,n=[{key:"extendedDefaults",get:function(){return Fa}},{key:"defaults",get:function(){return Ga}}],null&&za(t.prototype,null),n&&za(t,n),e}();Object.keys(Ha).forEach((function(e){Object.keys(Ha[e]).forEach((function(t){Va.prototype[t]=Ha[e][t]}))})),Va.use([va,_a]);const Wa=Va;function ja(){return ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ja.apply(this,arguments)}var Ua={update:function(e){var t=this,n=t.params,r=n.slidesPerView,i=n.slidesPerGroup,a=n.centeredSlides,o=t.params.virtual,s=o.addSlidesBefore,l=o.addSlidesAfter,c=t.virtual,d=c.from,u=c.to,p=c.slides,h=c.slidesGrid,f=c.renderSlide,m=c.offset;t.updateActiveIndex();var g,v,b,y=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",a?(v=Math.floor(r/2)+i+l,b=Math.floor(r/2)+i+s):(v=r+(i-1)+l,b=i+s);var _=Math.max((y||0)-b,0),w=Math.min((y||0)+v,p.length-1),C=(t.slidesGrid[_]||0)-(t.slidesGrid[0]||0);function x(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(ca(t.virtual,{from:_,to:w,offset:C,slidesGrid:t.slidesGrid}),d===_&&u===w&&!e)return t.slidesGrid!==h&&C!==m&&t.slides.css(g,C+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:C,from:_,to:w,slides:function(){for(var e=[],t=_;t<=w;t+=1)e.push(p[t]);return e}()}),void(t.params.virtual.renderExternalUpdate&&x());var k=[],E=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var S=d;S<=u;S+=1)(S<_||S>w)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+S+'"]').remove();for(var T=0;T<p.length;T+=1)T>=_&&T<=w&&(void 0===u||e?E.push(T):(T>u&&E.push(T),T<d&&k.push(T)));E.forEach((function(e){t.$wrapperEl.append(f(p[e],e))})),k.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(p[e],e))})),t.$wrapperEl.children(".swiper-slide").css(g,C+"px"),x()},renderSlide:function(e,t){var n=this,r=n.params.virtual;if(r.cache&&n.virtual.cache[t])return n.virtual.cache[t];var i=r.renderSlide?ia(r.renderSlide.call(n,e,t)):ia('<div class="'+n.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return i.attr("data-swiper-slide-index")||i.attr("data-swiper-slide-index",t),r.cache&&(n.virtual.cache[t]=i),i},appendSlide:function(e){var t=this;if("object"==typeof e&&"length"in e)for(var n=0;n<e.length;n+=1)e[n]&&t.virtual.slides.push(e[n]);else t.virtual.slides.push(e);t.virtual.update(!0)},prependSlide:function(e){var t=this,n=t.activeIndex,r=n+1,i=1;if(Array.isArray(e)){for(var a=0;a<e.length;a+=1)e[a]&&t.virtual.slides.unshift(e[a]);r=n+e.length,i=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var o=t.virtual.cache,s={};Object.keys(o).forEach((function(e){var t=o[e],n=t.attr("data-swiper-slide-index");n&&t.attr("data-swiper-slide-index",parseInt(n,10)+1),s[parseInt(e,10)+i]=t})),t.virtual.cache=s}t.virtual.update(!0),t.slideTo(r,0)},removeSlide:function(e){var t=this;if(null!=e){var n=t.activeIndex;if(Array.isArray(e))for(var r=e.length-1;r>=0;r-=1)t.virtual.slides.splice(e[r],1),t.params.virtual.cache&&delete t.virtual.cache[e[r]],e[r]<n&&(n-=1),n=Math.max(n,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<n&&(n-=1),n=Math.max(n,0);t.virtual.update(!0),t.slideTo(n,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}};const qa={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){da(this,{virtual:ja({},Ua,{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(e){if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};ca(e.params,t),ca(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(e){e.params.virtual.enabled&&e.virtual.update()}}};function Ka(){return Ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}var Ja={handle:function(e){var t=this;if(t.enabled){var n=(0,o.Jj)(),r=(0,o.Me)(),i=t.rtlTranslate,a=e;a.originalEvent&&(a=a.originalEvent);var s=a.keyCode||a.charCode,l=t.params.keyboard.pageUpDown,c=l&&33===s,d=l&&34===s,u=37===s,p=39===s,h=38===s,f=40===s;if(!t.allowSlideNext&&(t.isHorizontal()&&p||t.isVertical()&&f||d))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&u||t.isVertical()&&h||c))return!1;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||r.activeElement&&r.activeElement.nodeName&&("input"===r.activeElement.nodeName.toLowerCase()||"textarea"===r.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(c||d||u||p||h||f)){var m=!1;if(t.$el.parents("."+t.params.slideClass).length>0&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var g=t.$el,v=g[0].clientWidth,b=g[0].clientHeight,y=n.innerWidth,_=n.innerHeight,w=t.$el.offset();i&&(w.left-=t.$el[0].scrollLeft);for(var C=[[w.left,w.top],[w.left+v,w.top],[w.left,w.top+b],[w.left+v,w.top+b]],x=0;x<C.length;x+=1){var k=C[x];if(k[0]>=0&&k[0]<=y&&k[1]>=0&&k[1]<=_){if(0===k[0]&&0===k[1])continue;m=!0}}if(!m)return}t.isHorizontal()?((c||d||u||p)&&(a.preventDefault?a.preventDefault():a.returnValue=!1),((d||p)&&!i||(c||u)&&i)&&t.slideNext(),((c||u)&&!i||(d||p)&&i)&&t.slidePrev()):((c||d||h||f)&&(a.preventDefault?a.preventDefault():a.returnValue=!1),(d||f)&&t.slideNext(),(c||h)&&t.slidePrev()),t.emit("keyPress",s)}}},enable:function(){var e=this,t=(0,o.Me)();e.keyboard.enabled||(ia(t).on("keydown",e.keyboard.handle),e.keyboard.enabled=!0)},disable:function(){var e=this,t=(0,o.Me)();e.keyboard.enabled&&(ia(t).off("keydown",e.keyboard.handle),e.keyboard.enabled=!1)}};const Qa={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){da(this,{keyboard:Ka({enabled:!1},Ja)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}};var Ya={lastScrollTime:oa(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return(0,o.Jj)().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e=(0,o.Me)(),t="onwheel",n=t in e;if(!n){var r=e.createElement("div");r.setAttribute(t,"return;"),n="function"==typeof r[t]}return!n&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(n=e.implementation.hasFeature("Events.wheel","3.0")),n}()?"wheel":"mousewheel"},normalize:function(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,i=10*n,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),e.shiftKey&&!r&&(r=i,i=0),(r||i)&&e.deltaMode&&(1===e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}},handleMouseEnter:function(){this.enabled&&(this.mouseEntered=!0)},handleMouseLeave:function(){this.enabled&&(this.mouseEntered=!1)},handle:function(e){var t=e,n=this;if(n.enabled){var r=n.params.mousewheel;n.params.cssMode&&t.preventDefault();var i=n.$el;if("container"!==n.params.mousewheel.eventsTarget&&(i=ia(n.params.mousewheel.eventsTarget)),!n.mouseEntered&&!i[0].contains(t.target)&&!r.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var a=0,o=n.rtlTranslate?-1:1,s=Ya.normalize(t);if(r.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return!0;a=-s.pixelX*o}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return!0;a=-s.pixelY}else a=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*o:-s.pixelY;if(0===a)return!0;r.invert&&(a=-a);var l=n.getTranslate()+a*r.sensitivity;if(l>=n.minTranslate()&&(l=n.minTranslate()),l<=n.maxTranslate()&&(l=n.maxTranslate()),(!!n.params.loop||!(l===n.minTranslate()||l===n.maxTranslate()))&&n.params.nested&&t.stopPropagation(),n.params.freeMode){var c={time:oa(),delta:Math.abs(a),direction:Math.sign(a)},d=n.mousewheel.lastEventBeforeSnap,u=d&&c.time<d.time+500&&c.delta<=d.delta&&c.direction===d.direction;if(!u){n.mousewheel.lastEventBeforeSnap=void 0,n.params.loop&&n.loopFix();var p=n.getTranslate()+a*r.sensitivity,h=n.isBeginning,f=n.isEnd;if(p>=n.minTranslate()&&(p=n.minTranslate()),p<=n.maxTranslate()&&(p=n.maxTranslate()),n.setTransition(0),n.setTranslate(p),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!h&&n.isBeginning||!f&&n.isEnd)&&n.updateSlidesClasses(),n.params.freeModeSticky){clearTimeout(n.mousewheel.timeout),n.mousewheel.timeout=void 0;var m=n.mousewheel.recentWheelEvents;m.length>=15&&m.shift();var g=m.length?m[m.length-1]:void 0,v=m[0];if(m.push(c),g&&(c.delta>g.delta||c.direction!==g.direction))m.splice(0);else if(m.length>=15&&c.time-v.time<500&&v.delta-c.delta>=1&&c.delta<=6){var b=a>0?.8:.2;n.mousewheel.lastEventBeforeSnap=c,m.splice(0),n.mousewheel.timeout=aa((function(){n.slideToClosest(n.params.speed,!0,void 0,b)}),0)}n.mousewheel.timeout||(n.mousewheel.timeout=aa((function(){n.mousewheel.lastEventBeforeSnap=c,m.splice(0),n.slideToClosest(n.params.speed,!0,void 0,.5)}),500))}if(u||n.emit("scroll",t),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),p===n.minTranslate()||p===n.maxTranslate())return!0}}else{var y={time:oa(),delta:Math.abs(a),direction:Math.sign(a),raw:e},_=n.mousewheel.recentWheelEvents;_.length>=2&&_.shift();var w=_.length?_[_.length-1]:void 0;if(_.push(y),w?(y.direction!==w.direction||y.delta>w.delta||y.time>w.time+150)&&n.mousewheel.animateSlider(y):n.mousewheel.animateSlider(y),n.mousewheel.releaseScroll(y))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},animateSlider:function(e){var t=this,n=(0,o.Jj)();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta||this.params.mousewheel.thresholdTime&&oa()-t.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime||!(e.delta>=6&&oa()-t.mousewheel.lastScrollTime<60)&&(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),t.emit("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),t.emit("scroll",e.raw)),t.mousewheel.lastScrollTime=(new n.Date).getTime(),1))},releaseScroll:function(e){var t=this,n=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&n.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&n.releaseOnEdges)return!0;return!1},enable:function(){var e=this,t=Ya.event();if(e.params.cssMode)return e.wrapperEl.removeEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(n=ia(e.params.mousewheel.eventsTarget)),n.on("mouseenter",e.mousewheel.handleMouseEnter),n.on("mouseleave",e.mousewheel.handleMouseLeave),n.on(t,e.mousewheel.handle),e.mousewheel.enabled=!0,!0},disable:function(){var e=this,t=Ya.event();if(e.params.cssMode)return e.wrapperEl.addEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(!e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(n=ia(e.params.mousewheel.eventsTarget)),n.off(t,e.mousewheel.handle),e.mousewheel.enabled=!1,!0}};const Xa={name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){da(this,{mousewheel:{enabled:!1,lastScrollTime:oa(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:Ya.enable,disable:Ya.disable,handle:Ya.handle,handleMouseEnter:Ya.handleMouseEnter,handleMouseLeave:Ya.handleMouseLeave,animateSlider:Ya.animateSlider,releaseScroll:Ya.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}};function Za(){return Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Za.apply(this,arguments)}var eo={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,n=e.navigation.toggleEl;if(!e.params.loop){var r=e.navigation,i=r.$nextEl,a=r.$prevEl;a&&a.length>0&&(e.isBeginning?n(a,!0):n(a,!1),e.params.watchOverflow&&e.enabled&&a[e.isLocked?"addClass":"removeClass"](t.lockClass)),i&&i.length>0&&(e.isEnd?n(i,!0):n(i,!1),e.params.watchOverflow&&e.enabled&&i[e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,n=this,r=n.params.navigation;n.params.navigation=pa(n.$el,n.params.navigation,n.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),(r.nextEl||r.prevEl)&&(r.nextEl&&(e=ia(r.nextEl),n.params.uniqueNavElements&&"string"==typeof r.nextEl&&e.length>1&&1===n.$el.find(r.nextEl).length&&(e=n.$el.find(r.nextEl))),r.prevEl&&(t=ia(r.prevEl),n.params.uniqueNavElements&&"string"==typeof r.prevEl&&t.length>1&&1===n.$el.find(r.prevEl).length&&(t=n.$el.find(r.prevEl))),e&&e.length>0&&e.on("click",n.navigation.onNextClick),t&&t.length>0&&t.on("click",n.navigation.onPrevClick),ca(n.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),n.enabled||(e&&e.addClass(r.lockClass),t&&t.addClass(r.lockClass)))},destroy:function(){var e=this,t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n.length&&(n.off("click",e.navigation.onNextClick),n.removeClass(e.params.navigation.disabledClass)),r&&r.length&&(r.off("click",e.navigation.onPrevClick),r.removeClass(e.params.navigation.disabledClass))}};const to={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){da(this,{navigation:Za({},eo)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var n=e.navigation,r=n.$nextEl,i=n.$prevEl,a=t.target;if(e.params.navigation.hideOnClick&&!ia(a).is(i)&&!ia(a).is(r)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===a||e.pagination.el.contains(a)))return;var o;r?o=r.hasClass(e.params.navigation.hiddenClass):i&&(o=i.hasClass(e.params.navigation.hiddenClass)),!0===o?e.emit("navigationShow"):e.emit("navigationHide"),r&&r.toggleClass(e.params.navigation.hiddenClass),i&&i.toggleClass(e.params.navigation.hiddenClass)}}}};function no(){return no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},no.apply(this,arguments)}var ro={update:function(){var e=this,t=e.rtl,n=e.params.pagination;if(n.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,a=e.pagination.$el,o=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>i-1-2*e.loopedSlides&&(r-=i-2*e.loopedSlides),r>o-1&&(r-=o),r<0&&"bullets"!==e.params.paginationType&&(r=o+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var s,l,c,d=e.pagination.bullets;if(n.dynamicBullets&&(e.pagination.bulletSize=d.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),a.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),s=r-e.pagination.dynamicBulletIndex,c=((l=s+(Math.min(d.length,n.dynamicMainBullets)-1))+s)/2),d.removeClass(n.bulletActiveClass+" "+n.bulletActiveClass+"-next "+n.bulletActiveClass+"-next-next "+n.bulletActiveClass+"-prev "+n.bulletActiveClass+"-prev-prev "+n.bulletActiveClass+"-main"),a.length>1)d.each((function(e){var t=ia(e),i=t.index();i===r&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(i>=s&&i<=l&&t.addClass(n.bulletActiveClass+"-main"),i===s&&t.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),i===l&&t.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next"))}));else{var u=d.eq(r),p=u.index();if(u.addClass(n.bulletActiveClass),n.dynamicBullets){for(var h=d.eq(s),f=d.eq(l),m=s;m<=l;m+=1)d.eq(m).addClass(n.bulletActiveClass+"-main");if(e.params.loop)if(p>=d.length-n.dynamicMainBullets){for(var g=n.dynamicMainBullets;g>=0;g-=1)d.eq(d.length-g).addClass(n.bulletActiveClass+"-main");d.eq(d.length-n.dynamicMainBullets-1).addClass(n.bulletActiveClass+"-prev")}else h.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),f.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next");else h.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),f.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next")}}if(n.dynamicBullets){var v=Math.min(d.length,n.dynamicMainBullets+4),b=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-c*e.pagination.bulletSize,y=t?"right":"left";d.css(e.isHorizontal()?y:"top",b+"px")}}if("fraction"===n.type&&(a.find(ua(n.currentClass)).text(n.formatFractionCurrent(r+1)),a.find(ua(n.totalClass)).text(n.formatFractionTotal(o))),"progressbar"===n.type){var _;_=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var w=(r+1)/o,C=1,x=1;"horizontal"===_?C=w:x=w,a.find(ua(n.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+C+") scaleY("+x+")").transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(a.html(n.renderCustom(e,r+1,o)),e.emit("paginationRender",a[0])):e.emit("paginationUpdate",a[0]),e.params.watchOverflow&&e.enabled&&a[e.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,r=e.pagination.$el,i="";if("bullets"===t.type){var a=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&a>n&&(a=n);for(var o=0;o<a;o+=1)t.renderBullet?i+=t.renderBullet.call(e,o,t.bulletClass):i+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";r.html(i),e.pagination.bullets=r.find(ua(t.bulletClass))}"fraction"===t.type&&(i=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',r.html(i)),"progressbar"===t.type&&(i=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',r.html(i)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=pa(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var n=ia(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",ua(t.bulletClass),(function(t){t.preventDefault();var n=ia(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),ca(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",ua(t.bulletClass))}}};const io={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){da(this,{pagination:no({dynamicBulletIndex:0},ro)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var n=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!ia(n).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&n===e.navigation.nextEl||e.navigation.prevEl&&n===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}};function ao(){return ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ao.apply(this,arguments)}var oo={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,n=e.rtlTranslate,r=e.progress,i=t.dragSize,a=t.trackSize,o=t.$dragEl,s=t.$el,l=e.params.scrollbar,c=i,d=(a-i)*r;n?(d=-d)>0?(c=i-d,d=0):-d+i>a&&(c=a+d):d<0?(c=i+d,d=0):d+i>a&&(c=a-d),e.isHorizontal()?(o.transform("translate3d("+d+"px, 0, 0)"),o[0].style.width=c+"px"):(o.transform("translate3d(0px, "+d+"px, 0)"),o[0].style.height=c+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),s[0].style.opacity=1,e.scrollbar.timeout=setTimeout((function(){s[0].style.opacity=0,s.transition(400)}),1e3))}},setTransition:function(e){var t=this;t.params.scrollbar.el&&t.scrollbar.el&&t.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,n=t.$dragEl,r=t.$el;n[0].style.width="",n[0].style.height="";var i,a=e.isHorizontal()?r[0].offsetWidth:r[0].offsetHeight,o=e.size/e.virtualSize,s=o*(a/e.size);i="auto"===e.params.scrollbar.dragSize?a*o:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?n[0].style.width=i+"px":n[0].style.height=i+"px",r[0].style.display=o>=1?"none":"",e.params.scrollbar.hide&&(r[0].style.opacity=0),ca(t,{trackSize:a,divider:o,moveDivider:s,dragSize:i}),e.params.watchOverflow&&e.enabled&&t.$el[e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,n=this,r=n.scrollbar,i=n.rtlTranslate,a=r.$el,o=r.dragSize,s=r.trackSize,l=r.dragStartPos;t=(r.getPointerPosition(e)-a.offset()[n.isHorizontal()?"left":"top"]-(null!==l?l:o/2))/(s-o),t=Math.max(Math.min(t,1),0),i&&(t=1-t);var c=n.minTranslate()+(n.maxTranslate()-n.minTranslate())*t;n.updateProgress(c),n.setTranslate(c),n.updateActiveIndex(),n.updateSlidesClasses()},onDragStart:function(e){var t=this,n=t.params.scrollbar,r=t.scrollbar,i=t.$wrapperEl,a=r.$el,o=r.$dragEl;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===o[0]||e.target===o?r.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),i.transition(100),o.transition(100),r.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),a.transition(0),n.hide&&a.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this,n=t.scrollbar,r=t.$wrapperEl,i=n.$el,a=n.$dragEl;t.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,n.setDragPosition(e),r.transition(0),i.transition(0),a.transition(0),t.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,n=t.params.scrollbar,r=t.scrollbar,i=t.$wrapperEl,a=r.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),i.transition("")),n.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=aa((function(){a.css("opacity",0),a.transition(400)}),1e3)),t.emit("scrollbarDragEnd",e),n.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=(0,o.Me)(),n=e.scrollbar,r=e.touchEventsTouch,i=e.touchEventsDesktop,a=e.params,s=e.support,l=n.$el[0],c=!(!s.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},d=!(!s.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};l&&(s.touch?(l.addEventListener(r.start,e.scrollbar.onDragStart,c),l.addEventListener(r.move,e.scrollbar.onDragMove,c),l.addEventListener(r.end,e.scrollbar.onDragEnd,d)):(l.addEventListener(i.start,e.scrollbar.onDragStart,c),t.addEventListener(i.move,e.scrollbar.onDragMove,c),t.addEventListener(i.end,e.scrollbar.onDragEnd,d)))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=(0,o.Me)(),n=e.scrollbar,r=e.touchEventsTouch,i=e.touchEventsDesktop,a=e.params,s=e.support,l=n.$el[0],c=!(!s.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},d=!(!s.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};l&&(s.touch?(l.removeEventListener(r.start,e.scrollbar.onDragStart,c),l.removeEventListener(r.move,e.scrollbar.onDragMove,c),l.removeEventListener(r.end,e.scrollbar.onDragEnd,d)):(l.removeEventListener(i.start,e.scrollbar.onDragStart,c),t.removeEventListener(i.move,e.scrollbar.onDragMove,c),t.removeEventListener(i.end,e.scrollbar.onDragEnd,d)))}},init:function(){var e=this,t=e.scrollbar,n=e.$el;e.params.scrollbar=pa(n,e.params.scrollbar,e.params.createElements,{el:"swiper-scrollbar"});var r=e.params.scrollbar;if(r.el){var i=ia(r.el);e.params.uniqueNavElements&&"string"==typeof r.el&&i.length>1&&1===n.find(r.el).length&&(i=n.find(r.el));var a=i.find("."+e.params.scrollbar.dragClass);0===a.length&&(a=ia('<div class="'+e.params.scrollbar.dragClass+'"></div>'),i.append(a)),ca(t,{$el:i,el:i[0],$dragEl:a,dragEl:a[0]}),r.draggable&&t.enableDraggable(),i&&i[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)}},destroy:function(){this.scrollbar.disableDraggable()}};const so={name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){da(this,{scrollbar:ao({isTouched:!1,timeout:null,dragTimeout:null},oo)})},on:{init:function(e){e.scrollbar.init(),e.scrollbar.updateSize(),e.scrollbar.setTranslate()},update:function(e){e.scrollbar.updateSize()},resize:function(e){e.scrollbar.updateSize()},observerUpdate:function(e){e.scrollbar.updateSize()},setTranslate:function(e){e.scrollbar.setTranslate()},setTransition:function(e,t){e.scrollbar.setTransition(t)},"enable disable":function(e){var t=e.scrollbar.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)},destroy:function(e){e.scrollbar.destroy()}}};function lo(){return lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lo.apply(this,arguments)}var co={setTransform:function(e,t){var n=this.rtl,r=ia(e),i=n?-1:1,a=r.attr("data-swiper-parallax")||"0",o=r.attr("data-swiper-parallax-x"),s=r.attr("data-swiper-parallax-y"),l=r.attr("data-swiper-parallax-scale"),c=r.attr("data-swiper-parallax-opacity");if(o||s?(o=o||"0",s=s||"0"):this.isHorizontal()?(o=a,s="0"):(s=a,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*t*i+"%":o*t*i+"px",s=s.indexOf("%")>=0?parseInt(s,10)*t+"%":s*t+"px",null!=c){var d=c-(c-1)*(1-Math.abs(t));r[0].style.opacity=d}if(null==l)r.transform("translate3d("+o+", "+s+", 0px)");else{var u=l-(l-1)*(1-Math.abs(t));r.transform("translate3d("+o+", "+s+", 0px) scale("+u+")")}},setTranslate:function(){var e=this,t=e.$el,n=e.slides,r=e.progress,i=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,r)})),n.each((function(t,n){var a=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(a+=Math.ceil(n/2)-r*(i.length-1)),a=Math.min(Math.max(a,-1),1),ia(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,a)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){var n=ia(t),r=parseInt(n.attr("data-swiper-parallax-duration"),10)||e;0===e&&(r=0),n.transition(r)}))}};const uo={name:"parallax",params:{parallax:{enabled:!1}},create:function(){da(this,{parallax:lo({},co)})},on:{beforeInit:function(e){e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},init:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTranslate:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTransition:function(e,t){e.params.parallax.enabled&&e.parallax.setTransition(t)}}};function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},po.apply(this,arguments)}var ho={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,n=e.targetTouches[0].pageY,r=e.targetTouches[1].pageX,i=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-n,2))},onGestureStart:function(e){var t=this,n=t.support,r=t.params.zoom,i=t.zoom,a=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!n.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,a.scaleStart=ho.getDistanceBetweenTouches(e)}a.$slideEl&&a.$slideEl.length||(a.$slideEl=ia(e.target).closest("."+t.params.slideClass),0===a.$slideEl.length&&(a.$slideEl=t.slides.eq(t.activeIndex)),a.$imageEl=a.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),a.$imageWrapEl=a.$imageEl.parent("."+r.containerClass),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||r.maxRatio,0!==a.$imageWrapEl.length)?(a.$imageEl&&a.$imageEl.transition(0),t.zoom.isScaling=!0):a.$imageEl=void 0},onGestureChange:function(e){var t=this,n=t.support,r=t.params.zoom,i=t.zoom,a=i.gesture;if(!n.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,a.scaleMove=ho.getDistanceBetweenTouches(e)}a.$imageEl&&0!==a.$imageEl.length?(n.gestures?i.scale=e.scale*i.currentScale:i.scale=a.scaleMove/a.scaleStart*i.currentScale,i.scale>a.maxRatio&&(i.scale=a.maxRatio-1+Math.pow(i.scale-a.maxRatio+1,.5)),i.scale<r.minRatio&&(i.scale=r.minRatio+1-Math.pow(r.minRatio-i.scale+1,.5)),a.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")")):"gesturechange"===e.type&&i.onGestureStart(e)},onGestureEnd:function(e){var t=this,n=t.device,r=t.support,i=t.params.zoom,a=t.zoom,o=a.gesture;if(!r.gestures){if(!a.fakeGestureTouched||!a.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!n.android)return;a.fakeGestureTouched=!1,a.fakeGestureMoved=!1}o.$imageEl&&0!==o.$imageEl.length&&(a.scale=Math.max(Math.min(a.scale,o.maxRatio),i.minRatio),o.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale("+a.scale+")"),a.currentScale=a.scale,a.isScaling=!1,1===a.scale&&(o.$slideEl=void 0))},onTouchStart:function(e){var t=this.device,n=this.zoom,r=n.gesture,i=n.image;r.$imageEl&&0!==r.$imageEl.length&&(i.isTouched||(t.android&&e.cancelable&&e.preventDefault(),i.isTouched=!0,i.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,i.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,n=t.zoom,r=n.gesture,i=n.image,a=n.velocity;if(r.$imageEl&&0!==r.$imageEl.length&&(t.allowClick=!1,i.isTouched&&r.$slideEl)){i.isMoved||(i.width=r.$imageEl[0].offsetWidth,i.height=r.$imageEl[0].offsetHeight,i.startX=sa(r.$imageWrapEl[0],"x")||0,i.startY=sa(r.$imageWrapEl[0],"y")||0,r.slideWidth=r.$slideEl[0].offsetWidth,r.slideHeight=r.$slideEl[0].offsetHeight,r.$imageWrapEl.transition(0));var o=i.width*n.scale,s=i.height*n.scale;if(!(o<r.slideWidth&&s<r.slideHeight)){if(i.minX=Math.min(r.slideWidth/2-o/2,0),i.maxX=-i.minX,i.minY=Math.min(r.slideHeight/2-s/2,0),i.maxY=-i.minY,i.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!i.isMoved&&!n.isScaling){if(t.isHorizontal()&&(Math.floor(i.minX)===Math.floor(i.startX)&&i.touchesCurrent.x<i.touchesStart.x||Math.floor(i.maxX)===Math.floor(i.startX)&&i.touchesCurrent.x>i.touchesStart.x))return void(i.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(i.minY)===Math.floor(i.startY)&&i.touchesCurrent.y<i.touchesStart.y||Math.floor(i.maxY)===Math.floor(i.startY)&&i.touchesCurrent.y>i.touchesStart.y))return void(i.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),i.isMoved=!0,i.currentX=i.touchesCurrent.x-i.touchesStart.x+i.startX,i.currentY=i.touchesCurrent.y-i.touchesStart.y+i.startY,i.currentX<i.minX&&(i.currentX=i.minX+1-Math.pow(i.minX-i.currentX+1,.8)),i.currentX>i.maxX&&(i.currentX=i.maxX-1+Math.pow(i.currentX-i.maxX+1,.8)),i.currentY<i.minY&&(i.currentY=i.minY+1-Math.pow(i.minY-i.currentY+1,.8)),i.currentY>i.maxY&&(i.currentY=i.maxY-1+Math.pow(i.currentY-i.maxY+1,.8)),a.prevPositionX||(a.prevPositionX=i.touchesCurrent.x),a.prevPositionY||(a.prevPositionY=i.touchesCurrent.y),a.prevTime||(a.prevTime=Date.now()),a.x=(i.touchesCurrent.x-a.prevPositionX)/(Date.now()-a.prevTime)/2,a.y=(i.touchesCurrent.y-a.prevPositionY)/(Date.now()-a.prevTime)/2,Math.abs(i.touchesCurrent.x-a.prevPositionX)<2&&(a.x=0),Math.abs(i.touchesCurrent.y-a.prevPositionY)<2&&(a.y=0),a.prevPositionX=i.touchesCurrent.x,a.prevPositionY=i.touchesCurrent.y,a.prevTime=Date.now(),r.$imageWrapEl.transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,n=e.image,r=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!n.isTouched||!n.isMoved)return n.isTouched=!1,void(n.isMoved=!1);n.isTouched=!1,n.isMoved=!1;var i=300,a=300,o=r.x*i,s=n.currentX+o,l=r.y*a,c=n.currentY+l;0!==r.x&&(i=Math.abs((s-n.currentX)/r.x)),0!==r.y&&(a=Math.abs((c-n.currentY)/r.y));var d=Math.max(i,a);n.currentX=s,n.currentY=c;var u=n.width*e.scale,p=n.height*e.scale;n.minX=Math.min(t.slideWidth/2-u/2,0),n.maxX=-n.minX,n.minY=Math.min(t.slideHeight/2-p/2,0),n.maxY=-n.minY,n.currentX=Math.max(Math.min(n.currentX,n.maxX),n.minX),n.currentY=Math.max(Math.min(n.currentY,n.maxY),n.minY),t.$imageWrapEl.transition(d).transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}},onTransitionEnd:function(){var e=this,t=e.zoom,n=t.gesture;n.$slideEl&&e.previousIndex!==e.activeIndex&&(n.$imageEl&&n.$imageEl.transform("translate3d(0,0,0) scale(1)"),n.$imageWrapEl&&n.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,n.$slideEl=void 0,n.$imageEl=void 0,n.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,n,r,i,a,s,l,c,d,u,p,h,f,m,g,v,b=this,y=(0,o.Jj)(),_=b.zoom,w=b.params.zoom,C=_.gesture,x=_.image;C.$slideEl||(e&&e.target&&(C.$slideEl=ia(e.target).closest("."+b.params.slideClass)),C.$slideEl||(b.params.virtual&&b.params.virtual.enabled&&b.virtual?C.$slideEl=b.$wrapperEl.children("."+b.params.slideActiveClass):C.$slideEl=b.slides.eq(b.activeIndex)),C.$imageEl=C.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),C.$imageWrapEl=C.$imageEl.parent("."+w.containerClass)),C.$imageEl&&0!==C.$imageEl.length&&C.$imageWrapEl&&0!==C.$imageWrapEl.length&&(C.$slideEl.addClass(""+w.zoomedSlideClass),void 0===x.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,n="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=x.touchesStart.x,n=x.touchesStart.y),_.scale=C.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,_.currentScale=C.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(g=C.$slideEl[0].offsetWidth,v=C.$slideEl[0].offsetHeight,r=C.$slideEl.offset().left+y.scrollX+g/2-t,i=C.$slideEl.offset().top+y.scrollY+v/2-n,l=C.$imageEl[0].offsetWidth,c=C.$imageEl[0].offsetHeight,d=l*_.scale,u=c*_.scale,f=-(p=Math.min(g/2-d/2,0)),m=-(h=Math.min(v/2-u/2,0)),(a=r*_.scale)<p&&(a=p),a>f&&(a=f),(s=i*_.scale)<h&&(s=h),s>m&&(s=m)):(a=0,s=0),C.$imageWrapEl.transition(300).transform("translate3d("+a+"px, "+s+"px,0)"),C.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+_.scale+")"))},out:function(){var e=this,t=e.zoom,n=e.params.zoom,r=t.gesture;r.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?r.$slideEl=e.$wrapperEl.children("."+e.params.slideActiveClass):r.$slideEl=e.slides.eq(e.activeIndex),r.$imageEl=r.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),r.$imageWrapEl=r.$imageEl.parent("."+n.containerClass)),r.$imageEl&&0!==r.$imageEl.length&&r.$imageWrapEl&&0!==r.$imageWrapEl.length&&(t.scale=1,t.currentScale=1,r.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),r.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),r.$slideEl.removeClass(""+n.zoomedSlideClass),r.$slideEl=void 0)},toggleGestures:function(e){var t=this,n=t.zoom,r=n.slideSelector,i=n.passiveListener;t.$wrapperEl[e]("gesturestart",r,n.onGestureStart,i),t.$wrapperEl[e]("gesturechange",r,n.onGestureChange,i),t.$wrapperEl[e]("gestureend",r,n.onGestureEnd,i)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var e=this,t=e.support,n=e.zoom;if(!n.enabled){n.enabled=!0;var r=!("touchstart"!==e.touchEvents.start||!t.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},i=!t.passiveListener||{passive:!1,capture:!0},a="."+e.params.slideClass;e.zoom.passiveListener=r,e.zoom.slideSelector=a,t.gestures?(e.$wrapperEl.on(e.touchEvents.start,e.zoom.enableGestures,r),e.$wrapperEl.on(e.touchEvents.end,e.zoom.disableGestures,r)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,a,n.onGestureStart,r),e.$wrapperEl.on(e.touchEvents.move,a,n.onGestureChange,i),e.$wrapperEl.on(e.touchEvents.end,a,n.onGestureEnd,r),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,a,n.onGestureEnd,r)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,n.onTouchMove,i)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){var n=e.support;e.zoom.enabled=!1;var r=!("touchstart"!==e.touchEvents.start||!n.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},i=!n.passiveListener||{passive:!1,capture:!0},a="."+e.params.slideClass;n.gestures?(e.$wrapperEl.off(e.touchEvents.start,e.zoom.enableGestures,r),e.$wrapperEl.off(e.touchEvents.end,e.zoom.disableGestures,r)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,a,t.onGestureStart,r),e.$wrapperEl.off(e.touchEvents.move,a,t.onGestureChange,i),e.$wrapperEl.off(e.touchEvents.end,a,t.onGestureEnd,r),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,a,t.onGestureEnd,r)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,i)}}};const fo={name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this;da(e,{zoom:po({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},ho)});var t=1;Object.defineProperty(e.zoom,"scale",{get:function(){return t},set:function(n){if(t!==n){var r=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,i=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",n,r,i)}t=n}})},on:{init:function(e){e.params.zoom.enabled&&e.zoom.enable()},destroy:function(e){e.zoom.disable()},touchStart:function(e,t){e.zoom.enabled&&e.zoom.onTouchStart(t)},touchEnd:function(e,t){e.zoom.enabled&&e.zoom.onTouchEnd(t)},doubleTap:function(e,t){!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}};function mo(){return mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mo.apply(this,arguments)}var go={loadInSlide:function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.lazy;if(void 0!==e&&0!==n.slides.length){var i=n.virtual&&n.params.virtual.enabled?n.$wrapperEl.children("."+n.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):n.slides.eq(e),a=i.find("."+r.elementClass+":not(."+r.loadedClass+"):not(."+r.loadingClass+")");!i.hasClass(r.elementClass)||i.hasClass(r.loadedClass)||i.hasClass(r.loadingClass)||a.push(i[0]),0!==a.length&&a.each((function(e){var a=ia(e);a.addClass(r.loadingClass);var o=a.attr("data-background"),s=a.attr("data-src"),l=a.attr("data-srcset"),c=a.attr("data-sizes"),d=a.parent("picture");n.loadImage(a[0],s||o,l,c,!1,(function(){if(null!=n&&n&&(!n||n.params)&&!n.destroyed){if(o?(a.css("background-image",'url("'+o+'")'),a.removeAttr("data-background")):(l&&(a.attr("srcset",l),a.removeAttr("data-srcset")),c&&(a.attr("sizes",c),a.removeAttr("data-sizes")),d.length&&d.children("source").each((function(e){var t=ia(e);t.attr("data-srcset")&&(t.attr("srcset",t.attr("data-srcset")),t.removeAttr("data-srcset"))})),s&&(a.attr("src",s),a.removeAttr("data-src"))),a.addClass(r.loadedClass).removeClass(r.loadingClass),i.find("."+r.preloaderClass).remove(),n.params.loop&&t){var e=i.attr("data-swiper-slide-index");if(i.hasClass(n.params.slideDuplicateClass)){var u=n.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+n.params.slideDuplicateClass+")");n.lazy.loadInSlide(u.index(),!1)}else{var p=n.$wrapperEl.children("."+n.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');n.lazy.loadInSlide(p.index(),!1)}}n.emit("lazyImageReady",i[0],a[0]),n.params.autoHeight&&n.updateAutoHeight()}})),n.emit("lazyImageLoad",i[0],a[0])}))}},load:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides,i=e.activeIndex,a=e.virtual&&n.virtual.enabled,o=n.lazy,s=n.slidesPerView;function l(e){if(a){if(t.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(r[e])return!0;return!1}function c(e){return a?ia(e).attr("data-swiper-slide-index"):ia(e).index()}if("auto"===s&&(s=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+n.slideVisibleClass).each((function(t){var n=a?ia(t).attr("data-swiper-slide-index"):ia(t).index();e.lazy.loadInSlide(n)}));else if(s>1)for(var d=i;d<i+s;d+=1)l(d)&&e.lazy.loadInSlide(d);else e.lazy.loadInSlide(i);if(o.loadPrevNext)if(s>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var u=o.loadPrevNextAmount,p=s,h=Math.min(i+p+Math.max(u,p),r.length),f=Math.max(i-Math.max(p,u),0),m=i+s;m<h;m+=1)l(m)&&e.lazy.loadInSlide(m);for(var g=f;g<i;g+=1)l(g)&&e.lazy.loadInSlide(g)}else{var v=t.children("."+n.slideNextClass);v.length>0&&e.lazy.loadInSlide(c(v));var b=t.children("."+n.slidePrevClass);b.length>0&&e.lazy.loadInSlide(c(b))}},checkInViewOnLoad:function(){var e=(0,o.Jj)(),t=this;if(t&&!t.destroyed){var n=t.params.lazy.scrollingElement?ia(t.params.lazy.scrollingElement):ia(e),r=n[0]===e,i=r?e.innerWidth:n[0].offsetWidth,a=r?e.innerHeight:n[0].offsetHeight,s=t.$el.offset(),l=!1;t.rtlTranslate&&(s.left-=t.$el[0].scrollLeft);for(var c=[[s.left,s.top],[s.left+t.width,s.top],[s.left,s.top+t.height],[s.left+t.width,s.top+t.height]],d=0;d<c.length;d+=1){var u=c[d];if(u[0]>=0&&u[0]<=i&&u[1]>=0&&u[1]<=a){if(0===u[0]&&0===u[1])continue;l=!0}}var p=!("touchstart"!==t.touchEvents.start||!t.support.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};l?(t.lazy.load(),n.off("scroll",t.lazy.checkInViewOnLoad,p)):t.lazy.scrollHandlerAttached||(t.lazy.scrollHandlerAttached=!0,n.on("scroll",t.lazy.checkInViewOnLoad,p))}}};const vo={name:"lazy",params:{lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){da(this,{lazy:mo({initialImageLoaded:!1},go)})},on:{beforeInit:function(e){e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init:function(e){e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&(e.params.lazy.checkInView?e.lazy.checkInViewOnLoad():e.lazy.load())},scroll:function(e){e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},"scrollbarDragMove resize _freeModeNoMomentumRelease":function(e){e.params.lazy.enabled&&e.lazy.load()},transitionStart:function(e){e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(e){e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange:function(e){var t=e.params,n=t.lazy,r=t.cssMode,i=t.watchSlidesVisibility,a=t.watchSlidesProgress,o=t.touchReleaseOnEdges,s=t.resistanceRatio;n.enabled&&(r||(i||a)&&(o||0===s))&&e.lazy.load()}}};function bo(){return bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bo.apply(this,arguments)}var yo={LinearSpline:function(e,t){var n,r,i,a,o;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(o=function(e,t){for(r=-1,n=e.length;n-r>1;)e[i=n+r>>1]<=t?r=i:n=i;return n}(this.x,e),a=o-1,(e-this.x[a])*(this.y[o]-this.y[a])/(this.x[o]-this.x[a])+this.y[a]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new yo.LinearSpline(t.slidesGrid,e.slidesGrid):new yo.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var n,r,i=this,a=i.controller.control,o=i.constructor;function s(e){var t=i.rtlTranslate?-i.translate:i.translate;"slide"===i.params.controller.by&&(i.controller.getInterpolateFunction(e),r=-i.controller.spline.interpolate(-t)),r&&"container"!==i.params.controller.by||(n=(e.maxTranslate()-e.minTranslate())/(i.maxTranslate()-i.minTranslate()),r=(t-i.minTranslate())*n+e.minTranslate()),i.params.controller.inverse&&(r=e.maxTranslate()-r),e.updateProgress(r),e.setTranslate(r,i),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(a))for(var l=0;l<a.length;l+=1)a[l]!==t&&a[l]instanceof o&&s(a[l]);else a instanceof o&&t!==a&&s(a)},setTransition:function(e,t){var n,r=this,i=r.constructor,a=r.controller.control;function o(t){t.setTransition(e,r),0!==e&&(t.transitionStart(),t.params.autoHeight&&aa((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){a&&(t.params.loop&&"slide"===r.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(a))for(n=0;n<a.length;n+=1)a[n]!==t&&a[n]instanceof i&&o(a[n]);else a instanceof i&&t!==a&&o(a)}};const _o={name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){da(this,{controller:bo({control:this.params.controller.control},yo)})},on:{update:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate:function(e,t,n){e.controller.control&&e.controller.setTranslate(t,n)},setTransition:function(e,t,n){e.controller.control&&e.controller.setTransition(t,n)}}};function wo(){return wo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wo.apply(this,arguments)}var Co={getRandomNumber:function(e){return void 0===e&&(e=16),"x".repeat(e).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(e){return e.attr("tabIndex","0"),e},makeElNotFocusable:function(e){return e.attr("tabIndex","-1"),e},addElRole:function(e,t){return e.attr("role",t),e},addElRoleDescription:function(e,t){return e.attr("aria-roledescription",t),e},addElControls:function(e,t){return e.attr("aria-controls",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},addElId:function(e,t){return e.attr("id",t),e},addElLive:function(e,t){return e.attr("aria-live",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterOrSpaceKey:function(e){if(13===e.keyCode||32===e.keyCode){var t=this,n=t.params.a11y,r=ia(e.target);t.navigation&&t.navigation.$nextEl&&r.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(n.lastSlideMessage):t.a11y.notify(n.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&r.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(n.firstSlideMessage):t.a11y.notify(n.prevSlideMessage)),t.pagination&&r.is(ua(t.params.pagination.bulletClass))&&r[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop&&e.navigation){var t=e.navigation,n=t.$nextEl,r=t.$prevEl;r&&r.length>0&&(e.isBeginning?(e.a11y.disableEl(r),e.a11y.makeElNotFocusable(r)):(e.a11y.enableEl(r),e.a11y.makeElFocusable(r))),n&&n.length>0&&(e.isEnd?(e.a11y.disableEl(n),e.a11y.makeElNotFocusable(n)):(e.a11y.enableEl(n),e.a11y.makeElFocusable(n)))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(n){var r=ia(n);e.a11y.makeElFocusable(r),e.params.pagination.renderBullet||(e.a11y.addElRole(r,"button"),e.a11y.addElLabel(r,t.paginationBulletMessage.replace(/\{\{index\}\}/,r.index()+1)))}))},init:function(){var e=this,t=e.params.a11y;e.$el.append(e.a11y.liveRegion);var n=e.$el;t.containerRoleDescriptionMessage&&e.a11y.addElRoleDescription(n,t.containerRoleDescriptionMessage),t.containerMessage&&e.a11y.addElLabel(n,t.containerMessage);var r=e.$wrapperEl,i=r.attr("id")||"swiper-wrapper-"+e.a11y.getRandomNumber(16),a=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";e.a11y.addElId(r,i),e.a11y.addElLive(r,a),t.itemRoleDescriptionMessage&&e.a11y.addElRoleDescription(ia(e.slides),t.itemRoleDescriptionMessage),e.a11y.addElRole(ia(e.slides),t.slideRole);var o,s,l=e.params.loop?e.slides.filter((function(t){return!t.classList.contains(e.params.slideDuplicateClass)})).length:e.slides.length;e.slides.each((function(n,r){var i=ia(n),a=e.params.loop?parseInt(i.attr("data-swiper-slide-index"),10):r,o=t.slideLabelMessage.replace(/\{\{index\}\}/,a+1).replace(/\{\{slidesLength\}\}/,l);e.a11y.addElLabel(i,o)})),e.navigation&&e.navigation.$nextEl&&(o=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(s=e.navigation.$prevEl),o&&o.length&&(e.a11y.makeElFocusable(o),"BUTTON"!==o[0].tagName&&(e.a11y.addElRole(o,"button"),o.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(o,t.nextSlideMessage),e.a11y.addElControls(o,i)),s&&s.length&&(e.a11y.makeElFocusable(s),"BUTTON"!==s[0].tagName&&(e.a11y.addElRole(s,"button"),s.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(s,t.prevSlideMessage),e.a11y.addElControls(s,i)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown",ua(e.params.pagination.bulletClass),e.a11y.onEnterOrSpaceKey)},destroy:function(){var e,t,n=this;n.a11y.liveRegion&&n.a11y.liveRegion.length>0&&n.a11y.liveRegion.remove(),n.navigation&&n.navigation.$nextEl&&(e=n.navigation.$nextEl),n.navigation&&n.navigation.$prevEl&&(t=n.navigation.$prevEl),e&&e.off("keydown",n.a11y.onEnterOrSpaceKey),t&&t.off("keydown",n.a11y.onEnterOrSpaceKey),n.pagination&&n.params.pagination.clickable&&n.pagination.bullets&&n.pagination.bullets.length&&n.pagination.$el.off("keydown",ua(n.params.pagination.bulletClass),n.a11y.onEnterOrSpaceKey)}};const xo={name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group"}},create:function(){da(this,{a11y:wo({},Co,{liveRegion:ia('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(e){e.params.a11y.enabled&&(e.a11y.init(),e.a11y.updateNavigation())},toEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},fromEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},paginationUpdate:function(e){e.params.a11y.enabled&&e.a11y.updatePagination()},destroy:function(e){e.params.a11y.enabled&&e.a11y.destroy()}}};function ko(){return ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ko.apply(this,arguments)}var Eo={init:function(){var e=this,t=(0,o.Jj)();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var n=e.history;n.initialized=!0,n.paths=Eo.getPathValues(e.params.url),(n.paths.key||n.paths.value)&&(n.scrollToSlide(0,n.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){var e=(0,o.Jj)();this.params.history.replaceState||e.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var e=this;e.history.paths=Eo.getPathValues(e.params.url),e.history.scrollToSlide(e.params.speed,e.history.paths.value,!1)},getPathValues:function(e){var t=(0,o.Jj)(),n=(e?new URL(e):t.location).pathname.slice(1).split("/").filter((function(e){return""!==e})),r=n.length;return{key:n[r-2],value:n[r-1]}},setHistory:function(e,t){var n=this,r=(0,o.Jj)();if(n.history.initialized&&n.params.history.enabled){var i;i=n.params.url?new URL(n.params.url):r.location;var a=n.slides.eq(t),s=Eo.slugify(a.attr("data-history"));if(n.params.history.root.length>0){var l=n.params.history.root;"/"===l[l.length-1]&&(l=l.slice(0,l.length-1)),s=l+"/"+e+"/"+s}else i.pathname.includes(e)||(s=e+"/"+s);var c=r.history.state;c&&c.value===s||(n.params.history.replaceState?r.history.replaceState({value:s},null,s):r.history.pushState({value:s},null,s))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,n){var r=this;if(t)for(var i=0,a=r.slides.length;i<a;i+=1){var o=r.slides.eq(i);if(Eo.slugify(o.attr("data-history"))===t&&!o.hasClass(r.params.slideDuplicateClass)){var s=o.index();r.slideTo(s,e,n)}}else r.slideTo(0,e,n)}};const So={name:"history",params:{history:{enabled:!1,root:"",replaceState:!1,key:"slides"}},create:function(){da(this,{history:ko({},Eo)})},on:{init:function(e){e.params.history.enabled&&e.history.init()},destroy:function(e){e.params.history.enabled&&e.history.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange:function(e){e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}};function To(){return To=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},To.apply(this,arguments)}var Mo={onHashChange:function(){var e=this,t=(0,o.Me)();e.emit("hashChange");var n=t.location.hash.replace("#","");if(n!==e.slides.eq(e.activeIndex).attr("data-hash")){var r=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+n+'"]').index();if(void 0===r)return;e.slideTo(r)}},setHash:function(){var e=this,t=(0,o.Jj)(),n=(0,o.Me)();if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||0),e.emit("hashSet");else{var r=e.slides.eq(e.activeIndex),i=r.attr("data-hash")||r.attr("data-history");n.location.hash=i||"",e.emit("hashSet")}},init:function(){var e=this,t=(0,o.Me)(),n=(0,o.Jj)();if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var r=t.location.hash.replace("#","");if(r)for(var i=0,a=e.slides.length;i<a;i+=1){var s=e.slides.eq(i);if((s.attr("data-hash")||s.attr("data-history"))===r&&!s.hasClass(e.params.slideDuplicateClass)){var l=s.index();e.slideTo(l,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&ia(n).on("hashchange",e.hashNavigation.onHashChange)}},destroy:function(){var e=(0,o.Jj)();this.params.hashNavigation.watchState&&ia(e).off("hashchange",this.hashNavigation.onHashChange)}};const Io={name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){da(this,{hashNavigation:To({initialized:!1},Mo)})},on:{init:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.init()},destroy:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.hashNavigation.initialized&&e.hashNavigation.setHash()},slideChange:function(e){e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}};function Lo(){return Lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lo.apply(this,arguments)}var $o={run:function(){var e=this,t=e.slides.eq(e.activeIndex),n=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(n=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=aa((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),n)},start:function(){var e=this;return void 0===e.autoplay.timeout&&!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0)},stop:function(){var e=this;return!!e.autoplay.running&&void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0)},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)})):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=this,t=(0,o.Me)();"hidden"===t.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===t.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)})),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach((function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)}))},onMouseLeave:function(){var e=this;e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,e.autoplay.run())},attachMouseEvents:function(){var e=this;e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",e.autoplay.onMouseEnter),e.$el.on("mouseleave",e.autoplay.onMouseLeave))},detachMouseEvents:function(){var e=this;e.$el.off("mouseenter",e.autoplay.onMouseEnter),e.$el.off("mouseleave",e.autoplay.onMouseLeave)}};const Po={name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){da(this,{autoplay:Lo({},$o,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),(0,o.Me)().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,n){e.autoplay.running&&(n||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),(0,o.Me)().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}};function Oo(){return Oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oo.apply(this,arguments)}var Bo={setTranslate:function(){for(var e=this,t=e.slides,n=0;n<t.length;n+=1){var r=e.slides.eq(n),i=-r[0].swiperSlideOffset;e.params.virtualTranslate||(i-=e.translate);var a=0;e.isHorizontal()||(a=i,i=0);var o=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(r[0].progress),0):1+Math.min(Math.max(r[0].progress,-1),0);r.css({opacity:o}).transform("translate3d("+i+"px, "+a+"px, 0px)")}},setTransition:function(e){var t=this,n=t.slides,r=t.$wrapperEl;if(n.transition(e),t.params.virtualTranslate&&0!==e){var i=!1;n.transitionEnd((function(){if(!i&&t&&!t.destroyed){i=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)r.trigger(e[n])}}))}}};const Ao={name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){da(this,{fadeEffect:Oo({},Bo)})},on:{beforeInit:function(e){if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};ca(e.params,t),ca(e.originalParams,t)}},setTranslate:function(e){"fade"===e.params.effect&&e.fadeEffect.setTranslate()},setTransition:function(e,t){"fade"===e.params.effect&&e.fadeEffect.setTransition(t)}}};function Ro(){return Ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ro.apply(this,arguments)}var Do={setTranslate:function(){var e,t=this,n=t.$el,r=t.$wrapperEl,i=t.slides,a=t.width,o=t.height,s=t.rtlTranslate,l=t.size,c=t.browser,d=t.params.cubeEffect,u=t.isHorizontal(),p=t.virtual&&t.params.virtual.enabled,h=0;d.shadow&&(u?(0===(e=r.find(".swiper-cube-shadow")).length&&(e=ia('<div class="swiper-cube-shadow"></div>'),r.append(e)),e.css({height:a+"px"})):0===(e=n.find(".swiper-cube-shadow")).length&&(e=ia('<div class="swiper-cube-shadow"></div>'),n.append(e)));for(var f=0;f<i.length;f+=1){var m=i.eq(f),g=f;p&&(g=parseInt(m.attr("data-swiper-slide-index"),10));var v=90*g,b=Math.floor(v/360);s&&(v=-v,b=Math.floor(-v/360));var y=Math.max(Math.min(m[0].progress,1),-1),_=0,w=0,C=0;g%4==0?(_=4*-b*l,C=0):(g-1)%4==0?(_=0,C=4*-b*l):(g-2)%4==0?(_=l+4*b*l,C=l):(g-3)%4==0&&(_=-l,C=3*l+4*l*b),s&&(_=-_),u||(w=_,_=0);var x="rotateX("+(u?0:-v)+"deg) rotateY("+(u?v:0)+"deg) translate3d("+_+"px, "+w+"px, "+C+"px)";if(y<=1&&y>-1&&(h=90*g+90*y,s&&(h=90*-g-90*y)),m.transform(x),d.slideShadows){var k=u?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),E=u?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===k.length&&(k=ia('<div class="swiper-slide-shadow-'+(u?"left":"top")+'"></div>'),m.append(k)),0===E.length&&(E=ia('<div class="swiper-slide-shadow-'+(u?"right":"bottom")+'"></div>'),m.append(E)),k.length&&(k[0].style.opacity=Math.max(-y,0)),E.length&&(E[0].style.opacity=Math.max(y,0))}}if(r.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow)if(u)e.transform("translate3d(0px, "+(a/2+d.shadowOffset)+"px, "+-a/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")");else{var S=Math.abs(h)-90*Math.floor(Math.abs(h)/90),T=1.5-(Math.sin(2*S*Math.PI/360)/2+Math.cos(2*S*Math.PI/360)/2),M=d.shadowScale,I=d.shadowScale/T,L=d.shadowOffset;e.transform("scale3d("+M+", 1, "+I+") translate3d(0px, "+(o/2+L)+"px, "+-o/2/I+"px) rotateX(-90deg)")}var $=c.isSafari||c.isWebView?-l/2:0;r.transform("translate3d(0px,0,"+$+"px) rotateX("+(t.isHorizontal()?0:h)+"deg) rotateY("+(t.isHorizontal()?-h:0)+"deg)")},setTransition:function(e){var t=this,n=t.$el;t.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.cubeEffect.shadow&&!t.isHorizontal()&&n.find(".swiper-cube-shadow").transition(e)}};const No={name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){da(this,{cubeEffect:Ro({},Do)})},on:{beforeInit:function(e){if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};ca(e.params,t),ca(e.originalParams,t)}},setTranslate:function(e){"cube"===e.params.effect&&e.cubeEffect.setTranslate()},setTransition:function(e,t){"cube"===e.params.effect&&e.cubeEffect.setTransition(t)}}};function Go(){return Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Go.apply(this,arguments)}var zo={setTranslate:function(){for(var e=this,t=e.slides,n=e.rtlTranslate,r=0;r<t.length;r+=1){var i=t.eq(r),a=i[0].progress;e.params.flipEffect.limitRotation&&(a=Math.max(Math.min(i[0].progress,1),-1));var o=-180*a,s=0,l=-i[0].swiperSlideOffset,c=0;if(e.isHorizontal()?n&&(o=-o):(c=l,l=0,s=-o,o=0),i[0].style.zIndex=-Math.abs(Math.round(a))+t.length,e.params.flipEffect.slideShadows){var d=e.isHorizontal()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top"),u=e.isHorizontal()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom");0===d.length&&(d=ia('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),i.append(d)),0===u.length&&(u=ia('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),i.append(u)),d.length&&(d[0].style.opacity=Math.max(-a,0)),u.length&&(u[0].style.opacity=Math.max(a,0))}i.transform("translate3d("+l+"px, "+c+"px, 0px) rotateX("+s+"deg) rotateY("+o+"deg)")}},setTransition:function(e){var t=this,n=t.slides,r=t.activeIndex,i=t.$wrapperEl;if(n.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var a=!1;n.eq(r).transitionEnd((function(){if(!a&&t&&!t.destroyed){a=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)i.trigger(e[n])}}))}}};const Ho={name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){da(this,{flipEffect:Go({},zo)})},on:{beforeInit:function(e){if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};ca(e.params,t),ca(e.originalParams,t)}},setTranslate:function(e){"flip"===e.params.effect&&e.flipEffect.setTranslate()},setTransition:function(e,t){"flip"===e.params.effect&&e.flipEffect.setTransition(t)}}};function Fo(){return Fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fo.apply(this,arguments)}var Vo={setTranslate:function(){for(var e=this,t=e.width,n=e.height,r=e.slides,i=e.slidesSizesGrid,a=e.params.coverflowEffect,o=e.isHorizontal(),s=e.translate,l=o?t/2-s:n/2-s,c=o?a.rotate:-a.rotate,d=a.depth,u=0,p=r.length;u<p;u+=1){var h=r.eq(u),f=i[u],m=(l-h[0].swiperSlideOffset-f/2)/f*a.modifier,g=o?c*m:0,v=o?0:c*m,b=-d*Math.abs(m),y=a.stretch;"string"==typeof y&&-1!==y.indexOf("%")&&(y=parseFloat(a.stretch)/100*f);var _=o?0:y*m,w=o?y*m:0,C=1-(1-a.scale)*Math.abs(m);Math.abs(w)<.001&&(w=0),Math.abs(_)<.001&&(_=0),Math.abs(b)<.001&&(b=0),Math.abs(g)<.001&&(g=0),Math.abs(v)<.001&&(v=0),Math.abs(C)<.001&&(C=0);var x="translate3d("+w+"px,"+_+"px,"+b+"px)  rotateX("+v+"deg) rotateY("+g+"deg) scale("+C+")";if(h.transform(x),h[0].style.zIndex=1-Math.abs(Math.round(m)),a.slideShadows){var k=o?h.find(".swiper-slide-shadow-left"):h.find(".swiper-slide-shadow-top"),E=o?h.find(".swiper-slide-shadow-right"):h.find(".swiper-slide-shadow-bottom");0===k.length&&(k=ia('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),h.append(k)),0===E.length&&(E=ia('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),h.append(E)),k.length&&(k[0].style.opacity=m>0?m:0),E.length&&(E[0].style.opacity=-m>0?-m:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}};const Wo={name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){da(this,{coverflowEffect:Fo({},Vo)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}};function jo(){return jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jo.apply(this,arguments)}var Uo={init:function(){var e=this,t=e.params.thumbs;if(e.thumbs.initialized)return!1;e.thumbs.initialized=!0;var n=e.constructor;return t.swiper instanceof n?(e.thumbs.swiper=t.swiper,ca(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),ca(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):la(t.swiper)&&(e.thumbs.swiper=new n(ca({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick),!0},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var n=t.clickedIndex,r=t.clickedSlide;if(!(r&&ia(r).hasClass(e.params.thumbs.slideThumbActiveClass)||null==n)){var i;if(i=t.params.loop?parseInt(ia(t.clickedSlide).attr("data-swiper-slide-index"),10):n,e.params.loop){var a=e.activeIndex;e.slides.eq(a).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,a=e.activeIndex);var o=e.slides.eq(a).prevAll('[data-swiper-slide-index="'+i+'"]').eq(0).index(),s=e.slides.eq(a).nextAll('[data-swiper-slide-index="'+i+'"]').eq(0).index();i=void 0===o?s:void 0===s?o:s-a<a-o?s:o}e.slideTo(i)}}},update:function(e){var t=this,n=t.thumbs.swiper;if(n){var r="auto"===n.params.slidesPerView?n.slidesPerViewDynamic():n.params.slidesPerView,i=t.params.thumbs.autoScrollOffset,a=i&&!n.params.loop;if(t.realIndex!==n.realIndex||a){var o,s,l=n.activeIndex;if(n.params.loop){n.slides.eq(l).hasClass(n.params.slideDuplicateClass)&&(n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft,l=n.activeIndex);var c=n.slides.eq(l).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),d=n.slides.eq(l).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();o=void 0===c?d:void 0===d?c:d-l==l-c?n.params.slidesPerGroup>1?d:l:d-l<l-c?d:c,s=t.activeIndex>t.previousIndex?"next":"prev"}else s=(o=t.realIndex)>t.previousIndex?"next":"prev";a&&(o+="next"===s?i:-1*i),n.visibleSlidesIndexes&&n.visibleSlidesIndexes.indexOf(o)<0&&(n.params.centeredSlides?o=o>l?o-Math.floor(r/2)+1:o+Math.floor(r/2)-1:o>l&&n.params.slidesPerGroup,n.slideTo(o,e?0:void 0))}var u=1,p=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(u=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(u=1),u=Math.floor(u),n.slides.removeClass(p),n.params.loop||n.params.virtual&&n.params.virtual.enabled)for(var h=0;h<u;h+=1)n.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+h)+'"]').addClass(p);else for(var f=0;f<u;f+=1)n.slides.eq(t.realIndex+f).addClass(p)}}};const qo={name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){da(this,{thumbs:jo({swiper:null,initialized:!1},Uo)})},on:{beforeInit:function(e){var t=e.params.thumbs;t&&t.swiper&&(e.thumbs.init(),e.thumbs.update(!0))},slideChange:function(e){e.thumbs.swiper&&e.thumbs.update()},update:function(e){e.thumbs.swiper&&e.thumbs.update()},resize:function(e){e.thumbs.swiper&&e.thumbs.update()},observerUpdate:function(e){e.thumbs.swiper&&e.thumbs.update()},setTransition:function(e,t){var n=e.thumbs.swiper;n&&n.setTransition(t)},beforeDestroy:function(e){var t=e.thumbs.swiper;t&&e.thumbs.swiperCreated&&t&&t.destroy()}}};var Ko=[qa,Qa,Xa,to,io,so,uo,fo,vo,_o,xo,So,Io,Po,Ao,No,Ho,Wo,qo];function Jo(e){var t=this,n=a(e);if(0!==n.length&&!n[0].swiper){var r,i,o,s={};n.hasClass("tabs-swipeable-wrap")&&(n.addClass("swiper-container").children(".tabs").addClass("swiper-wrapper").children(".tab").addClass("swiper-slide"),r=n.children(".tabs").children(".tab-active").index(),i=!0,o=n.find(".tabs-routable").length>0),n.attr("data-swiper")?s=JSON.parse(n.attr("data-swiper")):n[0].f7SwiperParams?s=n[0].f7SwiperParams:(s=n.dataset(),Object.keys(s).forEach((function(e){var t=s[e];if("string"==typeof t&&0===t.indexOf("{")&&t.indexOf("}")>0)try{s[e]=JSON.parse(t)}catch(e){}}))),void 0===s.initialSlide&&void 0!==r&&(s.initialSlide=r);var l=t.swiper.create(n[0],s),c=n.parents(".tab").filter((function(e){return 0===a(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0);n.parents(".popup, .login-screen, .sheet-modal, .popover").on("modal:open",d),n.parents(".panel").on("panel:open",d),c&&c.length&&c.on("tab:show",d),l.on("beforeDestroy",(function(){n.parents(".popup, .login-screen, .sheet-modal, .popover").off("modal:open",d),n.parents(".panel").off("panel:open",d),c&&c.length&&c.off("tab:show",d)})),i&&l.on("slideChange",(function(){if(o){var e=t.views.get(n.parents(".view"));e||(e=t.views.main);var r=e.router,i=r.findTabRouteUrl(l.slides.eq(l.activeIndex)[0]);i&&setTimeout((function(){r.navigate(i)}),0)}else t.tab.show({tabEl:l.slides.eq(l.activeIndex)})}))}function d(){l.update()}}Wa.use(Ko);const Qo={name:"swiper",static:{Swiper:Wa},create:function(){this.swiper=q({defaultSelector:".swiper-container",constructor:Wa,domProp:"swiper"})},on:{pageBeforeRemove:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))},pageMounted:function(e){var t=this;e.$el.find(".tabs-swipeable-wrap").each((function(e){Jo.call(t,e)}))},pageInit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){Jo.call(t,e)}))},pageReinit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var n=t.swiper.get(e);n&&n.update&&n.update()}))},tabMounted:function(e){var t=this;a(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){Jo.call(t,e)}))},tabShow:function(e){var t=this;a(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var n=t.swiper.get(e);n&&n.update&&n.update()}))},tabBeforeRemove:function(e){var t=this;a(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))}},vnode:{"swiper-init":{insert:function(e){var t=e.elm;Jo.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}},"tabs-swipeable-wrap":{insert:function(e){var t=e.elm;Jo.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}}}};function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xo(e,t){return Xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xo(e,t)}var Zo=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r=e.call(this,n,[t])||this);i.app=t;var a=T({on:{}},t.params.photoBrowser);return i.useModulesParams(a),i.params=T(a,n),T(i,{exposed:!1,opened:!1,activeIndex:i.params.swiper.initialSlide,url:i.params.url,swipeToClose:{allow:!0,isTouched:!1,diff:void 0,start:void 0,current:void 0,started:!1,activeSlide:void 0,timeStart:void 0}}),i.useModules(),i.init(),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Xo(t,n);var i,s,l=r.prototype;return l.onSlideChange=function(e){var t=this;t.activeIndex=e.activeIndex;var n=e.activeIndex+1,r=t.params.virtualSlides?t.params.photos.length:e.slides.length;e.params.loop&&(r-=2,(n-=e.loopedSlides)<1&&(n=r+n),n>r&&(n-=r));var i,o=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.activeIndex+'"]'):e.slides.eq(e.activeIndex),s=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.previousIndex+'"]'):e.slides.eq(e.previousIndex),l=t.$el.find(".photo-browser-current"),c=t.$el.find(".photo-browser-total");if("page"===t.params.type&&t.params.navbar&&0===l.length&&"ios"===t.app.theme&&(i=t.app.navbar.getElByPage(t.$el))&&(l=a(i).find(".photo-browser-current"),c=a(i).find(".photo-browser-total")),l.length&&c.length&&(l.text(n),c.text(r),i||(i=l.parents(".navbar")[0]),i&&t.app.navbar.size(i)),t.captions.length>0){var d=e.params.loop?o.attr("data-swiper-slide-index"):t.activeIndex;t.$captionsContainerEl.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),t.$captionsContainerEl.find('[data-caption-index="'+d+'"]').addClass("photo-browser-caption-active")}var u=s.find("video");u.length>0&&"pause"in u[0]&&u[0].pause()},l.onTouchStart=function(){var e=this.swipeToClose;e.allow&&(e.isTouched=!0)},l.onTouchMove=function(e){var t=this,n=t.swipeToClose;n.isTouched&&(n.started||(n.started=!0,n.start="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,t.params.virtualSlides?n.activeSlide=t.swiper.$wrapperEl.children(".swiper-slide-active"):n.activeSlide=t.swiper.slides.eq(t.swiper.activeIndex),n.timeStart=w()),e.preventDefault(),n.current="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,n.diff=n.start-n.current,t.$el.transition(0).transform("translate3d(0,"+-n.diff+"px,0)"))},l.onTouchEnd=function(){var e=this,t=e.swipeToClose;if(t.isTouched=!1,t.started){t.started=!1,t.allow=!1;var n=Math.abs(t.diff),r=(new Date).getTime()-t.timeStart;r<300&&n>20||r>=300&&n>100?y((function(){e.$el&&(t.diff<0?e.$el.addClass("swipe-close-to-bottom"):e.$el.addClass("swipe-close-to-top")),e.emit("local::swipeToClose",e),e.$el.transform("").transition(""),e.close(),t.allow=!0})):(0!==n?e.$el.addClass("photo-browser-transitioning").transitionEnd((function(){t.allow=!0,e.$el.removeClass("photo-browser-transitioning")})):t.allow=!0,y((function(){e.$el.transform("").transition("")})))}else t.started=!1},l.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.iconsColor;e.params.iconsColor||"dark"!==e.params.theme||(t="white");var n="ios"!==e.app.theme&&"aurora"!==e.app.theme||!e.params.pageBackLinkText?"":e.params.pageBackLinkText,r=void 0===e.params.navbarShowCount?e.params.photos.length>1:e.params.navbarShowCount,i="page"!==e.params.type;return mn("div",{class:"navbar navbar-photo-browser "+("dark"===e.params.theme?"navbar-photo-browser-dark":"")},mn("div",{class:"navbar-bg"}),mn("div",{class:"navbar-inner navbar-inner-centered-title sliding"},!i&&mn("div",{class:"left"},mn("a",{class:"link "+(n?"":"icon-only")+" back"},mn("i",{class:"icon icon-back "+(t?"color-"+t:"")}),n&&mn("span",null,n))),r&&mn("div",{class:"title"},mn("span",{class:"photo-browser-current"}),mn("span",{class:"photo-browser-of"},e.params.navbarOfText),mn("span",{class:"photo-browser-total"})),i&&mn("div",{class:"right"},mn("a",{class:"link popup-close","data-popup":".photo-browser-popup"},mn("span",null,e.params.popupCloseLinkText)))))},l.renderToolbar=function(){var e=this;if(e.params.renderToolbar)return e.params.renderToolbar.call(e);var t=e.params.iconsColor;return e.params.iconsColor||"dark"!==e.params.theme||(t="white"),mn("div",{class:"toolbar toolbar-bottom tabbar"},mn("div",{class:"toolbar-inner"},mn("a",{class:"link photo-browser-prev"},mn("i",{class:"icon icon-back "+(t?"color-"+t:"")})),mn("a",{class:"link photo-browser-next"},mn("i",{class:"icon icon-forward "+(t?"color-"+t:"")}))))},l.renderCaption=function(e,t){var n=this;return n.params.renderCaption?n.params.renderCaption.call(n,e,t):mn("div",{class:"photo-browser-caption","data-caption-index":t},e)},l.renderObject=function(e,t){var n=this;return n.params.renderObject?n.params.renderObject.call(n,e,t):mn("div",{class:"photo-browser-slide photo-browser-object-slide swiper-slide","data-swiper-slide-index":t},e.html?e.html:e)},l.renderLazyPhoto=function(e,t){var n=this;return n.params.renderLazyPhoto?n.params.renderLazyPhoto.call(n,e,t):mn("div",{class:"photo-browser-slide photo-browser-slide-lazy swiper-slide","data-swiper-slide-index":t},mn("div",{class:"swiper-lazy-preloader"}),mn("span",{class:"swiper-zoom-container"},mn("img",{"data-src":e.url?e.url:e,class:"swiper-lazy"})))},l.renderPhoto=function(e,t){var n=this;return n.params.renderPhoto?n.params.renderPhoto.call(n,e,t):mn("div",{class:"photo-browser-slide swiper-slide","data-swiper-slide-index":t},mn("span",{class:"swiper-zoom-container"},mn("img",{src:e.url?e.url:e})))},l.render=function(){var e=this;return e.params.render?e.params.render.call(e,e.params):mn("div",{class:"photo-browser photo-browser-"+e.params.theme},mn("div",{class:"view"},mn("div",{class:"page photo-browser-page photo-browser-page-"+e.params.theme+" no-toolbar "+(e.params.navbar?"":"no-navbar"),"data-name":"photo-browser-page"},e.params.navbar&&e.renderNavbar(),e.params.toolbar&&e.renderToolbar(),mn("div",{class:"photo-browser-captions photo-browser-captions-"+(e.params.captionsTheme||e.params.theme)},e.params.photos.map((function(t,n){return t.caption?e.renderCaption(t.caption,n):""}))),mn("div",{class:"photo-browser-swiper-container swiper-container"},mn("div",{class:"photo-browser-swiper-wrapper swiper-wrapper"},!e.params.virtualSlides&&e.params.photos.map((function(t,n){return t.html||("string"==typeof t||t instanceof String)&&t.indexOf("<")>=0&&t.indexOf(">")>=0?e.renderObject(t,n):!0===e.params.swiper.lazy||e.params.swiper.lazy&&e.params.swiper.lazy.enabled?e.renderLazyPhoto(t,n):e.renderPhoto(t,n)})))))))},l.renderStandalone=function(){var e=this;return e.params.renderStandalone?e.params.renderStandalone.call(e):'<div class="popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen">'+e.render()+"</div>"},l.renderPage=function(){var e=this;return e.params.renderPage?e.params.renderPage.call(e):e.render()},l.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e):'<div class="popup photo-browser-popup">'+e.render()+"</div>"},l.onOpen=function(e,t){var n,r=this,i=r.app,s=a(t);s[0].f7PhotoBrowser=r,r.$el=s,r.el=s[0],r.openedIn=e,r.opened=!0,r.$swiperContainerEl=r.$el.find(".photo-browser-swiper-container"),r.$swiperWrapperEl=r.$el.find(".photo-browser-swiper-wrapper"),r.slides=r.$el.find(".photo-browser-slide"),r.$captionsContainerEl=r.$el.find(".photo-browser-captions"),r.captions=r.$el.find(".photo-browser-caption");var l=T({},r.params.swiper,{initialSlide:r.activeIndex,on:{click:function(e){clearTimeout(n),r.params.exposition&&(n=setTimeout((function(){r.expositionToggle()}),350)),r.emit("local::tap",e),r.emit("local::click",e)},doubleClick:function(e){clearTimeout(n),r.emit("local::doubleTap",e),r.emit("local::doubleClick",e)},slideChange:function(){r.onSlideChange(this);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::slideChange"].concat(t))},transitionStart:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::transitionStart"].concat(t))},transitionEnd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::transitionEnd"].concat(t))},slideChangeTransitionStart:function(){r.onSlideChange(this);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::slideChangeTransitionStart"].concat(t))},slideChangeTransitionEnd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::slideChangeTransitionEnd"].concat(t))},lazyImageLoad:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::lazyImageLoad"].concat(t))},lazyImageReady:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0];a(i).removeClass("photo-browser-slide-lazy"),r.emit.apply(r,["local::lazyImageReady"].concat(t))}}});r.params.swipeToClose&&"page"!==r.params.type&&T(l.on,{touchStart:function(e,t){r.onTouchStart(t),r.emit("local::touchStart",t)},touchMoveOpposite:function(e,t){r.onTouchMove(t),r.emit("local::touchMoveOpposite",t)},touchEnd:function(e,t){r.onTouchEnd(t),r.emit("local::touchEnd",t)}}),r.params.virtualSlides&&T(l,{virtual:{slides:r.params.photos,renderSlide:function(e,t){return e.html||("string"==typeof e||e instanceof String)&&e.indexOf("<")>=0&&e.indexOf(">")>=0?r.renderObject(e,t):!0===r.params.swiper.lazy||r.params.swiper.lazy&&r.params.swiper.lazy.enabled?r.renderLazyPhoto(e,t):r.renderPhoto(e,t)}}});var c=(0,o.Jj)();r.swiper=i.swiper?i.swiper.create(r.$swiperContainerEl,l):new c.Swiper(r.$swiperContainerEl,l),0===r.activeIndex&&r.onSlideChange(r.swiper),r.$el&&r.$el.trigger("photobrowser:open"),r.emit("local::open photoBrowserOpen",r)},l.onOpened=function(){var e=this;e.$el&&"standalone"===e.params.type&&e.$el.css("animation","none"),e.$el&&e.$el.trigger("photobrowser:opened"),e.emit("local::opened photoBrowserOpened",e)},l.onClose=function(){var e=this;e.destroyed||(e.swiper&&e.swiper.destroy&&(e.swiper.destroy(!0,!1),e.swiper=null,delete e.swiper),e.$el&&e.$el.trigger("photobrowser:close"),e.emit("local::close photoBrowserClose",e))},l.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.$el&&e.$el.trigger("photobrowser:closed"),e.emit("local::closed photoBrowserClosed",e))},l.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.view.$el.addClass("with-photo-browser-page with-photo-browser-page-"+e.params.theme),e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.view.$el.removeClass("with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-"+e.params.theme),e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}}}}),e},l.openStandalone=function(){var e=this;if(e.opened)return e;var t={backdrop:!1,content:e.renderStandalone(),on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},l.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),push:e.params.popupPush,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},l.expositionEnable=function(){var e=this;return"page"===e.params.type&&e.view.$el.addClass("with-photo-browser-page-exposed"),e.$el&&e.$el.addClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.addClass("photo-browser-captions-exposed"),e.exposed=!0,e},l.expositionDisable=function(){var e=this;return"page"===e.params.type&&e.view.$el.removeClass("with-photo-browser-page-exposed"),e.$el&&e.$el.removeClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.removeClass("photo-browser-captions-exposed"),e.exposed=!1,e},l.expositionToggle=function(){var e=this;return"page"===e.params.type&&e.view.$el.toggleClass("with-photo-browser-page-exposed"),e.$el&&e.$el.toggleClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.toggleClass("photo-browser-captions-exposed"),e.exposed=!e.exposed,e},l.open=function(e){var t=this,n=t.params.type;return t.opened?(t.swiper&&void 0!==e&&t.swiper.slideTo(parseInt(e,10)),t):(void 0!==e&&(t.activeIndex=e),"standalone"===n&&t.openStandalone(),"page"===n&&t.openPage(),"popup"===n&&t.openPopup(),t)},l.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){y((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},l.init=function(){},l.destroy=function(){var e=this;e.emit("local::beforeDestroy photoBrowserBeforeDestroy",e),e.$el&&(e.$el.trigger("photobrowser:beforedestroy"),e.$el[0].f7PhotoBrowser=null,delete e.$el[0].f7PhotoBrowser),g(e),e.destroyed=!0,e=null},i=r,(s=[{key:"view",get:function(){var e=this.params,t=this.app;return e.view||t.views.main}}])&&Yo(i.prototype,s),r}(W);const es=Zo,ts={name:"photoBrowser",params:{photoBrowser:{photos:[],exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",captionsTheme:void 0,iconsColor:void 0,popupPush:!1,swipeToClose:!0,pageBackLinkText:"Back",popupCloseLinkText:"Close",navbarOfText:"of",navbarShowCount:void 0,view:void 0,url:"photos/",routableModals:!1,virtualSlides:!0,renderNavbar:void 0,renderToolbar:void 0,renderCaption:void 0,renderObject:void 0,renderLazyPhoto:void 0,renderPhoto:void 0,renderPage:void 0,renderPopup:void 0,renderStandalone:void 0,swiper:{initialSlide:0,spaceBetween:20,speed:300,loop:!1,preloadImages:!0,navigation:{nextEl:".photo-browser-next",prevEl:".photo-browser-prev"},zoom:{enabled:!0,maxRatio:3,minRatio:1},lazy:{enabled:!0}}}},create:function(){this.photoBrowser=q({defaultSelector:".photo-browser-popup, .photo-browser-page",constructor:es,app:this,domProp:"f7PhotoBrowser"})},static:{PhotoBrowser:es}};function ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rs(e,t){return rs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rs(e,t)}var is=function(e){var t,n;function r(t,n){var r,i=T({on:{}},t.params.notification,n),o=ns(r=e.call(this,t,i)||this);o.app=t,o.params=i;var s,l,c,d,u,p,h,f=o.params,m=f.icon,g=f.title,v=f.titleRightText,b=f.subtitle,_=f.text,C=f.closeButton,x=f.closeTimeout,k=f.cssClass,E=f.closeOnClick;if(o.params.el)s=a(o.params.el);else{var S=o.render({icon:m,title:g,titleRightText:v,subtitle:b,text:_,closeButton:C,cssClass:k});s=a(S)}if(s&&s.length>0&&s[0].f7Modal)return s[0].f7Modal||ns(r);if(0===s.length)return o.destroy()||ns(r);T(o,{$el:s,el:s[0],type:"notification"}),s[0].f7Modal=o,C&&s.find(".notification-close-button").on("click",(function(){o.close()})),s.on("click",(function(e){C&&a(e.target).closest(".notification-close-button").length||(o.emit("local::click notificationClick",o),E&&o.close())})),o.on("beforeDestroy",(function(){s.off("click")}));var M,I={};function L(e){l||(l=!0,c=!1,d=void 0,p=w(),I.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,I.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function $(e){if(l){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===d&&(d=!!(d||Math.abs(n-I.y)<Math.abs(t-I.x))),d)l=!1;else{e.preventDefault(),c||(o.$el.removeClass("notification-transitioning"),o.$el.transition(0),h=o.$el[0].offsetHeight/2),c=!0;var r=u=n-I.y;u>0&&(r=Math.pow(u,.8)),o.$el.transform("translate3d(0, "+r+"px, 0)")}}}function P(){if(!l||!c)return l=!1,void(c=!1);if(l=!1,c=!1,0!==u){var e=w()-p;o.$el.transition(""),o.$el.addClass("notification-transitioning"),o.$el.transform(""),(u<-10&&e<300||-u>=h/1)&&o.close()}}function O(){M=y((function(){l&&c?O():o.close()}),x)}return o.on("open",(function(){o.params.swipeToClose&&(o.$el.on(t.touchEvents.start,L,{passive:!0}),t.on("touchmove:active",$),t.on("touchend:passive",P)),a(".notification.modal-in").each((function(e){var n=t.notification.get(e);e!==o.el&&n&&n.close()})),x&&O()})),o.on("close beforeDestroy",(function(){o.params.swipeToClose&&(o.$el.off(t.touchEvents.start,L,{passive:!0}),t.off("touchmove:active",$),t.off("touchend:passive",P)),clearTimeout(M)})),o||ns(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,rs(t,n),r.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,n=t.icon,r=t.title,i=t.titleRightText,a=t.subtitle,o=t.text,s=t.closeButton,l=t.cssClass;return mn("div",{class:"notification "+(l||"")},mn("div",{class:"notification-header"},n&&mn("div",{class:"notification-icon"},n),r&&mn("div",{class:"notification-title"},r),i&&mn("div",{class:"notification-title-right-text"},i),s&&mn("span",{class:"notification-close-button"})),mn("div",{class:"notification-content"},a&&mn("div",{class:"notification-subtitle"},a),o&&mn("div",{class:"notification-text"},o)))},r}(dn);const as=is,os={name:"notification",static:{Notification:as},create:function(){this.notification=T({},J({app:this,constructor:as,defaultSelector:".notification.modal-in"}))},params:{notification:{icon:null,title:null,titleRightText:null,subtitle:null,text:null,closeButton:!1,closeTimeout:null,closeOnClick:!1,swipeToClose:!0,cssClass:null,render:null,containerEl:null}}};function ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ls(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cs(e,t){return cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cs(e,t)}var ds=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=ls(r=e.call(this,n,[t])||this);i.app=t;var o,s,l=N(),d=T({on:{}},t.params.autocomplete);void 0===d.searchbarDisableButton&&(d.searchbarDisableButton="aurora"!==t.theme),i.useModulesParams(d),i.params=T(d,n),i.params.openerEl&&(o=a(i.params.openerEl)).length&&(o[0].f7Autocomplete=i),i.params.inputEl&&(s=a(i.params.inputEl)).length&&(s[0].f7Autocomplete=i);var u=c(),p=n.url;!p&&o&&o.length&&(o.attr("href")?p=o.attr("href"):o.find("a").length>0&&(p=o.find("a").attr("href"))),p&&"#"!==p&&""!==p||(p=i.params.url);var h=i.params.multiple?"checkbox":"radio";T(i,{$openerEl:o,openerEl:o&&o[0],$inputEl:s,inputEl:s&&s[0],id:u,url:p,value:i.params.value||[],inputType:h,inputName:h+"-"+u,$modalEl:void 0,$dropdownEl:void 0});var f="";function m(){var e=i.$inputEl.val().trim();i.params.source&&i.params.source.call(i,e,(function(t){var n,r,a,o="",l=i.params.limit?Math.min(i.params.limit,t.length):t.length;i.items=t,i.params.highlightMatches&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=new RegExp("("+e+")","i"));for(var c=0;c<l;c+=1){var d="object"==typeof t[c]?t[c][i.params.valueProperty]:t[c],u="object"==typeof t[c]?t[c][i.params.textProperty]:t[c];0===c&&(r=d,a=i.items[c]),o+=i.renderItem({value:d,text:i.params.highlightMatches?u.replace(n,"<b>$1</b>"):u},c)}if(""===o&&""===e&&i.params.dropdownPlaceholderText&&(o+=i.renderItem({placeholder:!0,text:i.params.dropdownPlaceholderText})),i.$dropdownEl.find("ul").html(o),i.params.typeahead){if(!r||!a)return;if(0!==r.toLowerCase().indexOf(e.toLowerCase()))return;if(f.toLowerCase()===e.toLowerCase())return void(i.value=[]);if(0===f.toLowerCase().indexOf(e.toLowerCase()))return f=e,void(i.value=[]);s.val(r),s[0].setSelectionRange(e.length,r.length);var p="object"==typeof i.value[0]?i.value[0][i.params.valueProperty]:i.value[0];p&&r.toLowerCase()===p.toLowerCase()||(i.value=[a],i.emit("local::change autocompleteChange",[a]))}f=e}))}function g(){var e,t,n,r=this,o=r.value;if(a(r).parents(".autocomplete-values").length>0){if("checkbox"===i.inputType&&!r.checked){for(var s=0;s<i.value.length;s+=1)(n="string"==typeof i.value[s]?i.value[s]:i.value[s][i.params.valueProperty])!==o&&1*n!=1*o||i.value.splice(s,1);i.updateValues(),i.emit("local::change autocompleteChange",i.value)}}else{for(var l=0;l<i.items.length;l+=1)(t="object"==typeof i.items[l]?i.items[l][i.params.valueProperty]:i.items[l])!==o&&1*t!=1*o||(e=i.items[l]);if("radio"===i.inputType)i.value=[e];else if(r.checked)i.value.push(e);else for(var c=0;c<i.value.length;c+=1)(n="object"==typeof i.value[c]?i.value[c][i.params.valueProperty]:i.value[c])!==o&&1*n!=1*o||i.value.splice(c,1);i.updateValues(),("radio"===i.inputType&&r.checked||"checkbox"===i.inputType)&&i.emit("local::change autocompleteChange",i.value)}}function v(e){var t=a(e.target);t.is(i.$inputEl[0])||i.$dropdownEl&&t.closest(i.$dropdownEl[0]).length||i.close()}function b(){i.open()}function _(){i.open()}function w(){i.$dropdownEl.find("label.active-state").length>0||setTimeout((function(){i.close()}),0)}function C(){i.positionDropdown()}function x(e){if(i.opened){if(27===e.keyCode)return e.preventDefault(),void i.$inputEl.blur();if(13===e.keyCode){var t=i.$dropdownEl.find(".autocomplete-dropdown-selected label");return t.length?(e.preventDefault(),t.trigger("click"),void i.$inputEl.blur()):void(i.params.typeahead&&(e.preventDefault(),i.$inputEl.blur()))}if(40===e.keyCode||38===e.keyCode){e.preventDefault();var n,r=i.$dropdownEl.find(".autocomplete-dropdown-selected");r.length&&(n=r[40===e.keyCode?"next":"prev"]("li")).length||(n=i.$dropdownEl.find("li").eq(40===e.keyCode?0:i.$dropdownEl.find("li").length-1)),n.hasClass("autocomplete-dropdown-placeholder")||(r.removeClass("autocomplete-dropdown-selected"),n.addClass("autocomplete-dropdown-selected"))}}}function k(){for(var e,t=a(this),n=0;n<i.items.length;n+=1){var r="object"==typeof i.items[n]?i.items[n][i.params.valueProperty]:i.items[n],o=t.attr("data-value");r!==o&&1*r!=1*o||(e=i.items[n])}i.params.updateInputValueOnSelect&&(i.$inputEl.val("object"==typeof e?e[i.params.valueProperty]:e),i.$inputEl.trigger("input change")),i.value=[e],i.emit("local::change autocompleteChange",[e]),i.close()}return i.attachEvents=function(){"dropdown"!==i.params.openIn&&i.$openerEl&&i.$openerEl.on("click",b),"dropdown"===i.params.openIn&&i.$inputEl&&(i.$inputEl.on("focus",_),i.$inputEl.on(i.params.inputEvents,m),l.android?a("html").on("click",v):i.$inputEl.on("blur",w),i.$inputEl.on("keydown",x))},i.detachEvents=function(){"dropdown"!==i.params.openIn&&i.$openerEl&&i.$openerEl.off("click",b),"dropdown"===i.params.openIn&&i.$inputEl&&(i.$inputEl.off("focus",_),i.$inputEl.off(i.params.inputEvents,m),l.android?a("html").off("click",v):i.$inputEl.off("blur",w),i.$inputEl.off("keydown",x))},i.attachDropdownEvents=function(){i.$dropdownEl.on("click","label",k),t.on("resize",C)},i.detachDropdownEvents=function(){i.$dropdownEl.off("click","label",k),t.off("resize",C)},i.attachPageEvents=function(){i.$el.on("change",'input[type="radio"], input[type="checkbox"]',g),i.params.closeOnSelect&&!i.params.multiple&&i.$el.once("click",".list label",(function(){y((function(){i.close()}))}))},i.detachPageEvents=function(){i.$el.off("change",'input[type="radio"], input[type="checkbox"]',g)},i.useModules(),i.init(),i||ls(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,cs(t,n);var i,o,s=r.prototype;return s.positionDropdown=function(){var e,t=this,n=t.$inputEl,r=t.app,i=t.$dropdownEl,o=n.parents(".page-content");if(0!==o.length){var s,l=n.offset(),c=n[0].offsetWidth,d=n[0].offsetHeight,u=n.parents(".list");u.parents().each((function(e){if(!s){var t=a(e);t.parent(o).length&&(s=t)}}));var p,h=u.offset(),f=parseInt(o.css("padding-bottom"),10),m=u.length>0?h.left-o.offset().left:0,g=l.left-(u.length>0?h.left:0)-(r.rtl,0),v=l.top-(o.offset().top-o[0].scrollTop),b=o[0].scrollHeight-f-(v+o[0].scrollTop)-n[0].offsetHeight,y=r.rtl?"padding-right":"padding-left";u.length&&!t.params.expandInput&&(p=(r.rtl?u[0].offsetWidth-g-c:g)-("md"===r.theme?16:15)),i.css({left:(u.length>0?m:g)+"px",top:v+o[0].scrollTop+d+"px",width:(u.length>0?u[0].offsetWidth:c)+"px"}),i.children(".autocomplete-dropdown-inner").css(((e={maxHeight:b+"px"})[y]=u.length>0&&!t.params.expandInput?p+"px":"",e))}},s.focus=function(){this.$el.find("input[type=search]").focus()},s.source=function(e){var t=this;if(t.params.source){var n=t.$el;t.params.source.call(t,e,(function(r){var i="",a=t.params.limit?Math.min(t.params.limit,r.length):r.length;t.items=r;for(var o=0;o<a;o+=1){for(var s=!1,l="object"==typeof r[o]?r[o][t.params.valueProperty]:r[o],c=0;c<t.value.length;c+=1){var d="object"==typeof t.value[c]?t.value[c][t.params.valueProperty]:t.value[c];d!==l&&1*d!=1*l||(s=!0)}i+=t.renderItem({value:l,text:"object"==typeof r[o]?r[o][t.params.textProperty]:r[o],inputType:t.inputType,id:t.id,inputName:t.inputName,selected:s},o)}n.find(".autocomplete-found ul").html(i),0===r.length?0!==e.length?(n.find(".autocomplete-not-found").show(),n.find(".autocomplete-found, .autocomplete-values").hide()):(n.find(".autocomplete-values").show(),n.find(".autocomplete-found, .autocomplete-not-found").hide()):(n.find(".autocomplete-found").show(),n.find(".autocomplete-not-found, .autocomplete-values").hide())}))}},s.updateValues=function(){for(var e=this,t="",n=0;n<e.value.length;n+=1)t+=e.renderItem({value:"object"==typeof e.value[n]?e.value[n][e.params.valueProperty]:e.value[n],text:"object"==typeof e.value[n]?e.value[n][e.params.textProperty]:e.value[n],inputType:e.inputType,id:e.id,inputName:e.inputName+"-checked}",selected:!0},n);e.$el.find(".autocomplete-values ul").html(t)},s.preloaderHide=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").removeClass("autocomplete-preloader-visible"):a(".autocomplete-preloader").removeClass("autocomplete-preloader-visible")},s.preloaderShow=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").addClass("autocomplete-preloader-visible"):a(".autocomplete-preloader").addClass("autocomplete-preloader-visible")},s.renderPreloader=function(){var e=this,t={iosPreloaderContent:h,mdPreloaderContent:p,auroraPreloaderContent:f};return mn("div",{class:"autocomplete-preloader preloader "+(e.params.preloaderColor?"color-"+e.params.preloaderColor:"")},t[e.app.theme+"PreloaderContent"]||"")},s.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):mn("form",{class:"searchbar"},mn("div",{class:"searchbar-inner"},mn("div",{class:"searchbar-input-wrap"},mn("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),mn("i",{class:"searchbar-icon"}),mn("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&mn("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},s.renderItem=function(e,t){var n=this;if(n.params.renderItem)return n.params.renderItem.call(n,e,t);var r=e.value&&"string"==typeof e.value?e.value.replace(/"/g,"&quot;"):e.value;return"dropdown"!==n.params.openIn?mn("li",null,mn("label",{class:"item-"+e.inputType+" item-content"},mn("input",{type:e.inputType,name:e.inputName,value:r,_checked:e.selected}),mn("i",{class:"icon icon-"+e.inputType}),mn("div",{class:"item-inner"},mn("div",{class:"item-title"},e.text)))):e.placeholder?mn("li",{class:"autocomplete-dropdown-placeholder"},mn("label",{class:"item-content"},mn("div",{class:"item-inner"},mn("div",{class:"item-title"},e.text)))):mn("li",null,mn("label",{class:"item-radio item-content","data-value":r},mn("div",{class:"item-inner"},mn("div",{class:"item-title"},e.text))))},s.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.pageTitle;void 0===t&&e.$openerEl&&e.$openerEl.length&&(t=e.$openerEl.find(".item-title").text().trim());var n="popup"===e.params.openIn,r=n?e.params.preloader&&mn("div",{class:"left"},e.renderPreloader()):mn("div",{class:"left sliding"},mn("a",{class:"link back"},mn("i",{class:"icon icon-back"}),mn("span",{class:"if-not-md"},e.params.pageBackLinkText))),i=n?mn("div",{class:"right"},mn("a",{class:"link popup-close","data-popup":".autocomplete-popup"},e.params.popupCloseLinkText)):e.params.preloader&&mn("div",{class:"right"},e.renderPreloader());return mn("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},mn("div",{class:"navbar-bg"}),mn("div",{class:"navbar-inner "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},r,t&&mn("div",{class:"title sliding"},t),i,mn("div",{class:"subnavbar sliding"},e.renderSearchbar())))},s.renderDropdown=function(){var e=this;return e.params.renderDropdown?e.params.renderDropdown.call(e,e.items):mn("div",{class:"autocomplete-dropdown"},mn("div",{class:"autocomplete-dropdown-inner"},mn("div",{class:"list "+(e.params.expandInput?"":"no-safe-areas")},mn("ul",null))),e.params.preloader&&e.renderPreloader())},s.renderPage=function(e){var t=this;return t.params.renderPage?t.params.renderPage.call(t,t.items):mn("div",{class:"page page-with-subnavbar autocomplete-page","data-name":"autocomplete-page"},t.renderNavbar(e),mn("div",{class:"searchbar-backdrop"}),mn("div",{class:"page-content"},mn("div",{class:"list autocomplete-list autocomplete-found autocomplete-list-"+t.id+" "+(t.params.formColorTheme?"color-"+t.params.formColorTheme:"")},mn("ul",null)),mn("div",{class:"list autocomplete-not-found"},mn("ul",null,mn("li",{class:"item-content"},mn("div",{class:"item-inner"},mn("div",{class:"item-title"},t.params.notFoundText))))),mn("div",{class:"list autocomplete-values"},mn("ul",null))))},s.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e,e.items):mn("div",{class:"popup autocomplete-popup"},mn("div",{class:"view"},e.renderPage(!0),";"))},s.onOpen=function(e,t){var n=this,r=n.app,i=a(t);if(n.$el=i,n.el=i[0],n.openedIn=e,n.opened=!0,"dropdown"===n.params.openIn)n.attachDropdownEvents(),n.$dropdownEl.addClass("autocomplete-dropdown-in"),n.$inputEl.trigger("input");else{var o=i.find(".searchbar");"page"===n.params.openIn&&"ios"===r.theme&&0===o.length&&(o=a(r.navbar.getElByPage(i)).find(".searchbar")),n.searchbar=r.searchbar.create({el:o,backdropEl:i.find(".searchbar-backdrop"),customSearch:!0,on:{search:function(e,t){0===t.length&&n.searchbar.enabled?n.searchbar.backdropShow():n.searchbar.backdropHide(),n.source(t)}}}),n.attachPageEvents(),n.updateValues(),n.params.requestSourceOnOpen&&n.source("")}n.emit("local::open autocompleteOpen",n)},s.autoFocus=function(){var e=this;return e.searchbar&&e.searchbar.$inputEl&&e.searchbar.$inputEl.focus(),e},s.onOpened=function(){var e=this;"dropdown"!==e.params.openIn&&e.params.autoFocus&&e.autoFocus(),e.emit("local::opened autocompleteOpened",e)},s.onClose=function(){var e=this;e.destroyed||(e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),"dropdown"===e.params.openIn?(e.detachDropdownEvents(),e.$dropdownEl.removeClass("autocomplete-dropdown-in").remove(),e.$inputEl.parents(".item-content-dropdown-expanded").removeClass("item-content-dropdown-expanded")):e.detachPageEvents(),e.emit("local::close autocompleteClose",e))},s.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.emit("local::closed autocompleteClosed",e))},s.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}},options:{animate:e.params.animate}}}),e},s.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),animate:e.params.animate,push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(e.params.animate),e},s.openDropdown=function(){var e=this;e.$dropdownEl||(e.$dropdownEl=a(e.renderDropdown())),e.$inputEl.parents(".list").length&&e.$inputEl.parents(".item-content").length>0&&e.params.expandInput&&e.$inputEl.parents(".item-content").addClass("item-content-dropdown-expanded");var t=e.$inputEl.parents(".page-content");e.params.dropdownContainerEl?a(e.params.dropdownContainerEl).append(e.$dropdownEl):0===t.length?e.$dropdownEl.insertAfter(e.$inputEl):(e.positionDropdown(),t.append(e.$dropdownEl)),e.onOpen("dropdown",e.$dropdownEl),e.onOpened("dropdown",e.$dropdownEl)},s.open=function(){var e=this;return e.opened||e["open"+e.params.openIn.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),e},s.close=function(){var e=this;return e.opened?("dropdown"===e.params.openIn?(e.onClose(),e.onClosed()):e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back({animate:e.params.animate}):(e.modal.once("modalClosed",(function(){y((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},s.init=function(){this.attachEvents()},s.destroy=function(){var e=this;e.emit("local::beforeDestroy autocompleteBeforeDestroy",e),e.detachEvents(),e.$inputEl&&e.$inputEl[0]&&delete e.$inputEl[0].f7Autocomplete,e.$openerEl&&e.$openerEl[0]&&delete e.$openerEl[0].f7Autocomplete,g(e),e.destroyed=!0},i=r,o=[{key:"view",get:function(){var e,t=this,n=t.$openerEl,r=t.$inputEl,i=t.app;if(t.params.view)e=t.params.view;else if(n||r){var a=n||r;e=a.closest(".view").length&&a.closest(".view")[0].f7View}return e||(e=i.views.main),e}}],o&&ss(i.prototype,o),r}(W);const us=ds,ps={name:"autocomplete",params:{autocomplete:{openerEl:void 0,inputEl:void 0,view:void 0,dropdownContainerEl:void 0,dropdownPlaceholderText:void 0,typeahead:!1,highlightMatches:!0,expandInput:!1,updateInputValueOnSelect:!0,inputEvents:"input",value:void 0,multiple:!1,source:void 0,limit:void 0,valueProperty:"id",textProperty:"text",openIn:"page",pageBackLinkText:"Back",popupCloseLinkText:"Close",pageTitle:void 0,searchbarPlaceholder:"Search...",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,popupPush:!1,popupSwipeToClose:void 0,animate:!0,autoFocus:!1,closeOnSelect:!1,notFoundText:"Nothing found",requestSourceOnOpen:!1,preloaderColor:void 0,preloader:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",renderDropdown:void 0,renderPage:void 0,renderPopup:void 0,renderItem:void 0,renderSearchbar:void 0,renderNavbar:void 0}},static:{Autocomplete:us},create:function(){var e=this;e.autocomplete=T(q({defaultSelector:void 0,constructor:us,app:e,domProp:"f7Autocomplete"}),{open:function(t){var n=e.autocomplete.get(t);if(n&&n.open)return n.open()},close:function(t){var n=e.autocomplete.get(t);if(n&&n.close)return n.close()}})}};function hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fs(e,t){return fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fs(e,t)}var ms=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=hs(r=e.call(this,n,[t])||this),s=D(),l=T({},t.params.tooltip),c=(0,o.Me)();i.useModulesParams(l),i.params=T(l,n),void 0===n.offset&&s.touch&&"hover"===i.params.trigger&&(i.params.offset=10);var d=i.params,u=d.targetEl,p=d.containerEl;if(!u&&!i.params.delegated)return i||hs(r);var h=a(u);if(0===h.length&&!i.params.delegated)return i||hs(r);if(h[0]&&h[0].f7Tooltip&&!i.params.delegated)return h[0].f7Tooltip||hs(r);var f=a(p||t.$el).eq(0);0===f.length&&(f=t.$el);var m=a(i.render()).eq(0);T(i,{app:t,$targetEl:h,targetEl:h&&h[0],$containerEl:f,containerEl:f&&f[0],$el:m,el:m&&m[0],text:i.params.text||"",visible:!1,opened:!1}),h[0]&&(h[0].f7Tooltip=i);var g,v={};function b(){i.opened?i.hide():i.show(this)}function y(e){i.opened&&(a(e.target).closest(h).length||a(e.target).closest(i.$el).length)||i.hide()}function _(e){g||(g=!0,v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,i.show(this))}function w(e){if(g){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;Math.pow(Math.pow(t-v.x,2)+Math.pow(n-v.y,2),.5)>50&&(g=!1,i.hide())}}function C(){g&&(g=!1,i.hide())}function x(){i.show(this)}function k(){i.hide()}function E(){m.hasClass("tooltip-in")||m.removeClass("tooltip-out").remove()}return i.attachEvents=function(){if(m.on("transitionend",E),"click"===i.params.trigger)return i.params.delegated?a(c).on("click",i.params.targetEl,b):i.$targetEl.on("click",b),void a("html").on("click",y);if("manual"!==i.params.trigger)if(s.touch){var e=!!s.passiveListener&&{passive:!0};i.params.delegated?a(c).on(t.touchEvents.start,i.params.targetEl,_,e):i.$targetEl.on(t.touchEvents.start,_,e),t.on("touchmove",w),t.on("touchend:passive",C)}else i.params.delegated?(a(c).on(s.pointerEvents?"pointerenter":"mouseenter",i.params.targetEl,x,!0),a(c).on(s.pointerEvents?"pointerleave":"mouseleave",i.params.targetEl,k,!0)):(i.$targetEl.on(s.pointerEvents?"pointerenter":"mouseenter",x),i.$targetEl.on(s.pointerEvents?"pointerleave":"mouseleave",k))},i.detachEvents=function(){if(m.off("transitionend",E),"click"===i.params.trigger)return i.params.delegated?a(c).on("click",i.params.targetEl,b):i.$targetEl.off("click",b),void a("html").off("click",y);if("manual"!==i.params.trigger)if(s.touch){var e=!!s.passiveListener&&{passive:!0};i.params.delegated?a(c).off(t.touchEvents.start,i.params.targetEl,_,e):i.$targetEl.off(t.touchEvents.start,_,e),t.off("touchmove",w),t.off("touchend:passive",C)}else i.params.delegated?(a(c).off(s.pointerEvents?"pointerenter":"mouseenter",i.params.targetEl,x,!0),a(c).off(s.pointerEvents?"pointerleave":"mouseleave",i.params.targetEl,k,!0)):(i.$targetEl.off(s.pointerEvents?"pointerenter":"mouseenter",x),i.$targetEl.off(s.pointerEvents?"pointerleave":"mouseleave",k))},i.useModules(),i.init(),i||hs(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,fs(t,n);var i=r.prototype;return i.setTargetEl=function(e){var t=this;return t.detachEvents(),t.$targetEl=a(e),t.targetEl=t.$targetEl[0],t.attachEvents(),t},i.position=function(e){var t=this,n=t.$el,r=t.app,i=t.$containerEl,o=!!t.params.containerEl,s=t.params.offset||0;n.css({left:"",top:""});var l,c,d,u,p=a(e||t.targetEl),h=[n.width(),n.height()],f=h[0],m=h[1];n.css({left:"",top:""});var g=o&&i.length?i[0].getBoundingClientRect():r;if(p&&p.length>0){if(l=p.outerWidth(),c=p.outerHeight(),void 0===l&&void 0===c){var v=p[0].getBoundingClientRect();l=v.width,c=v.height}var b=p.offset();d=b.left-g.left,u=b.top-g.top;var y=p.parents(".page");y.length>0&&(u-=y[0].scrollTop)}var _=[0,0,0],w=_[0],C=_[1],x="top";m+s<u?C=u-m-s:m<g.height-u-c?(x="bottom",C=u+c+s):(x="middle",(C=c/2+u-m/2)<=0?C=8:C+m>=g.height&&(C=g.height-m-8)),"top"===x||"bottom"===x?((w=l/2+d-f/2)<8&&(w=8),w+f>g.width&&(w=g.width-f-8),w<0&&(w=0)):"middle"===x&&((w=d-f)<8||w+f>g.width)&&(w<8&&(w=d+l),w+f>g.width&&(w=g.width-f-8)),n.css({top:C+"px",left:w+"px"})},i.show=function(e){var t=this,n=t.$el,r=t.$targetEl,i=t.$containerEl;i[0]&&n[0]&&!i[0].contains(n[0])&&i.append(n),t.position(e);var o=a(e);return t.visible=!0,t.opened=!0,r.trigger("tooltip:show"),n.trigger("tooltip:show"),o.length&&o[0]!==r[0]&&o.trigger("tooltip:show"),t.emit("local::show tooltipShow",t),n.removeClass("tooltip-out").addClass("tooltip-in"),t},i.hide=function(){var e=this,t=e.$el,n=e.$targetEl;return e.visible=!1,e.opened=!1,n.trigger("tooltip:hide"),t.trigger("tooltip:hide"),e.emit("local::hide tooltipHide",e),t.addClass("tooltip-out").removeClass("tooltip-in"),e},i.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params;return('\n      <div class="tooltip '+(t.cssClass||"")+'">\n        <div class="tooltip-content">'+(t.text||"")+"</div>\n      </div>\n    ").trim()},i.setText=function(e){var t=this;return void 0===e||(t.params.text=e,t.text=e,t.$el&&t.$el.children(".tooltip-content").html(e),t.opened&&t.position()),t},i.init=function(){this.attachEvents()},i.destroy=function(){var e=this;e.$targetEl&&!e.destroyed&&(e.$targetEl.trigger("tooltip:beforedestroy"),e.emit("local::beforeDestroy tooltipBeforeDestroy",e),e.$el.remove(),e.$targetEl[0]&&delete e.$targetEl[0].f7Tooltip,e.detachEvents(),g(e),e.destroyed=!0)},r}(W);const gs=ms,vs={name:"tooltip",static:{Tooltip:gs},create:function(){var e=this;e.tooltip=q({defaultSelector:".tooltip",constructor:gs,app:e,domProp:"f7Tooltip"}),e.tooltip.show=function(e){var t=a(e);if(0!==t.length){var n=t[0].f7Tooltip;if(n)return n.show(t[0]),n}},e.tooltip.hide=function(e){var t=a(e);if(0!==t.length){var n=t[0].f7Tooltip;if(n)return n.hide(),n}},e.tooltip.setText=function(e,t){var n=a(e);if(0!==n.length){var r=n[0].f7Tooltip;if(r)return r.setText(t),r}}},params:{tooltip:{targetEl:null,delegated:!1,text:null,cssClass:null,render:null,offset:0,trigger:"hover",containerEl:void 0}},on:{tabMounted:function(e){var t=this;a(e).find(".tooltip-init").each((function(e){var n=a(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})}))},tabBeforeRemove:function(e){a(e).find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".tooltip-init").each((function(e){var n=a(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){var n=a(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})}))},pageBeforeRemove:function(e){e.$el.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))}},vnode:{"tooltip-init":{insert:function(e){var t=e.elm,n=a(t).attr("data-tooltip");n&&this.tooltip.create({targetEl:t,text:n})},update:function(e){var t=e.elm;t.f7Tooltip&&e&&e.data&&e.data.attrs&&e.data.attrs["data-tooltip"]&&t.f7Tooltip.setText(e.data.attrs["data-tooltip"])},destroy:function(e){var t=e.elm;t.f7Tooltip&&t.f7Tooltip.destroy()}}}};function bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ys(e,t){return ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ys(e,t)}var _s=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=bs(r=e.call(this,n,[t])||this),o=T({},t.params.gauge);i.useModulesParams(o),i.params=T(o,n);var s=i.params.el;if(!s)return i||bs(r);var l=a(s);return 0===l.length?i||bs(r):l[0].f7Gauge?l[0].f7Gauge||bs(r):(T(i,{app:t,$el:l,el:l&&l[0]}),l[0].f7Gauge=i,i.useModules(),i.init(),i||bs(r))}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,ys(t,n);var i=r.prototype;return i.calcRadius=function(){var e=this.params;return e.size/2-e.borderWidth/2},i.calcBorderLength=function(){var e=this.calcRadius();return 2*Math.PI*e},i.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,n=t.type,r=t.value,i=t.size,a=t.bgColor,o=t.borderBgColor,s=t.borderColor,l=t.borderWidth,c=t.valueText,d=t.valueTextColor,u=t.valueFontSize,p=t.valueFontWeight,h=t.labelText,f=t.labelTextColor,m=t.labelFontSize,g=t.labelFontWeight,v="semicircle"===n,b=e.calcRadius(),y=e.calcBorderLength(),_=Math.max(Math.min(r,1),0);return mn("svg",{class:"gauge-svg",width:i+"px",height:(v?i/2:i)+"px",viewBox:"0 0 "+i+" "+(v?i/2:i)},v&&mn("path",{class:"gauge-back-semi",d:"M"+(i-l/2)+","+i/2+" a1,1 0 0,0 -"+(i-l)+",0",stroke:o,"stroke-width":l,fill:a||"none"}),v&&mn("path",{class:"gauge-front-semi",d:"M"+(i-l/2)+","+i/2+" a1,1 0 0,0 -"+(i-l)+",0",stroke:s,"stroke-width":l,"stroke-dasharray":y/2,"stroke-dashoffset":y/2*(1+_),fill:o?"none":a||"none"}),!v&&o&&mn("circle",{class:"gauge-back-circle",stroke:o,"stroke-width":l,fill:a||"none",cx:i/2,cy:i/2,r:b}),!v&&mn("circle",{class:"gauge-front-circle",transform:"rotate(-90 "+i/2+" "+i/2+")",stroke:s,"stroke-width":l,"stroke-dasharray":y,"stroke-dashoffset":y*(1-_),fill:o?"none":a||"none",cx:i/2,cy:i/2,r:b}),c&&mn("text",{class:"gauge-value-text",x:"50%",y:v?"100%":"50%","font-weight":p,"font-size":u,fill:d,dy:v?h?-m-15:-5:0,"text-anchor":"middle","dominant-baseline":!v&&"middle"},c),h&&mn("text",{class:"gauge-label-text",x:"50%",y:v?"100%":"50%","font-weight":g,"font-size":m,fill:f,dy:v?-5:c?u/2+10:0,"text-anchor":"middle","dominant-baseline":!v&&"middle"},h))},i.update=function(e){void 0===e&&(e={});var t=this,n=(0,o.Me)(),r=t.params,i=t.$svgEl;if(Object.keys(e).forEach((function(t){void 0!==e[t]&&(r[t]=e[t])})),0===i.length)return t;var a=r.value,s=r.size,l=r.bgColor,c=r.borderBgColor,d=r.borderColor,u=r.borderWidth,p=r.valueText,h=r.valueTextColor,f=r.valueFontSize,m=r.valueFontWeight,g=r.labelText,v=r.labelTextColor,b=r.labelFontSize,y=r.labelFontWeight,_=t.calcBorderLength(),w=Math.max(Math.min(a,1),0),C=t.calcRadius(),x="semicircle"===r.type,k={width:s+"px",height:(x?s/2:s)+"px",viewBox:"0 0 "+s+" "+(x?s/2:s)};if(Object.keys(k).forEach((function(e){i.attr(e,k[e])})),x){var E={d:"M"+(s-u/2)+","+s/2+" a1,1 0 0,0 -"+(s-u)+",0",stroke:c,"stroke-width":u,fill:l||"none"},S={d:"M"+(s-u/2)+","+s/2+" a1,1 0 0,0 -"+(s-u)+",0",stroke:d,"stroke-width":u,"stroke-dasharray":_/2,"stroke-dashoffset":_/2*(1+w),fill:c?"none":l||"none"};Object.keys(E).forEach((function(e){i.find(".gauge-back-semi").attr(e,E[e])})),Object.keys(S).forEach((function(e){i.find(".gauge-front-semi").attr(e,S[e])}))}else{var T={stroke:c,"stroke-width":u,fill:l||"none",cx:s/2,cy:s/2,r:C},M={transform:"rotate(-90 "+s/2+" "+s/2+")",stroke:d,"stroke-width":u,"stroke-dasharray":_,"stroke-dashoffset":_*(1-w),fill:c?"none":l||"none",cx:s/2,cy:s/2,r:C};Object.keys(T).forEach((function(e){i.find(".gauge-back-circle").attr(e,T[e])})),Object.keys(M).forEach((function(e){i.find(".gauge-front-circle").attr(e,M[e])}))}if(p){if(!i.find(".gauge-value-text").length){var I=n.createElementNS("http://www.w3.org/2000/svg","text");I.classList.add("gauge-value-text"),i.append(I)}var L={x:"50%",y:x?"100%":"50%","font-weight":m,"font-size":f,fill:h,dy:x?g?-b-15:-5:0,"text-anchor":"middle","dominant-baseline":!x&&"middle"};Object.keys(L).forEach((function(e){i.find(".gauge-value-text").attr(e,L[e])})),i.find(".gauge-value-text").text(p)}else i.find(".gauge-value-text").remove();if(g){if(!i.find(".gauge-label-text").length){var $=n.createElementNS("http://www.w3.org/2000/svg","text");$.classList.add("gauge-label-text"),i.append($)}var P={x:"50%",y:x?"100%":"50%","font-weight":y,"font-size":b,fill:v,dy:x?-5:p?f/2+10:0,"text-anchor":"middle","dominant-baseline":!x&&"middle"};Object.keys(P).forEach((function(e){i.find(".gauge-label-text").attr(e,P[e])})),i.find(".gauge-label-text").text(g)}else i.find(".gauge-label-text").remove();return t},i.init=function(){var e=this,t=a(e.render()).eq(0);return t.f7Gauge=e,T(e,{$svgEl:t,svgEl:t&&t[0]}),e.$el.append(t),e},i.destroy=function(){var e=this;e.$el&&!e.destroyed&&(e.$el.trigger("gauge:beforedestroy"),e.emit("local::beforeDestroy gaugeBeforeDestroy",e),e.$svgEl.remove(),delete e.$el[0].f7Gauge,g(e),e.destroyed=!0)},r}(W);const ws=_s,Cs={name:"gauge",static:{Gauge:ws},create:function(){var e=this;e.gauge=q({defaultSelector:".gauge",constructor:ws,app:e,domProp:"f7Gauge"}),e.gauge.update=function(t,n){if(0!==a(t).length){var r=e.gauge.get(t);if(r)return r.update(n),r}}},params:{gauge:{el:null,type:"circle",value:0,size:200,bgColor:"transparent",borderBgColor:"#eeeeee",borderColor:"#000000",borderWidth:10,valueText:null,valueTextColor:"#000000",valueFontSize:31,valueFontWeight:500,labelText:null,labelTextColor:"#888888",labelFontSize:14,labelFontWeight:400}},on:{tabMounted:function(e){var t=this;a(e).find(".gauge-init").each((function(e){t.gauge.create(T({el:e},a(e).dataset()||{}))}))},tabBeforeRemove:function(e){a(e).find(".gauge-init").each((function(e){e.f7Gauge&&e.f7Gauge.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".gauge-init").each((function(e){t.gauge.create(T({el:e},a(e).dataset()||{}))}))},pageBeforeRemove:function(e){e.$el.find(".gauge-init").each((function(e){e.f7Gauge&&e.f7Gauge.destroy()}))}},vnode:{"gauge-init":{insert:function(e){var t=e.elm;this.gauge.create(T({el:t},a(t).dataset()||{}))},destroy:function(e){var t=e.elm;t.f7Gauge&&t.f7Gauge.destroy()}}}};var xs={open:function(e){if(void 0===e&&(e=".menu-item-dropdown"),e){var t=a(e).closest(".menu-item-dropdown");if(t.length){var n=t.closest(".menu").eq(0);if(n.length){var r=n.css("z-index"),i=n[0].style.zIndex;n.css("z-index",parseInt(r||0,10)+1),n[0].f7MenuZIndex=i}t.eq(0).addClass("menu-item-dropdown-opened").trigger("menu:opened"),this.emit("menuOpened",t.eq(0)[0])}}},close:function(e){if(void 0===e&&(e=".menu-item-dropdown-opened"),e){var t=a(e).closest(".menu-item-dropdown-opened");if(t.length){var n=t.closest(".menu").eq(0);if(n.length){var r=n[0].f7MenuZIndex;n.css("z-index",r),delete n[0].f7MenuZIndex}t.eq(0).removeClass("menu-item-dropdown-opened").trigger("menu:closed"),this.emit("menuClosed",t.eq(0)[0])}}}};const ks={name:"menu",create:function(){A(this,{menu:xs})},on:{click:function(e){var t=this,n=a(".menu-item-dropdown-opened");n.length&&n.each((function(n){a(e.target).closest(".menu-item-dropdown-opened").length||t.menu.close(n)}))}},clicks:{".menu-item-dropdown":function(e,t,n){if(e.hasClass("menu-item-dropdown-opened")){if(a(n.target).closest(".menu-dropdown").length)return;this.menu.close(e)}else this.menu.open(e)},".menu-close":function(){this.menu.close()}}},Es={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,i=t.sliderValueEditable,a=t.alphaLabelText;return mn("div",{class:"color-picker-module color-picker-module-alpha-slider"},mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},a),mn("div",{class:"range-slider color-picker-slider color-picker-slider-alpha"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"0.01",min:"0",max:"1",class:"color-picker-value-alpha"}):mn("span",{class:"color-picker-value-alpha"}))))},init:function(e){function t(t){var n=e.value.alpha,r=parseFloat(t.target.value);Number.isNaN(r)?t.target.value=n:(r=Math.max(0,Math.min(1,r)),e.setValue({alpha:r}))}e.alphaRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-alpha"),min:0,max:1,step:.01,value:1,on:{change:function(t,n){var r=Math.floor(100*n)/100;e.setValue({alpha:r})}}}),e.$el.on("change",".color-picker-module-alpha-slider input",t),e.destroyAlphaSliderEvents=function(){e.$el.off("change",".color-picker-module-alpha-slider input",t)}},update:function(e){var t=e.value,n=e.params,r=n.sliderValue,i=n.sliderValueEditable,a=t.alpha;e.alphaRangeSlider.value=a,e.alphaRangeSlider.layout(),r&&i?e.$el.find("input.color-picker-value-alpha").val(a):e.$el.find("span.color-picker-value-alpha").text(a)},destroy:function(e){e.alphaRangeSlider&&e.alphaRangeSlider.destroy&&e.alphaRangeSlider.destroy(),delete e.alphaRangeSlider,e.destroyAlphaSliderEvents&&e.destroyAlphaSliderEvents(),delete e.destroyAlphaSliderEvents}},Ss={render:function(){return mn("div",{class:"color-picker-module color-picker-module-current-color"},mn("div",{class:"color-picker-current-color"}))},update:function(e){e.$el.find(".color-picker-module-current-color .color-picker-current-color").css("background-color",e.value.hex)}},Ts={render:function(e){var t=e.params,n=t.hexLabel,r=t.hexLabelText,i=t.hexValueEditable;return mn("div",{class:"color-picker-module color-picker-module-hex"},mn("div",{class:"color-picker-hex-wrap"},n&&mn("div",{class:"color-picker-hex-label"},r),mn("div",{class:"color-picker-hex-value"},i?mn("input",{type:"text",class:"color-picker-value-hex"}):mn("span",{class:"color-picker-value-hex"}))))},init:function(e){function t(t){var n=e.value.hex,r=t.target.value.replace(/#/g,"");if(Number.isNaN(r)||!r||3!==r.length&&6!==r.length)t.target.value=n;else{var i=parseInt(r,16);i>parseInt("ffffff",16)&&(r="fff"),i<0&&(r="000"),e.setValue({hex:r})}}e.$el.on("change",".color-picker-module-hex input",t),e.destroyHexEvents=function(){e.$el.off("change",".color-picker-module-hex input",t)}},update:function(e){var t=e.value,n=e.params.hexValueEditable,r=t.hex;n?e.$el.find("input.color-picker-value-hex").val(r):e.$el.find("span.color-picker-value-hex").text(r)},destroy:function(e){e.destroyHexEvents&&e.destroyHexEvents(),delete e.destroyHexEvents}},Ms={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,i=t.sliderValueEditable,a=t.hueLabelText,o=t.saturationLabelText,s=t.brightnessLabelText;return mn("div",{class:"color-picker-module color-picker-module-hsb-sliders"},mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},a),mn("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue","data-color-index":"0"}):mn("span",{class:"color-picker-value-hue"}))),mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},o),mn("div",{class:"range-slider color-picker-slider color-picker-slider-saturation"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-saturation","data-color-index":"1"}):mn("span",{class:"color-picker-value-saturation"}))),mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},s),mn("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness","data-color-index":"2"}):mn("span",{class:"color-picker-value-brightness"}))))},init:function(e){function t(t){var n=[].concat(e.value.hsb),r=parseInt(a(t.target).attr("data-color-index"),10),i=parseFloat(t.target.value);Number.isNaN(i)?t.target.value=n[r]:(i=0===r?Math.max(0,Math.min(360,i)):Math.max(0,Math.min(100,i))/100,n[r]=i,e.setValue({hsb:n}))}e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,n){e.setValue({hue:n})}}}),e.saturationRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-saturation"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var r=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],r,e.value.hsb[2]]})}}}),e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var r=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],r]})}}}),e.$el.on("change",".color-picker-module-hsb-sliders input",t),e.destroyHsbSlidersEvents=function(){e.$el.off("change",".color-picker-module-hsb-sliders input",t)}},update:function(e){var t=e.app,n=e.value,r=e.params,i=r.sliderValue,a=r.sliderValueEditable,o=n.hsb,s=n.hue;e.hueRangeSlider.value=s,e.saturationRangeSlider.value=o[1],e.brightnessRangeSlider.value=o[2],e.hueRangeSlider.layout(),e.saturationRangeSlider.layout(),e.brightnessRangeSlider.layout();var l=P(o[0],o[1],1),c=P(o[0],0,1),d=P(o[0],1,1),u=o[2];e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+s+", 100%, 50%)"),e.saturationRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%)"),e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","rgb("+255*u+", "+255*u+", "+255*u+")"),e.saturationRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(t.rtl?"to left":"to right")+", hsl("+c[0]+", "+100*c[1]+"%, "+100*c[2]+"%), hsl("+d[0]+", "+100*d[1]+"%, "+100*d[2]+"%))"),i&&a?(e.$el.find("input.color-picker-value-hue").val(""+s),e.$el.find("input.color-picker-value-saturation").val(""+1e3*o[1]/10),e.$el.find("input.color-picker-value-brightness").val(""+1e3*o[2]/10)):i&&(e.$el.find("span.color-picker-value-hue").text(""+s),e.$el.find("span.color-picker-value-saturation").text(""+1e3*o[1]/10),e.$el.find("span.color-picker-value-brightness").text(""+1e3*o[2]/10))},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),e.saturationRangeSlider&&e.saturationRangeSlider.destroy&&e.saturationRangeSlider.destroy(),e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.hueRangeSlider,delete e.saturationRangeSlider,delete e.brightnessRangeSlider,e.destroyHsbSlidersEvents&&e.destroyHsbSlidersEvents(),delete e.destroyHsbSlidersEvents}},Is={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,i=t.sliderValueEditable,a=t.hueLabelText;return mn("div",{class:"color-picker-module color-picker-module-hue-slider"},mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},a),mn("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue"}):mn("span",{class:"color-picker-value-hue"}))))},init:function(e){e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,n){e.setValue({hue:n})}}})},update:function(e){var t=e.value,n=e.params,r=n.sliderValue,i=n.sliderValueEditable,a=t.hue;e.hueRangeSlider.value=a,e.hueRangeSlider.layout(),e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+a+", 100%, 50%)"),r&&i?e.$el.find("input.color-picker-value-hue").val(""+a):r&&e.$el.find("span.color-picker-value-hue").text(""+a)},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),delete e.hueRangeSlider}},Ls={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,i=t.sliderValueEditable,a=t.brightnessLabelText;return mn("div",{class:"color-picker-module color-picker-module-brightness-slider"},mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},a),mn("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness"}):mn("span",{class:"color-picker-value-brightness"}))))},init:function(e){e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var r=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],r]})}}})},update:function(e){var t=e.value,n=e.app,r=e.params,i=r.sliderValue,a=r.sliderValueEditable,o=t.hsb;e.brightnessRangeSlider.value=o[2],e.brightnessRangeSlider.layout();var s=P(o[0],o[1],o[2]),l=P(o[0],o[1],0),c=P(o[0],o[1],1);e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+s[0]+", "+100*s[1]+"%, "+100*s[2]+"%)"),e.brightnessRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(n.rtl?"to left":"to right")+", hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%), hsl("+c[0]+", "+100*c[1]+"%, "+100*c[2]+"%))"),i&&a?e.$el.find("input.color-picker-value-brightness").val(""+1e3*o[2]/10):i&&e.$el.find("span.color-picker-value-brightness").text(""+1e3*o[2]/10)},destroy:function(e){e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.brightnessRangeSlider}},$s={render:function(e){return mn("div",{class:"color-picker-module color-picker-module-palette"},mn("div",{class:"color-picker-palette"},e.params.palette.map((function(e){if(Array.isArray(e)){var t='<div class="color-picker-palette-row">';return(t+=e.map((function(e){return'\n                <div class="color-picker-palette-value" data-palette-color="'+e+'" style="background-color: '+e+'"></div>\n              '})).join(""))+"</div>"}return mn("div",{class:"color-picker-palette-value","data-palette-color":e,style:"background-color: "+e})}))))},init:function(e){function t(t){var n=a(t.target).attr("data-palette-color");e.setValue({hex:n})}e.$el.on("click",".color-picker-module-palette .color-picker-palette-value",t),e.destroyPaletteEvents=function(){e.$el.off("click",".color-picker-module-hex input",t)}},destroy:function(e){e.destroyPaletteEvents&&e.destroyPaletteEvents(),delete e.destroyPaletteEvents}},Ps={render:function(){return mn("div",{class:"color-picker-module color-picker-module-initial-current-colors"},mn("div",{class:"color-picker-initial-current-colors"},mn("div",{class:"color-picker-initial-color"}),mn("div",{class:"color-picker-current-color"})))},init:function(e){function t(){if(e.initialValue){var t=e.initialValue,n=t.hex,r=t.alpha;e.setValue({hex:n,alpha:r})}}e.$el.on("click",".color-picker-initial-color",t),e.destroyInitialCurrentEvents=function(){e.$el.off("click",".color-picker-initial-color",t)}},update:function(e){e.$el.find(".color-picker-module-initial-current-colors .color-picker-initial-color").css("background-color",e.initialValue.hex),e.$el.find(".color-picker-module-initial-current-colors .color-picker-current-color").css("background-color",e.value.hex)},destroy:function(e){e.destroyInitialCurrentEvents&&e.destroyInitialCurrentEvents(),delete e.destroyInitialCurrentEvents}},Os={render:function(e){var t=e.params,n=t.barLabel,r=t.barValue,i=t.barValueEditable,a=t.redLabelText,o=t.greenLabelText,s=t.blueLabelText;return mn("div",{class:"color-picker-module color-picker-module-rgb-bars"},mn("div",{class:"color-picker-bar-wrap"},n&&mn("div",{class:"color-picker-bar-label"},a),mn("div",{class:"range-slider color-picker-bar color-picker-bar-red"}),r&&mn("div",{class:"color-picker-bar-value"},i?mn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-red","data-color-index":"0"}):mn("span",{class:"color-picker-value-bar-red"}))),mn("div",{class:"color-picker-bar-wrap"},n&&mn("div",{class:"color-picker-bar-label"},o),mn("div",{class:"range-slider color-picker-bar color-picker-bar-green"}),r&&mn("div",{class:"color-picker-bar-value"},i?mn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-green","data-color-index":"1"}):mn("span",{class:"color-picker-value-bar-green"}))),mn("div",{class:"color-picker-bar-wrap"},n&&mn("div",{class:"color-picker-bar-label"},s),mn("div",{class:"range-slider color-picker-bar color-picker-bar-blue"}),r&&mn("div",{class:"color-picker-bar-value"},i?mn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-blue","data-color-index":"2"}):mn("span",{class:"color-picker-value-bar-blue"}))))},init:function(e){function t(t){var n=[].concat(e.value.rgb),r=parseInt(a(t.target).attr("data-color-index"),10),i=parseInt(t.target.value,10);Number.isNaN(i)?t.target.value=n[r]:(i=Math.max(0,Math.min(255,i)),n[r]=i,e.setValue({rgb:n}))}e.redBar=e.app.range.create({el:e.$el.find(".color-picker-bar-red"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[n,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenBar=e.app.range.create({el:e.$el.find(".color-picker-bar-green"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],n,e.value.rgb[2]]})}}}),e.blueBar=e.app.range.create({el:e.$el.find(".color-picker-bar-blue"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],n]})}}}),e.$el.on("change",".color-picker-module-rgb-bars input",t),e.destroyRgbBarsEvents=function(){e.$el.off("change",".color-picker-module-rgb-bars input",t)}},update:function(e){var t=e.value,n=e.redBar,r=e.greenBar,i=e.blueBar,a=e.params,o=a.barValue,s=a.barValueEditable,l=t.rgb;n.value=l[0],r.value=l[1],i.value=l[2],n.layout(),r.layout(),i.layout(),n.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb(0, "+l[1]+", "+l[2]+"), rgb(255, "+l[1]+", "+l[2]+"))"),r.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", 0, "+l[2]+"), rgb("+l[0]+", 255, "+l[2]+"))"),i.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", "+l[1]+", 0), rgb("+l[0]+", "+l[1]+", 255))"),o&&s?(e.$el.find("input.color-picker-value-bar-red").val(l[0]),e.$el.find("input.color-picker-value-bar-green").val(l[1]),e.$el.find("input.color-picker-value-bar-blue").val(l[2])):o&&(e.$el.find("span.color-picker-value-bar-red").text(l[0]),e.$el.find("span.color-picker-value-bar-green").text(l[1]),e.$el.find("span.color-picker-value-bar-blue").text(l[2]))},destroy:function(e){e.redBar&&e.redBar.destroy&&e.redBar.destroy(),e.greenBar&&e.greenBar.destroy&&e.greenBar.destroy(),e.blueBar&&e.blueBar.destroy&&e.blueBar.destroy(),delete e.redBar,delete e.greenBar,delete e.blueBar,e.destroyRgbBarsEvents&&e.destroyRgbBarsEvents(),delete e.destroyRgbBarsEvents}},Bs={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,i=t.sliderValueEditable,a=t.redLabelText,o=t.greenLabelText,s=t.blueLabelText;return mn("div",{class:"color-picker-module color-picker-module-rgb-sliders"},mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},a),mn("div",{class:"range-slider color-picker-slider color-picker-slider-red"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-red","data-color-index":"0"}):mn("span",{class:"color-picker-value-red"}))),mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},o),mn("div",{class:"range-slider color-picker-slider color-picker-slider-green"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-green","data-color-index":"1"}):mn("span",{class:"color-picker-value-green"}))),mn("div",{class:"color-picker-slider-wrap"},n&&mn("div",{class:"color-picker-slider-label"},s),mn("div",{class:"range-slider color-picker-slider color-picker-slider-blue"}),r&&mn("div",{class:"color-picker-slider-value"},i?mn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-blue","data-color-index":"2"}):mn("span",{class:"color-picker-value-blue"}))))},init:function(e){function t(t){var n=[].concat(e.value.rgb),r=parseInt(a(t.target).attr("data-color-index"),10),i=parseInt(t.target.value,10);Number.isNaN(i)?t.target.value=n[r]:(i=Math.max(0,Math.min(255,i)),n[r]=i,e.setValue({rgb:n}))}e.redRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-red"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[n,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-green"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],n,e.value.rgb[2]]})}}}),e.blueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-blue"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],n]})}}}),e.$el.on("change",".color-picker-module-rgb-sliders input",t),e.destroyRgbSlidersEvents=function(){e.$el.off("change",".color-picker-module-rgb-sliders input",t)}},update:function(e){var t=e.app,n=e.value,r=e.redRangeSlider,i=e.greenRangeSlider,a=e.blueRangeSlider,o=e.params,s=o.sliderValue,l=o.sliderValueEditable,c=n.rgb;r.value=c[0],i.value=c[1],a.value=c[2],r.layout(),i.layout(),a.layout(),r.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")"),i.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")"),a.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")");var d=t.rtl?"to left":"to right";r.$el.find(".range-bar").css("background-image","linear-gradient("+d+", rgb(0, "+c[1]+", "+c[2]+"), rgb(255, "+c[1]+", "+c[2]+"))"),i.$el.find(".range-bar").css("background-image","linear-gradient("+d+", rgb("+c[0]+", 0, "+c[2]+"), rgb("+c[0]+", 255, "+c[2]+"))"),a.$el.find(".range-bar").css("background-image","linear-gradient("+d+", rgb("+c[0]+", "+c[1]+", 0), rgb("+c[0]+", "+c[1]+", 255))"),s&&l?(e.$el.find("input.color-picker-value-red").val(c[0]),e.$el.find("input.color-picker-value-green").val(c[1]),e.$el.find("input.color-picker-value-blue").val(c[2])):s&&(e.$el.find("span.color-picker-value-red").text(c[0]),e.$el.find("span.color-picker-value-green").text(c[1]),e.$el.find("span.color-picker-value-blue").text(c[2]))},destroy:function(e){e.redRangeSlider&&e.redRangeSlider.destroy&&e.redRangeSlider.destroy(),e.greenRangeSlider&&e.greenRangeSlider.destroy&&e.greenRangeSlider.destroy(),e.blueRangeSlider&&e.blueRangeSlider.destroy&&e.blueRangeSlider.destroy(),delete e.redRangeSlider,delete e.greenRangeSlider,delete e.blueRangeSlider,e.destroyRgbSlidersEvents&&e.destroyRgbSlidersEvents(),delete e.destroyRgbSlidersEvents}},As={render:function(){return mn("div",{class:"color-picker-module color-picker-module-sb-spectrum"},mn("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},mn("div",{class:"color-picker-sb-spectrum-handle"})))},init:function(e){var t,n,r,i,o,s,l,c,d=e.app,u=e.$el;function p(t,n){var r=(t-s.left)/s.width,i=(n-s.top)/s.height;r=Math.max(0,Math.min(1,r)),i=1-Math.max(0,Math.min(1,i)),e.setValue({hsb:[e.value.hue,r,i]})}function h(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,i=n,r="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,o=r;var d=a(e.target);(c=d.closest(".color-picker-sb-spectrum-handle").length>0)||(l=d.closest(".color-picker-sb-spectrum").length>0),l&&(s=u.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),p(n,r)),(c||l)&&u.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function f(e){(l||c)&&(i="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,o="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,c&&(s=u.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(l||c)&&p(i,o))}function m(){t=!1,(l||c)&&u.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),l=!1,c=!1}function g(){e.modules["sb-spectrum"].update(e)}var v=!("touchstart"!==d.touchEvents.start||!D().passiveListener)&&{passive:!0,capture:!1};e.$el.on(d.touchEvents.start,h,v),d.on("touchmove:active",f),d.on("touchend:passive",m),d.on("resize",g),e.destroySpectrumEvents=function(){e.$el.off(d.touchEvents.start,h,v),d.off("touchmove:active",f),d.off("touchend:passive",m),d.off("resize",g)}},update:function(e){var t=e.value,n=t.hsl,r=t.hsb,i=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,a=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight;e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+n[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+n[0]+", "+100*n[1]+"%, "+100*n[2]+"%)").transform("translate("+i*r[1]+"px, "+a*(1-r[2])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}},Rs={render:function(){return mn("div",{class:"color-picker-module color-picker-module-hs-spectrum"},mn("div",{class:"color-picker-hs-spectrum"},mn("div",{class:"color-picker-hs-spectrum-handle"})))},init:function(e){var t,n,r,i,o,s,l,c,d=e.app,u=e.$el;function p(t,n){var r=(t-s.left)/s.width*360,i=(n-s.top)/s.height;r=Math.max(0,Math.min(360,r)),i=1-Math.max(0,Math.min(1,i)),e.setValue({hsb:[r,i,e.value.hsb[2]]})}function h(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,i=n,r="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,o=r;var d=a(e.target);(c=d.closest(".color-picker-hs-spectrum-handle").length>0)||(l=d.closest(".color-picker-hs-spectrum").length>0),l&&(s=u.find(".color-picker-hs-spectrum")[0].getBoundingClientRect(),p(n,r)),(c||l)&&u.find(".color-picker-hs-spectrum-handle").addClass("color-picker-hs-spectrum-handle-pressed")}}function f(e){(l||c)&&(i="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,o="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,c&&(s=u.find(".color-picker-hs-spectrum")[0].getBoundingClientRect())),(l||c)&&p(i,o))}function m(){t=!1,(l||c)&&u.find(".color-picker-hs-spectrum-handle").removeClass("color-picker-hs-spectrum-handle-pressed"),l=!1,c=!1}function g(){e.modules["hs-spectrum"].update(e)}var v=!("touchstart"!==d.touchEvents.start||!D().passiveListener)&&{passive:!0,capture:!1};e.$el.on(d.touchEvents.start,h,v),d.on("touchmove:active",f),d.on("touchend:passive",m),d.on("resize",g),e.destroySpectrumEvents=function(){e.$el.off(d.touchEvents.start,h,v),d.off("touchmove:active",f),d.off("touchend:passive",m),d.off("resize",g)}},update:function(e){var t=e.value.hsb,n=e.$el.find(".color-picker-hs-spectrum")[0].offsetWidth,r=e.$el.find(".color-picker-hs-spectrum")[0].offsetHeight,i=P(t[0],t[1],1);e.$el.find(".color-picker-hs-spectrum-handle").css("background-color","hsl("+i[0]+", "+100*i[1]+"%, "+100*i[2]+"%)").transform("translate("+n*(t[0]/360)+"px, "+r*(1-t[1])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}},Ds={render:function(){return mn("div",{class:"color-picker-module color-picker-module-wheel"},mn("div",{class:"color-picker-wheel"},mn("svg",{viewBox:"0 0 300 300",width:"300",height:"300"},function(){for(var e="",t=256;t>0;t-=1){var n=t*Math.PI/128,r=1.40625*t;e+='<circle cx="'+(150-125*Math.sin(n))+'" cy="'+(150-125*Math.cos(n))+'" r="25" fill="hsl('+r+', 100%, 50%)"></circle>'}return e}()),mn("div",{class:"color-picker-wheel-handle"}),mn("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},mn("div",{class:"color-picker-sb-spectrum-handle"}))))},init:function(e){var t,n,r,i,o,s,l,c,d,u,p,h=e.app,f=e.$el;function m(t,n){var r=s.left+s.width/2,i=s.top+s.height/2,a=180*Math.atan2(n-i,t-r)/Math.PI+90;a<0&&(a+=360),a=360-a,e.setValue({hue:a})}function g(t,n){var r=(t-d.left)/d.width,i=(n-d.top)/d.height;r=Math.max(0,Math.min(1,r)),i=1-Math.max(0,Math.min(1,i)),e.setValue({hsb:[e.value.hue,r,i]})}function v(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,i=n,r="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,o=r;var h=a(e.target);c=h.closest(".color-picker-wheel-handle").length>0,l=h.closest("circle").length>0,(p=h.closest(".color-picker-sb-spectrum-handle").length>0)||(u=h.closest(".color-picker-sb-spectrum").length>0),l&&(s=f.find(".color-picker-wheel")[0].getBoundingClientRect(),m(n,r)),u&&(d=f.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),g(n,r)),(p||u)&&f.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function b(e){(l||c||u||p)&&(i="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,o="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,c&&(s=f.find(".color-picker-wheel")[0].getBoundingClientRect()),p&&(d=f.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(l||c)&&m(i,o),(u||p)&&g(i,o))}function y(){t=!1,(u||p)&&f.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),l=!1,c=!1,u=!1,p=!1}function _(){e.modules.wheel.update(e)}var w=!("touchstart"!==h.touchEvents.start||!D().passiveListener)&&{passive:!0,capture:!1};e.$el.on(h.touchEvents.start,v,w),h.on("touchmove:active",b),h.on("touchend:passive",y),h.on("resize",_),e.destroyWheelEvents=function(){e.$el.off(h.touchEvents.start,v,w),h.off("touchmove:active",b),h.off("touchend:passive",y),h.off("resize",_)}},update:function(e){var t=e.value,n=t.hsl,r=t.hsb,i=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,a=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight,o=e.$el.find(".color-picker-wheel")[0].offsetWidth,s=o/2,l=t.hue*Math.PI/180,c=o/6/2,d=s-Math.sin(l)*(s-c)-c,u=s-Math.cos(l)*(s-c)-c;e.$el.find(".color-picker-wheel-handle").css("background-color","hsl("+n[0]+", 100%, 50%)").transform("translate("+d+"px, "+u+"px)"),e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+n[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+n[0]+", "+100*n[1]+"%, "+100*n[2]+"%)").transform("translate("+i*r[1]+"px, "+a*(1-r[2])+"px)")},destroy:function(e){e.destroyWheelEvents&&e.destroyWheelEvents(),delete e.destroyWheelEvents}};function Ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zs(e,t){return zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zs(e,t)}var Hs=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i,o,s,l=Gs(r=e.call(this,n,[t])||this);if(l.params=T({},t.params.colorPicker,n),l.params.containerEl&&0===(i=a(l.params.containerEl)).length)return l||Gs(r);function c(){l.open()}function d(e){e.preventDefault()}function u(){l.open()}function p(e){if(!l.destroyed&&l.params&&"page"!==l.params.openIn){var t=a(e.target);l.opened&&!l.closing&&(t.closest('[class*="backdrop"]').length||t.closest(".color-picker-popup, .color-picker-popover").length||(o&&o.length>0?t[0]!==o[0]&&0===t.closest(".sheet-modal").length&&l.close():0===a(e.target).closest(".sheet-modal").length&&l.close()))}}return l.params.inputEl&&(o=a(l.params.inputEl)),l.params.targetEl&&(s=a(l.params.targetEl)),T(l,{app:t,$containerEl:i,containerEl:i&&i[0],inline:i&&i.length>0,$inputEl:o,inputEl:o&&o[0],$targetEl:s,targetEl:s&&s[0],initialized:!1,opened:!1,url:l.params.url,modules:{"alpha-slider":Es,"current-color":Ss,hex:Ts,"hsb-sliders":Ms,"hue-slider":Is,"brightness-slider":Ls,palette:$s,"initial-current-colors":Ps,"rgb-bars":Os,"rgb-sliders":Bs,"sb-spectrum":As,"hs-spectrum":Rs,wheel:Ds}}),T(l,{attachInputEvents:function(){l.$inputEl.on("click",c),l.params.inputReadOnly&&(l.$inputEl.on("focus mousedown",d),l.$inputEl[0]&&(l.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){l.$inputEl.off("click",c),l.params.inputReadOnly&&(l.$inputEl.off("focus mousedown",d),l.$inputEl[0]&&delete l.$inputEl[0].f7ValidateReadonly)},attachTargetEvents:function(){l.$targetEl.on("click",u)},detachTargetEvents:function(){l.$targetEl.off("click",u)},attachHtmlEvents:function(){t.on("click",p)},detachHtmlEvents:function(){t.off("click",p)}}),l.init(),l||Gs(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,zs(t,n);var i,o,s=r.prototype;return s.attachEvents=function(){var e=this;e.centerModules=e.centerModules.bind(e),e.params.centerModules&&e.app.on("resize",e.centerModules)},s.detachEvents=function(){var e=this;e.params.centerModules&&e.app.off("resize",e.centerModules)},s.centerModules=function(){var e=this;if(e.opened&&e.$el&&!e.inline){var t=e.$el.find(".page-content");if(t.length){var n=t[0];n.scrollHeight<=n.offsetHeight?t.addClass("justify-content-center"):t.removeClass("justify-content-center")}}},s.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},s.getModalType=function(){var e=this,t=e.app,n=e.modal,r=e.params,i=r.openIn,a=r.openInPhone,o=N();return n&&n.type?n.type:"auto"!==i?i:e.inline?null:o.ios?o.ipad?"popover":a:t.width>=768||o.desktop&&"aurora"===t.theme?"popover":a},s.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.hex},s.normalizeHsValues=function(e){return[Math.floor(10*e[0])/10,Math.floor(1e3*e[1])/1e3,Math.floor(1e3*e[2])/1e3]},s.setValue=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);var n=this;if(void 0!==e){var r,i=n.value||{},a=i.hex,o=i.rgb,s=i.hsl,l=i.hsb,c=i.alpha,d=void 0===c?1:c,u=i.hue,p=i.rgba,h=i.hsla,f=n.value||!n.value&&!n.params.value;if(Object.keys(e).forEach((function(t){if(n.value&&void 0!==n.value[t]){var i=e[t];Array.isArray(i)?i.forEach((function(e,i){e!==n.value[t][i]&&(r=!0)})):i!==n.value[t]&&(r=!0)}else r=!0})),r){if(e.rgb||e.rgba){var m=e.rgb||e.rgba,g=m[0],v=m[1],b=m[2],y=m[3],_=void 0===y?d:y;o=[g,v,b],a=I.apply(void 0,o),s=L.apply(void 0,o),l=O.apply(void 0,s),s=n.normalizeHsValues(s),u=(l=n.normalizeHsValues(l))[0],d=_,p=[o[0],o[1],o[2],_],h=[s[0],s[1],s[2],_]}if(e.hsl||e.hsla){var w=e.hsl||e.hsla,C=w[0],x=w[1],k=w[2],E=w[3],S=void 0===E?d:E;s=[C,x,k],o=$.apply(void 0,s),a=I.apply(void 0,o),l=O.apply(void 0,s),s=n.normalizeHsValues(s),u=(l=n.normalizeHsValues(l))[0],d=S,p=[o[0],o[1],o[2],S],h=[s[0],s[1],s[2],S]}if(e.hsb){var B=e.hsb,A=B[0],R=B[1],D=B[2],N=B[3],G=void 0===N?d:N;l=[A,R,D],s=P.apply(void 0,l),o=$.apply(void 0,s),a=I.apply(void 0,o),s=n.normalizeHsValues(s),u=(l=n.normalizeHsValues(l))[0],d=G,p=[o[0],o[1],o[2],G],h=[s[0],s[1],s[2],G]}if(e.hex&&(o=M(e.hex),a=I.apply(void 0,o),s=L.apply(void 0,o),l=O.apply(void 0,s),s=n.normalizeHsValues(s),u=(l=n.normalizeHsValues(l))[0],p=[o[0],o[1],o[2],d],h=[s[0],s[1],s[2],d]),void 0!==e.alpha&&(d=e.alpha,void 0!==o&&(p=[o[0],o[1],o[2],d]),void 0!==s&&(h=[s[0],s[1],s[2],d])),void 0!==e.hue){var z=s,H=(z[0],z[1]),F=z[2];s=[e.hue,H,F],l=O.apply(void 0,s),o=$.apply(void 0,s),a=I.apply(void 0,o),s=n.normalizeHsValues(s),u=(l=n.normalizeHsValues(l))[0],p=[o[0],o[1],o[2],d],h=[s[0],s[1],s[2],d]}n.value={hex:a,alpha:d,hue:u,rgb:o,hsl:s,hsb:l,rgba:p,hsla:h},n.initialValue||(n.initialValue=T({},n.value)),n.updateValue(f),n.opened&&t&&n.updateModules()}}},s.getValue=function(){return this.value},s.updateValue=function(e){void 0===e&&(e=!0);var t=this,n=t.$inputEl,r=t.value,i=t.$targetEl;if(i&&t.params.targetElSetBackgroundColor){var a=r.rgba;i.css("background-color","rgba("+a.join(", ")+")")}if(e&&t.emit("local::change colorPickerChange",t,r),n&&n.length){var o=t.formatValue(r);n&&n.length&&(n.val(o),e&&n.trigger("change"))}},s.updateModules=function(){var e=this,t=e.modules;e.params.modules.forEach((function(n){"string"==typeof n&&t[n]&&t[n].update?t[n].update(e):n&&n.update&&n.update(e)}))},s.update=function(){this.updateModules()},s.renderPicker=function(){var e=this,t=e.params,n=e.modules,r="";return t.modules.forEach((function(t){"string"==typeof t&&n[t]&&n[t].render?r+=n[t].render(e):t&&t.render&&(r+=t.render(e))})),r},s.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e,e);var t=e.params,n=t.openIn,r=t.navbarTitleText,i=t.navbarBackLinkText,a=t.navbarCloseText;return mn("div",{class:"navbar"},mn("div",{class:"navbar-bg"}),mn("div",{class:"navbar-inner sliding"},"page"===n&&mn("div",{class:"left"},mn("a",{class:"link back"},mn("i",{class:"icon icon-back"}),mn("span",{class:"if-not-md"},i))),mn("div",{class:"title"},r),"page"!==n&&mn("div",{class:"right"},mn("a",{class:"link popup-close","data-popup":".color-picker-popup"},a))))},s.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):mn("div",{class:"toolbar toolbar-top no-shadow"},mn("div",{class:"toolbar-inner"},mn("div",{class:"left"}),mn("div",{class:"right"},mn("a",{class:"link sheet-close popover-close","data-sheet":".color-picker-sheet-modal","data-popover":".color-picker-popover"},e.params.toolbarCloseText))))},s.renderInline=function(){var e=this.params,t=e.cssClass,n=e.groupedModules;return mn("div",{class:"color-picker color-picker-inline "+(n?"color-picker-grouped-modules":"")+" "+(t||"")},this.renderPicker())},s.renderSheet=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbarSheet,i=t.groupedModules;return mn("div",{class:"sheet-modal color-picker color-picker-sheet-modal "+(i?"color-picker-grouped-modules":"")+" "+(n||"")},r&&e.renderToolbar(),mn("div",{class:"sheet-modal-inner"},mn("div",{class:"page-content"},e.renderPicker())))},s.renderPopover=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbarPopover,i=t.groupedModules;return mn("div",{class:"popover color-picker-popover "+(n||"")},mn("div",{class:"popover-inner"},mn("div",{class:"color-picker "+(i?"color-picker-grouped-modules":"")},r&&e.renderToolbar(),mn("div",{class:"page-content"},e.renderPicker()))))},s.renderPopup=function(){var e=this,t=e.params,n=t.cssClass,r=t.navbarPopup,i=t.groupedModules;return mn("div",{class:"popup color-picker-popup "+(n||"")},mn("div",{class:"page"},r&&e.renderNavbar(),mn("div",{class:"color-picker "+(i?"color-picker-grouped-modules":"")},mn("div",{class:"page-content"},e.renderPicker()))))},s.renderPage=function(){var e=this,t=e.params,n=t.cssClass,r=t.groupedModules;return mn("div",{class:"page color-picker-page "+(n||""),"data-name":"color-picker-page"},e.renderNavbar(),mn("div",{class:"color-picker "+(r?"color-picker-grouped-modules":"")},mn("div",{class:"page-content"},e.renderPicker())))},s.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(e.inline)return e.renderInline();if("page"===t.openIn)return e.renderPage();var n=e.getModalType();return"popover"===n?e.renderPopover():"sheet"===n?e.renderSheet():"popup"===n?e.renderPopup():void 0},s.onOpen=function(){var e=this,t=e.initialized,n=e.$el,r=e.app,i=e.$inputEl,a=e.inline,o=e.value,s=e.params,l=e.modules;e.closing=!1,e.opened=!0,e.opening=!0,e.attachEvents(),s.modules.forEach((function(t){"string"==typeof t&&l[t]&&l[t].init?l[t].init(e):t&&t.init&&t.init(e)}));var c=!o&&s.value;t?o&&(e.initialValue=T({},o),e.setValue(o,!1)):o?e.setValue(o):s.value?e.setValue(s.value,!1):s.value||e.setValue({hex:"#ff0000"},!1),c&&e.updateValue(),e.updateModules(),s.centerModules&&e.centerModules(),!a&&i&&i.length&&"md"===r.theme&&i.trigger("focus"),e.initialized=!0,n&&n.trigger("colorpicker:open"),i&&i.trigger("colorpicker:open"),e.emit("local::open colorPickerOpen",e)},s.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("colorpicker:opened"),e.$inputEl&&e.$inputEl.trigger("colorpicker:opened"),e.emit("local::opened colorPickerOpened",e)},s.onClose=function(){var e=this,t=e.app,n=e.params,r=e.modules;if(e.opening=!1,e.closing=!0,e.detachEvents(),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var i=e.$inputEl.attr("validate"),a=e.$inputEl.attr("required");i&&a&&t.input.validate(e.$inputEl)}n.modules.forEach((function(t){"string"==typeof t&&r[t]&&r[t].destroy?r[t].destroy(e):t&&t.destroy&&t.destroy(e)})),e.$el&&e.$el.trigger("colorpicker:close"),e.$inputEl&&e.$inputEl.trigger("colorpicker:close"),e.emit("local::close colorPickerClose",e)},s.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||y((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("colorpicker:closed"),e.$inputEl&&e.$inputEl.trigger("colorpicker:closed"),e.emit("local::closed colorPickerClosed",e)},s.open=function(){var e=this,t=e.app,n=e.opened,r=e.inline,i=e.$inputEl,o=e.$targetEl,s=e.params;if(!n){if(r)return e.$el=a(e.render()),e.$el[0].f7ColorPicker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var l=e.render();if("page"===s.openIn)e.view.router.navigate({url:e.url,route:{content:l,path:e.url,on:{pageBeforeIn:function(t,n){e.$el=n.$el.find(".color-picker"),e.$el[0].f7ColorPicker=e,e.onOpen()},pageAfterIn:function(){e.onOpened()},pageBeforeOut:function(){e.onClose()},pageAfterOut:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}}});else{var c=e.getModalType(),d=s.backdrop;null==d&&("popover"===c&&!1!==t.params.popover.backdrop&&(d=!0),"popup"===c&&(d=!0));var u,p={targetEl:o||i,scrollToEl:s.scrollToInput?o||i:void 0,content:l,backdrop:d,closeByBackdropClick:s.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===c||"popup"===c?t.$el.find(".color-picker"):t.$el,e.$el[0].f7ColorPicker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}};"popup"===c&&(p.push=s.popupPush,p.swipeToClose=s.popupSwipeToClose),"sheet"===c&&(p.push=s.sheetPush,p.swipeToClose=s.sheetSwipeToClose),s.routableModals&&e.view?e.view.router.navigate({url:e.url,route:(u={path:e.url},u[c]=p,u)}):(e.modal=t[c].create(p),e.modal.open())}}},s.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view||"page"===e.params.openIn?e.view.router.back():e.modal.close())},s.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init colorPickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.$targetEl&&e.attachTargetEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init colorPickerInit",e)},s.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy colorPickerBeforeDestroy",e),t&&t.trigger("colorpicker:beforedestroy"),e.close(),e.detachEvents(),e.$inputEl&&e.detachInputEvents(),e.$targetEl&&e.detachTargetEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7ColorPicker,g(e),e.destroyed=!0}},i=r,o=[{key:"view",get:function(){var e,t=this.$inputEl,n=this.$targetEl,r=this.app,i=this.params;return i.view?e=i.view:(t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),!e&&n&&(e=n.parents(".view").length&&n.parents(".view")[0].f7View)),e||(e=r.views.main),e}}],o&&Ns(i.prototype,o),r}(W);const Fs=Hs,Vs={name:"colorPicker",static:{ColorPicker:Fs},create:function(){var e=this;e.colorPicker=q({defaultSelector:".color-picker",constructor:Fs,app:e,domProp:"f7ColorPicker"}),e.colorPicker.close=function(e){void 0===e&&(e=".color-picker");var t=a(e);if(0!==t.length){var n=t[0].f7ColorPicker;!n||n&&!n.opened||n.close()}}},params:{colorPicker:{value:null,modules:["wheel"],palette:[["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E"],["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B"],["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C","#004D40"],["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F","#33691E"],["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"]],groupedModules:!1,centerModules:!0,sliderLabel:!1,sliderValue:!1,sliderValueEdiable:!1,barLabel:!1,barValue:!1,barValueEdiable:!1,hexLabel:!1,hexValueEditable:!1,redLabelText:"R",greenLabelText:"G",blueLabelText:"B",hueLabelText:"H",saturationLabelText:"S",brightnessLabelText:"B",hexLabelText:"HEX",alphaLabelText:"A",containerEl:null,openIn:"popover",openInPhone:"popup",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,targetEl:null,targetElSetBackgroundColor:!1,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,toolbarSheet:!0,toolbarPopover:!1,toolbarCloseText:"Done",navbarPopup:!0,navbarCloseText:"Done",navbarTitleText:"Color",navbarBackLinkText:"Back",cssClass:null,routableModals:!1,view:null,url:"color/",backdrop:null,closeByBackdropClick:!0,renderToolbar:null,renderNavbar:null,renderInline:null,renderPopover:null,renderSheet:null,renderPopup:null,render:null}}};var Ws={open:function(e){var t=this,n=a(e).eq(0);if(n.length&&(n.addClass("treeview-item-opened"),n.trigger("treeview:open"),t.emit("treeviewOpen",n[0]),n.hasClass("treeview-load-children")&&!n[0].f7TreeviewChildrenLoaded)){var r={iosPreloaderContent:h,mdPreloaderContent:p,auroraPreloaderContent:f};n.trigger("treeview:loadchildren",i),t.emit("treeviewLoadChildren",n[0],i),n.find(".treeview-toggle").addClass("treeview-toggle-hidden"),n.find(".treeview-item-root").prepend('<div class="preloader treeview-preloader">'+r[t.theme+"PreloaderContent"]+"</div>")}function i(e){e?(n.removeClass("treeview-item-opened"),n.trigger("treeview:close"),t.emit("treeviewClose",n[0])):n[0].f7TreeviewChildrenLoaded=!0,n.find(".treeview-toggle").removeClass("treeview-toggle-hidden"),n.find(".treeview-preloader").remove()}},close:function(e){var t=a(e).eq(0);t.length&&(t.removeClass("treeview-item-opened"),t.trigger("treeview:close"),this.emit("treeviewClose",t[0]))},toggle:function(e){var t=a(e).eq(0);if(t.length){var n=t.hasClass("treeview-item-opened");this.treeview[n?"close":"open"](t)}}};const js={name:"treeview",create:function(){A(this,{treeview:Ws})},clicks:{".treeview-toggle":function(e,t,n){if(!e.parents(".treeview-item-toggle").length){var r=e.parents(".treeview-item").eq(0);r.length&&(n.preventF7Router=!0,this.treeview.toggle(r[0]))}},".treeview-item-toggle":function(e,t,n){var r=e.closest(".treeview-item").eq(0);r.length&&(n.preventF7Router=!0,this.treeview.toggle(r[0]))}}};function Us(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qs(e,t){return qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qs(e,t)}var Ks={bold:["bold","format_bold","bold"],italic:["italic","format_italic","italic"],underline:["underline","format_underlined","underline"],strikeThrough:["strikethrough","strikethrough_s","strikeThrough"],orderedList:["list_number","format_list_numbered","insertOrderedList"],unorderedList:["list_bullet","format_list_bulleted","insertUnorderedList"],link:["link","link","createLink"],image:["photo","image","insertImage"],paragraph:["paragraph",'<i class="icon">¶</i>',"formatBlock.P"],h1:['<i class="icon">H<sub>1</sub></i>','<i class="icon">H<sub>1</sub></i>',"formatBlock.H1"],h2:['<i class="icon">H<sub>2</sub></i>','<i class="icon">H<sub>2</sub></i>',"formatBlock.H2"],h3:['<i class="icon">H<sub>3</sub></i>','<i class="icon">H<sub>3</sub></i>',"formatBlock.H3"],alignLeft:["text_alignleft","format_align_left","justifyLeft"],alignCenter:["text_aligncenter","format_align_center","justifyCenter"],alignRight:["text_alignright","format_align_right","justifyRight"],alignJustify:["text_justify","format_align_justify","justifyFull"],subscript:["textformat_subscript",'<i class="icon">A<sub>1</sub></i>',"subscript"],superscript:["textformat_superscript",'<i class="icon">A<sup>1</sup></i>',"superscript"],indent:["increase_indent","format_indent_increase","indent"],outdent:["decrease_indent","format_indent_decrease","outdent"]},Js=function(e){var t,n;function r(t,n){var r,i=Us(r=e.call(this,n,[t])||this),s=(0,o.Me)(),l=N(),c=T({},t.params.textEditor);i.useModulesParams(c),i.params=T(c,n);var d=i.params.el;if(!d)return i||Us(r);var u=a(d);if(0===u.length)return i||Us(r);if(u[0].f7TextEditor)return u[0].f7TextEditor||Us(r);var p=u.children(".text-editor-content");if(p.length||(u.append('<div class="text-editor-content" contenteditable></div>'),p=u.children(".text-editor-content")),T(i,{app:t,$el:u,el:u[0],$contentEl:p,contentEl:p[0]}),"value"in n&&(i.value=i.params.value),"keyboard-toolbar"===i.params.mode&&(l.cordova||l.capacitor||l.android||(i.params.mode="popover")),"string"==typeof i.params.buttons)try{i.params.buttons=JSON.parse(i.params.buttons)}catch(e){throw new Error('Framework7: TextEditor: wrong "buttons" parameter format')}return u[0].f7TextEditor=i,i.onButtonClick=i.onButtonClick.bind(i),i.onFocus=i.onFocus.bind(i),i.onBlur=i.onBlur.bind(i),i.onInput=i.onInput.bind(i),i.onPaste=i.onPaste.bind(i),i.onSelectionChange=i.onSelectionChange.bind(i),i.closeKeyboardToolbar=i.closeKeyboardToolbar.bind(i),i.attachEvents=function(){"toolbar"===i.params.mode&&i.$el.find(".text-editor-toolbar").on("click","button",i.onButtonClick),"keyboard-toolbar"===i.params.mode&&(i.$keyboardToolbarEl.on("click","button",i.onButtonClick),i.$el.parents(".page").on("page:beforeout",i.closeKeyboardToolbar)),"popover"===i.params.mode&&i.popover&&i.popover.$el.on("click","button",i.onButtonClick),i.$contentEl.on("paste",i.onPaste),i.$contentEl.on("focus",i.onFocus),i.$contentEl.on("blur",i.onBlur),i.$contentEl.on("input",i.onInput,!0),a(s).on("selectionchange",i.onSelectionChange)},i.detachEvents=function(){"toolbar"===i.params.mode&&i.$el.find(".text-editor-toolbar").off("click","button",i.onButtonClick),"keyboard-toolbar"===i.params.mode&&(i.$keyboardToolbarEl.off("click","button",i.onButtonClick),i.$el.parents(".page").off("page:beforeout",i.closeKeyboardToolbar)),"popover"===i.params.mode&&i.popover&&i.popover.$el.off("click","button",i.onButtonClick),i.$contentEl.off("paste",i.onPaste),i.$contentEl.off("focus",i.onFocus),i.$contentEl.off("blur",i.onBlur),i.$contentEl.off("input",i.onInput,!0),a(s).off("selectionchange",i.onSelectionChange)},i.useModules(),i.init(),i||Us(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,qs(t,n);var i=r.prototype;return i.setValue=function(e){var t=this;return t.value===e||(t.value=e,t.$contentEl.html(e),t.$el.trigger("texteditor:change",t.value),t.emit("local::change textEditorChange",t,t.value)),t},i.getValue=function(){return this.value},i.clearValue=function(){var e=this;return e.setValue(""),e.params.placeholder&&!e.$contentEl.html()&&e.insertPlaceholder(),e},i.createLink=function(){var e,t=this,n=(0,o.Jj)(),r=(0,o.Me)(),i=n.getSelection(),s=[];if(i&&i.anchorNode&&a(i.anchorNode).parents(t.$el).length){for(var l=i.anchorNode;l;)s.push(l),l.nextSibling&&l!==i.focusNode||(l=null),l&&(l=l.nextSibling);for(var c=[],d=a(s),u=0;u<d.length;u+=1){var p=d[u].children;if(p)for(var h=0;h<p.length;h+=1)a(p[h]).is("a")&&c.push(p[h])}e=d.closest("a").add(a(c))}if(e&&e.length)return e.each((function(e){var t=n.getSelection(),i=r.createRange();i.selectNodeContents(e),t.removeAllRanges(),t.addRange(i),r.execCommand("unlink",!1),t.removeAllRanges()})),t;var f=t.getSelectionRange();return f?(t.app.dialog.prompt(t.params.linkUrlText,"",(function(e){e&&e.trim().length&&(t.setSelectionRange(f),r.execCommand("createLink",!1,e.trim()),t.$el.trigger("texteditor:insertlink",{url:e.trim()}),t.emit("local:insertLink textEditorInsertLink",t,e.trim()))})).$el.find("input").focus(),t):t},i.insertImage=function(){var e=this,t=(0,o.Me)(),n=e.getSelectionRange();return n?(e.app.dialog.prompt(e.params.imageUrlText,"",(function(r){r&&r.trim().length&&(e.setSelectionRange(n),t.execCommand("insertImage",!1,r.trim()),e.$el.trigger("texteditor:insertimage",{url:r.trim()}),e.emit("local:insertImage textEditorInsertImage",e,r.trim()))})).$el.find("input").focus(),e):e},i.removePlaceholder=function(){this.$contentEl.find(".text-editor-placeholder").remove()},i.insertPlaceholder=function(){this.$contentEl.append('<div class="text-editor-placeholder">'+this.params.placeholder+"</div>")},i.onSelectionChange=function(){var e=this,t=(0,o.Jj)(),n=(0,o.Me)();if("toolbar"!==e.params.mode){var r=t.getSelection(),i=a(r.anchorNode).parents(e.contentEl).length||r.anchorNode===e.contentEl;if("keyboard-toolbar"!==e.params.mode){if("popover"===e.params.mode){var s=a(r.anchorNode).parents(e.popover.el).length||r.anchorNode===e.popover.el;if(!i&&!s)return void e.closePopover();if(!r.isCollapsed&&r.rangeCount){var l=r.getRangeAt(0).getBoundingClientRect(),c=e.app.$el[0]||n.body;e.openPopover(l.x+(t.scrollX||0)-c.offsetLeft,l.y+(t.scrollY||0)-c.offsetTop,l.width,l.height)}else r.isCollapsed&&e.closePopover()}}else i?e.openKeyboardToolbar():e.closeKeyboardToolbar()}},i.onPaste=function(e){var t=(0,o.Me)();if(this.params.clearFormattingOnPaste&&e.clipboardData&&e.clipboardData.getData){var n=e.clipboardData.getData("text/plain");e.preventDefault(),t.execCommand("insertText",!1,n)}},i.onInput=function(){var e=this,t=e.$contentEl.html();e.value=t,e.$el.trigger("texteditor:input"),e.emit("local:input textEditorInput",e,e.value),e.$el.trigger("texteditor:change",e.value),e.emit("local::change textEditorChange",e,e.value)},i.onFocus=function(){var e=this;e.removePlaceholder(),e.$contentEl.focus(),e.$el.trigger("texteditor:focus"),e.emit("local::focus textEditorFocus",e)},i.onBlur=function(){var e=this,t=(0,o.Jj)(),n=(0,o.Me)();if(e.params.placeholder&&""===e.$contentEl.html()&&e.insertPlaceholder(),"popover"===e.params.mode){var r=t.getSelection(),i=a(r.anchorNode).parents(e.contentEl).length||r.anchorNode===e.contentEl;n.activeElement&&e.popover&&a(n.activeElement).closest(e.popover.$el).length||i||e.closePopover()}if("keyboard-toolbar"===e.params.mode){var s=t.getSelection();a(s.anchorNode).parents(e.contentEl).length||s.anchorNode===e.contentEl||e.closeKeyboardToolbar()}e.$el.trigger("texteditor:blur"),e.emit("local::blur textEditorBlur",e)},i.onButtonClick=function(e){var t=this,n=(0,o.Jj)(),r=(0,o.Me)(),i=n.getSelection();if(a(i.anchorNode).parents(t.contentEl).length||i.anchorNode===t.contentEl){var s=a(e.target).closest("button");s.parents("form").length&&e.preventDefault();var l=s.attr("data-button"),c=t.params.customButtons&&t.params.customButtons[l];if(l&&(Ks[l]||c))if(s.trigger("texteditor:buttonclick",l),t.emit("local::buttonClick textEditorButtonClick",t,l),c)c.onClick&&c.onClick(t,s[0]);else{var d=Ks[l][2];if("createLink"!==d)if("insertImage"!==d)if(0!==d.indexOf("formatBlock"))r.execCommand(d,!1);else{var u=d.split(".")[1],p=a(i.anchorNode);p.parents(u.toLowerCase()).length||p.is(u)?r.execCommand("formatBlock",!1,"div"):r.execCommand("formatBlock",!1,u)}else t.insertImage();else t.createLink()}}},i.getSelectionRange=function(){var e=(0,o.Jj)(),t=(0,o.Me)();if(e.getSelection){var n=e.getSelection();if(n.getRangeAt&&n.rangeCount)return n.getRangeAt(0)}else if(t.selection&&t.selection.createRange)return t.selection.createRange();return null},i.setSelectionRange=function(e){var t=(0,o.Jj)(),n=(0,o.Me)();if(e)if(t.getSelection){var r=t.getSelection();r.removeAllRanges(),r.addRange(e)}else n.selection&&e.select&&e.select()},i.renderButtons=function(){var e=this,t="";function n(t){var n="md"===e.app.theme?"material-icons":"f7-icons";if(e.params.customButtons&&e.params.customButtons[t])return'<button type="button" class="text-editor-button" data-button="'+t+'">'+(e.params.customButtons[t].content||"")+"</button>";if(!Ks[t])return"";var r=Ks[t]["md"===e.app.theme?1:0];return('<button type="button" class="text-editor-button" data-button="'+t+'">'+(r.indexOf("<")>=0?r:'<i class="'+n+'">'+r+"</i>")+"</button>").trim()}return e.params.buttons.forEach((function(r,i){Array.isArray(r)?(r.forEach((function(e){t+=n(e)})),i<e.params.buttons.length-1&&e.params.dividers&&(t+='<div class="text-editor-button-divider"></div>')):t+=n(r)})),t},i.createToolbar=function(){this.$el.prepend('<div class="text-editor-toolbar">'+this.renderButtons()+"</div>")},i.createKeyboardToolbar=function(){this.$keyboardToolbarEl=a('<div class="toolbar toolbar-bottom text-editor-keyboard-toolbar"><div class="toolbar-inner">'+this.renderButtons()+"</div></div>")},i.createPopover=function(){var e=this;e.popover=e.app.popover.create({content:'\n        <div class="popover theme-dark text-editor-popover">\n          <div class="popover-inner">'+e.renderButtons()+"</div>\n        </div>\n      ",closeByOutsideClick:!1,backdrop:!1})},i.openKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.parent(e.app.$el).length||(e.$el.trigger("texteditor:keyboardopen"),e.emit("local::keyboardOpen textEditorKeyboardOpen",e),e.app.$el.append(e.$keyboardToolbarEl))},i.closeKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.remove(),e.$el.trigger("texteditor:keyboardclose"),e.emit("local::keyboardClose textEditorKeyboardClose",e)},i.openPopover=function(e,t,n,r){var i=this;i.popover&&(Object.assign(i.popover.params,{targetX:e,targetY:t,targetWidth:n,targetHeight:r}),clearTimeout(i.popoverTimeout),i.popoverTimeout=setTimeout((function(){i.popover&&(i.popover.opened?i.popover.resize():(i.$el.trigger("texteditor:popoveropen"),i.emit("local::popoverOpen textEditorPopoverOpen",i),i.popover.open()))}),400))},i.closePopover=function(){var e=this;clearTimeout(e.popoverTimeout),e.popover&&e.popover.opened&&(e.popoverTimeout=setTimeout((function(){e.popover&&(e.$el.trigger("texteditor:popoverclose"),e.emit("local::popoverClose textEditorPopoverClose",e),e.popover.close())}),400))},i.init=function(){var e=this;return e.value?e.$contentEl.html(e.value):e.value=e.$contentEl.html(),e.params.placeholder&&""===e.value&&e.insertPlaceholder(),"toolbar"===e.params.mode?e.createToolbar():"popover"===e.params.mode?e.createPopover():"keyboard-toolbar"===e.params.mode&&e.createKeyboardToolbar(),e.attachEvents(),e.$el.trigger("texteditor:init"),e.emit("local::init textEditorInit",e),e},i.destroy=function(){var e=this;e.$el.trigger("texteditor:beforedestroy"),e.emit("local::beforeDestroy textEditorBeforeDestroy",e),e.detachEvents(),"keyboard-toolbar"===e.params.mode&&e.$keyboardToolbarEl&&e.$keyboardToolbarEl.remove(),e.popover&&(e.popover.close(!1),e.popover.destroy()),delete e.$el[0].f7TextEditor,g(e),e=null},r}(W);const Qs=Js,Ys={name:"textEditor",params:{textEditor:{el:null,mode:"toolbar",value:void 0,customButtons:null,buttons:[["bold","italic","underline","strikeThrough"],["orderedList","unorderedList"],["link","image"],["paragraph","h1","h2","h3"],["alignLeft","alignCenter","alignRight","alignJustify"],["subscript","superscript"],["indent","outdent"]],dividers:!0,imageUrlText:"Insert image URL",linkUrlText:"Insert link URL",placeholder:null,clearFormattingOnPaste:!0}},create:function(){this.textEditor=T(q({defaultSelector:".text-editor",constructor:Qs,app:this,domProp:"f7TextEditor"}))},static:{TextEditor:Qs},on:{tabMounted:function(e){var t=this;a(e).find(".text-editor-init").each((function(e){var n=a(e).dataset();t.textEditor.create(T({el:e},n||{}))}))},tabBeforeRemove:function(e){a(e).find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".text-editor-init").each((function(e){var n=a(e).dataset();t.textEditor.create(T({el:e},n||{}))}))},pageBeforeRemove:function(e){e.$el.find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))}},vnode:{"text-editor-init":{insert:function(e){var t=e.elm,n=a(t).dataset();this.textEditor.create(T({el:t},n||{}))},destroy:function(e){var t=e.elm;t.f7TextEditor&&t.f7TextEditor.destroy()}}}};function Xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zs(e,t){return Zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zs(e,t)}var el=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=Xs(r=e.call(this,n,[t])||this),o=T({},t.params.pieChart);i.useModulesParams(o),i.params=T(o,n);var s=i.params.el;if(!s)return i||Xs(r);var l=a(s);return 0===l.length?i||Xs(r):l[0].f7PieChart?l[0].f7PieChart||Xs(r):(T(i,{app:t,$el:l,el:l&&l[0],currentIndex:null,f7Tooltip:null}),l[0].f7PieChart=i,i.useModules(),i.showTooltip=i.showTooltip.bind(Xs(r)),i.hideTooltip=i.hideTooltip.bind(Xs(r)),i.init(),i||Xs(r))}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Zs(t,n);var i=r.prototype;return i.getSummValue=function(){var e=this.params.datasets,t=0;return e.map((function(e){return e.value||0})).forEach((function(e){t+=e})),t},i.getPaths=function(){var e=this,t=this.params,n=t.datasets,r=t.size,i=[],a=0;function o(e){return[Math.cos(2*Math.PI*e)*(r/3),Math.sin(2*Math.PI*e)*(r/3)]}return n.forEach((function(t){var n=t.value,s=t.label,l=t.color,c=n/e.getSummValue(),d=o(a),u=d[0],p=d[1],h=o(a+=c),f=h[0],m=h[1],g=["M "+u+" "+p,"A "+r/3+" "+r/3+" 0 "+(c>.5?1:0)+" 1 "+f+" "+m,"L 0 0"].join(" ");i.push({points:g,label:s,color:l})})),i},i.formatTooltipText=function(){var e=this.params.datasets,t=this.currentIndex;if(null===t)return"";var n=e[t],r=n.value,i=n.label,a=n.color,o=r/this.getSummValue()*100,s=function(e){return parseInt(e,10)===e?e:Math.round(100*e)/100};return this.params.formatTooltip?this.params.formatTooltip.call(this,{index:t,value:r,label:i,color:a,percentage:o}):'\n      <div class="pie-chart-tooltip-label">\n        <span class="pie-chart-tooltip-color" style="background-color: '+a+';"></span> '+(i?i+": ":"")+s(r)+" ("+s(o)+"%)\n      </div>\n    "},i.setTooltip=function(){var e=this,t=e.currentIndex,n=e.el,r=e.app,i=e.params.tooltip;if((null!==t||e.f7Tooltip)&&i&&n)return null===t||e.f7Tooltip?void(e.f7Tooltip&&(null!==t?(e.f7Tooltip.setText(e.formatTooltipText()),e.f7Tooltip.setTargetEl(n.querySelector('path[data-index="'+t+'"]')),e.f7Tooltip.show()):e.f7Tooltip.hide())):(e.f7Tooltip=r.tooltip.create({trigger:"manual",containerEl:n,targetEl:n.querySelector('path[data-index="'+t+'"]'),text:e.formatTooltipText(),cssClass:"pie-chart-tooltip"}),void e.f7Tooltip.show())},i.render=function(){var e=this.params.size,t=this.getPaths();return mn("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,viewBox:"-"+e/3+" -"+e/3+" "+2*e/3+" "+2*e/3,style:"transform: rotate(-90deg)"},t.map((function(e,t){return mn("path",{d:e.points,fill:e.color,"data-index":t})})))},i.update=function(e){void 0===e&&(e={});var t=this,n=t.params;if(Object.keys(e).forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),0===t.$svgEl.length)return t;t.$svgEl.remove(),delete t.$svgEl.f7PieChart;var r=a(t.render()).eq(0);return r.f7PieChart=t,T(t,{$svgEl:r,svgEl:r&&r[0]}),t.$el.append(r),t},i.setCurrentIndex=function(e){var t=this;if(e!==t.currentIndex){var n=t.params.datasets;t.currentIndex=e,t.$el.trigger("piechart:select",{index:e,dataset:n[e]}),t.emit("local::select pieChartSelect",t,e,n[e])}},i.showTooltip=function(e){var t=this,n=parseInt(e.target.getAttribute("data-index"),10);this.setCurrentIndex(n),this.$svgEl.find("path").removeClass("pie-chart-hidden").forEach((function(e,n){n!==t.currentIndex&&a(e).addClass("pie-chart-hidden")})),this.setTooltip()},i.hideTooltip=function(){this.setCurrentIndex(null),this.$svgEl.find("path").removeClass("pie-chart-hidden"),this.setTooltip()},i.init=function(){var e=this,t=a(e.render()).eq(0);return t.f7PieChart=e,T(e,{$svgEl:t,svgEl:t&&t[0]}),e.$el.append(t),e.$el.on("click mouseenter","path",e.showTooltip,!0),e.$el.on("mouseleave","path",e.hideTooltip,!0),e},i.destroy=function(){var e=this;e.$el&&!e.destroyed&&(e.$el.trigger("piechart:beforedestroy"),e.emit("local::beforeDestroy pieChartBeforeDestroy",e),e.$el.off("click mouseenter","path",e.showTooltip,!0),e.$el.off("mouseleave","path",e.hideTooltip,!0),e.$svgEl.remove(),e.f7Tooltip&&e.f7Tooltip.destroy&&e.f7Tooltip.destroy(),delete e.$el[0].f7PieChart,g(e),e.destroyed=!0)},r}(W);const tl=el,nl={name:"pieChart",params:{pieChart:{el:null,datasets:[],size:320,tooltip:!1,formatTooltip:null}},create:function(){var e=this;e.pieChart=q({defaultSelector:".pie-chart",constructor:tl,app:e,domProp:"f7PieChart"}),e.pieChart.update=function(t,n){if(0!==a(t).length){var r=e.pieChart.get(t);if(r)return r.update(n),r}}}};function rl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function il(e,t){return il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},il(e,t)}var al=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var i=rl(r=e.call(this,n,[t])||this),o=T({},t.params.areaChart);i.useModulesParams(o),i.params=T(o,n);var s=i.params.el;if(!s)return i||rl(r);var l=a(s);return 0===l.length?i||rl(r):l[0].f7AreaChart?l[0].f7AreaChart||rl(r):(T(i,{app:t,$el:l,el:l&&l[0],currentIndex:null,hiddenDatasets:[],f7Tooltip:null,linesOffsets:null}),l[0].f7AreaChart=i,i.useModules(),i.onMouseEnter=i.onMouseEnter.bind(i),i.onMouseMove=i.onMouseMove.bind(i),i.onMouseLeave=i.onMouseLeave.bind(i),i.onLegendClick=i.onLegendClick.bind(i),i.init(),i||rl(r))}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,il(t,n);var i=r.prototype;return i.getVisibleLabels=function(){var e=this.params,t=e.maxAxisLabels,n=e.axisLabels;if(!t||n.length<=t)return n;var r=Math.ceil(n.length/t);return n.filter((function(e,t){return t%r==0}))},i.getSummValues=function(){var e=this.params.datasets,t=this.hiddenDatasets,n=[];return e.filter((function(e,n){return!t.includes(n)})).forEach((function(e){e.values.forEach((function(e,t){n[t]||(n[t]=0),n[t]+=e}))})),n},i.getChartData=function(){var e=this.params,t=e.datasets,n=e.lineChart,r=e.width,i=e.height,a=this.hiddenDatasets,o=[];if(!t.length)return o;var s=t[0].values.map((function(){return 0})),l=0;return n?t.filter((function(e,t){return!a.includes(t)})).forEach((function(e){var t=e.values,n=Math.max.apply(Math,t);n>l&&(l=n)})):l=Math.max.apply(Math,this.getSummValues()),t.filter((function(e,t){return!a.includes(t)})).forEach((function(e){var t=e.label,a=e.values,c=e.color,d=a.map((function(e,t){s[t]+=e;var o=n?e:s[t],c=t/(a.length-1)*r,d=i-o/l*i;return n?(0===t?"M":"L")+c+","+d:c+" "+d}));n||d.push(r+" "+i+" 0 "+i),o.push({label:t,points:d.join(" "),color:c})})),o.reverse()},i.getVerticalLines=function(){var e=this.params,t=e.datasets,n=e.width,r=[];if(!t.length)return r;var i=t[0].values;return i.forEach((function(e,t){var a=t/(i.length-1)*n;r.push(a)})),r},i.toggleDataset=function(e){var t=this,n=this.hiddenDatasets;this.params.toggleDatasets&&(n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),this.$legendEl&&(this.$legendEl.find(".area-chart-legend-item").removeClass("area-chart-legend-item-hidden"),n.forEach((function(e){t.$legendEl.find('.area-chart-legend-item[data-index="'+e+'"]').addClass("area-chart-legend-item-hidden")}))),this.update({},!0))},i.formatAxisLabel=function(e){var t=this.params.formatAxisLabel;return t?t.call(this,e):e},i.formatLegendLabel=function(e){var t=this.params.formatLegendLabel;return t?t.call(this,e):e},i.calcLinesOffsets=function(){var e=this.svgEl.querySelectorAll("line");this.linesOffsets=[];for(var t=0;t<e.length;t+=1)this.linesOffsets.push(e[t].getBoundingClientRect().left)},i.formatTooltip=function(){var e=this,t=e.currentIndex,n=e.hiddenDatasets,r=e.params,i=r.datasets,a=r.axisLabels,o=r.formatTooltip,s=r.formatTooltipTotal,l=r.formatTooltipAxisLabel,c=r.formatTooltipDataset;if(null===t)return"";var d=0,u=i.filter((function(e,t){return!n.includes(t)})).map((function(e){return{color:e.color,label:e.label,value:e.values[t]}}));if(u.forEach((function(e){d+=e.value})),o)return o({index:t,total:d,datasets:u});var p=l?l.call(e,a[t]):this.formatAxisLabel(a[t]);return p||(p=""),'\n      <div class="area-chart-tooltip-label">'+p+'</div>\n      <div class="area-chart-tooltip-total">'+(s?s.call(e,d):d)+"</div>\n      "+(u.length>0?'\n      <ul class="area-chart-tooltip-list">\n        '+u.map((function(t){var n=t.label,r=t.color,i=t.value;return'\n              <li><span style="background-color: '+r+';"></span>'+(c?c.call(e,n,i,r):(n?n+": ":"")+i)+"</li>\n            "})).join("")+"\n      </ul>":"")+"\n    "},i.setTooltip=function(){var e=this,t=e.app,n=e.el,r=e.svgEl,i=e.hiddenDatasets,a=e.currentIndex,o=e.params,s=o.tooltip,l=o.datasets;if(s){if(l.filter((function(e,t){return!i.includes(t)})).length>0)return null===a||e.f7Tooltip?void(e.f7Tooltip&&e.f7Tooltip.hide&&e.f7Tooltip.show&&(null!==a?(e.f7Tooltip.setText(e.formatTooltip()),e.f7Tooltip.setTargetEl(r.querySelector('line[data-index="'+a+'"]')),e.f7Tooltip.show()):e.f7Tooltip.hide())):(e.f7Tooltip=t.tooltip.create({trigger:"manual",containerEl:n,targetEl:r.querySelector('line[data-index="'+a+'"]'),text:e.formatTooltip(),cssClass:"area-chart-tooltip"}),void(e.f7Tooltip&&e.f7Tooltip.show&&e.f7Tooltip.show()));e.f7Tooltip&&e.f7Tooltip.hide&&e.f7Tooltip.hide()}},i.setCurrentIndex=function(e){e!==this.currentIndex&&(this.currentIndex=e,this.$el.trigger("areachart:select",{index:e}),this.emit("local::select areaChartSelect",this,e),this.$svgEl.find("line").removeClass("area-chart-current-line"),this.$svgEl.find('line[data-index="'+e+'"]').addClass("area-chart-current-line"),this.setTooltip())},i.onLegendClick=function(e){var t=parseInt(a(e.target).closest(".area-chart-legend-item").attr("data-index"),10);this.toggleDataset(t)},i.onMouseEnter=function(){this.calcLinesOffsets()},i.onMouseMove=function(e){var t=this;t.linesOffsets||t.calcLinesOffsets();var n=e.pageX;void 0===n&&(n=0);var r=t.linesOffsets.map((function(e){return Math.abs(n-e)})),i=Math.min.apply(Math,r),a=r.indexOf(i);t.setCurrentIndex(a)},i.onMouseLeave=function(){this.setCurrentIndex(null)},i.attachEvents=function(){var e=this.svgEl,t=this.$el;e&&(e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mouseleave",this.onMouseLeave),t.on("click",".area-chart-legend-item",this.onLegendClick))},i.detachEvents=function(){var e=this.svgEl,t=this.$el;e&&(e.removeEventListener("mouseenter",this.onMouseEnter),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mouseleave",this.onMouseLeave),t.off("click",".area-chart-legend-item",this.onLegendClick))},i.render=function(){var e=this,t=e.params,n=t.lineChart,r=t.toggleDatasets,i=t.width,a=t.height,o=t.axis,s=t.axisLabels,l=t.legend,c=t.datasets,d=e.getChartData(),u=e.getVerticalLines(),p=e.getVisibleLabels(),h=r?"button":"span";return mn("div",null,mn("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:a,viewBox:"0 0 "+i+" "+a,preserveAspectRatio:"none"},d.map((function(e){return n?mn("path",{stroke:e.color,"fill-rule":"evenodd",d:e.points}):mn("polygon",{fill:e.color,"fill-rule":"evenodd",points:e.points})})),u.map((function(e,t){return mn("line",{"data-index":t,fill:"#000",x1:e,y1:0,x2:e,y2:a})}))),o&&mn("div",{class:"area-chart-axis"},s.map((function(t){return mn("span",null,p.includes(t)&&mn("span",null,e.formatAxisLabel(t)))}))),l&&mn("div",{class:"area-chart-legend"},c.map((function(t,n){return mn(h,{"data-index":n,class:"area-chart-legend-item "+(r?"area-chart-legend-button":""),_type:r?"button":void 0},mn("span",{style:"background-color: "+t.color}),e.formatLegendLabel(t.label))}))))},i.update=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n=this,r=n.params;if(Object.keys(e).forEach((function(t){void 0!==e[t]&&(r[t]=e[t])})),0===n.$svgEl.length)return n;n.detachEvents(),n.$svgEl.remove(),t||(n.$axisEl.remove(),n.$legendEl.remove());var i=a(n.render()),o=i.find("svg");if(T(n,{svgEl:o&&o[0],$svgEl:o}),!t){var s=i.find(".area-chart-axis"),l=i.find(".area-chart-legend");T(n,{$axisEl:s,$legendEl:l}),n.$el.append(s),n.$el.append(l)}return n.$el.prepend(o),n.attachEvents(),n},i.init=function(){var e=this,t=a(e.render()),n=t.find("svg"),r=t.find(".area-chart-axis"),i=t.find(".area-chart-legend");return T(e,{svgEl:n&&n[0],$svgEl:n,$axisEl:r,$legendEl:i}),e.$el.append(n),e.$el.append(r),e.$el.append(i),e.attachEvents(),e},i.destroy=function(){var e=this;e.$el&&!e.destroyed&&(e.$el.trigger("piechart:beforedestroy"),e.emit("local::beforeDestroy areaChartBeforeDestroy",e),e.detachEvents(),e.$svgEl.remove(),e.$axisEl.remove(),e.$legendEl.remove(),e.f7Tooltip&&e.f7Tooltip.destroy&&e.f7Tooltip.destroy(),delete e.$el[0].f7AreaChart,g(e),e.destroyed=!0)},r}(W);const ol=al,sl={name:"areaChart",params:{areaChart:{el:null,lineChart:!1,datasets:[],axis:!1,axisLabels:[],tooltip:!1,legend:!1,toggleDatasets:!1,width:640,height:320,maxAxisLabels:8,formatAxisLabel:null,formatLegendLabel:null,formatTooltip:null,formatTooltipAxisLabel:null,formatTooltipTotal:null,formatTooltipDataset:null}},create:function(){var e=this;e.areaChart=q({defaultSelector:".area-chart",constructor:ol,app:e,domProp:"f7AreaChart"}),e.areaChart.update=function(t,n){if(0!==a(t).length){var r=e.areaChart.get(t);if(r)return r.update(n),r}}}};Ne.use([je]),te.use([he,fe,me,ge,ve,be,We,Ge,Gt,Rt,Ht,Wt,qt,Kt,Qt,Xt,Zt,rn,fn,{name:"appbar"},wn,Sn,Ln,An,zn,jn,Qn,Xn,er,nr,ir,or,{name:"contactsList"},ur,gr,{name:"timeline"},br,xr,Er,{name:"chip"},$r,Or,{name:"checkbox"},{name:"radio"},Nr,Vr,Kr,ei,ii,di,vi,yi,ki,Si,$i,Bi,ji,Yi,na,Qo,ts,os,ps,vs,Cs,{name:"skeleton"},ks,Vs,js,Ys,nl,sl,{name:"elevation"},{name:"typography"}]);const ll=te},3251:(e,t,n)=>{"use strict";n.r(t)},628:(e,t,n)=>{"use strict";n.r(t)},9558:(e,t,n)=>{"use strict";n.r(t)},3346:(e,t,n)=>{"use strict";n.r(t)},3573:(e,t,n)=>{"use strict";n.r(t)},8601:(e,t,n)=>{"use strict";n.r(t)},1307:(e,t,n)=>{"use strict";n.r(t)},6156:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function i(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(n){void 0===e[n]?e[n]=t[n]:r(t[n])&&r(e[n])&&Object.keys(t[n]).length>0&&i(e[n],t[n])}))}n.d(t,{Jj:()=>l,Me:()=>o});var a={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function o(){var e="undefined"!=typeof document?document:{};return i(e,a),e}var s={document:a,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function l(){var e="undefined"!=typeof window?window:{};return i(e,s),e}},7793:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasComponent=void 0;const r=n(47);class i{_bounds;_children=[];_parent=null;_visible=!0;_needRepaint=!0;_rootHolder;_hovered;_mouseCursor;_beingDragged;constructor(e=new r.Rector){this._bounds=e}static boundsIntersect(e,t){return!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y)}static createOffscreenCanvas(e,t){const n=document.createElement("canvas");return n.width=e,n.height=t,n}get mouseCursor(){return this._mouseCursor}set mouseCursor(e){this._mouseCursor=e,(this.hovered||this._beingDragged)&&(document.body.style.cursor=this._mouseCursor)}get hovered(){return this._hovered}get width(){return Math.ceil(this._bounds.width)}get height(){return Math.ceil(this._bounds.height)}set rootHolder(e){this._rootHolder=e}getParentComponent(){return this._parent}addAndMakeVisible(e){if(null!=e._parent)throw new Error("A component cannot be added to multiple parents. You first need to remove it from its previous parent");e._visible=!0,this._children.push(e),e._parent=this}removeChild(e){const t=this._children.indexOf(e);t>=0&&(e._visible=!1,e._parent=null,this._children.splice(t,1))}getPosition(){let e=this._bounds.x,t=this._bounds.y,n=this._parent;for(;null!=n;)e+=n._bounds.x,t+=n._bounds.y,n=n._parent;return{x:e,y:t}}getLocalBounds(){return new r.Rector(0,0,this.width,this.height)}setBounds(e){this._bounds=e,this.resized()}toFront(){if(null==this._parent)return;const e=this._parent._children.indexOf(this);e<0||(this._parent._children.splice(e,1),this._parent._children.push(this))}hitTest(e){if(!this._visible)return!1;const t=this.getPosition();return!(e.x<t.x||e.x>t.x+this._bounds.width||e.y<t.y||e.y>t.y+this._bounds.height)}findComponentAt(e){for(let t=this._children.length;--t>=0;){const n=this._children[t];if(n.hitTest(e))return n.findComponentAt(e)}return this}repaint(e=!0){if(this._needRepaint=!0,this._children.forEach((e=>e.repaint(!1))),e){let e=this;for(;null!=e._parent;)e=e._parent;null!=e._rootHolder&&e.paint(e._rootHolder.renderingContext)}}mouseMoved(e){this._beingDragged=e.isDragging&&e.pressedComponent===this}mouseEnter(e){e.isDragging?this._hovered=e.pressedComponent===this:this._hovered=!0,this._hovered&&(document.body.style.cursor=this.mouseCursor)}mouseExit(e){e.isDragging?this._hovered=e.pressedComponent===this:this._hovered=!1}mousePressed(e){}mouseReleased(e){}mouseDragged(e){}clicked(e){}doublePressed(e){}doubleClicked(e){}paint(e){if(this._visible&&this._needRepaint&&Math.floor(this._bounds.width)>0&&Math.floor(this._bounds.height)>0){const t=i.createOffscreenCanvas(Math.ceil(this._bounds.width),Math.ceil(this._bounds.height));this.render(t.getContext("2d")),e.drawImage(t,Math.floor(this._bounds.x),Math.floor(this._bounds.y))}this._children.forEach((t=>t.paint(e))),this._needRepaint=!1}}t.CanvasComponent=i},175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponentHolder=void 0;const r=n(6057),i=n(47);function a(e){return{shift:e.shiftKey,option:e.ctrlKey}}t.RootComponentHolder=class{width;height;rootComponent;canvas;canvasMouseDownListener;documentMouseUpListener;documentMouseMoveListener;constructor(e,t,n){this.width=e,this.height=t,this.rootComponent=n,n.rootHolder=this,this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t,this.initMouseEventListeners()}get renderingContext(){return this.canvas.getContext("2d")}repaint(){this.rootComponent.repaint()}resize(e,t){this.canvas.width=e,this.canvas.height=t,this.rootComponent.setBounds(new i.Rector(0,0,e,t))}initMouseEventListeners(){let e,t,n,i,o,s,l=null,c=null,d=0,u=0,p=!1,h=!1;const f=e=>{const t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.x,y:e.clientY-t.y}},m=(e,t)=>{const n=f(e),r=this.rootComponent.findComponentAt(n);null!=r&&t(r)};this.canvasMouseDownListener=t=>m(t,(i=>{t.preventDefault(),l=i,e=f(t),n=performance.now(),p=!1,h=!0,i.mousePressed({position:e,positionAtMouseDown:e,pressedComponent:i,wasDragged:p,modifiers:a(t),isDragging:h}),null==s||null==o||n>o+400||(0,r.squaredDistance)(s.x,s.y,e.x,e.y)>30?u=1:u++,2==u&&(i.doublePressed({position:e,positionAtMouseDown:e,pressedComponent:i,wasDragged:p,modifiers:a(t),isDragging:h}),u=0)})),this.documentMouseUpListener=r=>{t=f(r),i=performance.now(),null!=l&&(l.mouseReleased({position:t,positionAtMouseDown:e,pressedComponent:l,wasDragged:p,modifiers:a(r),isDragging:h}),i<n+200&&!p&&(s=t,l.clicked({position:t,positionAtMouseDown:e,pressedComponent:l,wasDragged:p,modifiers:a(r),isDragging:h}),null==o||i>o+500?d=1:d++,2!=d||p||(l.doubleClicked({position:t,positionAtMouseDown:e,pressedComponent:l,wasDragged:p,modifiers:a(r),isDragging:h}),d=0)),l=null,o=performance.now()),p=!1,h=!1},this.documentMouseMoveListener=t=>{const{x:n,y:i}=f(t);!p&&null!=e&&(0,r.squaredDistance)(e.x,e.y,n,i)>30&&(p=!0),m(t,(r=>{if(document.body.style.cursor=r.mouseCursor||"default",null!=c&&c!=r){const o={position:{x:n,y:i},positionAtMouseDown:e,wasDragged:p,modifiers:a(t),pressedComponent:l,isDragging:h};c.mouseExit({...o}),r.mouseEnter({...o})}c=r,r.mouseMoved({position:{x:n,y:i},positionAtMouseDown:e,pressedComponent:r,wasDragged:p,modifiers:a(t),isDragging:h})})),t.buttons>0&&null!=l&&(document.body.style.cursor=l.mouseCursor,l.mouseDragged({position:{x:n,y:i},positionAtMouseDown:e,pressedComponent:l,wasDragged:p,modifiers:a(t),isDragging:h}))}}attachMouseEventListeners(){this.canvas.addEventListener("mousedown",this.canvasMouseDownListener),document.addEventListener("mouseup",this.documentMouseUpListener),document.addEventListener("mousemove",this.documentMouseMoveListener)}removeMouseEventListeners(){this.canvas.removeEventListener("mousedown",this.canvasMouseDownListener),document.removeEventListener("mouseup",this.documentMouseUpListener),document.removeEventListener("mousemove",this.documentMouseMoveListener)}}},3303:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(47),t),i(n(7793),t),i(n(175),t),i(n(6057),t)},47:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rector=void 0;class n{x=0;y=0;width=0;height=0;constructor(e=0,t=0,n=0,r=0){this.x=Math.ceil(e),this.y=Math.ceil(t),this.width=Math.ceil(n),this.height=Math.ceil(r)}removeFromLeft(e){e=Math.floor(Math.max(0,Math.min(e,this.width)));const t=new n(this.x,this.y,e,this.height);return this.x+=e,this.width-=e,t}removeFromTop(e){e=Math.floor(Math.max(0,Math.min(e,this.height)));const t=new n(this.x,this.y,this.width,e);return this.y+=e,this.height-=e,t}removeFromBottom(e){e=Math.floor(Math.max(0,Math.min(e,this.height)));const t=new n(this.x,this.height-e,this.width,e);return this.height-=e,t}}t.Rector=n},6057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.squaredDistance=void 0,t.squaredDistance=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)}},2115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomElement=void 0;class n extends HTMLElement{customColors=[];static getCssName(e){return"--"+e.split(/(?=[A-Z])/).join("-").toLowerCase()}registerCustomColor(e,t){const r={name:e,cssName:n.getCssName(e),defaultValue:t,value:t};this.customColors.push(r)}styleChanged(){const e=window.getComputedStyle(this,null);this.customColors.forEach((t=>{t.value=e.getPropertyValue(t.cssName)||t.value}))}}t.CustomElement=n},6963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.EventEmitter=class{all=Object.create(null);on(e,t,n){this.all[e]&&this.all[e].single||(this.all[e]||(this.all[e]=[])).push({handle:t,handler:n})}single(e,t,n){this.all[e]||(this.all[e]||(this.all[e]=[])).push({handle:t,handler:n,single:!0})}emit(e,t){(this.all[e]||[]).slice().map((e=>{e.handler.call(e.handle,t)}))}get(e,t){let n=this.all[e]||[];if(n.length)return n[0].handler.call(n[0].handle,t)}batch(e,t){t=t||[];for(let n of t)this.on(n[0],e,n[1])}off(e,t,n){if(e&&"string"==typeof e&&t&&n&&this.all[e])return this.all[e]=this.all[e].filter((e=>!(e.handle===t&&e.handler===n))),void(this.all[e]&&0==this.all[e].length&&delete this.all[e]);if(e&&"string"==typeof e&&t&&this.all[e]&&void 0===n)return this.all[e]=this.all[e].filter((e=>!(e.handle===t||e.handler===t))),void(this.all[e]&&0==this.all[e].length&&delete this.all[e]);if(e&&"string"!=typeof e&&void 0===t&&void 0===n)for(let t in this.all)this.all[t]=this.all[t].filter((t=>!(t.handle===e||t.handler===e))),this.all[t]&&0==this.all[t].length&&delete this.all[t]}print(){console.log(this.all)}clear(){this.all=Object.create(null)}clearExcept(e){!e&&Array.isArray(e)||(e=[e]);for(let t in this.all)this.all[t]=this.all[t].filter((t=>e.indexOf(t.handle)+1||e.indexOf(t.handler)+1)),this.all[t]&&0==this.all[t].length&&delete this.all[t]}}},3464:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4659),i=new class{async readTextFile(e){const t=new r.Deferred;return fetch(`api/readFile?path=${e}&root=D:/seqtot.github.io/assets`).then((e=>e.text())).then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})),t.promise}async readdir(e){const t=new r.Deferred;return console.log("Path",e),fetch(`api/readdir?path=${e}&root=assets`).then((e=>e.json())).then((e=>{t.resolve(e),console.log("RESULT",e)})).catch((e=>{t.reject(e)})),t.promise}async writeTextFile(e,t){const n=new r.Deferred;return fetch("api/writeFile",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({path:t,text:e})}).then((e=>e.json())).then((e=>{n.resolve(e)})).catch((e=>{n.reject(e)})),n.promise}};t.default=i},4999:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3464),t),i(n(4659),t)},1079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=class{promise;resolve;reject;constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}},4659:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1079),t),i(n(4323),t)},4323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInteger=void 0,t.parseInteger=function(e,t=0){if("number"==typeof e)return e;e=(e||"").toString().trim();const n=parseInt(e,10);return isNaN(n)?t:n}},6214:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopoutLayoutConfig=t.LayoutConfig=t.RootItemConfig=t.RowOrColumnItemConfig=t.ComponentItemConfig=t.StackItemConfig=t.HeaderedItemConfig=t.ItemConfig=void 0;const r=n(4196),i=n(7908),a=n(3226),o=n(3922);var s,l,c,d,u,p,h,f;!function(e){e.resolve=function(e){switch(e.type){case a.ItemType.ground:throw new r.ConfigurationError("ItemConfig cannot specify type ground",JSON.stringify(e));case a.ItemType.row:case a.ItemType.column:return u.resolve(e);case a.ItemType.stack:return c.resolve(e);case a.ItemType.component:return d.resolve(e);default:throw new i.UnreachableCaseError("UCUICR55499",e.type)}},e.resolveContent=function(t){if(void 0===t)return[];{const n=t.length,r=new Array(n);for(let i=0;i<n;i++)r[i]=e.resolve(t[i]);return r}},e.resolveId=function(e){return void 0===e?o.ResolvedItemConfig.defaults.id:Array.isArray(e)?0===e.length?o.ResolvedItemConfig.defaults.id:e[0]:e},e.isGround=function(e){return e.type===a.ItemType.ground},e.isRow=function(e){return e.type===a.ItemType.row},e.isColumn=function(e){return e.type===a.ItemType.column},e.isStack=function(e){return e.type===a.ItemType.stack},e.isComponent=function(e){return e.type===a.ItemType.component}}(s||(t.ItemConfig=s={})),function(e){let t;!function(e){e.resolve=function(e,t){if(void 0!==e||void 0!==t)return{show:e?.show??(void 0===t?void 0:!!t&&o.ResolvedLayoutConfig.Header.defaults.show),popout:e?.popout,maximise:e?.maximise,close:e?.close,minimise:e?.minimise,tabDropdown:e?.tabDropdown}}}(t=e.Header||(e.Header={})),e.resolveIdAndMaximised=function(e){let t,n,r=e.id,i=!1;if(void 0===r)t=o.ResolvedItemConfig.defaults.id;else if(Array.isArray(r)){const e=r.findIndex((e=>"__glMaximised"===e));e>0&&(i=!0,r=r.splice(e,1)),t=r.length>0?r[0]:o.ResolvedItemConfig.defaults.id}else t=r;return n=void 0!==e.maximised?e.maximised:i,{id:t,maximised:n}}}(l||(t.HeaderedItemConfig=l={})),function(e){function t(e){if(void 0===e)return[];{const t=e.length,n=new Array(t);for(let r=0;r<t;r++){const t=e[r],a=s.resolve(t);if(!o.ResolvedItemConfig.isComponentItem(a))throw new i.AssertError("UCUSICRC91114",JSON.stringify(a));n[r]=a}return n}}e.resolve=function(e){const{id:n,maximised:r}=l.resolveIdAndMaximised(e);return{type:a.ItemType.stack,content:t(e.content),width:e.width??o.ResolvedItemConfig.defaults.width,minWidth:e.minWidth??o.ResolvedItemConfig.defaults.minWidth,height:e.height??o.ResolvedItemConfig.defaults.height,minHeight:e.minHeight??o.ResolvedItemConfig.defaults.minHeight,id:n,maximised:r,isClosable:e.isClosable??o.ResolvedItemConfig.defaults.isClosable,activeItemIndex:e.activeItemIndex??o.ResolvedStackItemConfig.defaultActiveItemIndex,header:l.Header.resolve(e.header,e.hasHeaders)}},e.resolveContent=t}(c||(t.StackItemConfig=c={})),function(e){e.resolve=function(t){let n=t.componentType;if(void 0===n&&(n=t.componentName),void 0===n)throw new Error("ComponentItemConfig.componentType is undefined");{const{id:r,maximised:i}=l.resolveIdAndMaximised(t);let a;return a=void 0===t.title||""===t.title?e.componentTypeToTitle(n):t.title,{type:t.type,content:[],width:t.width??o.ResolvedItemConfig.defaults.width,minWidth:t.minWidth??o.ResolvedItemConfig.defaults.minWidth,height:t.height??o.ResolvedItemConfig.defaults.height,minHeight:t.minHeight??o.ResolvedItemConfig.defaults.minHeight,id:r,maximised:i,isClosable:t.isClosable??o.ResolvedItemConfig.defaults.isClosable,reorderEnabled:t.reorderEnabled??o.ResolvedComponentItemConfig.defaultReorderEnabled,title:a,header:l.Header.resolve(t.header,t.hasHeaders),componentType:n,componentState:t.componentState??{}}}},e.componentTypeToTitle=function(e){switch(typeof e){case"string":return e;case"number":case"boolean":return e.toString();default:return""}}}(d||(t.ComponentItemConfig=d={})),function(e){e.isChildItemConfig=function(e){switch(e.type){case a.ItemType.row:case a.ItemType.column:case a.ItemType.stack:case a.ItemType.component:return!0;case a.ItemType.ground:return!1;default:throw new i.UnreachableCaseError("UROCOSPCICIC13687",e.type)}},e.resolve=function(t){return{type:t.type,content:e.resolveContent(t.content),width:t.width??o.ResolvedItemConfig.defaults.width,minWidth:t.width??o.ResolvedItemConfig.defaults.minWidth,height:t.height??o.ResolvedItemConfig.defaults.height,minHeight:t.height??o.ResolvedItemConfig.defaults.minHeight,id:s.resolveId(t.id),isClosable:t.isClosable??o.ResolvedItemConfig.defaults.isClosable}},e.resolveContent=function(t){if(void 0===t)return[];{const n=t.length,a=new Array(n);for(let l=0;l<n;l++){const n=t[l];if(!e.isChildItemConfig(n))throw new r.ConfigurationError("ItemConfig is not Row, Column or Stack",n);{const e=s.resolve(n);if(!o.ResolvedRowOrColumnItemConfig.isChildItemConfig(e))throw new i.AssertError("UROCOSPIC99512",JSON.stringify(e));a[l]=e}}return a}}}(u||(t.RowOrColumnItemConfig=u={})),function(e){e.isRootItemConfig=function(e){switch(e.type){case a.ItemType.row:case a.ItemType.column:case a.ItemType.stack:case a.ItemType.component:return!0;case a.ItemType.ground:return!1;default:throw new i.UnreachableCaseError("URICIR23687",e.type)}},e.resolve=function(e){if(void 0!==e){const t=s.resolve(e);if(o.ResolvedRootItemConfig.isRootItemConfig(t))return t;throw new r.ConfigurationError("ItemConfig is not Row, Column or Stack",JSON.stringify(e))}}}(p||(t.RootItemConfig=p={})),function(e){let t,n,r;function i(e){return"parentId"in e||"indexInParent"in e||"window"in e}!function(e){e.resolve=function(e){return{constrainDragToContainer:e?.constrainDragToContainer??o.ResolvedLayoutConfig.Settings.defaults.constrainDragToContainer,reorderEnabled:e?.reorderEnabled??o.ResolvedLayoutConfig.Settings.defaults.reorderEnabled,popoutWholeStack:e?.popoutWholeStack??o.ResolvedLayoutConfig.Settings.defaults.popoutWholeStack,blockedPopoutsThrowError:e?.blockedPopoutsThrowError??o.ResolvedLayoutConfig.Settings.defaults.blockedPopoutsThrowError,closePopoutsOnUnload:e?.closePopoutsOnUnload??o.ResolvedLayoutConfig.Settings.defaults.closePopoutsOnUnload,responsiveMode:e?.responsiveMode??o.ResolvedLayoutConfig.Settings.defaults.responsiveMode,tabOverlapAllowance:e?.tabOverlapAllowance??o.ResolvedLayoutConfig.Settings.defaults.tabOverlapAllowance,reorderOnTabMenuClick:e?.reorderOnTabMenuClick??o.ResolvedLayoutConfig.Settings.defaults.reorderOnTabMenuClick,tabControlOffset:e?.tabControlOffset??o.ResolvedLayoutConfig.Settings.defaults.tabControlOffset,popInOnClose:e?.popInOnClose??o.ResolvedLayoutConfig.Settings.defaults.popInOnClose}}}(t=e.Settings||(e.Settings={})),function(e){e.resolve=function(e){return{borderWidth:e?.borderWidth??o.ResolvedLayoutConfig.Dimensions.defaults.borderWidth,borderGrabWidth:e?.borderGrabWidth??o.ResolvedLayoutConfig.Dimensions.defaults.borderGrabWidth,minItemHeight:e?.minItemHeight??o.ResolvedLayoutConfig.Dimensions.defaults.minItemHeight,minItemWidth:e?.minItemWidth??o.ResolvedLayoutConfig.Dimensions.defaults.minItemWidth,headerHeight:e?.headerHeight??o.ResolvedLayoutConfig.Dimensions.defaults.headerHeight,dragProxyWidth:e?.dragProxyWidth??o.ResolvedLayoutConfig.Dimensions.defaults.dragProxyWidth,dragProxyHeight:e?.dragProxyHeight??o.ResolvedLayoutConfig.Dimensions.defaults.dragProxyHeight}}}(n=e.Dimensions||(e.Dimensions={})),function(e){e.resolve=function(e,t,n){let r;return r=void 0!==e?.show?e.show:void 0!==t&&void 0!==t.hasHeaders?!!t.hasHeaders&&o.ResolvedLayoutConfig.Header.defaults.show:o.ResolvedLayoutConfig.Header.defaults.show,{show:r,popout:e?.popout??n?.popout??(!1!==t?.showPopoutIcon&&o.ResolvedLayoutConfig.Header.defaults.popout),dock:e?.popin??n?.popin??o.ResolvedLayoutConfig.Header.defaults.dock,maximise:e?.maximise??n?.maximise??(!1!==t?.showMaximiseIcon&&o.ResolvedLayoutConfig.Header.defaults.maximise),close:e?.close??n?.close??(!1!==t?.showCloseIcon&&o.ResolvedLayoutConfig.Header.defaults.close),minimise:e?.minimise??n?.minimise??o.ResolvedLayoutConfig.Header.defaults.minimise,tabDropdown:e?.tabDropdown??n?.tabDropdown??o.ResolvedLayoutConfig.Header.defaults.tabDropdown}}}(r=e.Header||(e.Header={})),e.isPopout=i,e.resolve=function(t){if(i(t))return f.resolve(t);{let n;return n=void 0!==t.root?t.root:void 0!==t.content&&t.content.length>0?t.content[0]:void 0,{resolved:!0,root:p.resolve(n),openPopouts:e.resolveOpenPopouts(t.openPopouts),dimensions:e.Dimensions.resolve(t.dimensions),settings:e.Settings.resolve(t.settings),header:e.Header.resolve(t.header,t.settings,t.labels)}}},e.fromResolved=function(e){const t=o.ResolvedLayoutConfig.createCopy(e);return{root:t.root,openPopouts:t.openPopouts,dimensions:t.dimensions,settings:t.settings,header:t.header}},e.isResolved=function(e){const t=e;return void 0!==t.resolved&&!0===t.resolved},e.resolveOpenPopouts=function(e){if(void 0===e)return[];{const t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=f.resolve(e[r]);return n}}}(h||(t.LayoutConfig=h={})),function(e){let t;!function(e){e.resolve=function(e,t){let n;const r=o.ResolvedPopoutLayoutConfig.Window.defaults;return n=void 0!==e?{width:e.width??r.width,height:e.height??r.height,left:e.left??r.left,top:e.top??r.top}:{width:t?.width??r.width,height:t?.height??r.height,left:t?.left??r.left,top:t?.top??r.top},n}}(t=e.Window||(e.Window={})),e.resolve=function(t){let n;return n=void 0!==t.root?t.root:void 0!==t.content&&t.content.length>0?t.content[0]:void 0,{root:p.resolve(n),openPopouts:h.resolveOpenPopouts(t.openPopouts),settings:h.Settings.resolve(t.settings),dimensions:h.Dimensions.resolve(t.dimensions),header:h.Header.resolve(t.header,t.settings,t.labels),parentId:t.parentId??null,indexInParent:t.indexInParent??null,window:e.Window.resolve(t.window,t.dimensions),resolved:!0}}}(f||(t.PopoutLayoutConfig=f={}))},3922:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvedPopoutLayoutConfig=t.ResolvedLayoutConfig=t.ResolvedGroundItemConfig=t.ResolvedRootItemConfig=t.ResolvedRowOrColumnItemConfig=t.ResolvedComponentItemConfig=t.ResolvedStackItemConfig=t.ResolvedHeaderedItemConfig=t.ResolvedItemConfig=void 0;const r=n(7908),i=n(9614),a=n(3226),o=n(2430);var s,l,c,d,u,p,h,f,m;!function(e){e.defaults={type:a.ItemType.ground,content:[],width:50,minWidth:0,height:50,minHeight:0,id:"",isClosable:!0},e.createCopy=function(e,t){switch(e.type){case a.ItemType.ground:case a.ItemType.row:case a.ItemType.column:return u.createCopy(e,t);case a.ItemType.stack:return c.createCopy(e,t);case a.ItemType.component:return d.createCopy(e);default:throw new r.UnreachableCaseError("CICC91354",e.type,"Invalid Config Item type specified")}},e.createDefault=function(e){switch(e){case a.ItemType.ground:throw new r.AssertError("CICCDR91562");case a.ItemType.row:case a.ItemType.column:return u.createDefault(e);case a.ItemType.stack:return c.createDefault();case a.ItemType.component:return d.createDefault();default:throw new r.UnreachableCaseError("CICCDD91563",e,"Invalid Config Item type specified")}},e.isComponentItem=function(e){return e.type===a.ItemType.component},e.isStackItem=function(e){return e.type===a.ItemType.stack},e.isGroundItem=function(e){return e.type===a.ItemType.ground}}(s||(t.ResolvedItemConfig=s={})),function(e){let t;e.defaultMaximised=!1,function(e){e.createCopy=function(e,t){return void 0===e?void 0:{show:t??e.show,popout:e.popout,close:e.close,maximise:e.maximise,minimise:e.minimise,tabDropdown:e.tabDropdown}}}(t=e.Header||(e.Header={}))}(l||(t.ResolvedHeaderedItemConfig=l={})),function(e){function t(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=s.createCopy(e[r]);return n}e.defaultActiveItemIndex=0,e.createCopy=function(e,n){return{type:e.type,content:t(void 0!==n?n:e.content),width:e.width,minWidth:e.minWidth,height:e.height,minHeight:e.minHeight,id:e.id,maximised:e.maximised,isClosable:e.isClosable,activeItemIndex:e.activeItemIndex,header:l.Header.createCopy(e.header)}},e.copyContent=t,e.createDefault=function(){return{type:a.ItemType.stack,content:[],width:s.defaults.width,minWidth:s.defaults.minWidth,height:s.defaults.height,minHeight:s.defaults.minHeight,id:s.defaults.id,maximised:l.defaultMaximised,isClosable:s.defaults.isClosable,activeItemIndex:e.defaultActiveItemIndex,header:void 0}}}(c||(t.ResolvedStackItemConfig=c={})),function(e){e.defaultReorderEnabled=!0,e.resolveComponentTypeName=function(e){const t=e.componentType;return"string"==typeof t?t:void 0},e.createCopy=function(e){return{type:e.type,content:[],width:e.width,minWidth:e.minWidth,height:e.height,minHeight:e.minHeight,id:e.id,maximised:e.maximised,isClosable:e.isClosable,reorderEnabled:e.reorderEnabled,title:e.title,header:l.Header.createCopy(e.header),componentType:e.componentType,componentState:(0,o.deepExtendValue)(void 0,e.componentState)}},e.createDefault=function(t="",n,r=""){return{type:a.ItemType.component,content:[],width:s.defaults.width,minWidth:s.defaults.minWidth,height:s.defaults.height,minHeight:s.defaults.minHeight,id:s.defaults.id,maximised:l.defaultMaximised,isClosable:s.defaults.isClosable,reorderEnabled:e.defaultReorderEnabled,title:r,header:void 0,componentType:t,componentState:n}},e.copyComponentType=function(e){return(0,o.deepExtendValue)({},e)}}(d||(t.ResolvedComponentItemConfig=d={})),function(e){function t(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=s.createCopy(e[r]);return n}e.isChildItemConfig=function(e){switch(e.type){case a.ItemType.row:case a.ItemType.column:case a.ItemType.stack:case a.ItemType.component:return!0;case a.ItemType.ground:return!1;default:throw new r.UnreachableCaseError("CROCOSPCICIC13687",e.type)}},e.createCopy=function(e,n){return{type:e.type,content:t(void 0!==n?n:e.content),width:e.width,minWidth:e.minWidth,height:e.height,minHeight:e.minHeight,id:e.id,isClosable:e.isClosable}},e.copyContent=t,e.createDefault=function(e){return{type:e,content:[],width:s.defaults.width,minWidth:s.defaults.minWidth,height:s.defaults.height,minHeight:s.defaults.minHeight,id:s.defaults.id,isClosable:s.defaults.isClosable}}}(u||(t.ResolvedRowOrColumnItemConfig=u={})),function(e){e.createCopy=function(e){return s.createCopy(e)},e.isRootItemConfig=function(e){switch(e.type){case a.ItemType.row:case a.ItemType.column:case a.ItemType.stack:case a.ItemType.component:return!0;case a.ItemType.ground:return!1;default:throw new r.UnreachableCaseError("CROCOSPCICIC13687",e.type)}}}(p||(t.ResolvedRootItemConfig=p={})),function(e){e.create=function(e){const t=void 0===e?[]:[e];return{type:a.ItemType.ground,content:t,width:100,minWidth:0,height:100,minHeight:0,id:"",isClosable:!1,title:"",reorderEnabled:!1}}}(h||(t.ResolvedGroundItemConfig=h={})),function(e){let t,n,r;function o(e){return"parentId"in e}!function(e){e.defaults={constrainDragToContainer:!0,reorderEnabled:!0,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,responsiveMode:a.ResponsiveMode.none,tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10,popInOnClose:!1},e.createCopy=function(e){return{constrainDragToContainer:e.constrainDragToContainer,reorderEnabled:e.reorderEnabled,popoutWholeStack:e.popoutWholeStack,blockedPopoutsThrowError:e.blockedPopoutsThrowError,closePopoutsOnUnload:e.closePopoutsOnUnload,responsiveMode:e.responsiveMode,tabOverlapAllowance:e.tabOverlapAllowance,reorderOnTabMenuClick:e.reorderOnTabMenuClick,tabControlOffset:e.tabControlOffset,popInOnClose:e.popInOnClose}}}(t=e.Settings||(e.Settings={})),function(e){e.createCopy=function(e){return{borderWidth:e.borderWidth,borderGrabWidth:e.borderGrabWidth,minItemHeight:e.minItemHeight,minItemWidth:e.minItemWidth,headerHeight:e.headerHeight,dragProxyWidth:e.dragProxyWidth,dragProxyHeight:e.dragProxyHeight}},e.defaults={borderWidth:5,borderGrabWidth:5,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200}}(n=e.Dimensions||(e.Dimensions={})),function(e){e.createCopy=function(e){return{show:e.show,popout:e.popout,dock:e.dock,close:e.close,maximise:e.maximise,minimise:e.minimise,tabDropdown:e.tabDropdown}},e.defaults={show:a.Side.top,popout:"open in new window",dock:"dock",maximise:"maximise",minimise:"minimise",close:"close",tabDropdown:"additional tabs"}}(r=e.Header||(e.Header={})),e.isPopout=o,e.createDefault=function(){return{root:void 0,openPopouts:[],dimensions:e.Dimensions.defaults,settings:e.Settings.defaults,header:e.Header.defaults,resolved:!0}},e.createCopy=function(t){return o(t)?m.createCopy(t):{root:void 0===t.root?void 0:p.createCopy(t.root),openPopouts:e.copyOpenPopouts(t.openPopouts),settings:e.Settings.createCopy(t.settings),dimensions:e.Dimensions.createCopy(t.dimensions),header:e.Header.createCopy(t.header),resolved:t.resolved}},e.copyOpenPopouts=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=m.createCopy(e[r]);return n},e.minifyConfig=function(e){return i.ConfigMinifier.translateObject(e,!0)},e.unminifyConfig=function(e){return i.ConfigMinifier.translateObject(e,!1)}}(f||(t.ResolvedLayoutConfig=f={})),function(e){let t;!function(e){e.createCopy=function(e){return{width:e.width,height:e.height,left:e.left,top:e.top}},e.defaults={width:null,height:null,left:null,top:null}}(t=e.Window||(e.Window={})),e.createCopy=function(t){return{root:void 0===t.root?void 0:p.createCopy(t.root),openPopouts:f.copyOpenPopouts(t.openPopouts),settings:f.Settings.createCopy(t.settings),dimensions:f.Dimensions.createCopy(t.dimensions),header:f.Header.createCopy(t.header),parentId:t.parentId,indexInParent:t.indexInParent,window:e.Window.createCopy(t.window),resolved:t.resolved}}}(m||(t.ResolvedPopoutLayoutConfig=m={}))},9372:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentContainer=void 0;const r=n(6214),i=n(7908),a=n(1642),o=n(6665),s=n(3226),l=n(2430);class c extends a.EventEmitter{_config;_parent;_layoutManager;_element;_updateItemConfigEvent;_showEvent;_hideEvent;_focusEvent;_blurEvent;_componentType;_boundComponent;_width;_height;_isClosable;_initialState;_state;_visible;_isShownWithZeroDimensions;_tab;_stackMaximised=!1;stateRequestEvent;virtualRectingRequiredEvent;virtualVisibilityChangeRequiredEvent;virtualZIndexChangeRequiredEvent;get width(){return this._width}get height(){return this._height}get parent(){return this._parent}get componentName(){return this._componentType}get componentType(){return this._componentType}get virtual(){return this._boundComponent.virtual}get component(){return this._boundComponent.component}get tab(){return this._tab}get title(){return this._parent.title}get layoutManager(){return this._layoutManager}get isHidden(){return!this._visible}get visible(){return this._visible}get state(){return this._state}get initialState(){return this._initialState}get element(){return this._element}constructor(e,t,n,r,i,a,o,s,l){super(),this._config=e,this._parent=t,this._layoutManager=n,this._element=r,this._updateItemConfigEvent=i,this._showEvent=a,this._hideEvent=o,this._focusEvent=s,this._blurEvent=l,this._width=0,this._height=0,this._visible=!0,this._isShownWithZeroDimensions=!0,this._componentType=e.componentType,this._isClosable=e.isClosable,this._initialState=e.componentState,this._state=this._initialState,this._boundComponent=this.layoutManager.bindComponent(this,e),this.updateElementPositionPropertyFromBoundComponent()}destroy(){this.releaseComponent(),this.stateRequestEvent=void 0,this.emit("destroy")}getElement(){return this._element}hide(){this._hideEvent()}show(){this._showEvent()}focus(e=!1){this._focusEvent(e)}blur(e=!1){this._blurEvent(e)}setSize(e,t){let n=this._parent;if(n.isColumn||n.isRow||null===n.parent)throw new i.AssertError("ICSSPRC","ComponentContainer cannot have RowColumn Parent");{let r;do{r=n,n=n.parent}while(null!==n&&!n.isColumn&&!n.isRow);if(null===n)return!1;{const a=n.isColumn?"height":"width",o=this[a];if(null===o)throw new i.UnexpectedNullError("ICSSCS11194");{const i=("height"===a?t:e)/(o*(1/(r[a]/100)))*100,s=(r[a]-i)/(n.contentItems.length-1);for(let e=0;e<n.contentItems.length;e++)n.contentItems[e]===r?n.contentItems[e][a]=i:n.contentItems[e][a]+=s;return n.updateSize(),!0}}}}close(){this._isClosable&&(this.emit("close"),this._parent.close())}replaceComponent(e){if(this.releaseComponent(),!r.ItemConfig.isComponent(e))throw new Error("ReplaceComponent not passed a component ItemConfig");{const t=r.ComponentItemConfig.resolve(e);this._initialState=t.componentState,this._state=this._initialState,this._componentType=t.componentType,this._updateItemConfigEvent(t),this._boundComponent=this.layoutManager.bindComponent(this,t),this.updateElementPositionPropertyFromBoundComponent(),this.emit("stateChanged")}}getState(){return this._state}extendState(e){const t=(0,l.deepExtend)(this._state,e);this.setState(t)}setState(e){this._state=e,this._parent.emitBaseBubblingEvent("stateChanged")}setTitle(e){this._parent.setTitle(e)}setTab(e){this._tab=e,this.emit("tab",e)}setVisibility(e){this._boundComponent.virtual&&void 0!==this.virtualVisibilityChangeRequiredEvent&&this.virtualVisibilityChangeRequiredEvent(this,e),e?this._visible?!this._isShownWithZeroDimensions||0===this._height&&0===this._width||(this._isShownWithZeroDimensions=!1,this.setSizeToNodeSize(this._width,this._height,!0),this.emitShow()):(this._visible=!0,0===this._height&&0===this._width?this._isShownWithZeroDimensions=!0:(this._isShownWithZeroDimensions=!1,this.setSizeToNodeSize(this._width,this._height,!0),this.emitShow())):this._visible&&(this._visible=!1,this._isShownWithZeroDimensions=!1,this.emitHide())}enterDragMode(e,t){this._width=e,this._height=t,(0,l.setElementWidth)(this._element,e),(0,l.setElementHeight)(this._element,t),void 0!==this.virtualZIndexChangeRequiredEvent&&this.virtualZIndexChangeRequiredEvent(this,s.LogicalZIndex.drag,o.StyleConstants.defaultComponentDragZIndex),this.drag()}exitDragMode(){void 0!==this.virtualZIndexChangeRequiredEvent&&this.virtualZIndexChangeRequiredEvent(this,s.LogicalZIndex.base,o.StyleConstants.defaultComponentBaseZIndex)}enterStackMaximised(){this._stackMaximised=!0,void 0!==this.virtualZIndexChangeRequiredEvent&&this.virtualZIndexChangeRequiredEvent(this,s.LogicalZIndex.stackMaximised,o.StyleConstants.defaultComponentStackMaximisedZIndex)}exitStackMaximised(){void 0!==this.virtualZIndexChangeRequiredEvent&&this.virtualZIndexChangeRequiredEvent(this,s.LogicalZIndex.base,o.StyleConstants.defaultComponentBaseZIndex),this._stackMaximised=!1}drag(){if(this._boundComponent.virtual&&void 0!==this.virtualRectingRequiredEvent){this._layoutManager.fireBeforeVirtualRectingEvent(1);try{this.virtualRectingRequiredEvent(this,this._width,this._height)}finally{this._layoutManager.fireAfterVirtualRectingEvent()}}}setSizeToNodeSize(e,t,n){(e!==this._width||t!==this._height||n)&&(this._width=e,this._height=t,(0,l.setElementWidth)(this._element,e),(0,l.setElementHeight)(this._element,t),this._boundComponent.virtual?this.addVirtualSizedContainerToLayoutManager():(this.emit("resize"),this.checkShownFromZeroDimensions()))}notifyVirtualRectingRequired(){void 0!==this.virtualRectingRequiredEvent&&(this.virtualRectingRequiredEvent(this,this._width,this._height),this.emit("resize"),this.checkShownFromZeroDimensions())}updateElementPositionPropertyFromBoundComponent(){this._boundComponent.virtual?this._element.style.position="static":this._element.style.position=""}addVirtualSizedContainerToLayoutManager(){this._layoutManager.beginVirtualSizedContainerAdding();try{this._layoutManager.addVirtualSizedContainer(this)}finally{this._layoutManager.endVirtualSizedContainerAdding()}}checkShownFromZeroDimensions(){!this._isShownWithZeroDimensions||0===this._height&&0===this._width||(this._isShownWithZeroDimensions=!1,this.emitShow())}emitShow(){this.emit("shown"),this.emit("show")}emitHide(){this.emit("hide")}releaseComponent(){this._stackMaximised&&this.exitStackMaximised(),this.emit("beforeComponentRelease",this._boundComponent.component),this.layoutManager.unbindComponent(this,this._boundComponent.virtual,this._boundComponent.component)}}t.ComponentContainer=c},7322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserPopout=void 0;const r=n(3922),i=n(4196),a=n(7908),o=n(1642),s=n(2430);class l extends o.EventEmitter{_config;_initialWindowSize;_layoutManager;_popoutWindow;_isInitialised;_checkReadyInterval;constructor(e,t,n){super(),this._config=e,this._initialWindowSize=t,this._layoutManager=n,this._isInitialised=!1,this._popoutWindow=null,this.createWindow()}toConfig(){if(!1===this._isInitialised)throw new Error("Can't create config, layout not yet initialised");const e=this.getGlInstance().saveLayout();let t,n;null===this._popoutWindow?(t=null,n=null):(t=this._popoutWindow.screenX??this._popoutWindow.screenLeft,n=this._popoutWindow.screenY??this._popoutWindow.screenTop);const r={width:this.getGlInstance().width,height:this.getGlInstance().height,left:t,top:n};return{root:e.root,openPopouts:e.openPopouts,settings:e.settings,dimensions:e.dimensions,header:e.header,window:r,parentId:this._config.parentId,indexInParent:this._config.indexInParent,resolved:!0}}getGlInstance(){if(null===this._popoutWindow)throw new a.UnexpectedNullError("BPGGI24693");return this._popoutWindow.__glInstance}getWindow(){if(null===this._popoutWindow)throw new a.UnexpectedNullError("BPGW087215");return this._popoutWindow}close(){if(this.getGlInstance())this.getGlInstance().closeWindow();else try{this.getWindow().close()}catch(e){}}popIn(){let e,t=this._config.indexInParent;if(!this._config.parentId)return;const n=this.getGlInstance().saveLayout(),r=(0,s.deepExtend)({},n).root;if(void 0===r)throw new a.UnexpectedUndefinedError("BPPIR19998");const i=this._layoutManager.groundItem;if(void 0===i)throw new a.UnexpectedUndefinedError("BPPIG34972");e=i.getItemsByPopInParentId(this._config.parentId)[0],e||(e=i.contentItems.length>0?i.contentItems[0]:i,t=0);const o=this._layoutManager.createAndInitContentItem(r,e);e.addChild(o,t),this._layoutManager.layoutConfig.settings.popInOnClose?this._onClose():this.close()}createWindow(){const e=this.createUrl(),t=Math.floor(1e6*Math.random()).toString(36),n=this.serializeWindowFeatures({width:this._initialWindowSize.width,height:this._initialWindowSize.height,innerWidth:this._initialWindowSize.width,innerHeight:this._initialWindowSize.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=globalThis.open(e,t,n),this._popoutWindow)this._popoutWindow.addEventListener("load",(()=>this.positionWindow()),{passive:!0}),this._popoutWindow.addEventListener("beforeunload",(()=>{this._layoutManager.layoutConfig.settings.popInOnClose?this.popIn():this._onClose()}),{passive:!0}),this._checkReadyInterval=setInterval((()=>this.checkReady()),10);else if(!0===this._layoutManager.layoutConfig.settings.blockedPopoutsThrowError)throw new i.PopoutBlockedError("Popout blocked")}checkReady(){if(null===this._popoutWindow)throw new a.UnexpectedNullError("BPCR01844");this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this.onInitialised(),void 0!==this._checkReadyInterval&&(clearInterval(this._checkReadyInterval),this._checkReadyInterval=void 0))}serializeWindowFeatures(e){const t=[];for(const n in e)t.push(n+"="+e[n].toString());return t.join(",")}createUrl(){const e="gl-window-config-"+(0,s.getUniqueId)(),t=r.ResolvedLayoutConfig.minifyConfig(this._config);try{localStorage.setItem(e,JSON.stringify(t))}catch(e){throw new Error("Error while writing to localStorage "+e.toString())}const n=new URL(location.href);return n.searchParams.set("gl-window",e),n.toString()}positionWindow(){if(null===this._popoutWindow)throw new Error("BrowserPopout.positionWindow: null popoutWindow");this._popoutWindow.moveTo(this._initialWindowSize.left,this._initialWindowSize.top),this._popoutWindow.focus()}onInitialised(){this._isInitialised=!0,this.getGlInstance().on("popIn",(()=>this.popIn())),this.emit("initialised")}_onClose(){setTimeout((()=>this.emit("closed")),50)}}t.BrowserPopout=l},5894:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragProxy=void 0;const r=n(7908),i=n(5585),a=n(1642),o=n(4815),s=n(3226),l=n(2430);class c extends a.EventEmitter{_dragListener;_layoutManager;_componentItem;_originalParent;_area=null;_lastValidArea=null;_minX;_minY;_maxX;_maxY;_sided;_element;_proxyContainerElement;_componentItemFocused;get element(){return this._element}constructor(e,t,n,i,a,o){if(super(),this._dragListener=n,this._layoutManager=i,this._componentItem=a,this._originalParent=o,this._dragListener.on("drag",((e,t,n)=>this.onDrag(e,t,n))),this._dragListener.on("dragStop",(()=>this.onDrop())),this.createDragProxyElements(e,t),null===this._componentItem.parent)throw new r.UnexpectedNullError("DPC10097");if(this._componentItemFocused=this._componentItem.focused,this._componentItemFocused&&this._componentItem.blur(),this._componentItem.parent.removeChild(this._componentItem,!0),this.setDimensions(),document.body.appendChild(this._element),this.determineMinMaxXY(),this._layoutManager.layoutConfig.settings.constrainDragToContainer){const n=this.getXYWithinMinMax(e,t);e=n.x,t=n.y}this._layoutManager.calculateItemAreas(),this.setDropPosition(e,t)}createDragProxyElements(e,t){this._element=document.createElement("div"),this._element.classList.add("lm_dragProxy");const n=document.createElement("div");n.classList.add("lm_header");const r=document.createElement("div");r.classList.add("lm_tabs");const a=document.createElement("div");a.classList.add("lm_tab");const o=document.createElement("span");o.classList.add("lm_title"),a.appendChild(o),r.appendChild(a),n.appendChild(r),this._proxyContainerElement=document.createElement("div"),this._proxyContainerElement.classList.add("lm_content"),this._element.appendChild(n),this._element.appendChild(this._proxyContainerElement),this._originalParent instanceof i.Stack&&this._originalParent.headerShow&&(this._sided=this._originalParent.headerLeftRightSided,this._element.classList.add("lm_"+this._originalParent.headerSide),[s.Side.right,s.Side.bottom].indexOf(this._originalParent.headerSide)>=0&&this._proxyContainerElement.insertAdjacentElement("afterend",n)),this._element.style.left=(0,l.numberToPixels)(e),this._element.style.top=(0,l.numberToPixels)(t),a.setAttribute("title",this._componentItem.title),o.insertAdjacentText("afterbegin",this._componentItem.title),this._proxyContainerElement.appendChild(this._componentItem.element)}determineMinMaxXY(){const e=(0,o.getJQueryOffset)(this._layoutManager.container);this._minX=e.left,this._minY=e.top;const{width:t,height:n}=(0,l.getElementWidthAndHeight)(this._layoutManager.container);this._maxX=t+this._minX,this._maxY=n+this._minY}getXYWithinMinMax(e,t){return e<=this._minX?e=Math.ceil(this._minX+1):e>=this._maxX&&(e=Math.floor(this._maxX-1)),t<=this._minY?t=Math.ceil(this._minY+1):t>=this._maxY&&(t=Math.floor(this._maxY-1)),{x:e,y:t}}onDrag(e,t,n){const r=n.pageX,i=n.pageY;this._layoutManager.layoutConfig.settings.constrainDragToContainer?r>this._minX&&r<this._maxX&&i>this._minY&&i<this._maxY&&this.setDropPosition(r,i):this.setDropPosition(r,i),this._componentItem.drag()}setDropPosition(e,t){this._element.style.left=(0,l.numberToPixels)(e),this._element.style.top=(0,l.numberToPixels)(t),this._area=this._layoutManager.getArea(e,t),null!==this._area&&(this._lastValidArea=this._area,this._area.contentItem.highlightDropZone(e,t,this._area))}onDrop(){const e=this._layoutManager.dropTargetIndicator;if(null===e)throw new r.UnexpectedNullError("DPOD30011");let t;e.hide(),this._componentItem.exitDragMode(),null!==this._area?(t=this._componentItem,this._area.contentItem.onDrop(t,this._area)):null!==this._lastValidArea?(t=this._componentItem,this._lastValidArea.contentItem.onDrop(t,this._lastValidArea)):this._originalParent?(t=this._componentItem,this._originalParent.addChild(t)):this._componentItem.destroy(),this._element.remove(),this._layoutManager.emit("itemDropped",this._componentItem),this._componentItemFocused&&void 0!==t&&t.focus()}setDimensions(){const e=this._layoutManager.layoutConfig.dimensions;if(void 0===e)throw new Error("DragProxy.setDimensions: dimensions undefined");let t=e.dragProxyWidth,n=e.dragProxyHeight;if(void 0===t||void 0===n)throw new Error("DragProxy.setDimensions: width and/or height undefined");const r=!1===this._layoutManager.layoutConfig.header.show?0:e.headerHeight;this._element.style.width=(0,l.numberToPixels)(t),this._element.style.height=(0,l.numberToPixels)(n),t-=this._sided?r:0,n-=this._sided?0:r,this._proxyContainerElement.style.width=(0,l.numberToPixels)(t),this._proxyContainerElement.style.height=(0,l.numberToPixels)(n),this._componentItem.enterDragMode(t,n),this._componentItem.show()}}t.DragProxy=c},607:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragSource=void 0;const r=n(6214),i=n(7908),a=n(1940),o=n(46),s=n(7597),l=n(5894),c=n(3922);t.DragSource=class{_layoutManager;_element;_extraAllowableChildTargets;_componentTypeOrFtn;_componentState;_title;_dragListener;_dummyGroundContainer;_dummyGroundContentItem;constructor(e,t,n,r,i,a){this._layoutManager=e,this._element=t,this._extraAllowableChildTargets=n,this._componentTypeOrFtn=r,this._componentState=i,this._title=a,this._dragListener=null,this._dummyGroundContainer=document.createElement("div");const s=c.ResolvedRowOrColumnItemConfig.createDefault("row");this._dummyGroundContentItem=new o.GroundItem(this._layoutManager,s,this._dummyGroundContainer),this.createDragListener()}destroy(){this.removeDragListener()}createDragListener(){this.removeDragListener(),this._dragListener=new s.DragListener(this._element,this._extraAllowableChildTargets),this._dragListener.on("dragStart",((e,t)=>this.onDragStart(e,t))),this._dragListener.on("dragStop",(()=>this.onDragStop()))}onDragStart(e,t){let n,o,s;if("function"==typeof this._componentTypeOrFtn){const e=this._componentTypeOrFtn();n=e.type,o=e.state,s=e.title}else n=this._componentTypeOrFtn,o=this._componentState,s=this._title;const c={type:"component",componentType:n,componentState:o,title:s},d=r.ComponentItemConfig.resolve(c),u=new a.ComponentItem(this._layoutManager,d,this._dummyGroundContentItem);if(this._dummyGroundContentItem.contentItems.push(u),null===this._dragListener)throw new i.UnexpectedNullError("DSODSD66746");{const n=new l.DragProxy(e,t,this._dragListener,this._layoutManager,u,this._dummyGroundContentItem),r=this._layoutManager.transitionIndicator;if(null===r)throw new i.UnexpectedNullError("DSODST66746");r.transitionElements(this._element,n.element)}}onDragStop(){this.createDragListener()}removeDragListener(){null!==this._dragListener&&(this._dragListener.destroy(),this._dragListener=null)}}},9478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropTargetIndicator=void 0;const r=n(2430);t.DropTargetIndicator=class{_element;constructor(){this._element=document.createElement("div"),this._element.classList.add("lm_dropTargetIndicator");const e=document.createElement("div");e.classList.add("lm_inner"),this._element.appendChild(e),document.body.appendChild(this._element)}destroy(){this._element.remove()}highlightArea(e){this._element.style.left=(0,r.numberToPixels)(e.x1),this._element.style.top=(0,r.numberToPixels)(e.y1),this._element.style.width=(0,r.numberToPixels)(e.x2-e.x1),this._element.style.height=(0,r.numberToPixels)(e.y2-e.y1),this._element.style.display="block"}hide(){(0,r.setElementDisplayVisibility)(this._element,!1)}}},1941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderButton=void 0,t.HeaderButton=class{_header;_pushEvent;_element;_clickEventListener=e=>this.onClick(e);_touchStartEventListener=e=>this.onTouchStart(e);get element(){return this._element}constructor(e,t,n,r){this._header=e,this._pushEvent=r,this._element=document.createElement("div"),this._element.classList.add(n),this._element.title=t,this._header.on("destroy",(()=>this.destroy())),this._element.addEventListener("click",this._clickEventListener,{passive:!0}),this._element.addEventListener("touchstart",this._touchStartEventListener,{passive:!0}),this._header.controlsContainerElement.appendChild(this._element)}destroy(){this._element.removeEventListener("click",this._clickEventListener),this._element.removeEventListener("touchstart",this._touchStartEventListener),this._element.parentNode?.removeChild(this._element)}onClick(e){this._pushEvent(e)}onTouchStart(e){this._pushEvent(e)}}},1810:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const r=n(7908),i=n(1642),a=n(3226),o=n(2430),s=n(1941),l=n(4197);class c extends i.EventEmitter{_layoutManager;_parent;_configClosable;_getActiveComponentItemEvent;_popoutEvent;_maximiseToggleEvent;_clickEvent;_touchStartEvent;_componentRemoveEvent;_componentFocusEvent;_componentDragStartEvent;_tabsContainer;_element;_controlsContainerElement;_show;_popoutEnabled;_popoutLabel;_maximiseEnabled;_maximiseLabel;_minimiseEnabled;_minimiseLabel;_closeEnabled;_closeLabel;_tabDropdownEnabled;_tabDropdownLabel;_tabControlOffset;_clickListener=e=>this.onClick(e);_touchStartListener=e=>this.onTouchStart(e);_documentMouseUpListener;_rowColumnClosable=!0;_canRemoveComponent;_side;_leftRightSided;_closeButton=null;_popoutButton=null;_tabDropdownButton;_maximiseButton;get show(){return this._show}get side(){return this._side}get leftRightSided(){return this._leftRightSided}get layoutManager(){return this._layoutManager}get parent(){return this._parent}get tabs(){return this._tabsContainer.tabs}get lastVisibleTabIndex(){return this._tabsContainer.lastVisibleTabIndex}get activeContentItem(){const e=this._getActiveComponentItemEvent();return void 0===e?null:e}get element(){return this._element}get tabsContainer(){return this._tabsContainer.element}get tabsContainerElement(){return this._tabsContainer.element}get controlsContainerElement(){return this._controlsContainerElement}get controlsContainer(){return this._controlsContainerElement}constructor(e,t,n,r,i,a,o,c,d,u,p,h,f){super(),this._layoutManager=e,this._parent=t,this._configClosable=r,this._getActiveComponentItemEvent=i,this._popoutEvent=o,this._maximiseToggleEvent=c,this._clickEvent=d,this._touchStartEvent=u,this._componentRemoveEvent=p,this._componentFocusEvent=h,this._componentDragStartEvent=f,this._tabsContainer=new l.TabsContainer(this._layoutManager,(e=>this.handleTabInitiatedComponentRemoveEvent(e)),(e=>this.handleTabInitiatedComponentFocusEvent(e)),((e,t,n,r)=>this.handleTabInitiatedDragStartEvent(e,t,n,r)),(()=>this.processTabDropdownActiveChanged())),this._show=n.show,this._popoutEnabled=n.popoutEnabled,this._popoutLabel=n.popoutLabel,this._maximiseEnabled=n.maximiseEnabled,this._maximiseLabel=n.maximiseLabel,this._minimiseEnabled=n.minimiseEnabled,this._minimiseLabel=n.minimiseLabel,this._closeEnabled=n.closeEnabled,this._closeLabel=n.closeLabel,this._tabDropdownEnabled=n.tabDropdownEnabled,this._tabDropdownLabel=n.tabDropdownLabel,this.setSide(n.side),this._canRemoveComponent=this._configClosable,this._element=document.createElement("section"),this._element.classList.add("lm_header"),this._controlsContainerElement=document.createElement("section"),this._controlsContainerElement.classList.add("lm_controls"),this._element.appendChild(this._tabsContainer.element),this._element.appendChild(this._controlsContainerElement),this._element.appendChild(this._tabsContainer.dropdownElement),this._element.addEventListener("click",this._clickListener,{passive:!0}),this._element.addEventListener("touchstart",this._touchStartListener,{passive:!0}),this._documentMouseUpListener=()=>this._tabsContainer.hideAdditionalTabsDropdown(),globalThis.document.addEventListener("mouseup",this._documentMouseUpListener,{passive:!0}),this._tabControlOffset=this._layoutManager.layoutConfig.settings.tabControlOffset,this._tabDropdownEnabled&&(this._tabDropdownButton=new s.HeaderButton(this,this._tabDropdownLabel,"lm_tabdropdown",(()=>this._tabsContainer.showAdditionalTabsDropdown()))),this._popoutEnabled&&(this._popoutButton=new s.HeaderButton(this,this._popoutLabel,"lm_popout",(()=>this.handleButtonPopoutEvent()))),this._maximiseEnabled&&(this._maximiseButton=new s.HeaderButton(this,this._maximiseLabel,"lm_maximise",(e=>this.handleButtonMaximiseToggleEvent(e)))),this._configClosable&&(this._closeButton=new s.HeaderButton(this,this._closeLabel,"lm_close",(()=>a()))),this.processTabDropdownActiveChanged()}destroy(){this.emit("destroy"),this._popoutEvent=void 0,this._maximiseToggleEvent=void 0,this._clickEvent=void 0,this._touchStartEvent=void 0,this._componentRemoveEvent=void 0,this._componentFocusEvent=void 0,this._componentDragStartEvent=void 0,this._tabsContainer.destroy(),globalThis.document.removeEventListener("mouseup",this._documentMouseUpListener),this._element.remove()}createTab(e,t){this._tabsContainer.createTab(e,t)}removeTab(e){this._tabsContainer.removeTab(e)}processActiveComponentChanged(e){this._tabsContainer.processActiveComponentChanged(e),this.updateTabSizes()}setSide(e){this._side=e,this._leftRightSided=[a.Side.right,a.Side.left].includes(this._side)}setRowColumnClosable(e){this._rowColumnClosable=e,this.updateClosability()}updateClosability(){let e;if(this._configClosable)if(this._rowColumnClosable){e=!0;const t=this.tabs.length;for(let n=0;n<t;n++)if(!this._tabsContainer.tabs[n].componentItem.isClosable){e=!1;break}}else e=!1;else e=!1;null!==this._closeButton&&(0,o.setElementDisplayVisibility)(this._closeButton.element,e),null!==this._popoutButton&&(0,o.setElementDisplayVisibility)(this._popoutButton.element,e),this._canRemoveComponent=e||this._tabsContainer.tabCount>1}applyFocusedValue(e){e?this._element.classList.add("lm_focused"):this._element.classList.remove("lm_focused")}processMaximised(){if(void 0===this._maximiseButton)throw new r.UnexpectedUndefinedError("HPMAX16997");this._maximiseButton.element.setAttribute("title",this._minimiseLabel)}processMinimised(){if(void 0===this._maximiseButton)throw new r.UnexpectedUndefinedError("HPMIN16997");this._maximiseButton.element.setAttribute("title",this._maximiseLabel)}updateTabSizes(){if(this._tabsContainer.tabCount>0){const e=this._show?this._layoutManager.layoutConfig.dimensions.headerHeight:0;let t;this._leftRightSided?(this._element.style.height="",this._element.style.width=(0,o.numberToPixels)(e)):(this._element.style.width="",this._element.style.height=(0,o.numberToPixels)(e)),t=this._leftRightSided?this._element.offsetHeight-this._controlsContainerElement.offsetHeight-this._tabControlOffset:this._element.offsetWidth-this._controlsContainerElement.offsetWidth-this._tabControlOffset,this._tabsContainer.updateTabSizes(t,this._getActiveComponentItemEvent())}}handleTabInitiatedComponentRemoveEvent(e){if(this._canRemoveComponent){if(void 0===this._componentRemoveEvent)throw new r.UnexpectedUndefinedError("HHTCE22294");this._componentRemoveEvent(e)}}handleTabInitiatedComponentFocusEvent(e){if(void 0===this._componentFocusEvent)throw new r.UnexpectedUndefinedError("HHTAE22294");this._componentFocusEvent(e)}handleTabInitiatedDragStartEvent(e,t,n,i){if(this._canRemoveComponent){if(void 0===this._componentDragStartEvent)throw new r.UnexpectedUndefinedError("HHTDSE22294");this._componentDragStartEvent(e,t,n,i)}else n.cancelDrag()}processTabDropdownActiveChanged(){void 0!==this._tabDropdownButton&&(0,o.setElementDisplayVisibility)(this._tabDropdownButton.element,this._tabsContainer.dropdownActive)}handleButtonPopoutEvent(){if(this._layoutManager.layoutConfig.settings.popoutWholeStack){if(void 0===this._popoutEvent)throw new r.UnexpectedUndefinedError("HHBPOE17834");this._popoutEvent()}else{const e=this._getActiveComponentItemEvent();e&&e.popout()}}handleButtonMaximiseToggleEvent(e){if(void 0===this._maximiseToggleEvent)throw new r.UnexpectedUndefinedError("HHBMTE16834");this._maximiseToggleEvent()}onClick(e){e.target===this._element&&this.notifyClick(e)}onTouchStart(e){e.target===this._element&&this.notifyTouchStart(e)}notifyClick(e){if(void 0===this._clickEvent)throw new r.UnexpectedUndefinedError("HNHC46834");this._clickEvent(e)}notifyTouchStart(e){if(void 0===this._touchStartEvent)throw new r.UnexpectedUndefinedError("HNHTS46834");this._touchStartEvent(e)}}t.Header=c},7920:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Splitter=void 0;const r=n(7597),i=n(2430);t.Splitter=class{_isVertical;_size;_grabSize;_dragListener;_element;get element(){return this._element}constructor(e,t,n){this._isVertical=e,this._size=t,this._grabSize=n<this._size?this._size:n,this._element=document.createElement("div"),this._element.classList.add("lm_splitter");const a=document.createElement("div");a.classList.add("lm_drag_handle");const o=this._grabSize-this._size,s=o/2;this._isVertical?(a.style.top=(0,i.numberToPixels)(-s),a.style.height=(0,i.numberToPixels)(this._size+o),this._element.classList.add("lm_vertical"),this._element.style.height=(0,i.numberToPixels)(this._size)):(a.style.left=(0,i.numberToPixels)(-s),a.style.width=(0,i.numberToPixels)(this._size+o),this._element.classList.add("lm_horizontal"),this._element.style.width=(0,i.numberToPixels)(this._size)),this._element.appendChild(a),this._dragListener=new r.DragListener(this._element,[a])}destroy(){this._element.remove()}on(e,t){this._dragListener.on(e,t)}}},5886:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tab=void 0;const r=n(7908),i=n(7597);t.Tab=class{_layoutManager;_componentItem;_closeEvent;_focusEvent;_dragStartEvent;_element;_titleElement;_closeElement;_dragListener;_isActive=!1;_tabClickListener=e=>this.onTabClickDown(e);_tabTouchStartListener=e=>this.onTabTouchStart(e);_closeClickListener=()=>this.onCloseClick();_closeTouchStartListener=()=>this.onCloseTouchStart();_dragStartListener=(e,t)=>this.onDragStart(e,t);_contentItemDestroyListener=()=>this.onContentItemDestroy();_tabTitleChangedListener=e=>this.setTitle(e);get isActive(){return this._isActive}get componentItem(){return this._componentItem}get contentItem(){return this._componentItem}get element(){return this._element}get titleElement(){return this._titleElement}get closeElement(){return this._closeElement}get reorderEnabled(){return void 0!==this._dragListener}set reorderEnabled(e){e!==this.reorderEnabled&&(e?this.enableReorder():this.disableReorder())}constructor(e,t,n,r,i){this._layoutManager=e,this._componentItem=t,this._closeEvent=n,this._focusEvent=r,this._dragStartEvent=i,this._element=document.createElement("div"),this._element.classList.add("lm_tab"),this._titleElement=document.createElement("span"),this._titleElement.classList.add("lm_title"),this._closeElement=document.createElement("div"),this._closeElement.classList.add("lm_close_tab"),this._element.appendChild(this._titleElement),this._element.appendChild(this._closeElement),t.isClosable?this._closeElement.style.display="":this._closeElement.style.display="none",this.setTitle(t.title),this._componentItem.on("titleChanged",this._tabTitleChangedListener),(t.reorderEnabled??this._layoutManager.layoutConfig.settings.reorderEnabled)&&this.enableReorder(),this._element.addEventListener("click",this._tabClickListener,{passive:!0}),this._element.addEventListener("touchstart",this._tabTouchStartListener,{passive:!0}),this._componentItem.isClosable?(this._closeElement.addEventListener("click",this._closeClickListener,{passive:!0}),this._closeElement.addEventListener("touchstart",this._closeTouchStartListener,{passive:!0})):(this._closeElement.remove(),this._closeElement=void 0),this._componentItem.setTab(this),this._layoutManager.emit("tabCreated",this)}setTitle(e){this._titleElement.innerText=e,this._element.title=e}setActive(e){e!==this._isActive&&(this._isActive=e,e?this._element.classList.add("lm_active"):this._element.classList.remove("lm_active"))}destroy(){this._closeEvent=void 0,this._focusEvent=void 0,this._dragStartEvent=void 0,this._element.removeEventListener("click",this._tabClickListener),this._element.removeEventListener("touchstart",this._tabTouchStartListener),this._closeElement?.removeEventListener("click",this._closeClickListener),this._closeElement?.removeEventListener("touchstart",this._closeTouchStartListener),this._componentItem.off("titleChanged",this._tabTitleChangedListener),this.reorderEnabled&&this.disableReorder(),this._element.remove()}setBlurred(){this._element.classList.remove("lm_focused"),this._titleElement.classList.remove("lm_focused")}setFocused(){this._element.classList.add("lm_focused"),this._titleElement.classList.add("lm_focused")}onDragStart(e,t){if(void 0===this._dragListener)throw new r.UnexpectedUndefinedError("TODSDLU10093");if(void 0===this._dragStartEvent)throw new r.UnexpectedUndefinedError("TODS23309");this._dragStartEvent(e,t,this._dragListener,this.componentItem)}onContentItemDestroy(){void 0!==this._dragListener&&(this._dragListener.destroy(),this._dragListener=void 0)}onTabClickDown(e){const t=e.target;t!==this._element&&t!==this._titleElement||(0===e.button?this.notifyFocus():1===e.button&&this._componentItem.isClosable&&this.notifyClose())}onTabTouchStart(e){e.target===this._element&&this.notifyFocus()}onCloseClick(){this.notifyClose()}onCloseTouchStart(){this.notifyClose()}notifyClose(){if(void 0===this._closeEvent)throw new r.UnexpectedUndefinedError("TNC15007");this._closeEvent(this._componentItem)}notifyFocus(){if(void 0===this._focusEvent)throw new r.UnexpectedUndefinedError("TNA15007");this._focusEvent(this._componentItem)}enableReorder(){this._dragListener=new i.DragListener(this._element,[this._titleElement]),this._dragListener.on("dragStart",this._dragStartListener),this._componentItem.on("destroy",this._contentItemDestroyListener)}disableReorder(){if(void 0===this._dragListener)throw new r.UnexpectedUndefinedError("TDR87745");this._componentItem.off("destroy",this._contentItemDestroyListener),this._dragListener.off("dragStart",this._dragStartListener),this._dragListener=void 0}}},4197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabsContainer=void 0;const r=n(7908),i=n(2430),a=n(5886);t.TabsContainer=class{_layoutManager;_componentRemoveEvent;_componentFocusEvent;_componentDragStartEvent;_dropdownActiveChangedEvent;_tabs=[];_dropdownElement;_element;_lastVisibleTabIndex=-1;_dropdownActive=!1;get tabs(){return this._tabs}get tabCount(){return this._tabs.length}get lastVisibleTabIndex(){return this._lastVisibleTabIndex}get element(){return this._element}get dropdownElement(){return this._dropdownElement}get dropdownActive(){return this._dropdownActive}constructor(e,t,n,r,i){this._layoutManager=e,this._componentRemoveEvent=t,this._componentFocusEvent=n,this._componentDragStartEvent=r,this._dropdownActiveChangedEvent=i,this._element=document.createElement("section"),this._element.classList.add("lm_tabs"),this._dropdownElement=document.createElement("section"),this._dropdownElement.classList.add("lm_tabdropdown_list"),this._dropdownElement.style.display="none"}destroy(){for(let e=0;e<this._tabs.length;e++)this._tabs[e].destroy()}createTab(e,t){for(let t=0;t<this._tabs.length;t++)if(this._tabs[t].componentItem===e)return;const n=new a.Tab(this._layoutManager,e,(e=>this.handleTabCloseEvent(e)),(e=>this.handleTabFocusEvent(e)),((e,t,n,r)=>this.handleTabDragStartEvent(e,t,n,r)));0===this._tabs.length?(this._tabs.push(n),this._element.appendChild(n.element)):(void 0===t&&(t=this._tabs.length),t>0?this._tabs[t-1].element.insertAdjacentElement("afterend",n.element):this._tabs[0].element.insertAdjacentElement("beforebegin",n.element),this._tabs.splice(t,0,n))}removeTab(e){for(let t=0;t<this._tabs.length;t++)if(this._tabs[t].componentItem===e)return this._tabs[t].destroy(),void this._tabs.splice(t,1);throw new Error("contentItem is not controlled by this header")}processActiveComponentChanged(e){let t=-1;for(let n=0;n<this._tabs.length;n++){const r=this._tabs[n].componentItem===e;this._tabs[n].setActive(r),r&&(t=n)}if(t<0)throw new r.AssertError("HSACI56632");if(this._layoutManager.layoutConfig.settings.reorderOnTabMenuClick&&-1!==this._lastVisibleTabIndex&&t>this._lastVisibleTabIndex){const e=this._tabs[t];for(let e=t;e>0;e--)this._tabs[e]=this._tabs[e-1];this._tabs[0]=e}}updateTabSizes(e,t){let n=!1;this.tryUpdateTabSizes(n,e,t)||(n=!0,this.tryUpdateTabSizes(n,e,t)),n!==this._dropdownActive&&(this._dropdownActive=n,this._dropdownActiveChangedEvent())}tryUpdateTabSizes(e,t,n){if(this._tabs.length>0){if(void 0===n)throw new Error("non-empty tabs must have active component item");let r=0,a=!1;const o=this._layoutManager.layoutConfig.settings.tabOverlapAllowance,s=this._tabs.indexOf(n.tab),l=this._tabs[s];this._lastVisibleTabIndex=-1;for(let n=0;n<this._tabs.length;n++){const c=this._tabs[n].element;c.parentElement!==this._element&&this._element.appendChild(c);const d=getComputedStyle(l.element).marginRight,u=(0,i.pixelsToNumber)(d);r+=c.offsetWidth+u;let p=0;if(s<=n)p=r;else{const e=getComputedStyle(l.element).marginRight,t=(0,i.pixelsToNumber)(e);p=r+l.element.offsetWidth+t}if(p>t){if(a)n===s&&(c.style.zIndex="auto",c.style.marginLeft="",c.parentElement!==this._element&&this._element.appendChild(c));else{let e;if(e=s>0&&s<=n?(p-t)/(n-1):(p-t)/n,e<o){for(let t=0;t<=n;t++){const r=t!==s&&0!==t?"-"+(0,i.numberToPixels)(e):"";this._tabs[t].element.style.zIndex=(0,i.numberToPixels)(n-t),this._tabs[t].element.style.marginLeft=r}this._lastVisibleTabIndex=n,c.parentElement!==this._element&&this._element.appendChild(c)}else a=!0}if(a&&n!==s){if(!e)return!1;c.style.zIndex="auto",c.style.marginLeft="",c.parentElement!==this._dropdownElement&&this._dropdownElement.appendChild(c)}}else this._lastVisibleTabIndex=n,c.style.zIndex="auto",c.style.marginLeft="",c.parentElement!==this._element&&this._element.appendChild(c)}}return!0}showAdditionalTabsDropdown(){this._dropdownElement.style.display=""}hideAdditionalTabsDropdown(){this._dropdownElement.style.display="none"}handleTabCloseEvent(e){this._componentRemoveEvent(e)}handleTabFocusEvent(e){this._componentFocusEvent(e)}handleTabDragStartEvent(e,t,n,r){this._componentDragStartEvent(e,t,n,r)}}},5623:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionIndicator=void 0,t.TransitionIndicator=class{_element;_toElement;_fromDimensions;_totalAnimationDuration;_animationStartTime;constructor(){this._element=document.createElement("div"),this._element.classList.add("lm_transition_indicator"),document.body.appendChild(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null}destroy(){this._element.remove()}transitionElements(e,t){}nextAnimationFrame(){}measure(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top,width:e.offsetWidth,height:e.offsetHeight}}}},4196:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindError=t.ApiError=t.PopoutBlockedError=t.ConfigurationError=t.ExternalError=void 0;class n extends Error{type;constructor(e,t){super(t),this.type=e}}t.ExternalError=n,t.ConfigurationError=class extends n{node;constructor(e,t){super("Configuration",e),this.node=t}},t.PopoutBlockedError=class extends n{constructor(e){super("PopoutBlocked",e)}},t.ApiError=class extends n{constructor(e){super("API",e)}},t.BindError=class extends n{constructor(e){super("Bind",e)}}},7908:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnexpectedUndefinedError=t.UnexpectedNullError=t.UnreachableCaseError=t.AssertError=void 0;class n extends Error{constructor(e,t,n){super(`${e}: ${t}${void 0===n?"":": "+n}`)}}t.AssertError=class extends n{constructor(e,t){super("Assert",e,t)}},t.UnreachableCaseError=class extends n{constructor(e,t,n){super("UnreachableCase",e,`${t}${void 0===n?"":": "+n}`)}},t.UnexpectedNullError=class extends n{constructor(e,t){super("UnexpectedNull",e,t)}},t.UnexpectedUndefinedError=class extends n{constructor(e,t){super("UnexpectedUndefined",e,t)}}},2179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoldenLayout=void 0;const r=n(3922),i=n(4196),a=n(7908),o=n(7100),s=n(2430),l=n(6588);class c extends l.VirtualLayout{_componentTypesMap=new Map;_getComponentConstructorFtn;_virtuableComponentMap=new Map;_goldenLayoutBoundingClientRect;_containerVirtualRectingRequiredEventListener=(e,t,n)=>this.handleContainerVirtualRectingRequiredEvent(e,t,n);_containerVirtualVisibilityChangeRequiredEventListener=(e,t)=>this.handleContainerVirtualVisibilityChangeRequiredEvent(e,t);_containerVirtualZIndexChangeRequiredEventListener=(e,t,n)=>this.handleContainerVirtualZIndexChangeRequiredEvent(e,t,n);registerComponent(e,t,n=!1){if("function"!=typeof t)throw new i.ApiError("registerComponent() componentConstructorOrFactoryFtn parameter is not a function");if(t.hasOwnProperty("prototype")){const r=t;this.registerComponentConstructor(e,r,n)}else{const r=t;this.registerComponentFactoryFunction(e,r,n)}}registerComponentConstructor(e,t,n=!1){if("function"!=typeof t)throw new Error(o.i18nStrings[1]);if(void 0!==this._componentTypesMap.get(e))throw new i.BindError(`${o.i18nStrings[3]}: ${e}`);this._componentTypesMap.set(e,{constructor:t,factoryFunction:void 0,virtual:n})}registerComponentFactoryFunction(e,t,n=!1){if("function"!=typeof t)throw new i.BindError("Please register a constructor function");if(void 0!==this._componentTypesMap.get(e))throw new i.BindError(`${o.i18nStrings[3]}: ${e}`);this._componentTypesMap.set(e,{constructor:void 0,factoryFunction:t,virtual:n})}registerComponentFunction(e){this.registerGetComponentConstructorCallback(e)}registerGetComponentConstructorCallback(e){if("function"!=typeof e)throw new Error("Please register a callback function");void 0!==this._getComponentConstructorFtn&&console.warn("Multiple component functions are being registered.  Only the final registered function will be used."),this._getComponentConstructorFtn=e}getRegisteredComponentTypeNames(){const e=this._componentTypesMap.keys();return Array.from(e)}getComponentInstantiator(e){let t;const n=r.ResolvedComponentItemConfig.resolveComponentTypeName(e);return void 0!==n&&(t=this._componentTypesMap.get(n)),void 0===t&&void 0!==this._getComponentConstructorFtn&&(t={constructor:this._getComponentConstructorFtn(e),factoryFunction:void 0,virtual:!1}),t}bindComponent(e,t){let n;const l=r.ResolvedComponentItemConfig.resolveComponentTypeName(t);let c;if(void 0!==l&&(n=this._componentTypesMap.get(l)),void 0===n&&void 0!==this._getComponentConstructorFtn&&(n={constructor:this._getComponentConstructorFtn(t),factoryFunction:void 0,virtual:!1}),void 0!==n){const r=n.virtual;let d,u;d=void 0===t.componentState?void 0:(0,s.deepExtendValue)({},t.componentState);const p=n.constructor;if(void 0!==p)u=new p(e,d,r);else{const t=n.factoryFunction;if(void 0===t)throw new a.AssertError("LMBCFFU10008");u=t(e,d,r)}if(r){if(void 0===u)throw new a.UnexpectedUndefinedError("GLBCVCU988774");{const t=u,n=t.rootHtmlElement;if(void 0===n)throw new i.BindError(`${o.i18nStrings[5]}: ${l}`);(0,s.ensureElementPositionAbsolute)(n),this.container.appendChild(n),this._virtuableComponentMap.set(e,t),e.virtualRectingRequiredEvent=this._containerVirtualRectingRequiredEventListener,e.virtualVisibilityChangeRequiredEvent=this._containerVirtualVisibilityChangeRequiredEventListener,e.virtualZIndexChangeRequiredEvent=this._containerVirtualZIndexChangeRequiredEventListener}}c={virtual:n.virtual,component:u}}else c=super.bindComponent(e,t);return c}unbindComponent(e,t,n){const r=this._virtuableComponentMap.get(e);if(void 0===r)super.unbindComponent(e,t,n);else{const t=r.rootHtmlElement;if(void 0===t)throw new a.AssertError("GLUC77743",e.title);this.container.removeChild(t),this._virtuableComponentMap.delete(e)}}fireBeforeVirtualRectingEvent(e){this._goldenLayoutBoundingClientRect=this.container.getBoundingClientRect(),super.fireBeforeVirtualRectingEvent(e)}handleContainerVirtualRectingRequiredEvent(e,t,n){const r=this._virtuableComponentMap.get(e);if(void 0===r)throw new a.UnexpectedUndefinedError("GLHCSCE55933");{const a=r.rootHtmlElement;if(void 0===a)throw new i.BindError(o.i18nStrings[4]+" "+e.title);{const r=e.element.getBoundingClientRect(),i=r.left-this._goldenLayoutBoundingClientRect.left;a.style.left=(0,s.numberToPixels)(i);const o=r.top-this._goldenLayoutBoundingClientRect.top;a.style.top=(0,s.numberToPixels)(o),(0,s.setElementWidth)(a,t),(0,s.setElementHeight)(a,n)}}}handleContainerVirtualVisibilityChangeRequiredEvent(e,t){const n=this._virtuableComponentMap.get(e);if(void 0===n)throw new a.UnexpectedUndefinedError("GLHCVVCRE55934");{const r=n.rootHtmlElement;if(void 0===r)throw new i.BindError(o.i18nStrings[4]+" "+e.title);(0,s.setElementDisplayVisibility)(r,t)}}handleContainerVirtualZIndexChangeRequiredEvent(e,t,n){const r=this._virtuableComponentMap.get(e);if(void 0===r)throw new a.UnexpectedUndefinedError("GLHCVZICRE55935");{const t=r.rootHtmlElement;if(void 0===t)throw new i.BindError(o.i18nStrings[4]+" "+e.title);t.style.zIndex=n}}}t.GoldenLayout=c},1940:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentItem=void 0;const r=n(3922),i=n(9372),a=n(7908),o=n(3226),s=n(2430),l=n(8818);class c extends l.ContentItem{_parentItem;_reorderEnabled;_headerConfig;_title;_initialWantMaximise;_container;_tab;_focused=!1;get componentName(){return this._container.componentType}get componentType(){return this._container.componentType}get reorderEnabled(){return this._reorderEnabled}get initialWantMaximise(){return this._initialWantMaximise}get component(){return this._container.component}get container(){return this._container}get parentItem(){return this._parentItem}get headerConfig(){return this._headerConfig}get title(){return this._title}get tab(){return this._tab}get focused(){return this._focused}constructor(e,t,n){super(e,t,n,document.createElement("div")),this._parentItem=n,this.isComponent=!0,this._reorderEnabled=t.reorderEnabled,this.applyUpdatableConfig(t),this._initialWantMaximise=t.maximised;const r=document.createElement("div");r.classList.add("lm_content"),this.element.appendChild(r),this._container=new i.ComponentContainer(t,this,e,r,(e=>this.handleUpdateItemConfigEvent(e)),(()=>this.show()),(()=>this.hide()),(e=>this.focus(e)),(e=>this.blur(e)))}destroy(){this._container.destroy(),super.destroy()}applyUpdatableConfig(e){this.setTitle(e.title),this._headerConfig=e.header}toConfig(){const e=this._container.stateRequestEvent,t=void 0===e?this._container.state:e();return{type:o.ItemType.component,content:[],width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight,id:this.id,maximised:!1,isClosable:this.isClosable,reorderEnabled:this._reorderEnabled,title:this._title,header:r.ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig),componentType:r.ResolvedComponentItemConfig.copyComponentType(this.componentType),componentState:t}}close(){if(null===this.parent)throw new a.UnexpectedNullError("CIC68883");this.parent.removeChild(this,!1)}enterDragMode(e,t){(0,s.setElementWidth)(this.element,e),(0,s.setElementHeight)(this.element,t),this._container.enterDragMode(e,t)}exitDragMode(){this._container.exitDragMode()}enterStackMaximised(){this._container.enterStackMaximised()}exitStackMaximised(){this._container.exitStackMaximised()}drag(){this._container.drag()}updateSize(){this.updateNodeSize()}init(){this.updateNodeSize(),super.init(),this._container.emit("open"),this.initContentItems()}setTitle(e){this._title=e,this.emit("titleChanged",e),this.emit("stateChanged")}setTab(e){this._tab=e,this.emit("tab",e),this._container.setTab(e)}hide(){super.hide(),this._container.setVisibility(!1)}show(){super.show(),this._container.setVisibility(!0)}focus(e=!1){this.parentItem.setActiveComponentItem(this,!0,e)}setFocused(e){this._focused=!0,this.tab.setFocused(),e||this.emitBaseBubblingEvent("focus")}blur(e=!1){this._focused&&this.layoutManager.setFocusedComponentItem(void 0,e)}setBlurred(e){this._focused=!1,this.tab.setBlurred(),e||this.emitBaseBubblingEvent("blur")}setParent(e){this._parentItem=e,super.setParent(e)}handleUpdateItemConfigEvent(e){this.applyUpdatableConfig(e)}updateNodeSize(){if("none"!==this.element.style.display){const{width:e,height:t}=(0,s.getElementWidthAndHeight)(this.element);this._container.setSizeToNodeSize(e,t,!1)}}}t.ComponentItem=c},4583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentParentableItem=void 0;const r=n(8818);class i extends r.ContentItem{_focused=!1;get focused(){return this._focused}setFocusedValue(e){this._focused=e}}t.ComponentParentableItem=i},8818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentItem=void 0;const r=n(7908),i=n(1642),a=n(4815),o=n(2430);class s extends i.EventEmitter{layoutManager;_parent;_element;_type;_id;_popInParentIds=[];_contentItems;_isClosable;_pendingEventPropagations;_throttledEvents;_isInitialised;width;minWidth;height;minHeight;isGround;isRow;isColumn;isStack;isComponent;get type(){return this._type}get id(){return this._id}get popInParentIds(){return this._popInParentIds}get parent(){return this._parent}get contentItems(){return this._contentItems}get isClosable(){return this._isClosable}get element(){return this._element}get isInitialised(){return this._isInitialised}static isStack(e){return e.isStack}static isComponentItem(e){return e.isComponent}static isComponentParentableItem(e){return e.isStack||e.isGround}constructor(e,t,n,r){super(),this.layoutManager=e,this._parent=n,this._element=r,this._type=t.type,this._id=t.id,this._isInitialised=!1,this.isGround=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.width=t.width,this.minWidth=t.minWidth,this.height=t.height,this.minHeight=t.minHeight,this._isClosable=t.isClosable,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this._contentItems=this.createContentItems(t.content)}removeChild(e,t=!1){const n=this._contentItems.indexOf(e);if(-1===n)throw new Error("Can't remove child item. Unknown content item");if(t||this._contentItems[n].destroy(),this._contentItems.splice(n,1),this._contentItems.length>0)this.updateSize();else if(!this.isGround&&!0===this._isClosable){if(null===this._parent)throw new r.UnexpectedNullError("CIUC00874");this._parent.removeChild(this)}}addChild(e,t,n){return t??=this._contentItems.length,this._contentItems.splice(t,0,e),e.setParent(this),!0===this._isInitialised&&!1===e._isInitialised&&e.init(),t}replaceChild(e,t,n=!1){const i=this._contentItems.indexOf(e),a=e._element.parentNode;if(-1===i)throw new r.AssertError("CIRCI23232","Can't replace child. oldChild is not child of this");if(null===a)throw new r.UnexpectedNullError("CIRCP23232");if(a.replaceChild(t._element,e._element),!0===n&&(e._parent=null,e.destroy()),this._contentItems[i]=t,t.setParent(this),t.height=e.height,t.width=e.width,null===t._parent)throw new r.UnexpectedNullError("CIRCNC45699");!0===t._parent._isInitialised&&!1===t._isInitialised&&t.init(),this.updateSize()}remove(){if(null===this._parent)throw new r.UnexpectedNullError("CIR11110");this._parent.removeChild(this)}popout(){const e=(0,o.getUniqueId)(),t=this.layoutManager.createPopoutFromContentItem(this,void 0,e,void 0);return this.emitBaseBubblingEvent("stateChanged"),t}calculateConfigContent(){const e=this._contentItems,t=e.length,n=new Array(t);for(let r=0;r<t;r++){const t=e[r];n[r]=t.toConfig()}return n}highlightDropZone(e,t,n){const i=this.layoutManager.dropTargetIndicator;if(null===i)throw new r.UnexpectedNullError("ACIHDZ5593");i.highlightArea(n)}onDrop(e,t){this.addChild(e)}show(){(0,o.setElementDisplayVisibility)(this._element,!0),this.layoutManager.updateSizeFromContainer();for(let e=0;e<this._contentItems.length;e++)this._contentItems[e].show()}destroy(){for(let e=0;e<this._contentItems.length;e++)this._contentItems[e].destroy();this._contentItems=[],this.emitBaseBubblingEvent("beforeItemDestroyed"),this._element.remove(),this.emitBaseBubblingEvent("itemDestroyed")}getElementArea(e){e=e??this._element;const t=(0,a.getJQueryOffset)(e),n=e.offsetWidth,r=e.offsetHeight;return{x1:t.left+1,y1:t.top+1,x2:t.left+n-1,y2:t.top+r-1,surface:n*r,contentItem:this}}init(){this._isInitialised=!0,this.emitBaseBubblingEvent("itemCreated"),this.emitUnknownBubblingEvent(this.type+"Created")}setParent(e){this._parent=e}addPopInParentId(e){this.popInParentIds.includes(e)||this.popInParentIds.push(e)}initContentItems(){for(let e=0;e<this._contentItems.length;e++)this._contentItems[e].init()}hide(){(0,o.setElementDisplayVisibility)(this._element,!1),this.layoutManager.updateSizeFromContainer()}updateContentItemsSize(){for(let e=0;e<this._contentItems.length;e++)this._contentItems[e].updateSize()}createContentItems(e){const t=e.length,n=new Array(t);for(let t=0;t<e.length;t++)n[t]=this.layoutManager.createContentItem(e[t],this);return n}propagateEvent(e,t){if(1===t.length){const n=t[0];n instanceof i.EventEmitter.BubblingEvent&&!1===n.isPropagationStopped&&!0===this._isInitialised&&(!1===this.isGround&&this._parent?this._parent.emitUnknown(e,n):this.scheduleEventPropagationToLayoutManager(e,n))}}tryBubbleEvent(e,t){if(1===t.length){const n=t[0];n instanceof i.EventEmitter.BubblingEvent&&!1===n.isPropagationStopped&&!0===this._isInitialised&&(!1===this.isGround&&this._parent?this._parent.emitUnknown(e,n):this.scheduleEventPropagationToLayoutManager(e,n))}}scheduleEventPropagationToLayoutManager(e,t){-1===this._throttledEvents.indexOf(e)?this.layoutManager.emitUnknown(e,t):!0!==this._pendingEventPropagations[e]&&(this._pendingEventPropagations[e]=!0,globalThis.requestAnimationFrame((()=>this.propagateEventToLayoutManager(e,t))))}propagateEventToLayoutManager(e,t){this._pendingEventPropagations[e]=!1,this.layoutManager.emitUnknown(e,t)}}t.ContentItem=s},46:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroundItem=void 0;const r=n(6214),i=n(3922),a=n(7908),o=n(3226),s=n(2430),l=n(1940),c=n(4583),d=n(8818),u=n(1621);class p extends c.ComponentParentableItem{_childElementContainer;_containerElement;constructor(e,t,n){super(e,i.ResolvedGroundItemConfig.create(t),null,p.createElement(document)),this.isGround=!0,this._childElementContainer=this.element,this._containerElement=n,this._containerElement.appendChild(this.element)}init(){if(!0!==this.isInitialised){this.updateNodeSize();for(let e=0;e<this.contentItems.length;e++)this._childElementContainer.appendChild(this.contentItems[e].element);super.init(),this.initContentItems()}}loadRoot(e){if(this.clearRoot(),void 0!==e){const t=this.layoutManager.createAndInitContentItem(e,this);this.addChild(t,0)}}clearRoot(){const e=this.contentItems;switch(e.length){case 0:return;case 1:return void e[0].remove();default:throw new a.AssertError("GILR07721")}}addItem(e,t){this.layoutManager.checkMinimiseMaximisedStack();const n=r.ItemConfig.resolve(e);let i;if(i=this.contentItems.length>0?this.contentItems[0]:this,i.isComponent)throw new Error("Cannot add item as child to ComponentItem");{const e=this.layoutManager.createAndInitContentItem(n,i);return t=i.addChild(e,t),i===this?-1:t}}loadComponentAsRoot(e){this.clearRoot();const t=r.ItemConfig.resolve(e);if(t.maximised)throw new Error("Root Component cannot be maximised");{const e=new l.ComponentItem(this.layoutManager,t,this);e.init(),this.addChild(e,0)}}addChild(e,t){if(this.contentItems.length>0)throw new Error("Ground node can only have a single child");return this._childElementContainer.appendChild(e.element),t=super.addChild(e,t),this.updateSize(),this.emitBaseBubblingEvent("stateChanged"),t}calculateConfigContent(){const e=this.contentItems,t=e.length,n=new Array(t);for(let r=0;r<t;r++){const t=e[r].toConfig();if(!i.ResolvedRootItemConfig.isRootItemConfig(t))throw new a.AssertError("RCCC66832");n[r]=t}return n}setSize(e,t){void 0===e||void 0===t?this.updateSize():((0,s.setElementWidth)(this.element,e),(0,s.setElementHeight)(this.element,t),this.contentItems.length>0&&((0,s.setElementWidth)(this.contentItems[0].element,e),(0,s.setElementHeight)(this.contentItems[0].element,t)),this.updateContentItemsSize())}updateSize(){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize()}finally{this.layoutManager.endVirtualSizedContainerAdding()}}createSideAreas(){const e=p.Area.oppositeSides,t=new Array(Object.keys(e).length);let n=0;for(const r in e){const i=r,o=this.getElementArea();if(null===o)throw new a.UnexpectedNullError("RCSA77553");o.side=i,"2"===e[i][1]?o[i]=o[e[i]]-50:o[i]=o[e[i]]+50,o.surface=(o.x2-o.x1)*(o.y2-o.y1),t[n++]=o}return t}highlightDropZone(e,t,n){this.layoutManager.tabDropPlaceholder.remove(),super.highlightDropZone(e,t,n)}onDrop(e,t){if(e.isComponent){const t=i.ResolvedStackItemConfig.createDefault(),n=e;t.header=i.ResolvedHeaderedItemConfig.Header.createCopy(n.headerConfig);const r=this.layoutManager.createAndInitContentItem(t,this);r.addChild(e),e=r}if(0===this.contentItems.length)this.addChild(e);else{if(e.type===o.ItemType.row||e.type===o.ItemType.column){const t=i.ResolvedStackItemConfig.createDefault(),n=this.layoutManager.createContentItem(t,this);n.addChild(e),e=n}const n="x"==t.side[0]?o.ItemType.row:o.ItemType.column,r="x"==t.side[0]?"width":"height",a="2"==t.side[1],s=this.contentItems[0];if(s instanceof u.RowOrColumn&&s.type===n){const t=s.contentItems[a?0:s.contentItems.length-1];s.addChild(e,a?0:void 0,!0),t[r]*=.5,e[r]=t[r],s.updateSize()}else{const t=i.ResolvedItemConfig.createDefault(n),o=this.layoutManager.createContentItem(t,this);this.replaceChild(s,o),o.addChild(e,a?0:void 0,!0),o.addChild(s,a?void 0:0,!0),s[r]=50,e[r]=50,o.updateSize()}}}dock(){throw new a.AssertError("GID87731")}validateDocking(){throw new a.AssertError("GIVD87732")}getAllContentItems(){const e=[this];return this.deepGetAllContentItems(this.contentItems,e),e}getConfigMaximisedItems(){const e=[];return this.deepFilterContentItems(this.contentItems,e,(e=>!(!d.ContentItem.isStack(e)||!e.initialWantMaximise)||!(!d.ContentItem.isComponentItem(e)||!e.initialWantMaximise))),e}getItemsByPopInParentId(e){const t=[];return this.deepFilterContentItems(this.contentItems,t,(t=>t.popInParentIds.includes(e))),t}toConfig(){throw new Error("Cannot generate GroundItem config")}setActiveComponentItem(e,t,n){}updateNodeSize(){const{width:e,height:t}=(0,s.getElementWidthAndHeight)(this._containerElement);(0,s.setElementWidth)(this.element,e),(0,s.setElementHeight)(this.element,t),this.contentItems.length>0&&((0,s.setElementWidth)(this.contentItems[0].element,e),(0,s.setElementHeight)(this.contentItems[0].element,t))}deepGetAllContentItems(e,t){for(let n=0;n<e.length;n++){const r=e[n];t.push(r),this.deepGetAllContentItems(r.contentItems,t)}}deepFilterContentItems(e,t,n){for(let r=0;r<e.length;r++){const i=e[r];n(i)&&t.push(i),this.deepFilterContentItems(i.contentItems,t,n)}}}t.GroundItem=p,function(e){let t;!function(e){e.oppositeSides={y2:"y1",x2:"x1",y1:"y2",x1:"x2"}}(t=e.Area||(e.Area={})),e.createElement=function(e){const t=e.createElement("div");return t.classList.add("lm_goldenlayout"),t.classList.add("lm_item"),t.classList.add("lm_root"),t}}(p||(t.GroundItem=p={}))},1621:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RowOrColumn=void 0;const r=n(6214),i=n(7920),a=n(7908),o=n(3226),s=n(2430),l=n(8818);class c extends l.ContentItem{_rowOrColumnParent;_childElementContainer;_configType;_isColumn;_splitterSize;_splitterGrabSize;_dimension;_splitter=[];_splitterPosition;_splitterMinPosition;_splitterMaxPosition;constructor(e,t,n,r){switch(super(t,n,r,c.createElement(document,e)),this._rowOrColumnParent=r,this.isRow=!e,this.isColumn=e,this._childElementContainer=this.element,this._splitterSize=t.layoutConfig.dimensions.borderWidth,this._splitterGrabSize=t.layoutConfig.dimensions.borderGrabWidth,this._isColumn=e,this._dimension=e?"height":"width",this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null,n.type){case o.ItemType.row:case o.ItemType.column:this._configType=n.type;break;default:throw new a.AssertError("ROCCCT00925")}}newComponent(e,t,n,r){const i={type:"component",componentType:e,componentState:t,title:n};return this.newItem(i,r)}addComponent(e,t,n,r){const i={type:"component",componentType:e,componentState:t,title:n};return this.addItem(i,r)}newItem(e,t){t=this.addItem(e,t);const n=this.contentItems[t];return l.ContentItem.isStack(n)&&r.ItemConfig.isComponent(e)?n.contentItems[0]:n}addItem(e,t){this.layoutManager.checkMinimiseMaximisedStack();const n=r.ItemConfig.resolve(e),i=this.layoutManager.createAndInitContentItem(n,this);return this.addChild(i,t,!1)}addChild(e,t,n){if(void 0===t&&(t=this.contentItems.length),this.contentItems.length>0){const n=this.createSplitter(Math.max(0,t-1)).element;t>0?(this.contentItems[t-1].element.insertAdjacentElement("afterend",n),n.insertAdjacentElement("afterend",e.element)):(this.contentItems[0].element.insertAdjacentElement("beforebegin",n),n.insertAdjacentElement("beforebegin",e.element))}else this._childElementContainer.appendChild(e.element);super.addChild(e,t);const r=1/this.contentItems.length*100;if(!0===n)return this.emitBaseBubblingEvent("stateChanged"),t;for(let t=0;t<this.contentItems.length;t++)if(this.contentItems[t]===e)e[this._dimension]=r;else{const e=this.contentItems[t][this._dimension]*=(100-r)/100;this.contentItems[t][this._dimension]=e}return this.updateSize(),this.emitBaseBubblingEvent("stateChanged"),t}removeChild(e,t){const n=this.contentItems.indexOf(e),r=Math.max(n-1,0);if(-1===n)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");if(this._splitter[r]&&(this._splitter[r].destroy(),this._splitter.splice(r,1)),super.removeChild(e,t),1===this.contentItems.length&&!0===this.isClosable){const e=this.contentItems[0];this.contentItems.length=0,this._rowOrColumnParent.replaceChild(this,e,!0)}else this.updateSize(),this.emitBaseBubblingEvent("stateChanged")}replaceChild(e,t){const n=e[this._dimension];super.replaceChild(e,t),t[this._dimension]=n,this.updateSize(),this.emitBaseBubblingEvent("stateChanged")}updateSize(){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize()}finally{this.layoutManager.endVirtualSizedContainerAdding()}}init(){if(!0!==this.isInitialised){this.updateNodeSize();for(let e=0;e<this.contentItems.length;e++)this._childElementContainer.appendChild(this.contentItems[e].element);super.init();for(let e=0;e<this.contentItems.length-1;e++)this.contentItems[e].element.insertAdjacentElement("afterend",this.createSplitter(e).element);this.initContentItems()}}toConfig(){return{type:this.type,content:this.calculateConfigContent(),width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight,id:this.id,isClosable:this.isClosable}}setParent(e){this._rowOrColumnParent=e,super.setParent(e)}updateNodeSize(){this.contentItems.length>0&&(this.calculateRelativeSizes(),this.setAbsoluteSizes()),this.emitBaseBubblingEvent("stateChanged"),this.emit("resize")}setAbsoluteSizes(){const e=this.calculateAbsoluteSizes();for(let t=0;t<this.contentItems.length;t++)e.additionalPixel-t>0&&e.itemSizes[t]++,this._isColumn?((0,s.setElementWidth)(this.contentItems[t].element,e.totalWidth),(0,s.setElementHeight)(this.contentItems[t].element,e.itemSizes[t])):((0,s.setElementWidth)(this.contentItems[t].element,e.itemSizes[t]),(0,s.setElementHeight)(this.contentItems[t].element,e.totalHeight))}calculateAbsoluteSizes(){const e=(this.contentItems.length-1)*this._splitterSize;let{width:t,height:n}=(0,s.getElementWidthAndHeight)(this.element);this._isColumn?n-=e:t-=e;let r=0;const i=[];for(let e=0;e<this.contentItems.length;e++){let a;a=this._isColumn?Math.floor(n*(this.contentItems[e].height/100)):Math.floor(t*(this.contentItems[e].width/100)),r+=a,i.push(a)}return{itemSizes:i,additionalPixel:Math.floor((this._isColumn?n:t)-r),totalWidth:t,totalHeight:n}}calculateRelativeSizes(){let e=0;const t=[];for(let n=0;n<this.contentItems.length;n++)void 0!==this.contentItems[n][this._dimension]?e+=this.contentItems[n][this._dimension]:t.push(this.contentItems[n]);if(100!==Math.round(e))if(Math.round(e)<100&&t.length>0){for(let n=0;n<t.length;n++)t[n][this._dimension]=(100-e)/t.length;this.respectMinItemWidth()}else{if(Math.round(e)>100)for(let n=0;n<t.length;n++)t[n][this._dimension]=50,e+=50;for(let t=0;t<this.contentItems.length;t++)this.contentItems[t][this._dimension]=this.contentItems[t][this._dimension]/e*100;this.respectMinItemWidth()}else this.respectMinItemWidth()}respectMinItemWidth(){const e=this.layoutManager.layoutConfig.dimensions.minItemWidth;let t=0,n=0;const r=[],i=[];if(this._isColumn||!e||this.contentItems.length<=1)return;const a=this.calculateAbsoluteSizes();for(let o=0;o<a.itemSizes.length;o++){const s=a.itemSizes[o];let l;s<e?(n+=e-s,l={width:e}):(t+=s-e,l={width:s},r.push(l)),i.push(l)}if(0===n||n>t)return;const o=n/t;let s=n;for(let t=0;t<r.length;t++){const n=r[t],i=Math.round((n.width-e)*o);s-=i,n.width-=i}0!==s&&(i[i.length-1].width-=s);for(let e=0;e<this.contentItems.length;e++)this.contentItems[e].width=i[e].width/a.totalWidth*100}createSplitter(e){const t=new i.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize);return t.on("drag",((e,n)=>this.onSplitterDrag(t,e,n))),t.on("dragStop",(()=>this.onSplitterDragStop(t))),t.on("dragStart",(()=>this.onSplitterDragStart(t))),this._splitter.splice(e,0,t),t}getItemsForSplitter(e){const t=this._splitter.indexOf(e);return{before:this.contentItems[t],after:this.contentItems[t+1]}}getMinimumDimensions(e){let t=0,n=0;for(let r=0;r<e.length;++r)t=Math.max(e[r].minWidth??0,t),n=Math.max(e[r].minHeight??0,n);return{horizontal:t,vertical:n}}onSplitterDragStart(e){const t=this.getItemsForSplitter(e),n=this.layoutManager.layoutConfig.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],r=this.getMinimumDimensions(t.before.contentItems),i=this._isColumn?r.vertical:r.horizontal,a=this.getMinimumDimensions(t.after.contentItems),o=this._isColumn?a.vertical:a.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*((0,s.pixelsToNumber)(t.before.element.style[this._dimension])-(i||n)),this._splitterMaxPosition=(0,s.pixelsToNumber)(t.after.element.style[this._dimension])-(o||n)}onSplitterDrag(e,t,n){let r=this._isColumn?n:t;if(null===this._splitterMinPosition||null===this._splitterMaxPosition)throw new a.UnexpectedNullError("ROCOSD59226");r=Math.max(r,this._splitterMinPosition),r=Math.min(r,this._splitterMaxPosition),this._splitterPosition=r;const i=(0,s.numberToPixels)(r);this._isColumn?e.element.style.top=i:e.element.style.left=i}onSplitterDragStop(e){if(null===this._splitterPosition)throw new a.UnexpectedNullError("ROCOSDS66932");{const t=this.getItemsForSplitter(e),n=(0,s.pixelsToNumber)(t.before.element.style[this._dimension]),r=(0,s.pixelsToNumber)(t.after.element.style[this._dimension]),i=(this._splitterPosition+n)/(n+r),a=t.before[this._dimension]+t.after[this._dimension];t.before[this._dimension]=i*a,t.after[this._dimension]=(1-i)*a,e.element.style.top=(0,s.numberToPixels)(0),e.element.style.left=(0,s.numberToPixels)(0),globalThis.requestAnimationFrame((()=>this.updateSize()))}}}t.RowOrColumn=c,function(e){e.getElementDimensionSize=function(e,t){return"width"===t?(0,s.getElementWidth)(e):(0,s.getElementHeight)(e)},e.setElementDimensionSize=function(e,t,n){return"width"===t?(0,s.setElementWidth)(e,n):(0,s.setElementHeight)(e,n)},e.createElement=function(e,t){const n=e.createElement("div");return n.classList.add("lm_item"),t?n.classList.add("lm_column"):n.classList.add("lm_row"),n}}(c||(t.RowOrColumn=c={}))},5585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stack=void 0;const r=n(6214),i=n(3922),a=n(1810),o=n(7908),s=n(1642),l=n(4815),c=n(3226),d=n(2430),u=n(1940),p=n(4583),h=n(8818);class f extends p.ComponentParentableItem{_headerConfig;_header;_childElementContainer;_maximisedEnabled;_activeComponentItem;_dropSegment;_dropIndex;_contentAreaDimensions;_headerSideChanged=!1;_initialWantMaximise;_initialActiveItemIndex;_resizeListener=()=>this.handleResize();_maximisedListener=()=>this.handleMaximised();_minimisedListener=()=>this.handleMinimised();get childElementContainer(){return this._childElementContainer}get headerShow(){return this._header.show}get headerSide(){return this._header.side}get headerLeftRightSided(){return this._header.leftRightSided}get contentAreaDimensions(){return this._contentAreaDimensions}get initialWantMaximise(){return this._initialWantMaximise}get isMaximised(){return this===this.layoutManager.maximisedStack}get stackParent(){if(!this.parent)throw new Error("Stack should always have a parent");return this.parent}constructor(e,t,n){super(e,t,n,f.createElement(document)),this._headerConfig=t.header;const r=e.layoutConfig.header,i=t.content;let o;o=1!==i.length?void 0:i[0].header,this._initialWantMaximise=t.maximised,this._initialActiveItemIndex=t.activeItemIndex??0;const s=this._headerConfig?.show??o?.show??r.show,l=this._headerConfig?.popout??o?.popout??r.popout,d=this._headerConfig?.maximise??o?.maximise??r.maximise,u=this._headerConfig?.close??o?.close??r.close,p=this._headerConfig?.minimise??o?.minimise??r.minimise,h=this._headerConfig?.tabDropdown??o?.tabDropdown??r.tabDropdown;this._maximisedEnabled=!1!==d;const m={show:!1!==s,side:!1===s?c.Side.top:s,popoutEnabled:!1!==l,popoutLabel:!1===l?"":l,maximiseEnabled:this._maximisedEnabled,maximiseLabel:!1===d?"":d,closeEnabled:!1!==u,closeLabel:!1===u?"":u,minimiseEnabled:!0,minimiseLabel:p,tabDropdownEnabled:!1!==h,tabDropdownLabel:!1===h?"":h};this._header=new a.Header(e,this,m,t.isClosable&&!1!==u,(()=>this.getActiveComponentItem()),(()=>this.remove()),(()=>this.handlePopoutEvent()),(()=>this.toggleMaximise()),(e=>this.handleHeaderClickEvent(e)),(e=>this.handleHeaderTouchStartEvent(e)),(e=>this.handleHeaderComponentRemoveEvent(e)),(e=>this.handleHeaderComponentFocusEvent(e)),((e,t,n,r)=>this.handleHeaderComponentStartDragEvent(e,t,n,r))),this.isStack=!0,this._childElementContainer=document.createElement("section"),this._childElementContainer.classList.add("lm_items"),this.on("resize",this._resizeListener),this._maximisedEnabled&&(this.on("maximised",this._maximisedListener),this.on("minimised",this._minimisedListener)),this.element.appendChild(this._header.element),this.element.appendChild(this._childElementContainer),this.setupHeaderPosition(),this._header.updateClosability()}updateSize(){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize()}finally{this.layoutManager.endVirtualSizedContainerAdding()}}init(){if(!0===this.isInitialised)return;this.updateNodeSize();for(let e=0;e<this.contentItems.length;e++)this._childElementContainer.appendChild(this.contentItems[e].element);super.init();const e=this.contentItems,t=e.length;if(t>0){if(this._initialActiveItemIndex<0||this._initialActiveItemIndex>=t)throw new Error(`ActiveItemIndex out of range: ${this._initialActiveItemIndex} id: ${this.id}`);for(let n=0;n<t;n++){const t=e[n];if(!(t instanceof u.ComponentItem))throw new Error(`Stack Content Item is not of type ComponentItem: ${n} id: ${this.id}`);this._header.createTab(t,n),t.hide()}this.setActiveComponentItem(e[this._initialActiveItemIndex],!1),this._header.updateTabSizes()}this._header.updateClosability(),this.initContentItems()}setActiveContentItem(e){if(!h.ContentItem.isComponentItem(e))throw new Error("Stack.setActiveContentItem: item is not a ComponentItem");this.setActiveComponentItem(e,!1)}setActiveComponentItem(e,t,n=!1){if(this._activeComponentItem!==e){if(-1===this.contentItems.indexOf(e))throw new Error("componentItem is not a child of this stack");void 0!==this._activeComponentItem&&this._activeComponentItem.hide(),this._activeComponentItem=e,this._header.processActiveComponentChanged(e),e.show(),this.emit("activeContentItemChanged",e),this.layoutManager.emit("activeContentItemChanged",e),this.emitStateChangedEvent()}(this.focused||t)&&this.layoutManager.setFocusedComponentItem(e,n)}getActiveContentItem(){return this.getActiveComponentItem()??null}getActiveComponentItem(){return this._activeComponentItem}focusActiveContentItem(){this._activeComponentItem?.focus()}setFocusedValue(e){this._header.applyFocusedValue(e),super.setFocusedValue(e)}setRowColumnClosable(e){this._header.setRowColumnClosable(e)}newComponent(e,t,n,r){const i={type:"component",componentType:e,componentState:t,title:n};return this.newItem(i,r)}addComponent(e,t,n,r){const i={type:"component",componentType:e,componentState:t,title:n};return this.addItem(i,r)}newItem(e,t){return t=this.addItem(e,t),this.contentItems[t]}addItem(e,t){this.layoutManager.checkMinimiseMaximisedStack();const n=r.ItemConfig.resolve(e),i=this.layoutManager.createAndInitContentItem(n,this);return this.addChild(i,t)}addChild(e,t,n=!1){if(void 0!==t&&t>this.contentItems.length)throw t-=1,new o.AssertError("SAC99728");if(e instanceof u.ComponentItem)return t=super.addChild(e,t),this._childElementContainer.appendChild(e.element),this._header.createTab(e,t),this.setActiveComponentItem(e,n),this._header.updateTabSizes(),this.updateSize(),this._header.updateClosability(),this.emitStateChangedEvent(),t;throw new o.AssertError("SACC88532")}removeChild(e,t){const n=e,r=this.contentItems.indexOf(n),i=1===this.contentItems.length;if(this._activeComponentItem===n&&(n.focused&&n.blur(),!i)){const e=0===r?1:r-1;this.setActiveComponentItem(this.contentItems[e],!1)}this._header.removeTab(n),super.removeChild(n,t),i||this._header.updateClosability(),this.emitStateChangedEvent()}toggleMaximise(){this.isMaximised?this.minimise():this.maximise()}maximise(){if(!this.isMaximised){this.layoutManager.setMaximisedStack(this);const e=this.contentItems,t=e.length;for(let n=0;n<t;n++){const t=e[n];if(!(t instanceof u.ComponentItem))throw new o.AssertError("SMAXI87773");t.enterStackMaximised()}this.emitStateChangedEvent()}}minimise(){if(this.isMaximised){this.layoutManager.setMaximisedStack(void 0);const e=this.contentItems,t=e.length;for(let n=0;n<t;n++){const t=e[n];if(!(t instanceof u.ComponentItem))throw new o.AssertError("SMINI87773");t.exitStackMaximised()}this.emitStateChangedEvent()}}destroy(){this._activeComponentItem?.focused&&this._activeComponentItem.blur(),super.destroy(),this.off("resize",this._resizeListener),this._maximisedEnabled&&(this.off("maximised",this._maximisedListener),this.off("minimised",this._minimisedListener)),this._header.destroy()}toConfig(){let e;if(this._activeComponentItem&&(e=this.contentItems.indexOf(this._activeComponentItem),e<0))throw new Error("active component item not found in stack");if(this.contentItems.length>0&&void 0===e)throw new Error("expected non-empty stack to have an active component item");return{type:"stack",content:this.calculateConfigContent(),width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight,id:this.id,isClosable:this.isClosable,maximised:this.isMaximised,header:this.createHeaderConfig(),activeItemIndex:e}}onDrop(e,t){if("header"===this._dropSegment){if(this.resetHeaderDropZone(),void 0===this._dropIndex)throw new o.UnexpectedUndefinedError("SODDI68990");return void this.addChild(e,this._dropIndex)}if("body"===this._dropSegment)return void this.addChild(e,0,!0);const n="top"===this._dropSegment||"bottom"===this._dropSegment,r="left"===this._dropSegment||"right"===this._dropSegment,a="top"===this._dropSegment||"left"===this._dropSegment,s=n&&this.stackParent.isColumn||r&&this.stackParent.isRow,l=n?"height":"width";if(e.isComponent){const t=i.ResolvedStackItemConfig.createDefault();t.header=this.createHeaderConfig();const n=this.layoutManager.createAndInitContentItem(t,this);n.addChild(e),e=n}if(e.type===c.ItemType.row||e.type===c.ItemType.column){const t=i.ResolvedStackItemConfig.createDefault();t.header=this.createHeaderConfig();const n=this.layoutManager.createContentItem(t,this);n.addChild(e),e=n}if(s){const t=this.stackParent.contentItems.indexOf(this);this.stackParent.addChild(e,a?t:t+1,!0),this[l]*=.5,e[l]=this[l],this.stackParent.updateSize()}else{const t=n?c.ItemType.column:c.ItemType.row,r=i.ResolvedItemConfig.createDefault(t),o=this.layoutManager.createContentItem(r,this);this.stackParent.replaceChild(this,o),o.addChild(e,a?0:void 0,!0),o.addChild(this,a?void 0:0,!0),this[l]=50,e[l]=50,o.updateSize()}}highlightDropZone(e,t){for(const n in this._contentAreaDimensions){const r=n,i=this._contentAreaDimensions[r].hoverArea;if(i.x1<e&&i.x2>e&&i.y1<t&&i.y2>t)return void("header"===r?(this._dropSegment="header",this.highlightHeaderDropZone(this._header.leftRightSided?t:e)):(this.resetHeaderDropZone(),this.highlightBodyDropZone(r)))}}getArea(){if("none"===this.element.style.display)return null;const e=super.getElementArea(this._header.element),t=super.getElementArea(this._childElementContainer);if(null===e||null===t)throw new o.UnexpectedNullError("SGAHC13086");const n=t.x2-t.x1,r=t.y2-t.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},highlightArea:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}},0===this.contentItems.length?(this._contentAreaDimensions.body={hoverArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},highlightArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}},super.getElementArea(this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:t.x1,y1:t.y1,x2:t.x1+.25*n,y2:t.y2},highlightArea:{x1:t.x1,y1:t.y1,x2:t.x1+.5*n,y2:t.y2}},this._contentAreaDimensions.top={hoverArea:{x1:t.x1+.25*n,y1:t.y1,x2:t.x1+.75*n,y2:t.y1+.5*r},highlightArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y1+.5*r}},this._contentAreaDimensions.right={hoverArea:{x1:t.x1+.75*n,y1:t.y1,x2:t.x2,y2:t.y2},highlightArea:{x1:t.x1+.5*n,y1:t.y1,x2:t.x2,y2:t.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:t.x1+.25*n,y1:t.y1+.5*r,x2:t.x1+.75*n,y2:t.y2},highlightArea:{x1:t.x1,y1:t.y1+.5*r,x2:t.x2,y2:t.y2}},super.getElementArea(this.element))}positionHeader(e){this._header.side!==e&&(this._header.setSide(e),this._headerSideChanged=!0,this.setupHeaderPosition())}updateNodeSize(){if("none"!==this.element.style.display){const e=(0,d.getElementWidthAndHeight)(this.element);this._header.show&&(e[this._header.leftRightSided?c.WidthOrHeightPropertyName.width:c.WidthOrHeightPropertyName.height]-=this.layoutManager.layoutConfig.dimensions.headerHeight),this._childElementContainer.style.width=(0,d.numberToPixels)(e.width),this._childElementContainer.style.height=(0,d.numberToPixels)(e.height);for(let t=0;t<this.contentItems.length;t++)this.contentItems[t].element.style.width=(0,d.numberToPixels)(e.width),this.contentItems[t].element.style.height=(0,d.numberToPixels)(e.height);this.emit("resize"),this.emitStateChangedEvent()}}highlightHeaderDropZone(e){const t=this._header.lastVisibleTabIndex+1,n=this.layoutManager.dropTargetIndicator;if(null===n)throw new o.UnexpectedNullError("SHHDZDTI97110");let r;if(0===t){const e=(0,l.getJQueryOffset)(this._header.element),t=(0,d.getElementHeight)(this._header.element);r={x1:e.left,x2:e.left+100,y1:e.top+t-20,y2:e.top+t}}else{let n,i,a,o,s=0,c=!1;do{o=this._header.tabs[s].element;const t=(0,l.getJQueryOffset)(o);this._header.leftRightSided?(i=t.top,n=t.left,a=(0,d.getElementHeight)(o)):(i=t.left,n=t.top,a=(0,d.getElementWidth)(o)),e>=i&&e<i+a?c=!0:s++}while(s<t&&!c);if(!1===c&&e<i)return;e<i+a/2?(this._dropIndex=s,o.insertAdjacentElement("beforebegin",this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(s+1,t),o.insertAdjacentElement("afterend",this.layoutManager.tabDropPlaceholder));const u=(0,l.getJQueryOffset)(this.layoutManager.tabDropPlaceholder),p=(0,d.getElementWidth)(this.layoutManager.tabDropPlaceholder);if(this._header.leftRightSided){const e=u.top;r={x1:n,x2:n+o.clientHeight,y1:e,y2:e+p}}else{const e=u.left;r={x1:e,x2:e+p,y1:n,y2:n+o.clientHeight}}}n.highlightArea(r)}resetHeaderDropZone(){this.layoutManager.tabDropPlaceholder.remove()}setupHeaderPosition(){(0,d.setElementDisplayVisibility)(this._header.element,this._header.show),this.element.classList.remove("lm_left","lm_right","lm_bottom"),this._header.leftRightSided&&this.element.classList.add("lm_"+this._header.side),this.updateSize()}highlightBodyDropZone(e){if(void 0===this._contentAreaDimensions)throw new o.UnexpectedUndefinedError("SHBDZC82265");{const t=this._contentAreaDimensions[e].highlightArea,n=this.layoutManager.dropTargetIndicator;if(null===n)throw new o.UnexpectedNullError("SHBDZD96110");n.highlightArea(t),this._dropSegment=e}}handleResize(){this._header.updateTabSizes()}handleMaximised(){this._header.processMaximised()}handleMinimised(){this._header.processMinimised()}handlePopoutEvent(){this.popout()}handleHeaderClickEvent(e){const t=s.EventEmitter.headerClickEventName,n=new s.EventEmitter.ClickBubblingEvent(t,this,e);this.emit(t,n)}handleHeaderTouchStartEvent(e){const t=s.EventEmitter.headerTouchStartEventName,n=new s.EventEmitter.TouchStartBubblingEvent(t,this,e);this.emit(t,n)}handleHeaderComponentRemoveEvent(e){this.removeChild(e,!1)}handleHeaderComponentFocusEvent(e){this.setActiveComponentItem(e,!0)}handleHeaderComponentStartDragEvent(e,t,n,r){!0===this.isMaximised&&this.toggleMaximise(),this.layoutManager.startComponentDrag(e,t,n,r,this)}createHeaderConfig(){if(this._headerSideChanged){const e=!!this._header.show&&this._header.side;let t=i.ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig,e);return void 0===t&&(t={show:e,popout:void 0,maximise:void 0,close:void 0,minimise:void 0,tabDropdown:void 0}),t}return i.ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig)}emitStateChangedEvent(){this.emitBaseBubblingEvent("stateChanged")}}t.Stack=f,function(e){e.createElement=function(e){const t=e.createElement("div");return t.classList.add("lm_item"),t.classList.add("lm_stack"),t}}(f||(t.Stack=f={}))},8790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutManager=void 0;const r=n(6214),i=n(3922),a=n(7322),o=n(5894),s=n(607),l=n(9478),c=n(5623),d=n(4196),u=n(7908),p=n(1940),h=n(8818),f=n(46),m=n(1621),g=n(5585),v=n(9614),b=n(1642),y=n(6180),_=n(7100),w=n(3226),C=n(2430);class x extends b.EventEmitter{_containerElement;_isFullPage=!1;_isInitialised=!1;_groundItem=void 0;_openPopouts=[];_dropTargetIndicator=null;_transitionIndicator=null;_resizeTimeoutId;_itemAreas=[];_maximisedStack;_maximisePlaceholder=x.createMaximisePlaceElement(document);_tabDropPlaceholder=x.createTabDropPlaceholderElement(document);_dragSources=[];_updatingColumnsResponsive=!1;_firstLoad=!0;_eventHub=new y.EventHub(this);_width=null;_height=null;_focusedComponentItem;_virtualSizedContainers=[];_virtualSizedContainerAddingBeginCount=0;_windowResizeListener=()=>this.processResizeWithDebounce();_windowUnloadListener=()=>this.onUnload();_maximisedStackBeforeDestroyedListener=e=>this.cleanupBeforeMaximisedStackDestroyed(e);isSubWindow;layoutConfig;beforeVirtualRectingEvent;afterVirtualRectingEvent;get container(){return this._containerElement}get isInitialised(){return this._isInitialised}get groundItem(){return this._groundItem}get root(){return this._groundItem}get openPopouts(){return this._openPopouts}get dropTargetIndicator(){return this._dropTargetIndicator}get transitionIndicator(){return this._transitionIndicator}get width(){return this._width}get height(){return this._height}get eventHub(){return this._eventHub}get rootItem(){if(void 0===this._groundItem)throw new Error("Cannot access rootItem before init");return 0===this._groundItem.contentItems.length?void 0:this._groundItem.contentItems[0]}get focusedComponentItem(){return this._focusedComponentItem}get tabDropPlaceholder(){return this._tabDropPlaceholder}get maximisedStack(){return this._maximisedStack}constructor(e){super();let t=e.layoutConfig;void 0===t&&(t=i.ResolvedLayoutConfig.createDefault()),this.layoutConfig=t,this.isSubWindow=e.isSubWindow,_.I18nStrings.checkInitialise(),v.ConfigMinifier.checkInitialise(),void 0!==e.containerElement&&(this._containerElement=e.containerElement)}destroy(){if(this._isInitialised){if(!0===this.layoutConfig.settings.closePopoutsOnUnload)for(let e=0;e<this._openPopouts.length;e++)this._openPopouts[e].close();this._isFullPage&&globalThis.removeEventListener("resize",this._windowResizeListener),globalThis.removeEventListener("unload",this._windowUnloadListener),globalThis.removeEventListener("beforeunload",this._windowUnloadListener),void 0!==this._groundItem&&this._groundItem.destroy(),this._tabDropPlaceholder.remove(),null!==this._dropTargetIndicator&&this._dropTargetIndicator.destroy(),null!==this._transitionIndicator&&this._transitionIndicator.destroy(),this._eventHub.destroy();for(const e of this._dragSources)e.destroy();this._dragSources=[],this._isInitialised=!1}}minifyConfig(e){return i.ResolvedLayoutConfig.minifyConfig(e)}unminifyConfig(e){return i.ResolvedLayoutConfig.unminifyConfig(e)}init(){this.setContainer(),this._dropTargetIndicator=new l.DropTargetIndicator,this._transitionIndicator=new c.TransitionIndicator,this.updateSizeFromContainer();const e=this.layoutConfig;this._groundItem=new f.GroundItem(this,e.root,this._containerElement),this._groundItem.init(),this.checkLoadedLayoutMaximiseItem(),this.bindEvents(),this._isInitialised=!0,this.adjustColumnsResponsive(),this.emit("initialised")}loadLayout(e){if(!this.isInitialised)throw new Error("GoldenLayout: Need to call init() if LayoutConfig with defined root passed to constructor");if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMLL11119");this.layoutConfig=r.LayoutConfig.resolve(e),this._groundItem.loadRoot(this.layoutConfig.root),this.checkLoadedLayoutMaximiseItem(),this.adjustColumnsResponsive()}saveLayout(){if(!1===this._isInitialised)throw new Error("Can't create config, layout not yet initialised");if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMTC18244");{const e=this._groundItem.calculateConfigContent();let t;t=1!==e.length?void 0:e[0],this.reconcilePopoutWindows();const n=[];for(let e=0;e<this._openPopouts.length;e++)n.push(this._openPopouts[e].toConfig());return{root:t,openPopouts:n,settings:i.ResolvedLayoutConfig.Settings.createCopy(this.layoutConfig.settings),dimensions:i.ResolvedLayoutConfig.Dimensions.createCopy(this.layoutConfig.dimensions),header:i.ResolvedLayoutConfig.Header.createCopy(this.layoutConfig.header),resolved:!0}}}clear(){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMCL11129");this._groundItem.clearRoot()}toConfig(){return this.saveLayout()}newComponent(e,t,n){const r=this.newComponentAtLocation(e,t,n);if(void 0===r)throw new u.AssertError("LMNC65588");return r}newComponentAtLocation(e,t,n,r){if(void 0===this._groundItem)throw new Error("Cannot add component before init");{const i=this.addComponentAtLocation(e,t,n,r);if(void 0===i)return;{const e=i.parentItem.contentItems[i.index];if(h.ContentItem.isComponentItem(e))return e;throw new u.AssertError("LMNC992877533")}}}addComponent(e,t,n){const r=this.addComponentAtLocation(e,t,n);if(void 0===r)throw new u.AssertError("LMAC99943");return r}addComponentAtLocation(e,t,n,r){const i={type:"component",componentType:e,componentState:t,title:n};return this.addItemAtLocation(i,r)}newItem(e){const t=this.newItemAtLocation(e);if(void 0===t)throw new u.AssertError("LMNC65588");return t}newItemAtLocation(e,t){if(void 0===this._groundItem)throw new Error("Cannot add component before init");{const n=this.addItemAtLocation(e,t);if(void 0===n)return;return n.parentItem.contentItems[n.index]}}addItem(e){const t=this.addItemAtLocation(e);if(void 0===t)throw new u.AssertError("LMAI99943");return t}addItemAtLocation(e,t){if(void 0===this._groundItem)throw new Error("Cannot add component before init");{void 0===t&&(t=x.defaultLocationSelectors);const n=this.findFirstLocation(t);if(void 0===n)return;{let t,i=n.parentItem;switch(i.type){case w.ItemType.ground:t=i.addItem(e,n.index),t>=0?i=this._groundItem.contentItems[0]:t=0;break;case w.ItemType.row:case w.ItemType.column:t=i.addItem(e,n.index);break;case w.ItemType.stack:if(r.ItemConfig.isComponent(e)){t=i.addItem(e,n.index);break}throw Error(_.i18nStrings[6]);case w.ItemType.component:throw new u.AssertError("LMAIALC87444602");default:throw new u.UnreachableCaseError("LMAIALU98881733",i.type)}if(r.ItemConfig.isComponent(e)){const e=i.contentItems[t];h.ContentItem.isStack(e)&&(i=e,t=0)}return n.parentItem=i,n.index=t,n}}}loadComponentAsRoot(e){if(void 0===this._groundItem)throw new Error("Cannot add item before init");this._groundItem.loadComponentAsRoot(e)}updateSize(e,t){this.setSize(e,t)}setSize(e,t){if(this._width=e,this._height=t,!0===this._isInitialised){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMUS18881");if(this._groundItem.setSize(this._width,this._height),this._maximisedStack){const{width:e,height:t}=(0,C.getElementWidthAndHeight)(this._containerElement);(0,C.setElementWidth)(this._maximisedStack.element,e),(0,C.setElementHeight)(this._maximisedStack.element,t),this._maximisedStack.updateSize()}this.adjustColumnsResponsive()}}updateSizeFromContainer(){const{width:e,height:t}=(0,C.getElementWidthAndHeight)(this._containerElement);this.setSize(e,t)}updateRootSize(){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMURS28881");this._groundItem.updateSize()}createAndInitContentItem(e,t){const n=this.createContentItem(e,t);return n.init(),n}createContentItem(e,t){if("string"!=typeof e.type)throw new d.ConfigurationError("Missing parameter 'type'",JSON.stringify(e));return!i.ResolvedItemConfig.isComponentItem(e)||t instanceof g.Stack||!t||!0===this.isSubWindow&&t instanceof f.GroundItem||(e={type:w.ItemType.stack,content:[e],width:e.width,minWidth:e.minWidth,height:e.height,minHeight:e.minHeight,id:e.id,maximised:e.maximised,isClosable:e.isClosable,activeItemIndex:0,header:void 0}),this.createContentItemFromConfig(e,t)}findFirstComponentItemById(e){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMFFCIBI82446");return this.findFirstContentItemTypeByIdRecursive(w.ItemType.component,e,this._groundItem)}createPopout(e,t,n,r){return e instanceof h.ContentItem?this.createPopoutFromContentItem(e,t,n,r):this.createPopoutFromItemConfig(e,t,n,r)}createPopoutFromContentItem(e,t,n,r){let a=e.parent,o=e;for(;null!==a&&1===a.contentItems.length&&!a.isGround;)o=a,a=a.parent;if(null===a)throw new u.UnexpectedNullError("LMCPFCI00834");{if(void 0===r&&(r=a.contentItems.indexOf(o)),null!==n&&a.addPopInParentId(n),void 0===t){const n=globalThis.screenX||globalThis.screenLeft,r=globalThis.screenY||globalThis.screenTop,i=e.element.offsetLeft,a=e.element.offsetTop,{width:o,height:s}=(0,C.getElementWidthAndHeight)(e.element);t={left:n+i,top:r+a,width:o,height:s}}const s=e.toConfig();if(e.remove(),i.ResolvedRootItemConfig.isRootItemConfig(s))return this.createPopoutFromItemConfig(s,t,n,r);throw new Error(`${_.i18nStrings[0]}`)}}beginVirtualSizedContainerAdding(){0==++this._virtualSizedContainerAddingBeginCount&&(this._virtualSizedContainers.length=0)}addVirtualSizedContainer(e){this._virtualSizedContainers.push(e)}endVirtualSizedContainerAdding(){if(0==--this._virtualSizedContainerAddingBeginCount){const e=this._virtualSizedContainers.length;if(e>0){this.fireBeforeVirtualRectingEvent(e);for(let t=0;t<e;t++)this._virtualSizedContainers[t].notifyVirtualRectingRequired();this.fireAfterVirtualRectingEvent(),this._virtualSizedContainers.length=0}}}fireBeforeVirtualRectingEvent(e){void 0!==this.beforeVirtualRectingEvent&&this.beforeVirtualRectingEvent(e)}fireAfterVirtualRectingEvent(){void 0!==this.afterVirtualRectingEvent&&this.afterVirtualRectingEvent()}createPopoutFromItemConfig(e,t,n,r){const i=this.toConfig(),a={root:e,openPopouts:[],settings:i.settings,dimensions:i.dimensions,header:i.header,window:t,parentId:n,indexInParent:r,resolved:!0};return this.createPopoutFromPopoutLayoutConfig(a)}createPopoutFromPopoutLayoutConfig(e){const t=e.window,n={left:t.left??(globalThis.screenX||globalThis.screenLeft+20),top:t.top??(globalThis.screenY||globalThis.screenTop+20),width:t.width??500,height:t.height??309},r=new a.BrowserPopout(e,n,this);return r.on("initialised",(()=>this.emit("windowOpened",r))),r.on("closed",(()=>this.reconcilePopoutWindows())),this._openPopouts.push(r),r}newDragSource(e,t,n,r){const i=new s.DragSource(this,e,[],t,n,r);return this._dragSources.push(i),i}removeDragSource(e){(0,C.removeFromArray)(e,this._dragSources),e.destroy()}startComponentDrag(e,t,n,r,i){new o.DragProxy(e,t,n,this,r,i)}focusComponent(e,t=!1){e.focus(t)}clearComponentFocus(e=!1){this.setFocusedComponentItem(void 0,e)}setFocusedComponentItem(e,t=!1){if(e!==this._focusedComponentItem){let n;if(void 0===e||(n=e.parentItem),void 0!==this._focusedComponentItem){const e=this._focusedComponentItem;this._focusedComponentItem=void 0,e.setBlurred(t);const r=e.parentItem;n===r?n=void 0:r.setFocusedValue(!1)}void 0!==e&&(this._focusedComponentItem=e,e.setFocused(t),void 0!==n&&n.setFocusedValue(!0))}}createContentItemFromConfig(e,t){switch(e.type){case w.ItemType.ground:throw new u.AssertError("LMCCIFC68871");case w.ItemType.row:return new m.RowOrColumn(!1,this,e,t);case w.ItemType.column:return new m.RowOrColumn(!0,this,e,t);case w.ItemType.stack:return new g.Stack(this,e,t);case w.ItemType.component:return new p.ComponentItem(this,e,t);default:throw new u.UnreachableCaseError("CCC913564",e.type,"Invalid Config Item type specified")}}setMaximisedStack(e){void 0===e?void 0!==this._maximisedStack&&this.processMinimiseMaximisedStack():e!==this._maximisedStack&&(void 0!==this._maximisedStack&&this.processMinimiseMaximisedStack(),this.processMaximiseStack(e))}checkMinimiseMaximisedStack(){void 0!==this._maximisedStack&&this._maximisedStack.minimise()}cleanupBeforeMaximisedStackDestroyed(e){null!==this._maximisedStack&&this._maximisedStack===e.target&&(this._maximisedStack.off("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),this._maximisedStack=void 0)}closeWindow(){globalThis.setTimeout((()=>globalThis.close()),1)}getArea(e,t){let n=null,r=1/0;for(let i=0;i<this._itemAreas.length;i++){const a=this._itemAreas[i];e>a.x1&&e<a.x2&&t>a.y1&&t<a.y2&&r>a.surface&&(r=a.surface,n=a)}return n}calculateItemAreas(){const e=this.getAllContentItems(),t=this._groundItem;if(void 0===t)throw new u.UnexpectedUndefinedError("LMCIAR44365");if(1!==e.length){t.contentItems[0].isStack?this._itemAreas=[]:this._itemAreas=t.createSideAreas();for(let t=0;t<e.length;t++){const n=e[t];if(h.ContentItem.isStack(n)){const e=n.getArea();if(null===e)continue;{this._itemAreas.push(e);const t=n.contentAreaDimensions;if(void 0===t)throw new u.UnexpectedUndefinedError("LMCIASC45599");{const e=t.header.highlightArea,r=(e.x2-e.x1)*(e.y2-e.y1),i={x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,contentItem:n,surface:r};this._itemAreas.push(i)}}}}}else{const e=t.getElementArea();if(null===e)throw new u.UnexpectedNullError("LMCIARA44365");this._itemAreas=[e]}}checkLoadedLayoutMaximiseItem(){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMCLLMI43432");{const e=this._groundItem.getConfigMaximisedItems();if(e.length>0){let t=e[0];if(h.ContentItem.isComponentItem(t)){const e=t.parent;if(null===e)throw new u.UnexpectedNullError("LMXLLMI69999");t=e}if(!h.ContentItem.isStack(t))throw new u.AssertError("LMCLLMI19993");t.maximise()}}}processMaximiseStack(e){if(this._maximisedStack=e,e.on("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),e.element.classList.add("lm_maximised"),e.element.insertAdjacentElement("afterend",this._maximisePlaceholder),void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMMXI19993");{this._groundItem.element.prepend(e.element);const{width:t,height:n}=(0,C.getElementWidthAndHeight)(this._containerElement);(0,C.setElementWidth)(e.element,t),(0,C.setElementHeight)(e.element,n),e.updateSize(),e.focusActiveContentItem(),this._maximisedStack.emit("maximised"),this.emit("stateChanged")}}processMinimiseMaximisedStack(){if(void 0===this._maximisedStack)throw new u.AssertError("LMMMS74422");{const e=this._maximisedStack;if(null===e.parent)throw new u.UnexpectedNullError("LMMI13668");e.element.classList.remove("lm_maximised"),this._maximisePlaceholder.insertAdjacentElement("afterend",e.element),this._maximisePlaceholder.remove(),e.parent.updateSize(),this._maximisedStack=void 0,e.off("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),e.emit("minimised"),this.emit("stateChanged")}}reconcilePopoutWindows(){const e=[];for(let t=0;t<this._openPopouts.length;t++)!1===this._openPopouts[t].getWindow().closed?e.push(this._openPopouts[t]):this.emit("windowClosed",this._openPopouts[t]);this._openPopouts.length!==e.length&&(this._openPopouts=e,this.emit("stateChanged"))}getAllContentItems(){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMGACI13130");return this._groundItem.getAllContentItems()}bindEvents(){this._isFullPage&&globalThis.addEventListener("resize",this._windowResizeListener,{passive:!0}),globalThis.addEventListener("unload",this._windowUnloadListener,{passive:!0}),globalThis.addEventListener("beforeunload",this._windowUnloadListener,{passive:!0})}processResizeWithDebounce(){void 0!==this._resizeTimeoutId&&clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout((()=>this.updateSizeFromContainer()),100)}setContainer(){const e=document.body,t=this._containerElement??e;if(t===e){this._isFullPage=!0;const t=document.documentElement;t.style.height="100%",t.style.margin="0",t.style.padding="0",t.style.overflow="hidden",e.style.height="100%",e.style.margin="0",e.style.padding="0",e.style.overflow="hidden"}this._containerElement=t}onUnload(){this.destroy()}adjustColumnsResponsive(){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMACR20883");if(this._firstLoad=!1,this.useResponsiveLayout()&&!this._updatingColumnsResponsive&&this._groundItem.contentItems.length>0&&this._groundItem.contentItems[0].isRow){if(void 0===this._groundItem||null===this._width)throw new u.UnexpectedUndefinedError("LMACR77412");{const e=this._groundItem.contentItems[0].contentItems.length;if(e<=1)return;{const t=this.layoutConfig.dimensions.minItemWidth;if(e*t<=this._width)return;{this._updatingColumnsResponsive=!0;const n=e-Math.max(Math.floor(this._width/t),1),r=this._groundItem.contentItems[0],i=this.getAllStacks();if(0===i.length)throw new u.AssertError("LMACRS77413");{const e=i[0];for(let t=0;t<n;t++){const t=r.contentItems[r.contentItems.length-1];this.addChildContentItemsToContainer(e,t)}this._updatingColumnsResponsive=!1}}}}}}useResponsiveLayout(){const e=this.layoutConfig.settings,t=e.responsiveMode===w.ResponsiveMode.always,n=e.responsiveMode===w.ResponsiveMode.onload&&this._firstLoad;return t||n}addChildContentItemsToContainer(e,t){const n=t.contentItems;if(t instanceof g.Stack)for(let r=0;r<n.length;r++){const i=n[r];t.removeChild(i,!0),e.addChild(i)}else for(let t=0;t<n.length;t++){const r=n[t];this.addChildContentItemsToContainer(e,r)}}getAllStacks(){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMFASC52778");{const e=[];return this.findAllStacksRecursive(e,this._groundItem),e}}findFirstContentItemType(e){if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMFFCIT82446");return this.findFirstContentItemTypeRecursive(e,this._groundItem)}findFirstContentItemTypeRecursive(e,t){const n=t.contentItems,r=n.length;if(0!==r){for(let t=0;t<r;t++){const r=n[t];if(r.type===e)return r}for(let t=0;t<r;t++){const r=n[t],i=this.findFirstContentItemTypeRecursive(e,r);if(void 0!==i)return i}}}findFirstContentItemTypeByIdRecursive(e,t,n){const r=n.contentItems,i=r.length;if(0!==i){for(let n=0;n<i;n++){const i=r[n];if(i.type===e&&i.id===t)return i}for(let n=0;n<i;n++){const i=r[n],a=this.findFirstContentItemTypeByIdRecursive(e,t,i);if(void 0!==a)return a}}}findAllStacksRecursive(e,t){const n=t.contentItems;for(let t=0;t<n.length;t++){const r=n[t];r instanceof g.Stack?e.push(r):r.isComponent||this.findAllStacksRecursive(e,r)}}findFirstLocation(e){const t=e.length;for(let n=0;n<t;n++){const t=e[n],r=this.findLocation(t);if(void 0!==r)return r}}findLocation(e){const t=e.index;switch(e.typeId){case 0:if(void 0===this._focusedComponentItem)return;{const e=this._focusedComponentItem.parentItem,n=e.contentItems,r=n.length;if(void 0===t)return{parentItem:e,index:r};{const i=n.indexOf(this._focusedComponentItem)+t;return i<0||i>r?void 0:{parentItem:e,index:i}}}case 1:if(void 0===this._focusedComponentItem)return;{const e=this._focusedComponentItem.parentItem;return this.tryCreateLocationFromParentItem(e,t)}case 2:{const e=this.findFirstContentItemType(w.ItemType.stack);return void 0===e?void 0:this.tryCreateLocationFromParentItem(e,t)}case 3:{let e=this.findFirstContentItemType(w.ItemType.row);return void 0!==e?this.tryCreateLocationFromParentItem(e,t):(e=this.findFirstContentItemType(w.ItemType.column),void 0!==e?this.tryCreateLocationFromParentItem(e,t):void 0)}case 4:{const e=this.findFirstContentItemType(w.ItemType.row);return void 0===e?void 0:this.tryCreateLocationFromParentItem(e,t)}case 5:{const e=this.findFirstContentItemType(w.ItemType.column);return void 0===e?void 0:this.tryCreateLocationFromParentItem(e,t)}case 6:if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMFLRIF18244");return void 0!==this.rootItem?void 0:void 0===t||0===t?{parentItem:this._groundItem,index:0}:void 0;case 7:if(void 0===this._groundItem)throw new u.UnexpectedUndefinedError("LMFLF18244");{const e=this._groundItem.contentItems;if(0===e.length)return void 0===t||0===t?{parentItem:this._groundItem,index:0}:void 0;{const n=e[0];return this.tryCreateLocationFromParentItem(n,t)}}}}tryCreateLocationFromParentItem(e,t){const n=e.contentItems.length;return void 0===t?{parentItem:e,index:n}:t<0||t>n?void 0:{parentItem:e,index:t}}}t.LayoutManager=x,function(e){e.createMaximisePlaceElement=function(e){const t=e.createElement("div");return t.classList.add("lm_maximise_place"),t},e.createTabDropPlaceholderElement=function(e){const t=e.createElement("div");return t.classList.add("lm_drop_tab_placeholder"),t},e.defaultLocationSelectors=[{typeId:1,index:void 0},{typeId:2,index:void 0},{typeId:3,index:void 0},{typeId:7,index:void 0}],e.afterFocusedItemIfPossibleLocationSelectors=[{typeId:0,index:1},{typeId:2,index:void 0},{typeId:3,index:void 0},{typeId:7,index:void 0}]}(x||(t.LayoutManager=x={}))},9614:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigMinifier=void 0,function(e){const t=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentType","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],n=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"];function r(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){let s;s=t?a(r):o(r);const l=e[r];n[s]=i(l,t)}return n}function i(e,t){return"object"==typeof e?null===e?null:Array.isArray(e)?function(e,t){const n=e.length,r=new Array(n);for(let a=0;a<n;a++){const n=e[a];r[a]=i(n,t)}return r}(e,t):r(e,t):t?function(e){if("string"==typeof e&&1===e.length)return"___"+e;const t=function(e){for(let t=0;t<n.length;t++)if(n[t]===e)return t;return-1}(e);return-1===t?e:t.toString(36)}(e):"string"==typeof(a=e)&&1===a.length?n[parseInt(a,36)]:"string"==typeof a&&"___"===a.substr(0,3)?a[3]:a;var a}function a(e){if("string"==typeof e&&1===e.length)return"___"+e;const n=function(e){for(let n=0;n<t.length;n++)if(t[n]===e)return n;return-1}(e);return-1===n?e:n.toString(36)}function o(e){return 1===e.length?t[parseInt(e,36)]:"___"===e.substr(0,3)?e[3]:e}e.checkInitialise=function(){if(t.length>36)throw new Error("Too many keys in config minifier map")},e.translateObject=r}(n||(t.ConfigMinifier=n={}))},7597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragListener=void 0;const r=n(1642);class i extends r.EventEmitter{_eElement;_timeout;_allowableTargets;_oDocument;_eBody;_nDelay;_nDistance;_nX;_nY;_nOriginalX;_nOriginalY;_dragging;_pointerTracking=!1;_pointerDownEventListener=e=>this.onPointerDown(e);_pointerMoveEventListener=e=>this.onPointerMove(e);_pointerUpEventListener=e=>this.onPointerUp(e);constructor(e,t){super(),this._eElement=e,this._timeout=void 0,this._allowableTargets=[e,...t],this._oDocument=document,this._eBody=document.body,this._nDelay=1800,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._dragging=!1,this._eElement.addEventListener("pointerdown",this._pointerDownEventListener,{passive:!0})}destroy(){this.checkRemovePointerTrackingEventListeners(),this._eElement.removeEventListener("pointerdown",this._pointerDownEventListener)}cancelDrag(){this.processDragStop(void 0)}onPointerDown(e){if(this._allowableTargets.includes(e.target)&&e.isPrimary){const t=this.getPointerCoordinates(e);this.processPointerDown(t)}}processPointerDown(e){this._nOriginalX=e.x,this._nOriginalY=e.y,this._oDocument.addEventListener("pointermove",this._pointerMoveEventListener),this._oDocument.addEventListener("pointerup",this._pointerUpEventListener,{passive:!0}),this._pointerTracking=!0,this._timeout=setTimeout((()=>{try{this.startDrag()}catch(e){throw console.error(e),e}}),this._nDelay)}onPointerMove(e){this._pointerTracking&&(this.processDragMove(e),e.preventDefault())}processDragMove(e){this._nX=e.pageX-this._nOriginalX,this._nY=e.pageY-this._nOriginalY,!1===this._dragging&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&this.startDrag(),this._dragging&&this.emit("drag",this._nX,this._nY,e)}onPointerUp(e){this.processDragStop(e)}processDragStop(e){void 0!==this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this.checkRemovePointerTrackingEventListeners(),!0===this._dragging&&(this._eBody.classList.remove("lm_dragging"),this._eElement.classList.remove("lm_dragging"),this._oDocument.querySelector("iframe")?.style.setProperty("pointer-events",""),this._dragging=!1,this.emit("dragStop",e))}checkRemovePointerTrackingEventListeners(){this._pointerTracking&&(this._oDocument.removeEventListener("pointermove",this._pointerMoveEventListener),this._oDocument.removeEventListener("pointerup",this._pointerUpEventListener),this._pointerTracking=!1)}startDrag(){void 0!==this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this._dragging=!0,this._eBody.classList.add("lm_dragging"),this._eElement.classList.add("lm_dragging"),this._oDocument.querySelector("iframe")?.style.setProperty("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)}getPointerCoordinates(e){return{x:e.pageX,y:e.pageY}}}t.DragListener=i},1642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;class n{_allEventSubscriptions=[];_subscriptionsMap=new Map;tryBubbleEvent(e,t){}emit(e,...t){let n=this._subscriptionsMap.get(e);if(void 0!==n){n=n.slice();for(let e=0;e<n.length;e++)(0,n[e])(...t)}this.emitAllEvent(e,t),this.tryBubbleEvent(e,t)}emitUnknown(e,...t){let n=this._subscriptionsMap.get(e);if(void 0!==n){n=n.slice();for(let e=0;e<n.length;e++)n[e](...t)}this.emitAllEvent(e,t),this.tryBubbleEvent(e,t)}emitBaseBubblingEvent(e){const t=new n.BubblingEvent(e,this);this.emitUnknown(e,t)}emitUnknownBubblingEvent(e){const t=new n.BubblingEvent(e,this);this.emitUnknown(e,t)}removeEventListener(e,t){const n=t;this.removeUnknownEventListener(e,n)}off(e,t){this.removeEventListener(e,t)}unbind=this.removeEventListener;trigger=this.emit;addEventListener(e,t){const n=t;this.addUnknownEventListener(e,n)}on(e,t){this.addEventListener(e,t)}addUnknownEventListener(e,t){if(e===n.ALL_EVENT)this._allEventSubscriptions.push(t);else{let n=this._subscriptionsMap.get(e);void 0!==n?n.push(t):(n=[t],this._subscriptionsMap.set(e,n))}}removeUnknownEventListener(e,t){if(e===n.ALL_EVENT)this.removeSubscription(e,this._allEventSubscriptions,t);else{const n=this._subscriptionsMap.get(e);if(void 0===n)throw new Error("No subscribtions to unsubscribe for event "+e);this.removeSubscription(e,n,t)}}removeSubscription(e,t,n){const r=t.indexOf(n);if(r<0)throw new Error("Nothing to unbind for "+e);t.splice(r,1)}emitAllEvent(e,t){const n=this._allEventSubscriptions.length;if(n>0){const r=t.slice();r.unshift(e);const i=this._allEventSubscriptions.slice();for(let e=0;e<n;e++)i[e](...r)}}}t.EventEmitter=n,function(e){e.ALL_EVENT="__all",e.headerClickEventName="stackHeaderClick",e.headerTouchStartEventName="stackHeaderTouchStart";class t{_name;_target;_isPropagationStopped=!1;get name(){return this._name}get target(){return this._target}get origin(){return this._target}get isPropagationStopped(){return this._isPropagationStopped}constructor(e,t){this._name=e,this._target=t}stopPropagation(){this._isPropagationStopped=!0}}e.BubblingEvent=t,e.ClickBubblingEvent=class extends t{_mouseEvent;get mouseEvent(){return this._mouseEvent}constructor(e,t,n){super(e,t),this._mouseEvent=n}},e.TouchStartBubblingEvent=class extends t{_touchEvent;get touchEvent(){return this._touchEvent}constructor(e,t,n){super(e,t),this._touchEvent=n}}}(n||(t.EventEmitter=n={}))},6180:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventHub=void 0;const r=n(7908),i=n(1642);class a extends i.EventEmitter{_layoutManager;_childEventListener=e=>this.onEventFromChild(e);constructor(e){super(),this._layoutManager=e,globalThis.addEventListener(a.ChildEventName,this._childEventListener,{passive:!0})}emit(e,...t){"userBroadcast"===e?this.emitUserBroadcast(...t):super.emit(e,...t)}emitUserBroadcast(...e){this.handleUserBroadcastEvent("userBroadcast",e)}destroy(){globalThis.removeEventListener(a.ChildEventName,this._childEventListener)}handleUserBroadcastEvent(e,t){this._layoutManager.isSubWindow?this.propagateToParent(e,t):this.propagateToThisAndSubtree(e,t)}onEventFromChild(e){const t=e.detail;this.handleUserBroadcastEvent(t.eventName,t.args)}propagateToParent(e,t){const n={bubbles:!0,cancelable:!0,detail:{layoutManager:this._layoutManager,eventName:e,args:t}},i=new CustomEvent(a.ChildEventName,n),o=globalThis.opener;if(null===o)throw new r.UnexpectedNullError("EHPTP15778");o.dispatchEvent(i)}propagateToThisAndSubtree(e,t){this.emitUnknown(e,...t);for(let n=0;n<this._layoutManager.openPopouts.length;n++){const r=this._layoutManager.openPopouts[n].getGlInstance();r&&r.eventHub.propagateToThisAndSubtree(e,t)}}}t.EventHub=a,function(e){e.ChildEventName="gl_child_event"}(a||(t.EventHub=a={}))},7100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.i18nStrings=t.I18nStrings=void 0;const r=n(7908);var i;!function(e){let n=!1;const i={PopoutCannotBeCreatedWithGroundItemConfig:{id:0,default:"Popout cannot be created with ground ItemConfig"},PleaseRegisterAConstructorFunction:{id:1,default:"Please register a constructor function"},ComponentTypeNotRegisteredAndBindComponentEventHandlerNotAssigned:{id:2,default:"Component type not registered and BindComponentEvent handler not assigned"},ComponentIsAlreadyRegistered:{id:3,default:"Component is already registered"},ComponentIsNotVirtuable:{id:4,default:"Component is not virtuable. Requires rootHtmlElement field/getter"},VirtualComponentDoesNotHaveRootHtmlElement:{id:5,default:'Virtual component does not have getter "rootHtmlElement"'},ItemConfigIsNotTypeComponent:{id:6,default:"ItemConfig is not of type component"}};e.idCount=Object.keys(i).length;const a=Object.values(i);e.checkInitialise=function(){if(!n)for(let n=0;n<e.idCount;n++){const e=a[n];if(e.id!==n)throw new r.AssertError("INSI00110",`${n}: ${e.id}`);t.i18nStrings[n]=e.default}n=!0}}(i||(t.I18nStrings=i={})),t.i18nStrings=new Array(i.idCount)},4815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJQueryLeftAndTop=t.getJQueryOffset=void 0;const r=n(2430);t.getJQueryOffset=function(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},t.getJQueryLeftAndTop=function(e){const t=getComputedStyle(e,null);return{left:(0,r.pixelsToNumber)(t.left),top:(0,r.pixelsToNumber)(t.top)}}},6665:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StyleConstants=void 0,function(e){e.defaultComponentBaseZIndex="auto",e.defaultComponentDragZIndex="32",e.defaultComponentStackMaximisedZIndex="41"}(n||(t.StyleConstants=n={}))},3226:(e,t)=>{"use strict";var n,r,i,a,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsiveMode=t.ItemType=t.JsonValue=t.LogicalZIndex=t.Side=t.WidthOrHeightPropertyName=void 0,function(e){e.width="width",e.height="height"}(n||(t.WidthOrHeightPropertyName=n={})),function(e){e.top="top",e.left="left",e.right="right",e.bottom="bottom"}(r||(t.Side=r={})),function(e){e.base="base",e.drag="drag",e.stackMaximised="stackMaximised"}(i||(t.LogicalZIndex=i={})),function(e){function t(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e}e.isJson=function(e){return t(e)},e.isJsonObject=t}(a||(t.JsonValue=a={})),function(e){e.ground="ground",e.row="row",e.column="column",e.stack="stack",e.component="component"}(o||(t.ItemType=o={})),function(e){e.none="none",e.always="always",e.onload="onload"}(s||(t.ResponsiveMode=s={}))},2430:(e,t)=>{"use strict";function n(e){return e.toString(10)+"px"}function r(e,t){if(void 0!==t)for(const n in t)if(t.hasOwnProperty(n)){const r=t[n],a=e[n];e[n]=i(a,r)}return e}function i(e,t){if("object"!=typeof t)return t;if(Array.isArray(t)){const e=t.length,n=new Array(e);for(let r=0;r<e;r++){const e=t[r];n[r]=i({},e)}return n}if(null===t)return null;{const n=t;return void 0===e||("object"!=typeof e||Array.isArray(e))?r({},n):r(null===e?{}:e,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=t.removeFromArray=t.deepExtendValue=t.deepExtend=t.extend=t.ensureElementPositionAbsolute=t.setElementDisplayVisibility=t.getElementWidthAndHeight=t.setElementHeight=t.getElementHeight=t.setElementWidth=t.getElementWidth=t.pixelsToNumber=t.numberToPixels=void 0,t.numberToPixels=n,t.pixelsToNumber=function(e){const t=e.replace("px","");return parseFloat(t)},t.getElementWidth=function(e){return e.offsetWidth},t.setElementWidth=function(e,t){const r=n(t);e.style.width=r},t.getElementHeight=function(e){return e.offsetHeight},t.setElementHeight=function(e,t){const r=n(t);e.style.height=r},t.getElementWidthAndHeight=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},t.setElementDisplayVisibility=function(e,t){e.style.display=t?"":"none"},t.ensureElementPositionAbsolute=function(e){const t="absolute";e.style.position!==t&&(e.style.position=t)},t.extend=function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.deepExtend=r,t.deepExtendValue=i,t.removeFromArray=function(e,t){const n=t.indexOf(e);if(-1===n)throw new Error("Can't remove item from array. Item is not in the array");t.splice(n,1)},t.getUniqueId=function(){return(1e15*Math.random()).toString(36).replace(".","")}},6588:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualLayout=void 0;const r=n(6214),i=n(3922),a=n(4196),o=n(7908),s=n(8790),l=n(7100);class c extends s.LayoutManager{_subWindowsCreated=!1;_creationTimeoutPassed=!1;getComponentEvent;releaseComponentEvent;bindComponentEvent;unbindComponentEvent;constructor(e,t,n){super(c.createLayoutManagerConstructorParameters(e,t)),void 0!==t&&"function"==typeof t&&(this.bindComponentEvent=t,void 0!==n&&(this.unbindComponentEvent=n)),this.isSubWindow&&(document.body.style.visibility="hidden"),(void 0===this.layoutConfig.root||this.isSubWindow)&&this.init()}destroy(){this.bindComponentEvent=void 0,this.unbindComponentEvent=void 0,super.destroy()}init(){if(!1===this._subWindowsCreated&&(this.createSubWindows(),this._subWindowsCreated=!0),"loading"!==document.readyState&&null!==document.body){if(!0===this.isSubWindow&&!1===this._creationTimeoutPassed)return setTimeout((()=>this.init()),7),void(this._creationTimeoutPassed=!0);!0===this.isSubWindow&&this.adjustToWindowMode(),super.init()}else document.addEventListener("DOMContentLoaded",(()=>this.init()),{passive:!0})}bindComponent(e,t){if(void 0!==this.bindComponentEvent)return this.bindComponentEvent(e,t);if(void 0!==this.getComponentEvent)return{virtual:!1,component:this.getComponentEvent(e,t)};{const e=`${l.i18nStrings[2]}: ${JSON.stringify(t)}`;throw new a.BindError(e)}}unbindComponent(e,t,n){if(t)void 0!==this.unbindComponentEvent&&this.unbindComponentEvent(e);else if(void 0!==this.releaseComponentEvent){if(void 0===n)throw new o.UnexpectedUndefinedError("VCUCRCU333998");this.releaseComponentEvent(e,n)}}createSubWindows(){for(let e=0;e<this.layoutConfig.openPopouts.length;e++){const t=this.layoutConfig.openPopouts[e];this.createPopoutFromPopoutLayoutConfig(t)}}adjustToWindowMode(){const e=document.head,t=new Array(4);t[0]=document.querySelectorAll("body link"),t[1]=document.querySelectorAll("body style"),t[2]=document.querySelectorAll("template"),t[3]=document.querySelectorAll(".gl_keep");for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++){const n=r[t];e.appendChild(n)}}const n=document.body;if(n.innerHTML="",n.style.visibility="visible",!this.layoutConfig.settings.popInOnClose){const e=document.createElement("div");e.classList.add("lm_popin"),e.setAttribute("title",this.layoutConfig.header.dock);const t=document.createElement("div");t.classList.add("lm_icon");const r=document.createElement("div");r.classList.add("lm_bg"),e.appendChild(t),e.appendChild(r),e.addEventListener("click",(()=>this.emit("popIn"))),n.appendChild(e)}document.body.offsetHeight,window.__glInstance=this}}t.VirtualLayout=c,function(e){let t=!1;e.createLayoutManagerConstructorParameters=function(e,n){const a=t?null:new URL(document.location.href).searchParams.get("gl-window");t=!0;const o=null!==a;let s,l;if(null!==a){const e=localStorage.getItem(a);if(null===e)throw new Error("Null gl-window Config");localStorage.removeItem(a);const t=JSON.parse(e);l=i.ResolvedLayoutConfig.unminifyConfig(t)}else void 0===e?l=void 0:e instanceof HTMLElement?(l=void 0,s=e):l=r.LayoutConfig.isResolved(e)?e:r.LayoutConfig.resolve(e),void 0===s&&n instanceof HTMLElement&&(s=n);return{layoutConfig:l,isSubWindow:o,containerElement:s}}}(c||(t.VirtualLayout=c={}))},6744:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.offsetFotNoteStep=t.drumKeysRight=t.drumKeysLeft=t.drumInfo=t.drumIdByAlias=t.drumMidiCodeByAlias=t.Drums=void 0,t.Drums={bassDrum2:35,bassDrum1:36,sideRimshot:37,snare1:38,handClap:39,snare2:40,lowTom:41,lowTom2:41,hiHatClosed:42,lowTom1:43,hiHatPedal:44,midTom:45,midTom2:45,hiHatOpened:46,midTom1:47,highTom:48,highTom2:48,crashCymbal1:49,highTom1:50,rideCymbal1:51,chineseCymbal:52,rideBell:53,tambourine:54,splashCymbal:55,cowbell:56,crashCymbal2:57,vibraSlap:58,rideCymbal2:59,highBongo:60,lowBongo:61,muteHighConga:62,openHighConga:63,lowConga:64,highTimbale:65,lowTimbale:66,highAgogo:67,lowAgogo:68,cabasa:69,maracas:70,shortWhistle:71,longWhistle:72,shortGuiro:73,longGuiro:74,claves:75,highWoodBlock:76,lowWoodBlock:77,muteCuica:78,openCuica:79,muteTriangle:80,openTriangle:81,nil:80},t.drumMidiCodeByAlias={hc:42,ho:46,hp:44,bd:35,bd1:36,bd2:35,sn:40,sn1:38,sn2:40,sideRimshot:37,sr:37,handClap:39,tambourine:54,vibraSlap:58,rideBell:53,cowbell:56,tl:41,lowTom2:41,tl2:41,lowTom1:43,tl1:43,tm:45,midTom2:45,tm2:45,midTom1:47,tm1:47,th:50,highTom2:48,th2:48,highTom1:50,th1:50,cc:57,crashCymbal2:57,cc2:57,crashCymbal1:49,cc1:49,rc:59,rideCymbal2:59,rc2:59,rideCymbal1:51,rc1:51,splashCymbal:55,chineseCymbal:52,highBongo:60,lowBongo:61,muteHighConga:62,openHighConga:63,lowConga:64,highTimbale:65,lowTimbale:66,highAgogo:67,lowAgogo:68,cabasa:69,maracas:70,claves:75,shortWhistle:71,longWhistle:72,shortGuiro:73,longGuiro:74,highWoodBlock:76,lowWoodBlock:77,muteCuica:78,openCuica:79,muteTriangle:80,openTriangle:81,nil:80},t.drumIdByAlias=Object.keys(t.drumMidiCodeByAlias).reduce(((e,n)=>(e[n]=`drum_${t.drumMidiCodeByAlias[n]}`,e)),{}),t.drumInfo={hiHatOpened:{octave:"drum",volume:.5,instrCode:t.Drums.hiHatOpened,noteLat:"ho",noteRus:"хо"},hiHatClosed:{octave:"drum",volume:.5,instrCode:t.Drums.hiHatClosed,noteLat:"hc",noteRus:"хз"},hiHatPedal:{octave:"drum",volume:.5,instrCode:t.Drums.hiHatPedal,noteLat:"hp",noteRus:"хп"},snare2:{octave:"drum",volume:.5,instrCode:t.Drums.snare2,noteLat:"sn",noteRus:"мб"},snare1:{octave:"drum",volume:.5,instrCode:t.Drums.snare1,noteLat:"sn1",noteRus:"мб1"},sideRimshot:{octave:"drum",volume:.5,instrCode:t.Drums.sideRimshot,noteLat:"sr",noteRus:"sr"},bassDrum2:{octave:"drum",volume:.5,instrCode:t.Drums.bassDrum2,noteLat:"bd",noteRus:"бб"},bassDrum1:{octave:"drum",volume:.5,instrCode:t.Drums.bassDrum1,noteLat:"bd1",noteRus:"бб1"},lowTom:{octave:"drum",volume:.5,instrCode:t.Drums.lowTom2,noteLat:"tl",noteRus:"тл"},lowTom2:{octave:"drum",volume:.5,instrCode:t.Drums.lowTom2,noteLat:"tl2",noteRus:"тл2"},lowTom1:{octave:"drum",volume:.5,instrCode:t.Drums.lowTom1,noteLat:"tl1",noteRus:"тл1"},midTom:{octave:"drum",volume:.5,instrCode:t.Drums.midTom2,noteLat:"tm",noteRus:"тм"},midTom2:{octave:"drum",volume:.5,instrCode:t.Drums.midTom2,noteLat:"tm2",noteRus:"тм2"},midTom1:{octave:"drum",volume:.5,instrCode:t.Drums.midTom1,noteLat:"tm1",noteRus:"тм1"},highTom:{octave:"drum",volume:.5,instrCode:t.Drums.highTom2,noteLat:"th",noteRus:"тх"},highTom2:{octave:"drum",volume:.5,instrCode:t.Drums.highTom2,noteLat:"th2",noteRus:"тх2"},highTom1:{octave:"drum",volume:.5,instrCode:t.Drums.highTom1,noteLat:"th1",noteRus:"тх1"},crashCymbal2:{octave:"drum",volume:.5,instrCode:t.Drums.crashCymbal2,noteLat:"cc",noteRus:"cc"},crashCymbal1:{octave:"drum",volume:.5,instrCode:t.Drums.crashCymbal1,noteLat:"cc1",noteRus:"cc1"},splashCymbal:{octave:"drum",volume:.5,instrCode:t.Drums.splashCymbal,noteLat:"splashCymbal",noteRus:"splashCymbal"},rideCymbal2:{octave:"drum",volume:.5,instrCode:t.Drums.rideCymbal2,noteLat:"rc",noteRus:"rc"},rideCymbal1:{octave:"drum",volume:.5,instrCode:t.Drums.rideCymbal1,noteLat:"rc1",noteRus:"rc1"},chineseCymbal:{octave:"drum",volume:.5,instrCode:t.Drums.chineseCymbal,noteLat:"chineseCymbal",noteRus:"chineseCymbal"},handClap:{octave:"drum",volume:.5,instrCode:t.Drums.handClap,noteLat:"handClap",noteRus:"handClap"},rideBell:{octave:"drum",volume:.5,instrCode:t.Drums.rideBell,noteLat:"rideBell",noteRus:"rideBell"},cowbell:{octave:"drum",volume:.5,instrCode:t.Drums.cowbell,noteLat:"cowbell",noteRus:"cowbell"},tambourine:{octave:"drum",volume:.5,instrCode:t.Drums.tambourine,noteLat:"tambourine",noteRus:"tambourine"},vibraSlap:{octave:"drum",volume:.5,instrCode:t.Drums.vibraSlap,noteLat:"vibraSlap",noteRus:"vibraSlap"},highBongo:{octave:"drum",volume:.5,instrCode:t.Drums.highBongo,noteLat:"highBongo",noteRus:"highBongo"},lowBongo:{octave:"drum",volume:.5,instrCode:t.Drums.lowBongo,noteLat:"lowBongo",noteRus:"lowBongo"},muteHighConga:{octave:"drum",volume:.5,instrCode:t.Drums.muteHighConga,noteLat:"muteHighConga",noteRus:"muteHighConga"},openHighConga:{octave:"drum",volume:.5,instrCode:t.Drums.openHighConga,noteLat:"openHighConga",noteRus:"openHighConga"},lowConga:{octave:"drum",volume:.5,instrCode:t.Drums.lowConga,noteLat:"lowConga",noteRus:"lowConga"},highTimbale:{octave:"drum",volume:.5,instrCode:t.Drums.highTimbale,noteLat:"highTimbale",noteRus:"highTimbale"},lowTimbale:{octave:"drum",volume:.5,instrCode:t.Drums.lowTimbale,noteLat:"lowTimbale",noteRus:"lowTimbale"},highAgogo:{octave:"drum",volume:.5,instrCode:t.Drums.highAgogo,noteLat:"highAgogo",noteRus:"highAgogo"},lowAgogo:{octave:"drum",volume:.5,instrCode:t.Drums.lowAgogo,noteLat:"lowAgogo",noteRus:"lowAgogo"},cabasa:{octave:"drum",volume:.5,instrCode:t.Drums.cabasa,noteLat:"cabasa",noteRus:"cabasa"},maracas:{octave:"drum",volume:.5,instrCode:t.Drums.maracas,noteLat:"maracas",noteRus:"maracas"},claves:{octave:"drum",volume:.5,instrCode:t.Drums.claves,noteLat:"claves",noteRus:"claves"},shortWhistle:{octave:"drum",volume:.5,instrCode:t.Drums.shortWhistle,noteLat:"shortWhistle",noteRus:"shortWhistle"},longWhistle:{octave:"drum",volume:.5,instrCode:t.Drums.longWhistle,noteLat:"longWhistle",noteRus:"longWhistle"},shortGuiro:{octave:"drum",volume:.5,instrCode:t.Drums.shortGuiro,noteLat:"shortGuiro",noteRus:"shortGuiro"},longGuiro:{octave:"drum",volume:.5,instrCode:t.Drums.longGuiro,noteLat:"longGuiro",noteRus:"longGuiro"},highWoodBlock:{octave:"drum",volume:.5,instrCode:t.Drums.highWoodBlock,noteLat:"highWoodBlock",noteRus:"highWoodBlock"},lowWoodBlock:{octave:"drum",volume:.5,instrCode:t.Drums.lowWoodBlock,noteLat:"lowWoodBlock",noteRus:"lowWoodBlock"},muteCuica:{octave:"drum",volume:.5,instrCode:t.Drums.muteCuica,noteLat:"muteCuica",noteRus:"muteCuica"},openCuica:{octave:"drum",volume:.5,instrCode:t.Drums.openCuica,noteLat:"openCuica",noteRus:"openCuica"},muteTriangle:{octave:"drum",volume:.5,instrCode:t.Drums.muteTriangle,noteLat:"muteTriangle",noteRus:"muteTriangle"},openTriangle:{octave:"drum",volume:.5,instrCode:t.Drums.openTriangle,noteLat:"openTriangle",noteRus:"openCuica"},nil:{octave:"drum",volume:.5,instrCode:t.Drums.nil,noteLat:"nil",noteRus:"nil"}},t.drumKeysLeft={KeyX:{octave:"drum",volume:.5,instrCode:35,noteLat:"bd",noteRus:"бб"},KeyZ:{},ShiftLeft:{octave:"drum",volume:.5,instrCode:40,noteLat:"sn",noteRus:"мб"},KeyS:{},KeyA:{octave:"drum",volume:.5,instrCode:43,noteLat:"tl",noteRus:"тн"},CapsLock:{octave:"drum",volume:.5,instrCode:44,noteLat:"hp",noteRus:"хп"},KeyW:{octave:"drum",volume:.5,instrCode:40,noteLat:"sn",noteRus:"мб"},KeyQ:{octave:"drum",volume:.5,instrCode:47,noteLat:"tm",noteRus:"тс"},Tab:{octave:"drum",volume:.5,instrCode:42,noteLat:"hc",noteRus:"хз"},Digit2:{},Digit1:{octave:"drum",volume:.5,instrCode:48,noteLat:"th",noteRus:"тв"},Backquote:{octave:"drum",volume:.5,instrCode:46,noteLat:"ho",noteRus:"хо"}},t.drumKeysRight={ShiftRight:{...t.drumInfo.snare2},Slash:{...t.drumInfo.hiHatClosed},Period:{...t.drumInfo.bassDrum2}},t.offsetFotNoteStep={s:-5,z:-4,l:-3,k:-2,b:-1,d:0,t:1,r:2,n:3,m:4,f:5,v:6}},1031:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.EventEmitter=class{all=Object.create(null);on(e,t,n){this.all[e]&&this.all[e].single||(this.all[e]||(this.all[e]=[])).push({handle:t,handler:n})}single(e,t,n){this.all[e]||(this.all[e]||(this.all[e]=[])).push({handle:t,handler:n,single:!0})}emit(e,t){(this.all[e]||[]).slice().map((e=>{e.handler.call(e.handle,t)}))}get(e,t){let n=this.all[e]||[];if(n.length)return n[0].handler.call(n[0].handle,t)}batch(e,t){t=t||[];for(let n of t)this.on(n[0],e,n[1])}off(e,t,n){if(e&&"string"==typeof e&&t&&n&&this.all[e])return this.all[e]=this.all[e].filter((e=>!(e.handle===t&&e.handler===n))),void(this.all[e]&&0==this.all[e].length&&delete this.all[e]);if(e&&"string"==typeof e&&t&&this.all[e]&&void 0===n)return this.all[e]=this.all[e].filter((e=>!(e.handle===t||e.handler===t))),void(this.all[e]&&0==this.all[e].length&&delete this.all[e]);if(e&&"string"!=typeof e&&void 0===t&&void 0===n)for(let t in this.all)this.all[t]=this.all[t].filter((t=>!(t.handle===e||t.handler===e))),this.all[t]&&0==this.all[t].length&&delete this.all[t]}print(){console.log(this.all)}clear(){this.all=Object.create(null)}clearExcept(e){!e&&Array.isArray(e)||(e=[e]);for(let t in this.all)this.all[t]=this.all[t].filter((t=>e.indexOf(t.handle)+1||e.indexOf(t.handler)+1)),this.all[t]&&0==this.all[t].length&&delete this.all[t]}}},7878:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNoteByStepAndOctave=t.noteByKeyHash=t.noteLatByNoteHash=t.codeByNoteHash=t.freqByNoteHash=t.leftAndRightKeys=t.rightKeys=t.leftKeys=t.freqInfoHash=t.freqInfoList=t.stepListRus=t.stepListLat=t.octaveListRus=t.octaveListLat=void 0,t.octaveListLat="uyoaei".split(""),t.octaveListRus="ыуоаеи".split(""),t.stepListLat="dtrnmfvszlkb".split(""),t.stepListRus="дтрнмфвсзлкб".split("");const n={d:"д",t:"т",r:"р",n:"н",m:"м",f:"ф",v:"в",s:"с",z:"з",l:"л",k:"к",b:"б"},r={u:"ы",y:"у",o:"о",a:"а",e:"е",i:"и"},i=[{step:"d",code:36,value:65.406395,octave:"u",volume:1},{step:"t",code:37,value:69.295654,octave:"u",volume:.995},{step:"r",code:38,value:73.416191,octave:"u",volume:.99},{step:"n",code:39,value:77.781746,octave:"u",volume:.985},{step:"m",code:40,value:82.406891,octave:"u",volume:.98},{step:"f",code:41,value:87.30706,octave:"u",volume:.975},{step:"v",code:42,value:92.498604,octave:"u",volume:.97},{step:"s",code:43,value:97.998856,octave:"u",volume:.965},{step:"z",code:44,value:103.826172,octave:"u",volume:.96},{step:"l",code:45,value:110,octave:"u",volume:.955},{step:"k",code:46,value:116.540939,octave:"u",volume:.95},{step:"b",code:47,value:123.470825,octave:"u",volume:.945},{step:"d",code:48,value:130.81279,octave:"y",volume:.94},{step:"t",code:49,value:138.591309,octave:"y",volume:.935},{step:"r",code:50,value:146.832382,octave:"y",volume:.93},{step:"n",code:51,value:155.563492,octave:"y",volume:.925},{step:"m",code:52,value:164.813782,octave:"y",volume:.92},{step:"f",code:53,value:174.61412,octave:"y",volume:.915},{step:"v",code:54,value:184.997208,octave:"y",volume:.91},{step:"s",code:55,value:195.997711,octave:"y",volume:.905},{step:"z",code:56,value:207.652344,octave:"y",volume:.9},{step:"l",code:57,value:220,octave:"y",volume:.895},{step:"k",code:58,value:233.081879,octave:"y",volume:.89},{step:"b",code:59,value:246.94165,octave:"y",volume:.885},{step:"d",code:60,value:261.62558,octave:"o",volume:.88},{step:"t",code:61,value:277.182617,octave:"o",volume:.875},{step:"r",code:62,value:293.664764,octave:"o",volume:.87},{step:"n",code:63,value:311.126984,octave:"o",volume:.865},{step:"m",code:64,value:329.627563,octave:"o",volume:.86},{step:"f",code:65,value:349.228241,octave:"o",volume:.855},{step:"v",code:66,value:369.994415,octave:"o",volume:.85},{step:"s",code:67,value:391.995422,octave:"o",volume:.845},{step:"z",code:68,value:415.304688,octave:"o",volume:.84},{step:"l",code:69,value:440,octave:"o",volume:.835},{step:"k",code:70,value:466.163757,octave:"o",volume:.83},{step:"b",code:71,value:493.883301,octave:"o",volume:.825},{step:"d",code:72,value:523.25116,octave:"a",volume:.82},{step:"t",code:73,value:554.365234,octave:"a",volume:.815},{step:"r",code:74,value:587.329529,octave:"a",volume:.81},{step:"n",code:75,value:622.253967,octave:"a",volume:.805},{step:"m",code:76,value:659.255127,octave:"a",volume:.8},{step:"f",code:77,value:698.456482,octave:"a",volume:.795},{step:"v",code:78,value:739.988831,octave:"a",volume:.79},{step:"s",code:79,value:783.990845,octave:"a",volume:.785},{step:"z",code:80,value:830.609375,octave:"a",volume:.78},{step:"l",code:81,value:880,octave:"a",volume:.775},{step:"k",code:82,value:932.327515,octave:"a",volume:.77},{step:"b",code:83,value:987.766602,octave:"a",volume:.765},{step:"d",code:84,value:1046.502319,octave:"e",volume:.76},{step:"t",code:85,value:1108.730469,octave:"e",volume:.755},{step:"r",code:86,value:1174.659058,octave:"e",volume:.755},{step:"n",code:87,value:1244.507935,octave:"e",volume:.75},{step:"m",code:88,value:1318.510254,octave:"e",volume:.745},{step:"f",code:89,value:1396.912964,octave:"e",volume:.74},{step:"v",code:90,value:1479.977661,octave:"e",volume:.735},{step:"s",code:91,value:1567.981689,octave:"e",volume:.73},{step:"z",code:92,value:1661.21875,octave:"e",volume:.725},{step:"l",code:93,value:1760,octave:"e",volume:.72},{step:"k",code:94,value:1864.655029,octave:"e",volume:.715},{step:"b",code:95,value:1975.533203,octave:"e",volume:.71},{step:"d",code:96,value:2093.004639,octave:"i",volume:.705},{step:"t",code:97,value:2217.460938,octave:"i",volume:.7},{step:"r",code:98,value:2349.318115,octave:"i",volume:.695},{step:"n",code:99,value:2489.015869,octave:"i",volume:.69},{step:"m",code:100,value:2637.020508,octave:"i",volume:.685},{step:"f",code:101,value:2793.825928,octave:"i",volume:.68},{step:"v",code:102,value:2959.955322,octave:"i",volume:.675},{step:"s",code:103,value:3135.963379,octave:"i",volume:.67},{step:"z",code:104,value:3322.4375,octave:"i",volume:.665},{step:"l",code:105,value:3520,octave:"i",volume:.66},{step:"k",code:106,value:3729.310059,octave:"i",volume:.655},{step:"b",code:107,value:3951.066406,octave:"i",volume:.65}];function a(e){return null!=e}t.freqInfoList=i.map(((e,t)=>{const a=i[t-1],o=i[t+1],s={...e};return s.code=s.code-12,s.noteLat=s.step+s.octave,s.noteRus=n[s.step]+r[s.octave],s.relatives=i.map(((e,t)=>e.step===s.step?t:-1)).filter((e=>e>-1)),s.index=t,s.midF=s.value,s.botF=a?s.value-(s.value-a.value)/2:s.value-(o.value-s.value)/2,s.topF=o?s.value+(o.value-s.value)/2:s.value+(s.value-a.value)/2,s})),t.freqInfoHash=t.freqInfoList.reduce(((e,t)=>(e[t.noteLat]=t,e[t.noteRus]=t,e[t.code]=t,e)),{}),t.leftKeys={ShiftLeft:"ShiftLeft",KeyZ:"KeyZ",KeyX:"KeyX",KeyC:"KeyC",KeyV:"KeyV",KeyB:"KeyB",CapsLock:"CapsLock",KeyA:"KeyA",KeyS:"KeyS",KeyD:"KeyD",KeyF:"KeyF",KeyG:"KeyG",Tab:"Tab",KeyQ:"KeyQ",KeyW:"KeyW",KeyE:"KeyE",KeyR:"KeyR",KeyT:"KeyT",Backquote:"Backquote",Digit1:"Digit1",Digit2:"Digit2",Digit3:"Digit3",Digit4:"Digit4",Digit5:"Digit5"},t.rightKeys={KeyN:"KeyN",KeyM:"KeyM",Comma:"Comma",Period:"Period",Slash:"Slash",ShiftRight:"ShiftRight",KeyH:"KeyH",KeyJ:"KeyJ",KeyK:"KeyK",KeyL:"KeyL",Semicolon:"Semicolon",Quote:"Quote",KeyY:"KeyY",KeyU:"KeyU",KeyI:"KeyI",KeyO:"KeyO",KeyP:"KeyP",BracketLeft:"BracketLeft",Digit6:"Digit6",Digit7:"Digit7",Digit8:"Digit8",Digit9:"Digit9",Digit0:"Digit0",Minus:"Minus",Equal:"Equal"},t.leftAndRightKeys={...t.leftKeys,...t.rightKeys},t.freqByNoteHash=t.freqInfoList.reduce(((e,t)=>{const i=t.step+t.octave,a=n[t.step]+r[t.octave];return e[i]=t.value,e[a]=t.value,e}),{}),t.codeByNoteHash=t.freqInfoList.reduce(((e,t)=>{const i=t.step+t.octave,a=n[t.step]+r[t.octave];return e[i]=t.code,e[a]=t.code,e}),{}),t.noteLatByNoteHash=t.freqInfoList.reduce(((e,t)=>{const i=t.step+t.octave,a=n[t.step]+r[t.octave];return e[i]=i,e[a]=i,e}),{}),t.noteByKeyHash={ShiftLeft:"зе",KeyZ:"ме",KeyX:"де",KeyC:"за",KeyV:"ма",KeyB:"да",KeyN:"зо",KeyM:"мо",Comma:"до",Period:"зу",Slash:"му",ShiftRight:"ду",CapsLock:"ле",KeyA:"фе",KeyS:"те",KeyD:"ла",KeyF:"фа",KeyG:"та",KeyH:"ло",KeyJ:"фо",KeyK:"то",KeyL:"лу",Semicolon:"фу",Quote:"ту",Tab:"ке",KeyQ:"ве",KeyW:"ре",KeyE:"ка",KeyR:"ва",KeyT:"ра",KeyY:"ко",KeyU:"во",KeyI:"ро",KeyO:"ку",KeyP:"ву",BracketLeft:"ру",Backquote:"бе",Digit1:"се",Digit2:"не",Digit3:"ба",Digit4:"са",Digit5:"на",Digit6:"бо",Digit7:"со",Digit8:"но",Digit9:"бу",Digit0:"су",Minus:"ну",Equal:"бы"},t.getNoteByStepAndOctave=function(e,n,r){let i,o;if("string"==typeof e?(i=t.stepListLat.findIndex((t=>t===e)),a(i)||(i=t.stepListRus.findIndex((t=>t===e)))):i=e,"number"!=typeof i)return"";if("string"==typeof n?(o=t.octaveListLat.findIndex((e=>e===n)),a(i)||(o=t.octaveListRus.findIndex((e=>e===n)))):o=n,"number"!=typeof o)return"";const s="lat"===r?t.octaveListLat[o]:t.octaveListRus[o],l="lat"===r?t.stepListLat[i]:t.stepListRus[i];return s&&l?l+s:""}},954:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getTopOutListHash=t.getTopOutList=t.getMidiConfig=t.getNearestCharIndex=t.isRefLine=void 0;const o=a(n(8299));function s(e){return/^\s*>/.test(e)}function l(e,t,n){const r=new RegExp(`^\\s*${e}`);for(let e=t;e>=0;e--)if(r.test(n[e]))return e;for(let e=t;e<n.length;e++)if(r.test(n[e]))return e;return-1}function c(e){let t=0,n=0|e.nearestIndex,r=Array.isArray(e.excludeIndex)?e.excludeIndex:[],i=!!e.printN,a=[];return e.topBlock.rows.forEach((e=>{if(s(e=o.clearEndComment(e).trim())){const t=(e=e.replace("|",">")).split(">").map((e=>e.trim())).filter((e=>e)).map((e=>`> ${e}`));t.forEach((e=>a.push(e)))}else a.push(e)})),a=a.reduce(((e,a,l)=>{if(s(a)&&t++,!s(a)||l<n||r.includes(l))return e;if(!(a=a.replace(">","").trim()))return e;let c="";return i&&(o.getPartInfo(a).partNio||(c=i?`${o.getNRowInPartId(t)} `:"")),[...e,`${c}${a}`]}),[]),a}t.isRefLine=s,t.getNearestCharIndex=l,t.getMidiConfig=function(e){const t=Array.isArray(e.excludeIndex)?e.excludeIndex:[];if("set"===e.currBlock.type)e.midiBlockOut=e.currBlock,e.playBlockOut=e.midiBlockOut.id;else if("tones"===e.currBlock.type||"drums"===e.currBlock.type){const t=e.currBlock.repeat||1;e.midiBlockOut=e.currBlock,e.playBlockOut=o.createOutBlock({currBlock:e.currBlock,rows:[`${e.midiBlockOut.id}:${t}`]})}else{const n=l(">",e.currRowInfo.first,e.currBlock.rows);if(n>0){e.currRowInfo.first=n,e.currRowInfo.last=n;let r=c({topBlock:e.currBlock,nearestIndex:n,excludeIndex:t,printN:!0});r.length&&(e.topBlocksOut=r,r=o.buildOutBlock(e.blocks,r),e.blocks.find((e=>"tick"===e.id))&&r.unshift("tick"),e.midiBlockOut=o.createOutBlock({currBlock:e.currBlock,rows:r}),e.playBlockOut=e.midiBlockOut)}}},t.getTopOutList=c,t.getTopOutListHash=function(e){let t=0,n=0|e.nearestIndex,r=Array.isArray(e.excludeIndex)?e.excludeIndex:[],i=[],a=[];return e.topBlock.rows.forEach((e=>{if(s(e=o.clearEndComment(e).trim())){const t=(e=e.replace("|",">")).split(">").map((e=>e.trim())).filter((e=>e)).map((e=>`> ${e}`));t.forEach((e=>a.push(e)))}else a.push(e)})),i=a.reduce(((e,i,a)=>{if(s(i)&&t++,!s(i)||a<n||r.includes(a))return e;if(!(i=i.replace(">","").trim()))return e;const l=o.getPartInfo(i);return l.partNio=t,l.rowInPartId=`${t}-0`,[...e,l]}),[]),i}},3415:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getNextLinesForHandlePlay=void 0;const o=a(n(8299)),s=n(4092);function l(e){e=o.clearNoteLine(e);const t=o.getNoteLineMetaAndInstr(e);return e=t.meta?t.meta+" "+t.noteLine:t.noteLine,o.getNoteLineInfo(e).notes}t.getNextLinesForHandlePlay=function(e){const t=(e.skipLineByType||"").toUpperCase()||void 0,n=(e.skipLineByType||"").toLowerCase()||void 0,r={notesByChannels:{left:[],right:[]},rowsRange:{first:0,last:0},gotoTop:!1};let i=e.getNextRange?e.currRowInfo.last+1:e.currRowInfo.first;i=i>=e.block.rows.length?0:i;let a=i,c=i,d="",u=[],p=[];d=e.block.rows[i].trim();const h=(r,i)=>{const h=(0,s.getFirstLastRow)({block:e.block,startIndex:r,direction:i,skip:t});for(let r=h.first;r<=h.last;r++){if(d=(e.block.rows[r]||"").trim(),(f=d).startsWith(t)||f.startsWith(n)||!o.startWithChar(o.toneChar,f))continue;const i=d.startsWith("$L")||d.startsWith("$l"),a=d.startsWith("$R")||d.startsWith("$r");d=d.split(":").slice(1).join(":");const s=l(d);s.length&&i?u.push(s):s.length&&a&&p.push(s)}var f;a=h.first,c=h.last};return h(i,o.startWithChar(o.toneChar,d)?"up":"down"),u.length||p.length||(r.gotoTop=!0,h(0,"down"),u.length||p.length||(a=0,c=0)),r.notesByChannels.left=u,r.notesByChannels.right=p,r.rowsRange.first=a,r.rowsRange.last=c,r}},7893:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getSoundsInfoArr=void 0;const o=a(n(8299)),s=n(7878),l=n(1542),c=n(6744),d=n(8299);t.getSoundsInfoArr=function(e){const t=[];return(e=(e||"").trim())?(e.split("+").forEach((e=>{if(e=e.replace(o.toneChar,"").replace(o.drumChar,"").trim(),!(e=l.Sound.GetNoteSame(e)))return;const n=l.Sound.GetNoteLat(e);let r;r=s.freqInfoHash[n]?s.freqInfoHash[n]:c.drumMidiCodeByAlias[n]?{code:c.drumMidiCodeByAlias[n],volume:1}:{code:0,volume:1},t.push({code:r.code,volume:d.DEFAULT_VOLUME*r.volume})})),t.filter((e=>!!e))):[]}},7526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sound=t.Ticker=t.MultiPlayer=t.Synthesizer=t.LineModel=t.Muse=void 0;const r=n(8299),i=n(2074),a=n(8738),o=n(611),s=n(1286),l=n(4092),c=n(954),d=n(3415),u=n(7984),p=n(2011),h=n(7770),f=n(1542),m=n(7025),g=n(6744),v=n(2202),b=n(5923),y=n(4155),_=n(8162);t.Muse={parseInteger:r.parseInteger,mergeVolume:i.mergeVolume,getSafeVolume:i.getSafeVolume,getPartInfo:i.getPartInfo,guid:i.guid,getRowNio:i.getRowNio,getPartNio:i.getPartNio,getTextBlocks:i.getTextBlocks,isDrum:i.isDrum,isPresent:i.isPresent,isNil:i.isNil,createOutBlock:i.createOutBlock,getNRowInPartId:i.getNRowInPartId,getPartRowNio:i.getPartRowNio,getRandomElement:i.getRandomElement,getInstrNameByCode:v.getInstrNameByCode,getNoteByOffset:i.getNoteByOffset,getInstrCodeBy:v.getInstrCodeBy,getInstrumentObj:v.getInstrumentObj,clearEndComment:i.clearEndComment,getVolumeFromString:i.getVolumeFromString,toneChar:i.toneChar,drumsTrack:i.drumsTrack,drumIdByAlias:g.drumIdByAlias,drumChar:i.drumChar,guitarCodes:v.guitarCodes,bassGuitarCodes:v.bassGuitarCodes,DEFAULT_VOLUME:i.DEFAULT_VOLUME,NUM_120:i.NUM_120,DEFAULT_TONE_INSTR:o.DEFAULT_TONE_INSTR,defaultSynthSettings:o.defaultSynthSettings,toneAndDrumPlayerSettings:o.toneAndDrumPlayerSettings,drumInfo:g.drumInfo,sortTracks:a.sortTracks,textModelToLineModel:a.textModelToLineModel,getNoteLineInfo:u.getNoteLineInfo,isNoteWithDurationOrPause:u.isNoteWithDurationOrPause,getFileSettings:s.getFileSettings,getPitchShiftSetting:s.getPitchShiftSetting,getFirstLastRow:l.getFirstLastRow,getNearestCharIndex:c.getNearestCharIndex,getMidiConfig:c.getMidiConfig,isRefLine:c.isRefLine,getTopOutListHash:c.getTopOutListHash,getTopOutList:c.getTopOutList,getNextLinesForHandlePlay:d.getNextLinesForHandlePlay,getNoteLineMetaAndInstr:p.getNoteLineMetaAndInstr,getOutBlocksInfo:p.getOutBlocksInfo,getSlides:h.getSlides,buildVibratoSlides:h.buildVibratoSlides,getPitchAndCent:h.getPitchAndCent,Sound:f.Sound,Ticker:m.Ticker,tickOnTime:m.tickOnTime,LineModel:b.LineModel,CELL_SIZE:b.CELL_SIZE,Synthesizer:y.Synthesizer,MultiPlayer:_.MultiPlayer};var w=n(5923);Object.defineProperty(t,"LineModel",{enumerable:!0,get:function(){return w.LineModel}});var C=n(4155);Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return C.Synthesizer}});var x=n(8162);Object.defineProperty(t,"MultiPlayer",{enumerable:!0,get:function(){return x.MultiPlayer}});var k=n(7025);Object.defineProperty(t,"Ticker",{enumerable:!0,get:function(){return k.Ticker}});var E=n(1542);Object.defineProperty(t,"Sound",{enumerable:!0,get:function(){return E.Sound}})},2202:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInstrumentObj=t.getInstrCodeBy=t.getInstrNameByCode=t.instrumentCodeAndName=t.hardcodedInstruments=t.guitarCodes=t.bassGuitarCodes=t.instruments=void 0;const r=n(8299),i=n(6744);t.instruments={},t.bassGuitarCodes={366:"cBass*s",374:"cBass*f",393:"cBass*w",375:"eBass*f",388:"eBass*m",405:"eBass*b"},t.guitarCodes={327:"egit*drp;  egit*drp1;  guitar*ED;  guit*ed;",321:"egit*drpm; egit*drpm1; guitar*EDM; guit*edm;",276:"egit*cl;   egit*cl1; guit*ec; guitar*EC;"};const a=["voice*ро:voice_ro_waf","voice*хан:voice_han_waf","voice*ла:voice_la_waf","voice*лай:voice_lay_waf","harm:harmonica_waf","organ:162:_tone_0160_FluidR3_GM_sf2_file","organ*p:176:_tone_0170_SoundBlasterOld_sf2","organ*r:182:_tone_0180_FluidR3_GM_sf2_file","cBass*s:366:_tone_0320_Aspirin_sf2_file","cBass*f:374:_tone_0322_GeneralUserGS_sf2_file","cBass*w:393:_tone_0350_Aspirin_sf2_file","eBass*f:375:_tone_0330_Aspirin_sf2_file","eBass*m:388:_tone_0340_JCLive_sf2_file","eBass*b:405:_tone_0360_JCLive_sf2_file","guitar*EC:276:_tone_0260_FluidR3_GM_sf2_file","guitar*ED:327:_tone_0291_LesPaul_sf2_file","guitar*EDM:321:_tone_0280_LesPaul_sf2_file","guit*ec:276:_tone_0260_FluidR3_GM_sf2_file","guit*ed:327:_tone_0291_LesPaul_sf2_file","guit*edm:321:_tone_0280_LesPaul_sf2_file","egit*cl:276:_tone_0260_FluidR3_GM_sf2_file","egit*cl1:276:_tone_0260_FluidR3_GM_sf2_file","egit*cr:319:_tone_0290_JCLive_sf2_file","egit*cr1:319:_tone_0290_JCLive_sf2_file","egit*crt:317:_tone_0290_FluidR3_GM_sf2_file","egit*crt1:317:_tone_0290_FluidR3_GM_sf2_file","egit*crl:316:_tone_0290_Chaos_sf2_file","egit*crl1:316:_tone_0290_Chaos_sf2_file","egit*dr:318:_tone_0290_GeneralUserGS_sf2_file","egit*dr1:318:_tone_0290_GeneralUserGS_sf2_file","egit*dr2:315:_tone_0290_Aspirin_sf2_file","egit*drs:323:_tone_0290_SBLive_sf2","egit*drs1:323:_tone_0290_SBLive_sf2","egit*drs2:324:_tone_0290_SoundBlasterOld_sf2","egit*drs3:328:_tone_0291_SBAWE32_sf2_file","egit*drp:327:_tone_0291_LesPaul_sf2_file","egit*drp1:327:_tone_0291_LesPaul_sf2_file","egit*drpm:321:_tone_0290_LesPaul_sf2_file","egit*drpm1:321:_tone_0290_LesPaul_sf2_file","egit*dn:334:_tone_0300_Chaos_sf2_file","egit*dn1:334:_tone_0300_Chaos_sf2_file","egit*dn2:333:_tone_0300_Aspirin_sf2_file","egit*dn3:336:_tone_0300_GeneralUserGS_sf2_file","egit*dn4:338:_tone_0300_LesPaul_sf2","egit*dn5:339:_tone_0300_LesPaul_sf2_file","egit*dnt:346:_tone_0301_JCLive_sf2_file","egit*dnt1:346:_tone_0301_JCLive_sf2_file","egit*dns:335:_tone_0300_FluidR3_GM_sf2_file","egit*dns1:335:_tone_0300_FluidR3_GM_sf2_file","egit*dns2:341:_tone_0300_SBLive_sf2","egit*dns3:342:_tone_0300_SoundBlasterOld_sf2","egit*dns4:349:_tone_0302_Aspirin_sf2_file","egit*dfl:356:_tone_0310_FluidR3_GM_sf2_file","egit*dfl1:356:_tone_0310_FluidR3_GM_sf2_file","egit*dfl2:359:_tone_0310_LesPaul_sf2","egit*dfl3:360:_tone_0310_LesPaul_sf2_file","egit*dfl4:361:_drum_80_0_SBLive_sf2","accordion:235:_tone_0230_JCLive_sf2_file","bayan:235:_tone_0230_JCLive_sf2_file","vio:466:_tone_0420_JCLive_sf2_file","tromb:626:_tone_0570_FluidR3_GM_sf2_file","trump:617:_tone_0560_Aspirin_sf2_file","tuba:635:_tone_0580_GeneralUserGS_sf2_file","flute:790:_tone_0750_Chaos_sf2_file","picFlute:762:_tone_0720_Aspirin_sf2_file","panFlute:790:_tone_0750_Chaos_sf2_file","xlphn:136:_tone_0130_GeneralUserGS_sf2_file","xylo:136:_tone_0130_GeneralUserGS_sf2_file","noise:1310:_tone_1226_GeneralUserGS_sf2_file","gun:1384:_tone_1270_FluidR3_GM_sf2_file","drum_35:_:_drum_35_0_Chaos_sf2_file","drum_40:_:_drum_40_0_SBLive_sf2","drum_41:_:_drum_41_0_SBLive_sf2","drum_42:_:_drum_42_0_SBLive_sf2","drum_44:_:_drum_44_0_SBLive_sf2","drum_45:_:_drum_45_0_SBLive_sf2","drum_46:_:_drum_46_0_SBLive_sf2","drum_50:_:_drum_50_0_SBLive_sf2","drum_51:_:_drum_51_0_SBLive_sf2","drum_57:_:_drum_57_0_SBLive_sf2","drum_48:_:_drum_48_0_SBLive_sf2","drum_59:_:_drum_59_0_SBLive_sf2","drum_56:_:_drum_56_0_SBLive_sf2","drum_80:_:_drum_80_0_SBLive_sf2"];t.hardcodedInstruments={};const o={};t.instrumentCodeAndName=[];{let e=1e5;a.forEach((n=>{let i=n.split(":").map((e=>(e||"").trim())).filter((e=>e));if(i.length<=1)return;const a=i.pop();let s;i.find((e=>"_"===e))?t.hardcodedInstruments[i[0]]=a:(s=function(e){for(let t of e){let e=(0,r.parseInteger)(t,null);if(e)return e}return null}(i)||e++,t.hardcodedInstruments[s]=a,i.forEach((e=>{o[e]||e===s.toString()||(o[e]=s,t.instrumentCodeAndName.push({name:e,code:s}))})))}))}t.getInstrNameByCode=function(e){const n=t.instrumentCodeAndName.find((t=>t.code.toString()===e.toString()));return n?.name||""};const s={...o,...i.drumIdByAlias};t.getInstrCodeBy=function(e){return(e=e||"")?"number"==typeof e?e:(e=e.replace("$","").replace("@","").trim(),s[e]||""):e},t.getInstrumentObj=function(e,n=!1){let r=t.instruments[e];if(r)return r;let i=n?t.instruments[0]:null;return null===r?i:"object"==typeof(e=null==e?null:e)?e:("number"==typeof e&&t.instruments[e],e=(e=e.toString().trim()).replace("$","").replace("@","").trim(),t.instruments[s[e]]||i)}},611:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toneAndDrumPlayerSettings=t.defaultSynthSettings=t.drumSettings=t.setInstrument=t.keysRightToLeft=t.keysLeftToRight=t.DEFAULT_TONE_INSTR=void 0;const r=n(6744);function i(e,n){return e.trim().split("\n").filter((e=>e&&!e.startsWith("#"))).map((e=>e.trim())).map((e=>e.trim().replace(/,$/,""))).map((e=>e+`~${n||t.DEFAULT_TONE_INSTR},`)).join("").split(",").map((e=>e.trim())).filter((e=>e&&!e.startsWith("#"))).join(",")}t.DEFAULT_TONE_INSTR=162,t.keysLeftToRight="\n# 0-key 1-note 2-volume 3-instrCode\nnoteDy      ~ды~0.5,\nnoteTy      ~ты~0.5,\nnoteRy      ~ры~0.5,\nnoteNy      ~ны~0.5,\nnoteMy      ~мы~0.5,\nnoteFy      ~фы~0.5,\nnoteVy      ~вы~0.5,\nnoteSy      ~сы~0.5,\nnoteZy      ~зы~0.5,\nnoteLy      ~лы~0.5,\nnoteKy      ~кы~0.5,\nnoteBy      ~бы~0.5,\nBackquote   ~ду~0.5,\nTab         ~ту~0.5,\nCapsLock    ~ру~0.5,\nShiftLeft   ~ну~0.5,\nDigit1      ~му~0.5,\nKeyQ        ~фу~0.5,\nKeyA        ~ву~0.5,\nKeyZ        ~су~0.5,\nDigit2      ~зу~0.5,\nKeyW        ~лу~0.5,\nKeyS        ~ку~0.5,\nKeyX        ~бу~0.5,\nDigit3      ~до~0.5,\nKeyE        ~то~0.5,\nKeyD        ~ро~0.5,\nKeyC        ~но~0.5,\nDigit4      ~мо~0.5,\nKeyR        ~фо~0.5,\nKeyF        ~во~0.5,\nKeyV        ~со~0.5,\nDigit5      ~зо~0.5,\nKeyT        ~ло~0.5,\nKeyG        ~ко~0.5,\nKeyB        ~бо~0.5,\nDigit6      ~да~0.5,\nKeyY        ~та~0.5,\nKeyH        ~ра~0.5,\nKeyN        ~на~0.5,\nDigit7      ~ма~0.5,\nKeyU        ~фа~0.5,\nKeyJ        ~ва~0.5,\nKeyM        ~са~0.5,\nDigit8      ~за~0.5,\nKeyI        ~ла~0.5,\nKeyK        ~ка~0.5,\nComma       ~ба~0.5,\nDigit9      ~де~0.5,\nKeyO        ~те~0.5,\nKeyL        ~ре~0.5,\nPeriod      ~не~0.5,\nDigit0      ~ме~0.5,\nKeyP        ~фе~0.5,\nSemicolon   ~ве~0.5,\nSlash       ~се~0.5,\nMinus       ~зе~0.5,\nBracketLeft ~ле~0.5,\nQuote       ~ке~0.5,\nShiftRight  ~бе~0.5,\n\nEqual        ~ди~0.5,\nBracketRight ~ти~0.5,\nnoteRi       ~ри~0.5,\nnoteNi       ~ни~0.5,\nnoteMi       ~ми~0.5,\nnoteFi       ~фи~0.5,\nnoteVi       ~ви~0.5,\nnoteSi       ~си~0.5,\nnoteZi       ~зи~0.5,\nnoteLi       ~ли~0.5,\nnoteKi       ~ки~0.5,\nnoteBi       ~би~0.5,\n\n",t.keysRightToLeft="\n# 0-key 1-note 2-volume 3-instrCode\nKeyX        ~де~0.5,\nKeyS        ~те~0.5,\nKeyW        ~ре~0.5,\nDigit2      ~не~0.5,\nKeyZ        ~ме~0.5,\nKeyA        ~фе~0.5,\nKeyQ        ~ве~0.5,\nDigit1      ~се~0.5,\nShiftLeft   ~зе~0.5,\nCapsLock    ~ле~0.5,\nTab         ~ке~0.5,\nBackquote   ~бе~0.5,\nKeyB        ~да~0.5,\nKeyG        ~та~0.5,\nKeyT        ~ра~0.5,\nDigit5      ~на~0.5,\nKeyV        ~ма~0.5,\nKeyF        ~фа~0.5,\nKeyR        ~ва~0.5,\nDigit4      ~са~0.5,\nKeyC        ~за~0.5,\nKeyD        ~ла~0.5,\nKeyE        ~ка~0.5,\nDigit3      ~ба~0.5,\nComma       ~до~0.5,\nKeyK        ~то~0.5,\nKeyI        ~ро~0.5,\nDigit8      ~но~0.5,\nKeyM        ~мо~0.5,\nKeyJ        ~фо~0.5,\nKeyU        ~во~0.5,\nDigit7      ~со~0.5,\nKeyN        ~зо~0.5,\nKeyH        ~ло~0.5,\nKeyY        ~ко~0.5,\nDigit6      ~бо~0.5,\nShiftRight  ~ду~0.5,\nQuote       ~ту~0.5,\nBracketLeft ~ру~0.5,\nMinus       ~ну~0.5,\nSlash       ~му~0.5,\nSemicolon   ~фу~0.5,\nKeyP        ~ву~0.5,\nDigit0      ~су~0.5,\nPeriod      ~зу~0.5,\nKeyL        ~лу~0.5,\nKeyO        ~ку~0.5,\nDigit9      ~бу~0.5,\nnoteDy      ~ды~0.5,\nnoteTy      ~ты~0.5,\nnoteRy      ~ры~0.5,\nnoteNy      ~ны~0.5,\nnoteMy      ~мы~0.5,\nnoteFy      ~фы~0.5,\nnoteVy      ~вы~0.5,\nnoteSy      ~сы~0.5,\nnoteZy      ~зы~0.5,\nnoteLy      ~лы~0.5,\nnoteKy      ~кы~0.5,\nnoteBy      ~бы~0.5,\n",t.setInstrument=i,t.drumSettings={keys:t.keysLeftToRight,drums:r.drumKeysRight},t.defaultSynthSettings={keys:i(t.keysLeftToRight,t.DEFAULT_TONE_INSTR)},t.toneAndDrumPlayerSettings={keys:i(t.keysLeftToRight,t.DEFAULT_TONE_INSTR),drums:{...r.drumInfo}}},5923:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineModel=t.CELL_SIZE=void 0;const r=n(2074),i=n(8299);t.CELL_SIZE=10;class a{lines=[];findRowIndByOffset(e){return this.lines.findIndex((t=>{const n=t.startOffsetQ+t.blockOffsetQ;return e>=n&&e<n+t.durQ}))}getRowByOffset(e){return this.lines[this.findRowIndByOffset(e)]}getCellByNoteId(e){for(let t of this.lines)for(let n of t.cells)for(let t of n.notes)if(t.id===e)return n;return null}addCellDuration(e,t){const n=this.getRowAndCellIndexes(e);return n?(this.lines[n.row].cells[n.ind].notes.forEach((e=>{const n=e.durQ+t;e.durQ=n>0?n:0})),n):null}moveCell(e,t){const n=this.getRowAndCellIndexes(e);if(!n)return null;const r=this.lines,i=r[n.row],a=r[n.row].cells[n.ind];let o=i.blockOffsetQ+a.startOffsetQ+t,s=i.startOffsetQ+i.blockOffsetQ;if(o>=s&&o<s+i.durQ)return a.startOffsetQ=o-i.blockOffsetQ,this.getRowAndCellIndexes(e);{const t=this.findRowIndByOffset(o);if(t>-1){const n=this.lines[t];return i.cells=i.cells.filter((e=>e!=a)),a.startOffsetQ=o-n.blockOffsetQ,n.cells.push(a),this.getRowAndCellIndexes(e)}}return null}setData(e){let t=1,n=1;e.forEach((e=>{e.cells.forEach((e=>{e.id=n++,e.notes.forEach((e=>{e.id=t++}))}))})),this.lines=e}delete_NoteByNoteAndOffset(e,t){const{row:n,cells:r}=this.getCellsByOffset(e);n&&(r.forEach((e=>{e.notes=e.notes.filter((e=>e.note!==t))})),n.cells=n.cells.filter((e=>!!e.notes.length)))}delete_CellByOffset(e){const t=this.lines[this.findRowIndByOffset(e)];t&&(e-=t.blockOffsetQ,t.cells=t.cells.filter((t=>t.startOffsetQ!==e)))}getAllCells(){const e=[];return this.lines.forEach((t=>{t.cells.forEach((t=>{e.push(t)}))})),e}getMaxCellId(){const e=this.getAllCells();return e.length?Math.max(...e.map((e=>e.id))):0}getMaxNoteId(){const e=this.getAllNotes();return e.length?Math.max(...e.map((e=>e.id))):0}getAllNotes(){const e=this.getAllCells();return e.length?e.reduce(((e,t)=>[...e,...t.notes]),[]):[]}addNoteByOffset(e,t){const n=this.getRowByOffset(e);if(!n)return;t.id=this.getMaxNoteId()+1,t.startOffsetQ=e-n.blockOffsetQ;const r=this.getMaxCellId()+1;return n.cells.push({id:r,startOffsetQ:t.startOffsetQ,notes:[t]}),{note:t,coord:this.getRowAndCellIndexes(r)}}delete_Line(e,t=""){if(1===this.lines.length)return void(this.lines=[]);const n=this.lines.slice(0,e+1),r=this.lines.slice(e+1),i=n.pop();this.addOffset(r,-i.durQ,t),this.lines=[...n,...r]}static GetEmptyLine(e=""){return{durQ:120,startOffsetQ:0,cells:[],cellSizeQ:t.CELL_SIZE,blockOffsetQ:0,rowInPartId:e}}getEmptyLine(e=""){return a.GetEmptyLine(e)}addLineAfter(e,t=""){const n=a.GetEmptyLine();if(n.rowInPartId=t,!this.lines.length)return void this.lines.push(n);const r=this.lines.slice(0,e+1),i=r[r.length-1],o=this.lines.slice(e+1);this.addOffset(o,120,t),n.startOffsetQ=i?i.startOffsetQ+i.durQ:0,r.push(n),this.lines=[...r,...o]}addOffset(e,t,n=""){for(let r=0;r<e.length;r++){const i=e[r];n&&i.rowInPartId!==n||(i.startOffsetQ=i.startOffsetQ+t,i.cells.forEach((e=>{e.startOffsetQ=e.startOffsetQ+t,e.notes.forEach((e=>{e.startOffsetQ=e.startOffsetQ+t}))})))}}getRowAndCellIndexes(e){if(!e||!this.lines)return null;const t=this.lines;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].cells.length;r++)if(t[n].cells[r].id===e){const e=t[n].cells[r].startOffsetQ-t[n].startOffsetQ;return{row:n,ind:r,col:Math.ceil(e/t[n].cellSizeQ)}}return null}getItemById(e){if(!e)return null;for(let t of this.lines)for(let n of t.cells)if(n.id===e)return n;return null}getLineModelFromRecord(e,t,n){return a.GetToneLineModelFromRecord(e,t,n)}static GetToneLineModelFromRecord(e,n,i){let a=Math.round(6e4/e),o=[];for(let e=0;e<i.length;e++){const t=i[e],r=i[e+1];let o=t.down-n,s=Math.floor(o/a);t.quarterTime=n+a*s,t.quarterNio=s,r&&r.down-t.down<20&&(r.down=t.down)}const s=i.length-1,l=i[0].quarterTime,c=i[s].next,d=Math.ceil((c-l)/a);for(let e=0;e<d;e++)o.push({durQ:120,startOffsetQ:120*e,cellSizeQ:t.CELL_SIZE,cells:[],blockOffsetQ:0,rowInPartId:""});let u=1;return i.forEach(((e,t)=>{let n={id:t+1,bodyColor:"",headColor:"",note:"",durQ:0,startOffsetQ:0,char:e.char};const i=10*Math.floor((e.down-l)/a*r.NUM_120/10);n.startOffsetQ=i,n.durQ=10*Math.floor((e.up-e.down)/a*r.NUM_120/10)||10,n.headColor=e.color,n.note=e.note;let s=(e=>o.find((t=>e>=t.startOffsetQ&&e<t.startOffsetQ+t.durQ)))(i);if(s){let e;e||(e={id:u++,startOffsetQ:n.startOffsetQ,notes:[]},s.cells.push(e)),e.notes.push(n)}})),o}static GetLineModelFromRecord(e,n,i){let a=Math.round(6e4/e),o=[];for(let e=0;e<i.length;e++){const t=i[e],r=i[e+1];let o=t.down-n,s=Math.floor(o/a);t.quarterTime=n+a*s,t.quarterNio=s,r&&r.down-t.down<20&&(r.down=t.down)}const s=i.length-1,l=i[0].quarterTime,c=i[s].next,d=Math.ceil((c-l)/a);for(let e=0;e<d;e++)o.push({durQ:120,startOffsetQ:120*e,cellSizeQ:t.CELL_SIZE,cells:[],blockOffsetQ:0,rowInPartId:""});let u=1;return i.forEach(((e,t)=>{let n={id:t+1,bodyColor:"",headColor:"",note:"",durQ:0,startOffsetQ:0,char:e.char};const i=10*Math.floor((e.down-l)/a*r.NUM_120/10);n.startOffsetQ=i,n.durQ=10*Math.floor((e.up-e.down)/a*r.NUM_120/10)||10,n.headColor=e.color,n.note=e.note;let s=(e=>o.find((t=>e>=t.startOffsetQ&&e<t.startOffsetQ+t.durQ)))(i);if(s){let e;e||(e={id:u++,startOffsetQ:n.startOffsetQ,notes:[]},s.cells.push(e)),e.notes.push(n)}})),o}static GetSortedNotes(e){e=Array.isArray(e)?e:[];const t=[];return e.forEach((e=>{e.cells.forEach((e=>{e.notes.forEach((n=>{n.startOffsetQ=e.startOffsetQ,t.push(n)}))}))})),this.SortByStartOffsetQ(t),t}getSortedNotes(e){return a.GetSortedNotes(Array.isArray(e)?e:this.lines)}sortByField(e,t){e.sort(((e,n)=>e[t]<n[t]?-1:e[t]>n[t]?1:0))}static SortByStartOffsetQ(e){e.sort(((e,t)=>e.startOffsetQ<t.startOffsetQ?-1:e.startOffsetQ>t.startOffsetQ?1:0))}sortByStartOffsetQ(e){a.SortByStartOffsetQ(e)}static GetNoteNames(e){const t={};return e.forEach((e=>{t[e.note]=e.note})),Object.values(t)}static GetInstrNames(e){const t={};return e.forEach((e=>{t[e.instName]=e.instName})),Object.values(t)}getNoteNames(e){return a.GetNoteNames(e)}static GetDurationQByLines(e){return(e=Array.isArray(e)?e:[]).length?e[e.length-1].startOffsetQ+e[e.length-1].durQ:0}getDurationQByLines(e){return a.GetDurationQByLines(Array.isArray(e)?e:this.lines)}getOffsetsByRow(e){const t=[],n={};return e.cells.forEach((e=>{n[e.startOffsetQ]||(n[e.startOffsetQ]=!0,t.push(e.startOffsetQ))})),t}getNotesListByOffset(e,t){const n=[];return e.cells.forEach((e=>{e.startOffsetQ===t&&e.notes.forEach((e=>n.push(e)))})),n}getNoteById(e){if(!e)return null;for(let t of this.lines)for(let n of t.cells)for(let t of n.notes)if(t.id==e)return t;return null}getNotesByOffset(e){const t=[],n=this.getRowByOffset(e);return n?(n.cells.forEach((r=>{r.startOffsetQ+n.blockOffsetQ===e&&r.notes.forEach((e=>t.push(e)))})),t):t}getCellsByOffset(e){const t={row:null,cells:[]},n=this.getRowByOffset(e);return n?(t.row=n,n.cells.forEach((r=>{r.startOffsetQ+n.blockOffsetQ===e&&t.cells.push(r)})),t):t}getNotesHashByOffset(e,t){const n={};return e.cells.forEach((e=>{e.startOffsetQ===t&&e.notes.forEach((e=>{n[e.note]=e.note}))})),n}static ClearBlockOffset(e){return e.forEach((e=>{e.blockOffsetQ=0})),e}static RecalcAndClearBlockOffset(e){return e.forEach((e=>{e.startOffsetQ=e.startOffsetQ+e.blockOffsetQ,e.cells.forEach((t=>{t.startOffsetQ=t.startOffsetQ+e.blockOffsetQ})),e.blockOffsetQ=0})),e}recalcAndClearBlockOffset(e){return a.RecalcAndClearBlockOffset(e)}static GetToneNotes(e){let t=e.blockName||"no_name",n=this.CloneLines(e.rows);n=this.RecalcAndClearBlockOffset(n);const a=this.GetDurationQByLines(n),o=this.GetSortedNotes(n),s=this.GetNoteNames(o);if(!a||!o.length||!s.length)return"";let l=`<${t} $>\n`;return l+=`${e.track}: `,o.forEach(((t,n)=>{const s=t.instName||e.instrName,c=o[n+1];let d=0,u="",p=`v${(0,i.parseInteger)(t.volume,r.DEFAULT_VOLUME)}`,h=(t.slides||"").trim().replace(/\r\n/g,"\n").replace(/ /g,"\n").split(/\n/).filter((e=>!!e)).join("_"),f=t.cent?`.${t.cent}`:"";h&&(h=h.startsWith("~")?`:${h}`:`_${h}`),d=c?c.startOffsetQ-t.startOffsetQ:a-t.startOffsetQ,0===n&&t.startOffsetQ&&(u=`${t.startOffsetQ} `),l+=`${u} ${s} ${t.note}${f}=${d}=${t.durQ}:${p}${h} `})),l}static GetDrumNotes(e,n,i){e=e||"no_name",n=n||r.drumsTrack,i=this.CloneLines(i),i=this.RecalcAndClearBlockOffset(i);const a=this.GetDurationQByLines(i),o=this.GetSortedNotes(i);o.forEach((e=>{e.instName||(e.instName=`@${e.note}`)}));const s=this.GetInstrNames(o).map((e=>e.replace(/@/g,""))),l={};if(!a||!o.length||!s.length)return"";const c=a/t.CELL_SIZE,d=Math.floor(c/12),u=new Array(c).fill(" "),p=[...u];for(let e=0;e<d;e++)p[12*e]="|";s.forEach((e=>{l[e]={chars:[...u],lastDurQ:0};const t=o.filter((t=>t.instName===`@${e}`));for(let n=0;n<t.length;n++){const r=t[n],i=t[n+1],a=Math.floor(r.startOffsetQ/10);l[e].chars[a]="x",1!==r.durQ&&(i||(1!==r.durQ?l[e].lastDurQ=r.durQ:l[e].lastDurQ=480))}}));let h=`<${e} @>\n`,f=s.reduce(((e,t)=>t.length>e?t.length:e),0);return h+="-"+new Array(f).fill(" ").join("")+": "+p.join("")+`: ${n}\n`,Object.keys(l).forEach((e=>{const t=new Array(f-e.length).fill(" ").join(""),n=l[e].lastDurQ?l[e].lastDurQ:"";h+="@"+e+t+": "+l[e].chars.join("")+`: ${n}\n`})),h}getDrumNotes(e,t,n){return n=Array.isArray(n)?n:this.lines,a.GetDrumNotes(e,t,n)}static CloneLine(e){return(e={...e}).cells=e.cells.map((e=>((e={...e}).notes=e.notes.map((e=>({...e}))),e))),e}static CloneLines(e){return(e=Array.isArray(e)?e:[]).map((e=>a.CloneLine(e)))}cloneRows(e){return e=Array.isArray(e)?e:this.lines,a.CloneLines(e)}getLinesByMask(e){const n=[];let a=0;if((0,i.parseInteger)(e,0)){const o=(0,i.parseInteger)(e),s=Math.floor(o/r.NUM_120),l=o%r.NUM_120;for(let e=0;e<s;e++)n.push({durQ:120,cells:[],startOffsetQ:a,cellSizeQ:t.CELL_SIZE,blockOffsetQ:0,rowInPartId:""}),a+=120;return l&&n.push({durQ:l,cells:[],startOffsetQ:a,cellSizeQ:t.CELL_SIZE,blockOffsetQ:0,rowInPartId:""}),n}return(e=(""+e).trim()).split("_").forEach((e=>{const r=e.split("*"),o=(0,i.parseInteger)(r[r.length-1],0);let s=1,l=1;3===r.length?(s=(0,i.parseInteger)(r[0],0),l=(0,i.parseInteger)(r[1],0)):2===r.length&&(l=(0,i.parseInteger)(r[0],0));for(let e=0;e<s;e++)for(let e=0;e<l;e++)n.push({durQ:o,cells:[],startOffsetQ:a,cellSizeQ:t.CELL_SIZE,endLine:e===l-1,blockOffsetQ:0,rowInPartId:""}),a+=o})),n}fillLinesStructure(e){this.lines=this.getLinesByMask(e)}static SplitByMask(e){let t=[],n=(e.partInfo.mask||"").trim().split("_"),r=[...e.lines],a=0;return n[0]?(n.forEach((o=>{n=o.split("*");let s=120,l=1,c=1;1===n.length&&(s=(0,i.parseInteger)(n[0],120)),2===n.length&&(l=(0,i.parseInteger)(n[0],4),s=(0,i.parseInteger)(n[1],120)),3===n.length&&(c=(0,i.parseInteger)(n[0],1),l=(0,i.parseInteger)(n[1],4),s=(0,i.parseInteger)(n[2],120));for(let n=0;n<c&&r.length;n++){a++;let n=r.splice(0,l),i=l*s;r.forEach((e=>{e.startOffsetQ=e.startOffsetQ-i,e.cells.forEach((e=>{e.startOffsetQ=e.startOffsetQ-i,e.notes.forEach((e=>{e.startOffsetQ=e.startOffsetQ-i}))}))})),t.push({track:e.track,lines:n,type:e.type,rowInPartId:`${e.partInfo.partNio}-${a}`,rowNio:a,partId:e.partInfo.partId,status:""})}})),r.length&&(a++,t.push({track:e.track,lines:r,type:e.type,rowInPartId:`${e.partInfo.partNio}-${a}`,rowNio:a,partId:e.partInfo.partId,status:""})),t):(a++,t=[{track:e.track,lines:r,type:e.type,rowInPartId:`${e.partInfo.partNio}-${a}`,rowNio:a,partId:e.partInfo.partId,status:""}],t)}}t.LineModel=a},1174:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getSkedByQuarters=void 0;const o=a(n(8299)),s=n(2202),l=n(8299),c=n(7893);function d(e,t){const n=Math.floor(e/o.NUM_120);return t.restForNextRowQ&&n===t.lastBeatInd+1?t.lastBeatInd:n}function u(e,t){e&&(t.offsetQ=t.restFromPrevRowQ+t.colLoopDurationQ*e),t.noteLineInfo.notes.forEach((e=>{const n=o.isDrum(e.instr);let r;r=e.note===l.PAUSE?[]:(0,c.getSoundsInfoArr)(n?e.instr:e.note);let i=d(t.offsetQ,t);if(i>=t.beatsMs.length)return;let a=t.offsetQ-t.beatsQ[i],u=function(e,t,n){return Math.round(t*(n.beatsMs[e]/o.NUM_120))}(i,a,t),p=function(e,t,n,r){let i=d(r.beatsQ[e]+t+n,r);i=i>=r.beatsMs.length?r.beatsMs.length-1:i;let a=r.beatsMs.slice(e,i+1).reduce(((e,t)=>e+t),0)/((i-e+1)*o.NUM_120);return{durationMs:Math.round(n*a),hundredthMs:a}}(i,a,e.durationQ,t),h=p.durationMs;t.offsetQ=t.offsetQ+e.durationForNextQ;const f=(0,s.getInstrumentObj)(e.instr||t.instrAny);let m=o.getSafeVolume(e.volume);m=o.mergeVolume(m,t.parentVolume);let g=e.pitchShift||0;if(r.length){t.sked[i]=Array.isArray(t.sked[i])?t.sked[i]:[];const n=e.slides?e.slides.map((e=>({...e,endWhen:e.endWhen*p.hundredthMs/1e3}))):void 0;t.sked[i].push({notes:e.note,durationMs:h,offsetFromBeatMs:u,soundsInfo:r,instrName:e.instr,instrObj:f,volume:m,pitchShift:g,slides:n,cent:e.cent})}}))}t.getSkedByQuarters=function(e){const t={noteLineInfo:null,offsetQ:0,lastBeatInd:0,beatsMs:e.beatsMs,beatsQ:[],repeat:0,sked:{},restForNextRowQ:e.restForNextRowQ||0,restFromPrevRowQ:0,colLoopDurationQ:0,parentVolume:0,buildCount:0,durationByBeatsCountQ:0};let n=!!e.isDrum,r=/head /.test(e.noteLine);t.parentVolume=o.getSafeVolume(e.parentVolume),t.noteLineInfo=e.noteLineInfo||o.getNoteLineInfo(e.noteLine),t.colLoopDurationQ=e.colLoopDurationQ||0|t.noteLineInfo.durationQ,t.sked.isDrum=n,t.beatsQ=t.beatsMs.map(((e,t)=>t*o.NUM_120)),t.restFromPrevRowQ=e.restFromPrevRowQ||0,t.offsetQ=t.restFromPrevRowQ,t.lastBeatInd=t.beatsMs.length-1,t.repeat=e.repeat||t.noteLineInfo.repeat||1,t.durationByBeatsCountQ=t.beatsMs.length*o.NUM_120,t.buildCount=Math.ceil(t.durationByBeatsCountQ/t.colLoopDurationQ),t.buildCount=Math.min(t.repeat,t.buildCount);for(let e=0;e<t.buildCount;e++)u(e,t);return t.sked.repeat=1,t.sked.tickCount=t.beatsMs.length,t.sked.isHead=r,t.sked}},365:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MidiPlayer=void 0;const o=n(9082),s=n(7878),l=n(1542),c=n(1031),d=a(n(8299)),u=n(611),p=n(2202),h=n(7025),f=n(1174),m=n(7893),g=new c.EventEmitter;class v extends l.Sound{loopDfr;isStopped=!1;loopId=0;interval;ticker;pitchShift=0;gains={};loops={};connect({ctx:e,oscills:t}){return this.oscills=t||{},this}playByQuarters(e){this.pitchShift=e.pitchShift||0,e.beatOffsetMs;let t=e.cb||((e,t)=>{}),n=Array.isArray(e.beatsWithOffsetMs)?e.beatsWithOffsetMs:[],r=e.loopIdsArr,i=e.startTimeSec;this.stop({break:!0}),this.ticker=new h.Ticker(this.ctx),this.loopDfr=new d.Deferred;const a=(r||[]).reduce(((e,t)=>(e[t]=t,e)),{});i=i||this.ctx.currentTime,g.emit("prepare",a),t("prepare",e);let o=-1,s=-1,l=n.length-2,c=0;const u=(e=!1)=>{o++,e||s++,t("tick",{isVirtTick:e,planTick:o,endTick:l}),c+=n[o];const r=i+c/1e3;o<=l&&g.emit("getNextSound",{tick:o,whenSec:r}),s>=l&&(this.stop({break:!1}),t("lastTick",{realTick:s,endTick:l,offsetMs:c}))};return u(!0),this.ticker.start({beatsWithOffsetMs:[...n],startTimeSec:i},(()=>u())),this.loopDfr.promise}getNotesMidi(e){const t=(0,p.getInstrCodeBy)(e.instrCode||u.DEFAULT_TONE_INSTR),n=d.isDrum(t),r=this.instruments[t];if(!r)return null;const i=(0,m.getSoundsInfoArr)(e.notes);return i.length?this.getSoundMidi({soundsInfo:i,instrObj:r,isDrum:n,durationMs:e.durationMs||0,volume:e.volume,whenSec:e.whenSec||0,pitchShift:e.pitchShift||0,slides:e.slides,cent:e.cent}):null}getSoundMidi(e){if(!e.instrObj||!e.soundsInfo||!e.durationMs)return;let{durationMs:t,volume:n,pitchShift:r}=e;const i={isSound:!0,midis:[]},a=Array.isArray(e.soundsInfo)?e.soundsInfo:[e.soundsInfo];for(let n of a){const a=d.getEndPointVolume(d.mergeVolume(e.volume,n.volume));i.midis.push(this.fontPlayer.queueWaveTableSrc({audioContext:this.ctx,preset:e.instrObj,zone:n.zone,targetNode:l.Sound.masterGain,when:e.whenSec||0,pitch:n.code+(r||0),duration:t/1e3,volume:a/100,slides:e.slides,cent:e.cent}))}return i}addLoopByQuarters(e){this.loopId++;let t=this.loopId,{noteLine:n,isDrum:r,instrCode:i}=e,a=Array.isArray(e.beatsMs)?e.beatsMs:[],s=e.repeat===1/0?1e6:e.repeat,c=e.noteLineInfo||d.getNoteLineInfo(n),u=-1,p=0,h=d.getSafeVolume(e.parentVolume);const m=(0,f.getSkedByQuarters)({noteLine:n,noteLineInfo:c,isDrum:r,instrAny:i,repeat:s,beatsMs:[...a],parentVolume:h,restFromPrevRowQ:e.restFromPrevRowQ,restForNextRowQ:e.restForNextRowQ,colLoopDurationQ:e.colLoopDurationQ});m.id=t,delete this.loops[t],this.loops[t]=m,Object.values(m).forEach((e=>{Array.isArray(e)&&e.forEach((e=>{Array.isArray(e.soundsInfo)&&e.instrObj&&e.soundsInfo.forEach((t=>{t.zone=t.code?(0,o.findZone)(l.Sound.ctx,e.instrObj,t.code+(e.instrObj.pitchShift||0)+(e.pitchShift||0)):void 0}))}))}));const v=t=>{if(u++,Array.isArray(m[u]))for(const n of m[u]){let r=e.dataByTracks[e.trackName]||{};if(r.isExcluded)return;let i=r?.items&&r.items[n.instrName],a=d.mergeVolume(d.getSafeVolume(e.dataByTracks.total?.volume,70),d.getSafeVolume(r.volume));i&&(a=d.mergeVolume(a,i.volume)),a=d.mergeVolume(n.volume,d.getSafeVolume(a)),this.getSoundMidi({durationMs:n.durationMs,isDrum:e.isDrum,instrObj:n.instrObj,soundsInfo:n.soundsInfo,whenSec:t.whenSec+n.offsetFromBeatMs/1e3,volume:a,pitchShift:n.pitchShift,slides:n.slides,cent:n.cent})}u===m.tickCount-1&&(u=-1,p++,p>=s&&(p=0,g.off("getNextSound",v)))},b=e=>{e&&e[t]&&g.on("getNextSound",null,v)},y=()=>{g.off("getNextSound",v),p=0,u=-1},_=()=>{g.off("getNextSound",v),g.off("prepare",b),g.off("stop",y),g.off("clear",_)};return g.on("prepare",null,b),g.on("stop",null,y),g.on("clear",null,_),m}stopAndClear(){this.stop({break:!0}),g.emit("clear"),this.loopId=0,this.loops={},this.fontPlayer.cancelQueue(this.ctx)}stop(e){if(g.emit("stop"),clearInterval(this.interval),this.ticker&&this.ticker.stop(),this.loopDfr){const t=this.loopDfr;this.loopDfr=null,t.resolve({...e,break:!!e.break})}}setSettings(e,t){const n=this.getSettingsForKeysAndNotes(e);return t=t||"default",Object.keys(n).forEach((e=>{const t=n[e];t.freq=s.freqByNoteHash[t.noteLat],t&&t.noteLat&&(n[t.noteLat]=t)})),this.keysAndNotes=n,this.instrSettings[t]=n,n}}t.MidiPlayer=v},8162:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPlayer=t.getAudioBufferFromBlob=t.decodeArrayBufferToAudio=void 0;const o=n(1542),s=n(365),l=n(611),c=n(7025),d=n(6625),u=a(n(8299)),p=n(8299);async function h(e){return await o.Sound.ctx.decodeAudioData(e)}async function f(e){return h(await e.arrayBuffer())}t.decodeArrayBufferToAudio=h,t.getAudioBufferFromBlob=f,t.MultiPlayer=class{isPlaying=!1;ctx;files;soundSourceSet=[];startTime;durationX;offset;playSessions=[];outGain;ticker=new c.Ticker(o.Sound.ctx);midiPlayer=new s.MidiPlayer;tickPlayer=new s.MidiPlayer;constructor(e){this.ctx=e||o.Sound.ctx,this.outGain=this.ctx.createGain(),this.outGain.gain.value=.6,this.outGain.connect(this.ctx.destination),this.midiPlayer.connect({ctx:o.Sound.ctx}),this.midiPlayer.setSettings(l.toneAndDrumPlayerSettings),this.tickPlayer.connect({ctx:o.Sound.ctx}),this.tickPlayer.setSettings(l.toneAndDrumPlayerSettings)}playMidi(e,t){}playTick(e){this.ticker.stop(),e.delayMs;const t=Array.isArray(e.beatsWithOffsetMs)?e.beatsWithOffsetMs:[];t.length&&this.ticker.start({beatsWithOffsetMs:[...t],startTimeSec:e.startTimeSec||0},(()=>{this.midiPlayer.getNotesMidi({notes:"cowbell",instrCode:"cowbell",durationMs:1e3})}))}get currentTime(){return this.ctx.currentTime}async playFractions(e){let t=e.files,n=e.offsetSec||0,r=e.durationSec||0,i=e.repeatCount||1,a=Array.isArray(e.beatsWithOffsetMs)?e.beatsWithOffsetMs:[],o=e.startDelaySec||0,s=0,l=0;const c={break:!1};let d,p=!1,h=!!a.length;e.playMidiBlock&&Array.isArray(e.midiTextBlocks)&&e.midiTextBlocks.length&&(d=u.getOutBlock(e.playMidiBlock,e.midiTextBlocks)),this.soundSourceSet=[],this.offset=n,this.durationX=0;const m=[],g=t.map((e=>"string"==typeof e?{path:e,name:e,use:!0}:e));let v;this.midiPlayer.stopAndClear(),d&&(v=this.getLoopsInfo({repeat:1,beatOffsetMs:e.beatOffsetMs||a[0],beatsMs:a.slice(1),blocks:e.midiTextBlocks,playBlock:d}));for(const e of g){const t=e.path,n=e.name;if(!t||"midi"===n||"tick"===n||!e.use){"tick"===n&&h&&e.use&&(p=!0),"midi"!==n||e.use||(d=null);continue}let r=new Blob([null.readFileSync(e.path)]);const i=await f(r);m.push({path:t,buffer:i})}m.length&&this.playSessions.push(c);const b=()=>{this.startTime=this.ctx.currentTime+o,p&&!d&&this.playTick({beatsWithOffsetMs:[...a],startTimeSec:this.startTime}),d&&this.tryPlayMidiBlock({repeatCount:1,beatOffsetMs:e.beatOffsetMs||a[0],beatsWithOffsetMs:[...a],startTimeSec:this.startTime,outLoops:v,dontClear:!0});const t=()=>{s--,s||(l++,!c.break&&l<i?b():1===this.playSessions.length&&this.playSessions.includes(c)&&(this.isPlaying=!1,this.playSessions=[],this.ticker.stop()))};m.forEach((e=>{const i=this.ctx.createBufferSource();i.buffer=e.buffer,i.connect(this.outGain),r?i.start(this.startTime,n,r):i.start(this.startTime,n),s++,this.soundSourceSet.push(i),i.onended=t}))};b(),s&&(this.isPlaying=!0)}stop(e=0){this.playSessions.forEach((e=>{e.break=!0})),this.playSessions=[],this.soundSourceSet.forEach((t=>{t.disconnect(this.outGain),t.stop(e)})),this.soundSourceSet=[],this.isPlaying=!1,this.ticker.stop(),this.midiPlayer.stop({break:!0})}clear(){}pause(){}async tryPlayTextLine({text:e,repeat:t}){t=t||1,e=(e||"").trim(),this.midiPlayer.stopAndClear();const n=u.clearNoteLine(e),r=u.getBpmFromString(n),i=this.midiPlayer.addLoopByQuarters({noteLine:n,bpm:r,isDrum:!1,repeat:t,instrCode:l.DEFAULT_TONE_INSTR,beatsMs:[],dataByTracks:this.normalizeDataByTracks()}).id;await this.midiPlayer.waitLoadingAllInstruments(),this.midiPlayer.playByQuarters({loopIdsArr:[i],beatsWithOffsetMs:[]})}normalizeDataByTracks(e,t){return(e=e||{}).total&&e.total.volume||(e.total={volume:t||d.DEFAULT_OUT_VOLUME}),e}getLoopsInfo(e){const t=e.pitchShift||0;e.excludeLines;let n=Array.isArray(e.beatsMs)?[...e.beatsMs]:[],r=e.playBlock||"out";const i=Array.isArray(e.blocks)?e.blocks:u.getTextBlocks(e.blocks),a=u.getOutBlock(r,i),o=this.normalizeDataByTracks(e.dataByTracks,a.volume),s=u.getOutBlocksInfo(i,r),l=e.repeat||e.repeatCount||u.getRepeatFromString(a.head);console.log("getLoopsInfo.outBlocks",s);let c=0,d=e.bpm||u.getBpmFromString(a.head,0);d||console.warn("getLoopsInfo.bpm is zero or undefined",d),d=n.length?0:d;let p=0,h=0,f=0;s.rows.forEach((e=>{e.trackLns.forEach((e=>{e.noteLineInfo.notes.forEach((e=>{e.pitchShift=e.pitchShift+t}))}))}));return{repeat:l,rowLoops:s.rows.map((e=>{const t={ids:[],beatsMs:[]},r=f,i=e.rowDurationByHeadQ*e.rowRepeat+r;Math.ceil(i/u.NUM_120);let a,s=Math.floor(i/u.NUM_120);if(f=i-s*u.NUM_120,d&&!n.length)a=u.getBeatsByBpm(d,s||(i?1:0));else{let e=c+s;a=n.slice(c,e),c=e}return t.beatsMs=a,p+=a.length*u.NUM_120,h+=a.reduce(((e,t)=>e+t),0),e.trackLns.forEach((e=>{if(!i)return;const n=e.noteLine,s=u.isDrum(e.trackName),l=this.midiPlayer.addLoopByQuarters({noteLine:n,noteLineInfo:e.noteLineInfo,isDrum:s,beatsMs:[...a],bpm:d,parentVolume:e.parentVolume,repeat:e.repeat,restFromPrevRowQ:r,restForNextRowQ:f,colLoopDurationQ:e.colLoopDurationQ,dataByTracks:o,trackName:e.trackName});t.ids.push(l.id)})),t})),durationInFullQ:p,durationInFullQMs:h}}stopAndClearMidiPlayer(){this.midiPlayer.stopAndClear()}async tryPlayMidiBlock(e){e.dontClear||this.midiPlayer.stopAndClear();const t=e.outLoops||this.getLoopsInfo(e),n=e.beatOffsetMs||0,r=e.cb||(()=>{});let i=!1;await this.midiPlayer.waitLoadingAllInstruments();let a=e.startTimeSec||this.ctx.currentTime,o=n,s=0;for(let e of t.rowLoops)s+=e.beatsMs.reduce(((e,t)=>e+t),0);const l=(new Date).getTime()+o+s*t.repeat;for(let r=0;r<t.repeat&&!i;r++)for(let r of t.rowLoops)if(i=!!(await this.midiPlayer.playByQuarters({beatOffsetMs:o,beatsWithOffsetMs:[o,...r.beatsMs],loopIdsArr:r.ids,startTimeSec:a,cb:e.cb||(()=>{})})).break,o=0,a=a+r.beatsMs.reduce(((e,t)=>e+t),0)/1e3+n/1e3,i)break;let c=l-(new Date).getTime();c=c>0?c:0;const d=new p.Deferred;return i?(r("break"),d.resolve("break")):setTimeout((()=>{r("finish"),d.resolve("finish")}),c),d.promise}}},1542:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Sound=t.instruments=void 0;const o=n(3115),s=n(9082),l=n(7878),c=a(n(8299)),d=n(611),u=n(6744),p=n(2202);t.instruments=p.instruments;const h={},f={},m=new o.WebAudioFontPlayer,g=m.loader,v=new AudioContext,b=v.createGain();b.gain.value=1,b.connect(v.destination);class y{oscills;keysAndNotes={};static MasterVolume=100;instrSettings={};fontPlayer=m;fontLoader=g;static get masterGain(){return b}get masterVolume(){return y.MasterVolume}set masterVolume(e){y.MasterVolume=e}static get ctx(){return v}get ctx(){return v}static get Instruments(){return t.instruments}get instruments(){return t.instruments}static get LoadingInstruments(){return h}get loadingInstruments(){return h}static get DrumKeys(){return f}get drumKeys(){return f}async waitLoadingAllInstruments(){const e=new c.Deferred;if(!Object.keys(y.LoadingInstruments).length)return e.resolve(!0),e.promise;let t=setInterval((()=>{Object.keys(y.LoadingInstruments).length||(clearInterval(t),e.resolve(!0))}),100);return e.promise}static setToneSound(e,t,n){window[t]=n,y.Instruments[e]=window[t],(0,s.preparePreset)({audioContext:this.ctx,preset:window[t],var:t,id:e})}static AddToneSound(e){if(!e)return;if(y.Instruments[e]||y.LoadingInstruments[e])return;if(p.hardcodedInstruments[e]){const n=p.hardcodedInstruments[e],r=window[n];if(r)return(0,s.preparePreset)({audioContext:this.ctx,preset:r,var:n,id:e}),t.instruments[e]=r,void delete y.LoadingInstruments[e]}if("file://"===window.location.origin)return;if(e>1e4)return;const n=g.instrumentInfo(e);y.LoadingInstruments[e]=!0,g.startLoad(y.ctx,n.url,n.variable,e),g.waitLoad((()=>{y.Instruments[e]=window[n.variable],delete y.LoadingInstruments[e]}))}static AddDrumSound(e){if(!e)return;const n=g.findDrum(e),r=g.drumInfo(n),i=c.drumPrefix+e;if(y.DrumKeys[i]=r.pitch,p.hardcodedInstruments[i]){const e=p.hardcodedInstruments[i],n=window[e];if(n)return(0,s.preparePreset)({audioContext:this.ctx,preset:n,var:e,id:i}),t.instruments[i]=n,void delete y.LoadingInstruments[i]}"file://"!==window.location.origin&&(y.LoadingInstruments[i]=!0,g.startLoad(y.ctx,r.url,r.variable,i),g.waitLoad((()=>{y.Instruments[i]=window[r.variable],delete y.LoadingInstruments[i]})))}static AddSound(e){let t=c.parseInteger(e,-1);if(t>-1)return void y.AddToneSound(t);if(!e||"string"!=typeof e)return;let n=c.parseInteger(e.replace(c.drumPrefix,""),-1);n>-1&&y.AddDrumSound(n)}addToneSound(e){y.AddToneSound(e)}addDrumSound(e){y.AddDrumSound(e)}static GetNoteSame(e){e=(e||"").toLocaleLowerCase().trim();let t=l.freqByNoteHash[e]?e:"";return t=t||(u.drumIdByAlias[e]?e:""),t}getNoteLat(e){return y.GetNoteLat(e)}static GetNoteLat(e){e=(e||"").toLocaleLowerCase().trim();let t=l.noteLatByNoteHash[e];return t=l.freqByNoteHash[t]?t:"",t=t||(u.drumIdByAlias[e]?e:""),t}getSettingsForKeysAndNotes(e){const t={};if(e.keys){const n=c.getKeysFromText(e.keys,d.DEFAULT_TONE_INSTR);Object.keys(n).forEach((e=>{const r=n[e],i=this.getNoteLat(r.note||r.note),a=r.note;t[e]={noteStep:i[0],octave:i[1],volume:r.volume,noteLat:i,noteRus:a,code:l.codeByNoteHash[i],instrCode:r.instrCode}}))}return Object.keys(t).forEach((e=>{this.addToneSound(t[e].instrCode)})),e.drums?(Object.keys(e.drums).forEach((n=>{const r=e.drums[n],i=g.findDrum(r.instrCode),a=g.drumInfo(i);this.addDrumSound(r.instrCode),t[n]={...r,code:a.pitch,instrCode:c.drumPrefix+r.instrCode,isDrum:!0}})),t):t}}t.Sound=y,Object.keys(p.hardcodedInstruments).forEach((e=>{y.AddSound(e)}))},4155:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Synthesizer=void 0;const o=n(7878),s=n(1542),l=n(2202),c=a(n(8299));class d extends s.Sound{isConnected=!1;playingSounds={};playingTones=[];outEditor;connect({ctx:e,oscills:t,outEditor:n}){this.oscills=t||{},this.outEditor=n,this.isConnected=!0}playSoundSynth=(e,t)=>{const{playingSounds:n,ctx:r,oscills:i}=this;let a=o.noteByKeyHash[e]||e;if(a=(a||"").toLocaleLowerCase(),!o.freqByNoteHash[a])return;const s=n[a];if(s)return s.node.gain.setValueAtTime(s.node.gain.value,r.currentTime),s.node.gain.linearRampToValueAtTime(0,r.currentTime+0),delete n[a],void setTimeout((()=>{s.oscil.disconnect(s.node)}),0);if(t)return;let l=i[a];l||(l=r.createOscillator(),l.type="sine",l.frequency.value=o.freqByNoteHash[a],l.start(0),i[a]=l);const c=r.createGain();let d=1;/о/.test(a)?d=.35:(/а/.test(a)||/э/.test(a))&&(d=.2),n[a]={oscil:l,node:c},c.gain.setValueAtTime(0,r.currentTime),l.connect(c),c.gain.linearRampToValueAtTime(d,r.currentTime+0),c.connect(r.destination),this.addToOut(a)};playSound=e=>{let t=e.id||0,n=!!e.print,r=this.keysAndNotes[e.keyOrNote],i=(0,l.getInstrCodeBy)(e.instrCode),a=e.volume,o=e.pitchShift||0,c=s.Sound.GetNoteSame(e.keyOrNote);const d=this.getNoteLat(c);(r||c)&&(!r&&d&&(r=this.keysAndNotes[d]),r&&null!=r.instrCode&&this.instruments[r.instrCode]?(i=i||r.instrCode,a=null==a?r.volume:a,this.playSoundMidi({id:t,...r,instrCode:i,volume:a},n,o,e.onlyStop)):c&&this.playSoundSynth(c,e.onlyStop))};setPlayingTones(){const e=[];for(const t of Object.values(this.playingSounds))t.noteLat&&t.code&&t.freq&&e.push(t);e.sort(((e,t)=>e.code>t.code?1:e.code<t.code?-1:0)),this.playingTones=e}stopSound(e){let t=e.noteLat+"-"+(e.id||0);const n=this.playingSounds[t];if(n)return n.midi&&n.midi.cancel&&(n.midi.cancel(),n.midi=null,delete this.playingSounds[t]),n.node?(n.node.gain.setValueAtTime(n.node.gain.value,this.ctx.currentTime),n.node.gain.linearRampToValueAtTime(0,this.ctx.currentTime+0),void setTimeout((()=>{n.oscil&&n.oscil.disconnect&&n.oscil.disconnect(n.node)}),0)):void delete this.playingSounds[t]}addToOut(e){this.outEditor&&(e=this.outEditor.getValue().trim()+" "+e,this.outEditor.setValue(e))}playSoundMidi=(e,t,n,r)=>{if(this.stopSound(e),r)return this.setPlayingTones();const i=this.instruments[e.instrCode];if(!i)return this.setPlayingTones();const a=e.noteLat+"-"+(e.id||0),{playingSounds:o,ctx:l}=this;e.isDrum&&(n=0),e.midi=this.fontPlayer.queueWaveTableSrc({audioContext:l,targetNode:s.Sound.masterGain,preset:i,when:0,pitch:e.code+n,duration:1234567,volume:e.volume*this.masterVolume/c.VOLUME_100}),o[a]=e,this.setPlayingTones(),t&&this.addToOut(e.noteRus)};setSettings(e,t){const n=this.getSettingsForKeysAndNotes(e);return t=t||"default",Object.keys(n).forEach((e=>{const t=n[e];t.freq=o.freqByNoteHash[t.noteLat],t&&t.noteLat&&(n[t.noteLat]=t)})),this.keysAndNotes=n,this.instrSettings[t]=n,n}clearOut(){this.outEditor&&this.outEditor.setValue("")}}t.Synthesizer=d},8738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textModelToLineModel=t.sortTracks=void 0;const r=n(8299),i=n(954),a=n(5923),o=n(1542);function s(e){return e.find((e=>"out"===e.id))}const l=["du","tu","ru","nu","mu","fu","vu","su","zu","lu","ku","bu","dy","ty","ry","ny","my","fy","vy","sy","zy","ly","ky","by","do","to","ro","no","mo","fo","vo","so","zo","lo","ko","bo","da","ta","ra","na","ma","fa","va","sa","za","la","ka","ba","de","te","re","ne","me","fe","ve","se","ze","le","ke","be","di","ti","ri","ni","mi","fi","vi","si","zi","li","ki","bi"];function c(e,t){if(!t)return e;e=(e||"").trim().toLowerCase();let n=l.findIndex((t=>t===e));return n<0?e:(n+=t,n>=l.length||n<0?e:l[n])}function d(e){e.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0))}t.sortTracks=d,t.textModelToLineModel=function(e){const t=e.targetSong,n=(0,i.getTopOutListHash)({topBlock:s(e.blocks)}),l=Object.create(null);t.tracks.length||(t.bmpValue=(0,r.parseInteger)(e.settings.bpm[0],90)),t.pitchShiftSrc=(0,r.parseInteger)(e.settings.pitchShift[0],0),t.pitchShift=0,t.parts=n.map((e=>(l[e.partNio]=e,{name:e.name,id:e.partId})));const u=Object.create(null),p=Object.create(null),h=Object.create(null);if(t.tracks.forEach((e=>{e.isHardTrack&&(u[e.name]||(u[e.name]=e))})),t.tracks.forEach((e=>{e.isHardTrack||p[e.name]||(p[e.name]=e)})),Object.keys(e.settings.dataByTracks).forEach((t=>{const n=(0,r.getVolumeFromString)(e.settings.dataByTracks[t]);h[t]||(h[t]=t),u[t]||(u[t]={name:t,volume:n,board:(0,r.hasDrumChar)(t)?"drums":"guitar",isHardTrack:!0})})),e.sourceSong.songNodeHard){const t=e.sourceSong.songNodeHard,n=t?.tracks||[];(t?.dynamic||[]).forEach((e=>{h[e.track]||(h[e.track]=e.track)})),n.forEach((e=>{u[e.name]||(u[e.name]={...e,isHardTrack:!0})}))}let f=[...e.blocks];const m={blocks:f,currBlock:f.find((e=>"out"===e.id)),currRowInfo:{first:0,last:0},excludeIndex:[],midiBlockOut:null,playBlockOut:"",topBlocksOut:[]};(0,i.getMidiConfig)(m);const g=(0,r.getOutBlocksInfo)(e.blocks,m.playBlockOut),v={},b=[];let y,_="";g.rows.forEach((e=>{const t=(0,r.getPartInfo)(e.text);t.partId!==_?(_=t.partId,y={partId:_,durationQ:e.rowDurationByHeadQ,rows:[e],text:e.text},b.push(y)):(y.durationQ=y.durationQ+e.rowDurationByHeadQ,y.rows.push(e)),e.trackLns.forEach((e=>{e.noteLineInfo.notes.forEach((t=>{let n=e.trackName;v[n]||(v[n]=n)}))}))})),Object.keys(v).forEach((e=>{h[e]||(h[e]=e),u[e]||(u[e]={name:e,volume:50,board:(0,r.hasDrumChar)(e)?"drums":"guitar",isHardTrack:!0})})),b.forEach((e=>{let t=0;e.rows.forEach((e=>{e.startOffsetQ=t,e.trackLns.forEach((e=>{e.startOffsetQ=t})),t+=e.rowDurationByHeadQ}))}));{let e="";b.forEach((t=>{e+=t.partId,t.rows.forEach((t=>{e+=` - ${t.rowDurationByHeadQ}`})),e+="\n"}))}if(Object.keys(u).forEach((e=>{p[e]&&delete p[e]})),Object.keys(u).forEach((e=>{h[e]||delete u[e]})),t.dynamic=t.dynamic.filter((e=>!!p[e.track])),b.forEach((e=>{const i=(0,r.getPartInfo)(e.text);n.forEach((e=>{e.partId===i.partId&&(i.mask=e.mask)})),Object.keys(v).forEach((n=>{const r=[];if(e.rows.forEach((e=>{e.trackLns.forEach((e=>{e.trackName===n&&r.push(e)}))})),!r.length)return;let s=new a.LineModel;s.setData(s.getLinesByMask(e.durationQ)),r.forEach((e=>{let n=0;for(let r=0;r<e.repeat;r++)e.noteLineInfo.notes.forEach((r=>{if("pause"===r.note)return void(n+=r.durationQ);let i=e.startOffsetQ+Math.round(n/10*10),a=Math.round(r.durationQ/10*10);r.note.split("+").forEach((e=>{s.addNoteByOffset(i,{id:0,durQ:a,note:c(o.Sound.GetNoteLat(e),t.pitchShiftSrc),startOffsetQ:0,char:"",slides:r.slidesText,volume:r.volume,instName:r.instr,cent:r.cent})})),n+=r.durationForNextQ}))}));const l=a.LineModel.SplitByMask({lines:s.lines,type:n.startsWith("$")?"guitar":"drums",partInfo:i,track:n});t.dynamic=[...t.dynamic,...l]}))})),e.sourceSong.songNodeHard){const n=e.sourceSong.songNodeHard,r=n?.dynamic||[];t.dynamic=[...t.dynamic,...r]}return t.tracks=[...Object.values(u),...Object.values(p)],d(t.tracks),t}},7025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ticker=t.tickOnTime=void 0;const r=n(1542);t.tickOnTime=function(e,t,n){if(t.currentTime>=e)return void n();let r=this.ctx.createOscillator();return r.onended=n,r.start(0),r.stop(e),r},t.Ticker=class{ctx;interval=null;info={startCtxTimeSec:0,stopCtxTimeSec:0,break:!1};constructor(e){this.ctx=e}tickByBeatsMs(e,t){this.stop();let n=Array.isArray(e.beatsWithOffsetMs)?[...e.beatsWithOffsetMs]:[];if(!n.length)return;const r=this.info;r.startCtxTimeSec=e.startTimeSec||this.ctx.currentTime;let i=this.ctx.createOscillator(),a=0,o=r.startCtxTimeSec+n[a]/1e3;const s=()=>{a++,r.break||a>=n.length||(t(),o+=n[a]/1e3,i=this.ctx.createOscillator(),i.onended=s,i.start(),i.stop(o))};i.onended=s,i.start(0),i.stop(o)}start(e,t){let n=!1;e.beatsWithOffsetMs?(n=!0,this.tickByBeatsMs(e,t)):e.bpm&&(n=!0,this.tickByBpm(e,t)),n||this.stop()}tickByBpm(e,t){if(this.stop(),!e.bpm||!t)return;const n=60/e.bpm,r=this.info;r.startCtxTimeSec=e.startCtxTimeSec||this.ctx.currentTime;let i=this.ctx.createOscillator(),a=r.startCtxTimeSec+n;const o=()=>{r.break||(t(),a+=n,i=this.ctx.createOscillator(),i.onended=o,i.start(),i.stop(a))};i.onended=o,i.start(0),i.stop(a),(!e.startCtxTimeSec||e.startCtxTimeSec>=this.ctx.currentTime)&&t()}tickByQuantMs(e,t){let n=Date.now()+e;this.interval=setInterval((()=>{Date.now()>n&&(n+=e,t())}))}stop(){this.info.break=!0,this.info.stopCtxTimeSec=this.ctx.currentTime,this.info={startCtxTimeSec:0,stopCtxTimeSec:0,break:!1},null!==this.interval&&(clearInterval(this.interval),this.interval=null)}createTickSource(e){let t=e.repeat||100,n=(e.qms||400)/1e3,i=n*t,a=new OfflineAudioContext(1,44100*i,44100),o=a.currentTime,s=0;for(let r=0;r<t;r++)if("3:8"===e.signature){const t=n/2;let r=a.createBufferSource();r.buffer=e.preset1.zones[0].buffer,r.connect(a.destination),r.start(o+s),s+=t,r=a.createBufferSource(),r.buffer=e.preset2.zones[0].buffer,r.connect(a.destination),r.start(o+s),s+=t,r=a.createBufferSource(),r.buffer=e.preset2.zones[0].buffer,r.connect(a.destination),r.start(o+s),s+=t}else{const t=a.createBufferSource();t.buffer=e.preset1.zones[0].buffer,t.connect(a.destination),t.start(o+s),s+=n}a.startRendering().then((t=>{const n=r.Sound.ctx.createBufferSource();n.buffer=t,n.connect(r.Sound.ctx.destination),n.start(),n.stop(r.Sound.ctx.currentTime+i),n.onended=()=>{n.disconnect(r.Sound.ctx.destination)},e.cb({ab:n,startTimeMs:Date.now()})})).catch((function(e){console.log("Rendering failed: "+e)}))}}},1286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileSettings=t.getPitchShiftSetting=void 0;const r=n(1895),i=n(2074);t.getPitchShiftSetting=function(e){return Array.isArray(e?.pitchShift)?(0,r.parseInteger)(e.pitchShift[0],0):0},t.getFileSettings=function(e){const t={import:[],exclude:[],dataByTracks:{},pitchShift:[],boardShift:[],bpm:[]},n=e.find((e=>"settings"===e.id.toLowerCase()));if(!n)return t;let r=n.rows.map((e=>e.trim())).filter((e=>!e.startsWith("#"))).map((e=>e.startsWith("_")?e.replace(/^_ /,"").trim():e)).join(";").split(";");return r=r.map((e=>e.trim())).filter((e=>!!e)),r.forEach((e=>{const n=e.split(":"),r=(n[0]||"").trim(),i=(n[1]||"").trim();r&&(t[r]||(t[r]=[]),t[r].push(i))})),Object.keys(t).forEach((e=>{(e.startsWith(i.toneChar)||e.startsWith(i.drumChar))&&(t.dataByTracks[e]=t[e].join(" "))})),t}},4092:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstLastRow=void 0,t.getFirstLastRow=function(e){const t=e.skip||void 0;function n(e){return!e.startsWith(t)&&(e.startsWith("$L")||e.startsWith("$R"))}const r=t=>{for(;t<e.block.rows.length;t++)if(n(e.block.rows[t].trim()))return t;return-1};let i=0,a=0;return"up"===e.direction?(i=(t=>{for(;t>=0;t--)if(n(e.block.rows[t].trim()))return t;return-1})(e.startIndex),i=i<0?r(e.startIndex):i):i=r(e.startIndex),i<0?{first:0,last:0}:(a=(t=>{let r=t+1;if(t>=e.block.rows.length)return e.block.rows.length-1;for(;r<e.block.rows.length;r++)if(n(e.block.rows[r].trim()))return r-1;return r})(i),a<0?{first:0,last:0}:{first:i,last:a})}},7984:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNoteLineInfo=t.isNoteWithDurationOrPause=void 0;const r=n(1895),i=n(2074),a=n(7878),o=n(7770);function s(e){const t=(0,i.getString)(e),n=(t.split(i.timeCharRE)[0]||"").toLowerCase();let o=!1;return o=!n.startsWith(i.toneChar)&&!n.startsWith(i.decorChar)&&(!!a.noteLatByNoteHash[n]||!(!i.timeCharRE.test(t)&&!t.includes("+"))||(0,r.parseInteger)(t,-1)>-1),o}function l(e){let t=e.$item.split("_").filter((e=>!!e));const n=function(e){const t=(e=(e||"").trim()).split(":")[0]||"",n=e.split(":").slice(1).join(":"),a=t.split(i.timeCharRE);let s=a[0].split(".")[0],l=(0,r.parseInteger)(a[0].split(".")[1],void 0),c=(0,r.parseInteger)(a[1],0),d=(0,r.parseInteger)(a[2],null);d=null===d?c:d;const u=function(e,t){let n,r,a;return(t=(t||"").trim()).split(":").filter((e=>e)).forEach((t=>{(0,i.isPresent)(n)||(n=(0,i.getVolumeFromString)(t,void 0)),t.startsWith(i.decorChar)?a=t:t.startsWith(i.vibratoChar)&&(r=(0,o.buildVibratoSlides)(e,t))})),{volume:n,vibrato:r,decor:a}}(d,n);return{note:s,durationQ:d,durationForNextQ:c,cent:l,volume:u.volume,decor:u.decor,vibrato:u.vibrato}}(t.shift()||"");let a;n.volume=(0,i.isPresent)(n.volume)?n.volume:e.currVolume,t.length&&(a=t.join("_")),n.vibrato&&(a=n.vibrato,t=n.vibrato.split("_"));const s=(0,o.getSlides)(t,n);e.result.notes.push({note:n.note,durationQ:n.durationQ,durationForNextQ:n.durationForNextQ,volume:n.volume,pitchShift:e.pitchShift,instr:`${e.currInstr}${n.decor?n.decor:e.currDecor}`,cent:n.cent,slides:s,slidesText:a})}function c(e){const t=(0,i.getVolumeFromString)(e.$item,e.currVolume);e.$item.startsWith(i.toneChar)||e.$item.startsWith(i.drumChar)||e.$item.startsWith(i.decorChar)?function(t){const n=t.split("*"),r=n[0]||"";let i=n[1]||"";i=i?`*${i}`:"",e.initInstr||(e.initInstr=r,e.initDecor=i),e.currInstr=r||e.initInstr,e.currDecor=i||e.initDecor}(e.$item):(0,i.isPresent)(t)&&(e.currVolume=t)}t.isNoteWithDurationOrPause=s,t.getNoteLineInfo=function(e){const t=function(e){return{noteLine:"",noteLineArr:[],initInstr:"",initDecor:"",currInstr:"",currDecor:"",initVolume:0,currVolume:0,$item:"",result:{notes:[],durationQ:0,repeat:1,bpm:0},pitchShift:0,...e}}({noteLine:e});if(function(e){e.noteLine=(0,i.clearNoteLine)(e.noteLine),e.initVolume=(0,i.getVolumeFromString)(e.noteLine),e.currVolume=e.initVolume,e.pitchShift=(0,i.getPitchShiftFromString)(e.noteLine),e.noteLineArr=e.noteLine.split(" ").map((e=>e.trim())).filter((e=>!!e)).map((e=>/^\d+$/.test(e)?`${i.PAUSE}${i.timeChar}${e}`:e))}(t),!t.noteLineArr.length)return t.result;for(const e of t.noteLineArr)t.$item=e,s(t.$item)?l(t):c(t);return t.result.durationQ=(0,i.getDurationFromString)(t.noteLine,t.result.notes.reduce(((e,t)=>e+t.durationForNextQ),0)),t.result.repeat=(0,i.getRepeatFromString)(t.noteLine,1),t.result.bpm=(0,i.getBpmFromString)(t.noteLine,0),t.result}},2011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOutBlocksInfo=t.getNoteLineMetaAndInstr=void 0;const r=n(2074),i=n(1895),a=n(7984);function o(e,t){const n=e.split(" ").filter((e=>!!e));let i=n.length;for(;i>0&&!(0,a.isNoteWithDurationOrPause)(n[i-1]);i--);const o=n.slice(i);e=n.slice(0,i).join(" ");for(const e of o)if(e.startsWith(r.toneChar)||e.startsWith(r.drumChar)){t=e;break}return{noteLine:e,meta:o.join(" "),instr:t}}t.getNoteLineMetaAndInstr=o,t.getOutBlocksInfo=function(e,t="out"){let n;n="string"==typeof t?(0,r.findBlockById)(e,t):t;const s={rows:[],durationQ:0};if(!n)return console.warn("Block OUT not found"),s;const l=n.rows.map((e=>(0,r.clearEndComment)(e))).map((e=>e.trim())).filter(((e,t)=>t&&e&&!e.startsWith("#")));if(!Array.isArray(l)||!l.length)return console.warn("Bad rows",n),s;let c=0;return l.forEach(((t,n)=>{let l="",d="",u="";const p=(t||"").split(" ").filter((e=>!!e)).reduce(((e,t)=>t.startsWith("[")?(l=(l+" "+t.replace(/[\[\]]/g,"")).trim(),e):t.startsWith(r.nioChar)?(d=t.replace(r.nioChar,""),e):t.startsWith(r.partIdChar)?(u=t.replace(r.partIdChar,""),e):(e.push(t),e)),[]);let h,f=1,m=0,g=1,v=[];for(let t=0;t<p.length;t++){const n=p[t],s=(0,r.getBlockType)(n),l=(n||"").split(/[:]/).filter((e=>!!e)),c=l.join(" ");let d,u,b=[],y=l[0].trim(),_="",w=0;if(g=(0,i.parseInteger)(l[1],0)||(0,r.getRepeatFromString)(c,f),h=(0,r.findBlockById)(e,y),!h)throw new Error(`Block not <${y}> found`);0===t&&(_="head ",f=g),u=(0,r.getVolumeFromString)(c,r.DEFAULT_VOLUME),d="drums"===h.type||"drums"===s?(0,r.getNoteLnsByDrumInstruments)(h.rows):(0,r.getNoteLnsByToneInstruments)(h.rows),d.forEach((e=>{const n=o(e.noteLine,e.trackName),i=(0,r.getVolumeFromString)(n.meta),s=`${_}r${g} v${i} ${n.instr} ${n.noteLine}`,l=(0,a.getNoteLineInfo)(s);w=Math.max(w,l.durationQ),0===t&&(m=w),b.push({trackName:e.trackName,noteLine:s,noteLineInfo:l,repeat:g,parentVolume:u,colLoopDurationQ:0})})),b.forEach((e=>{e.colLoopDurationQ=w,v.push(e)}))}let b=m*f;c+=1*b,s.rows.push({trackLns:v,headLoopRepeat:f,headLoopDurationQ:m,rowDurationByHeadQ:b,rowRepeat:1,text:t})})),s.durationQ=c,console.log("getOutBlocksInfo.result",JSON.parse(JSON.stringify(s))),s}},7770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSlides=t.buildVibratoSlides=t.getPitchAndCent=void 0;const r=n(1895),i=n(2074),a={ха:1,ла:2,на:3,ма:4,ща:5,ша:6,за:7,ва:8,фа:9,жа:10,са:11,я:12,йха:13,йла:14,йна:15,йма:16,йща:17,йша:18,йза:19,йва:20,йфа:21,йжа:22,йса:23,йа:24,ху:-1,лу:-2,ну:-3,му:-4,щу:-5,шу:-6,зу:-7,ву:-8,фу:-9,жу:-10,су:-11,ю:-12,йху:-13,йлу:-14,йну:-15,йму:-16,йщу:-17,йшу:-18,йзу:-19,йву:-20,йфу:-21,йжу:-22,йсу:-23,йу:-24};function o(e){const t=(e=(e||"").trim()).split(".");let n=t[0]||"",o=t[1]||"";const s=n.includes(i.negativeChar)||o.includes(i.negativeChar);n=n.replace(i.negativeChar,""),o=o.replace(i.negativeChar,"");let l=a[n];l=(0,i.isPresent)(l)?l:(0,r.parseInteger)(n,0);let c=(0,r.parseInteger)(o,0),d="";return s&&(l=l>0?-l:l,c=c>0?-c:c,d=i.negativeChar),{pitch:l,cent:c,pitchWithCent:100*l+c,asStringA:d+Math.abs(l)+"."+Math.abs(c),asStringB:(d?"":i.negativeChar)+Math.abs(l)+"."+Math.abs(c)}}t.getPitchAndCent=o,t.buildVibratoSlides=function(e,t){if(!(t=(t||"").trim()))return;const n=o((t=t.replace(i.vibratoChar,"")).split(i.timeCharRE)[0]),a=(0,r.parseInteger)(t.split(i.timeCharRE)[1],0),s=(0,r.parseInteger)(t.split(i.timeCharRE)[2],2);if(!a||!n.pitchWithCent)return;let l=(0,r.parseInteger)(""+e/(a+1)),c=s?(0,r.parseInteger)(""+l/s):0,d=""+l,u=!1;for(let e=0;e<a;e++)u=!u,d=u?d+"_"+n.asStringA+"="+l+"="+c:d+"_"+n.asStringB+"="+l+"="+c;return d},t.getSlides=function(e,t){if(!e.length)return;const n=[],a=e.shift()||"";let s=(0,r.parseInteger)(a.split(":")[0],0),l=(0,i.getVolumeFromString)(a.split(":")[1],null),c=0,d=!1,u=[{deltaCent:0,speed:0,duration:s,volume:l}],p=0;return e.forEach((e=>{const t=e.split(":"),n=t[0].split("="),a=(0,i.getVolumeFromString)(t[1],null),s=o(n[0]);let l=(0,r.parseInteger)(n[1],0),d=(0,r.parseInteger)(n[2],0);c+=s.pitchWithCent,u.push({deltaCent:c,duration:l,speed:d,volume:a})})),u.filter(((e,r)=>{const a=u[r+1];let o=a?a.speed:0,s=p,l=e.duration-o;l=l<0?0:l,p=p+l+o,d=(0,i.isPresent)(e.volume)||d,n.push({delta:e.deltaCent,volume:e.volume,endWhen:s+l,isPlato:!0}),a?n.push({delta:a.deltaCent,volume:a.volume,endWhen:s+l+o}):n.push({delta:e.deltaCent,volume:null,endWhen:Math.max(p,t.durationQ),isPlato:!0})})),n[0].hasVolumeSlide=d,t.durationQ=Math.max(p,t.durationQ),n}},8299:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2074),t),i(n(2011),t),i(n(7984),t),i(n(1895),t)},1895:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInteger=void 0,t.parseInteger=function(e,t=0){if("number"==typeof e)return isNaN(e)?t:e;e=(e||"").toString().trim();const n=parseInt(e,10);return isNaN(n)?t:n}},2074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBeatsByBpmWithOffset=t.getBlockType=t.isDrum=t.getDurationFromString=t.getKeysFromText=t.clearNoteLine=t.clearEndComment=t.getNoteLnsByDrumInstruments=t.getNoteLnsByToneInstruments=t.getDrumQuartersInfo=t.getBlockContent=t.findBlockById=t.getOutBlock=t.getTextBlocks=t.mergeVolume=t.getPitchShiftFromString=t.getVolumeFromString=t.getSafeVolume=t.getEndPointVolume=t.getBpmFromString=t.getRepeatFromString=t.getStringWithBlanks=t.getString=t.Deferred=t.isNil=t.isPresent=t.hasDrumChar=t.hasToneChar=t.partIdChar=t.nioChar=t.refChar=t.commentChar=t.PAUSE=t.drumPrefix=t.drumsType=t.drumsTrack=t.drumChar=t.negativeChar=t.decorChar=t.vibratoChar=t.timeCharRE=t.timeChar=t.toneChar=t.msInMin=t.THOUSAND=t.NUM_120=t.VOLUME_100=t.NUM_100=t.DEFAULT_VOLUME=t.DEFAULT_BPM=void 0,t.getPartRowNio=t.getRowNio=t.getPartNio=t.guid=t.createOutBlock=t.startWithChar=t.buildOutBlock=t.getNRowInPartId=t.getPartInfo=t.getNoteByOffset=t.getRandomElement=t.getBeatsArrayFromString=t.getBeatsByBpm=void 0;const r=n(1895);function i(e){return e=s(e)?"":e.toString(),new RegExp(`\\${t.toneChar}`).test(e)}function a(e){return e=s(e)?"":e.toString(),new RegExp(`\\${t.drumChar}`).test(e)}function o(e){return null!=e}function s(e){return null==e}function l(e){return s(e)?"":e.toString()}function c(e){return" "+(e||"").trim()+" "}function d(e,t=1){e=c(e);const n=/ r\d+ /;return n.test(e)?(e=e.match(n)[0].trim().replace("r",""),(0,r.parseInteger)(e,t)):t}function u(e,t=120){e=c(e);const n=/ b\d+ /;return n.test(e)?(e=e.match(n)[0].trim().replace("b",""),(0,r.parseInteger)(e,t)):t}function p(e,n){function i(e){return s(e=(0,r.parseInteger)(e,null))?null:(e>100&&(e=100),e<0&&(e=0),e)}return n=s(n=i(n))?t.DEFAULT_VOLUME:n,s(e=i(e))?n:e}function h(e,n=t.DEFAULT_VOLUME){e=c(e);const i=/ v\d+ /;return i.test(e)?(e=e.match(i)[0].trim().replace("v",""),(0,r.parseInteger)(e,n)):n}function f(e){let n,r,i=[],a=[],o=(e=Array.isArray(e)?e:(e||"").replace(/\r\n/g,"\n").trim().split(/\n/)).length-1,s="";for(let l=e.length-1;l>-1;l--){let c=e[l];if(!/^(\s)*</.test(c)){a.push(c);continue}s=c.trim(),s=s.replace("<",""),s=s.replace(">",""),s=s.trim(),a.push(c);const p=s.split(" ").filter((e=>!!e));n=p[0],r="text",p.find((e=>e===t.drumChar||"drums"===e||"drum"===e))?r="drums":p.find((e=>e===t.toneChar||"tones"===e||"tone"===e))?r="tones":p.find((e=>"set"===e))&&(r="set"),i.push({id:n,type:r,startRow:l,endRow:o,nio:0,head:s,rows:a.reverse(),bpm:u(s),volume:h(s),repeat:d(s)}),a=[],o=l-1,s=""}return i=i.reverse(),i.forEach(((e,t)=>{e.nio=t})),i}function m(e,t,n=null){return Array.isArray(e)&&e.length&&t&&e.find((e=>e.id===t))||n}function g(e){const n=(e.find((e=>e.startsWith("-")))||"").split(":");let r=(n[1]||"").toString().toString().replace(/^\s+/,""),i=(n[2]||"").trim()||"@drums";return r=r.replace(/\d\d/g,"| "),r=r.replace(/\d/g,"|"),{quarters:r.replace(/\|/g,"| ").split("|").filter((e=>!!e)).map((e=>Array(e.length).fill(Math.round(t.NUM_120/e.length)))),trackName:i}}function v(e){return l(e).replace(/#.*$/,"")}function b(e){return(e=(e=l(e).replace(/\r\n/g,"\n").trim()).split("\n").map((e=>v(e).trim())).filter((e=>e)).join(" "))?e=(e=(e=(e=(e=(e=e.replace(/\[(.*?)\]/g," ")).replace(/\((.*?)\)/g," ")).replace(/[{}]/g," ")).replace(/\|/g," ")).replace(/ +/g," ")).trim():e}function y(e,n,r=0){const i=Math.round(t.msInMin/e),a=new Array(n).fill(i);return a.unshift(r),a}function _(e){const n=(e=(e||"").trim()).split(" ").filter((e=>e));let i=n[0],a="",o=0,s=0,l="",c="";return n.forEach((e=>{e.startsWith(t.partIdChar)?a||(a=e.replace(t.partIdChar,"")):e.startsWith(t.nioChar)?o||(o=(0,r.parseInteger)(e.replace(t.nioChar,"").split("-")[0],0),s=(0,r.parseInteger)(e.replace(t.nioChar,"").split("-")[1],0)):e.startsWith("[")?l||(l=e.replace(/[\[\]]/g,"")):c=c+e+" "})),c=c.trim(),{name:i,partId:a,partNio:o,rowNio:s,ref:c,mask:l,rowInPartId:`${o}-${s}`}}function w(e,n){return o(n)?`${t.nioChar}${e}-${n}`:`${t.nioChar}${e}`}function C(e){let n=e||"";return n=n.replace(t.nioChar,"").trim(),(0,r.parseInteger)(n.split("-")[0],0)}function x(e){let n=e||"";return n=n.replace(t.nioChar,"").trim(),(0,r.parseInteger)(n.split("-")[1],0)}t.DEFAULT_BPM=120,t.DEFAULT_VOLUME=50,t.NUM_100=100,t.VOLUME_100=100,t.NUM_120=120,t.THOUSAND=1e3,t.msInMin=6e4,t.toneChar="$",t.timeChar="=",t.timeCharRE=new RegExp(/[=]/),t.vibratoChar="~",t.decorChar="*",t.negativeChar="-",t.drumChar="@",t.drumsTrack="@drums",t.drumsType="drums",t.drumPrefix="drum_",t.PAUSE="pause",t.commentChar="#",t.refChar=">",t.nioChar="№",t.partIdChar="%",t.hasToneChar=i,t.hasDrumChar=a,t.isPresent=o,t.isNil=s,t.Deferred=class{promise;resolve;reject;constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},t.getString=l,t.getStringWithBlanks=c,t.getRepeatFromString=d,t.getBpmFromString=u,t.getEndPointVolume=function(e,t){const n=p(e,t);let r;return 0===n||100===n?r=n:(r=n/100,r=100*(1-Math.sqrt(1-r*r))),r},t.getSafeVolume=p,t.getVolumeFromString=h,t.getPitchShiftFromString=function(e,t=0){e=c(e);const n=/ s\d+ /;return n.test(e)?(e=e.match(n)[0].trim().replace("s",""),(0,r.parseInteger)(e,t)):t},t.mergeVolume=function(e,n){return e*(n/t.DEFAULT_VOLUME)},t.getTextBlocks=f,t.getOutBlock=function(e,t){if(!e)return m(t,"out");if("object"==typeof e)return e;if("string"!=typeof e)return m(t,"out");let n=e.split("\n");return 1===n.length?m(t,n[0]):(t=f(e))[0]||null},t.findBlockById=m,t.getBlockContent=function(e,t,n=null){let r=m(e,t,{rows:[]}).rows.slice(1);return n&&(r=r.map((e=>e.trim())).filter((e=>!!e))),r.join("\n")},t.getDrumQuartersInfo=g,t.getNoteLnsByToneInstruments=function(e){return e.filter((e=>e.startsWith(t.toneChar))).reduce(((e,t,n)=>{const r=l(t).split(":"),i=(r.shift()||"").trim(),a=b(r.join(":")||"");return e.push({trackName:i,noteLine:a}),e}),[])},t.getNoteLnsByDrumInstruments=function(e){let n=g(e),i=n.quarters.reduce(((e,t)=>e+t.length),0),a=e.filter((e=>e.startsWith(t.drumChar))).reduce(((e,t)=>{const n=t.split(":"),a=n[0].trim();let o=n[1],s=(0,r.parseInteger)(n[2],0);return o=o.substr(o.length-i),e.push({instrName:a,noteLine:o,lastNoteDurQ:s}),e}),[]),o=[];return a.forEach((e=>{const r=e.noteLine,i=e.instrName;let a=-1,s="",l=0,c=0,d=0,u=0,p=!1;for(let e of n.quarters)for(let n of e){a++,l+=n;const e=r[a].trim();if(e){if("."===e){d+=n,p=!0;continue}u?(s+=` ${i}${t.timeChar}${d}${t.timeChar}${c}`,c=n,d=n,p=!1):(c&&(s+=` ${c}`),c=n,d=n,u++)}else d+=n,p||(c+=n)}u&&(c=e.lastNoteDurQ||c,s+=` ${i}${t.timeChar}${d}${t.timeChar}${c}`),o.push({trackName:n.trackName,noteLine:`${s.trim()} d${l} ${i}`})})),o},t.clearEndComment=v,t.clearNoteLine=b,t.getKeysFromText=function(e,t){return e.trim().split("\n").filter((e=>e&&!e.startsWith("#"))).map((e=>e.trim())).join("").split(",").map((e=>e.trim())).filter((e=>e&&!e.startsWith("#"))).reduce(((e,n)=>{const r=n.split("~").map((e=>e.trim())),i=r[0],a=r[1];let o=r[2]?parseFloat(r[2]):.5,s=r[3]?parseInt(r[3],10):t;return e[i]={key:i,volume:o,instrCode:s,note:a},e}),{})},t.getDurationFromString=function(e,t=0){e=c(e);const n=/ d\d+ /;if(!n.test(e))return t;e=e.match(n)[0].trim().replace("d","");let r=parseInt(e,10);return isNaN(r)?t:r},t.isDrum=function(e){return(e=(e||"").toString().trim()).startsWith(t.drumChar)||e.startsWith(t.drumPrefix)},t.getBlockType=function(e){return i(e)?"tones":a(e)?"drums":""},t.getBeatsByBpmWithOffset=y,t.getBeatsByBpm=function(e,n){const r=Math.round(t.msInMin/e);return new Array(n).fill(r)},t.getBeatsArrayFromString=function(e){const t=(e=l(e).trim()).split("-"),n=(0,r.parseInteger)(t[0]),i=(0,r.parseInteger)(t[1]);return y((0,r.parseInteger)(t[2]),i,n)},t.getRandomElement=function(e){const t=e?e.length:0;return e[Math.floor(Math.random()*t)]},t.getNoteByOffset=function(e,t){e=(e||"").toLowerCase();let n="\n      du tu ru nu mu fu vu su zu lu ku bu\n      dy ty ry ny my fy vy sy zy ly ky by\n      do to ro no mo fo vo so zo lo ko bo\n      da ta ra na ma fa va sa za la ka ba\n      de te re ne me fe ve se ze le ke be\n      di ti ri ni mi fi vi si zi li ki bi\n    ".replace(/\n/g," ").split(" ").filter((e=>!!e));const r=parseInt(t,10);let i=n.findIndex((t=>t===e));return n[i+r]||""},t.getPartInfo=_,t.getNRowInPartId=w,t.buildOutBlock=function(e,t){const n=[];return t.forEach((t=>{const r=_(t),i=e.find((e=>e.id===r.partId))||e.find((e=>e.id===r.ref));if(!i)return;let a=0;if("tones"===i.type||"drums"===i.type){a++;const e=w(r.partNio,a);n.push(`${r.ref} ${e} %${r.partId}`)}else if("set"===i.type){let e=i.rows.slice(1).map((e=>v(e))).map((e=>e.trim())).filter((e=>!(!e||e.startsWith("#")))).map((e=>(a++,`${e} ${w(r.partNio,a)} %${r.partId}`)));Array.prototype.push.apply(n,e)}})),n},t.startWithChar=function(e,t){return"$"===e&&(e=`\\${e}`),new RegExp(`^\\s*${e}`).test(t)},t.createOutBlock=function({bpm:e,volume:n,currBlock:r,rows:i,id:a,type:o}){r=r||{},a=a||"out",o=o||"set";const s=`out b${e=e||r.bpm||t.DEFAULT_BPM} v${n=p(n,0)||p(r.volume)}`;return{id:a,head:s,bpm:e,volume:n,repeat:1,startRow:0,endRow:i.length,type:o,nio:0,rows:[`<${s} >`,...i]}},t.guid=function(e=10){let t="";for(;t.length<e;)t=Math.random().toString(36).slice(2).replace(/\d/g,"")+Math.random().toString(36).slice(2).replace(/\d/g,"")+Math.random().toString(36).slice(2).replace(/\d/g,"");return t.slice(0,e)},t.getPartNio=C,t.getRowNio=x,t.getPartRowNio=function(e){return{partNio:C(e),rowNio:x(e)}}},2777:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInstrumentTitles=void 0,t.getInstrumentTitles=function(){var e=[];return e[0]="Acoustic Grand Piano: Piano",e[1]="Bright Acoustic Piano: Piano",e[2]="Electric Grand Piano: Piano",e[3]="Honky-tonk Piano: Piano",e[4]="Electric Piano 1: Piano",e[5]="Electric Piano 2: Piano",e[6]="Harpsichord: Piano",e[7]="Clavinet: Piano",e[8]="Celesta: Chromatic Percussion",e[9]="Glockenspiel: Chromatic Percussion",e[10]="Music Box: Chromatic Percussion",e[11]="Vibraphone: Chromatic Percussion",e[12]="Marimba: Chromatic Percussion",e[13]="Xylophone: Chromatic Percussion",e[14]="Tubular Bells: Chromatic Percussion",e[15]="Dulcimer: Chromatic Percussion",e[16]="Drawbar Organ: Organ",e[17]="Percussive Organ: Organ",e[18]="Rock Organ: Organ",e[19]="Church Organ: Organ",e[20]="Reed Organ: Organ",e[21]="Accordion: Organ",e[22]="Harmonica: Organ",e[23]="Tango Accordion: Organ",e[24]="Acoustic Guitar (nylon): Guitar",e[25]="Acoustic Guitar (steel): Guitar",e[26]="Electric Guitar (jazz): Guitar",e[27]="Electric Guitar (clean): Guitar",e[28]="Electric Guitar (muted): Guitar",e[29]="Overdriven Guitar: Guitar",e[30]="Distortion Guitar: Guitar",e[31]="Guitar Harmonics: Guitar",e[32]="Acoustic Bass: Bass",e[33]="Electric Bass (finger): Bass",e[34]="Electric Bass (pick): Bass",e[35]="Fretless Bass: Bass",e[36]="Slap Bass 1: Bass",e[37]="Slap Bass 2: Bass",e[38]="Synth Bass 1: Bass",e[39]="Synth Bass 2: Bass",e[40]="Violin: Strings",e[41]="Viola: Strings",e[42]="Cello: Strings",e[43]="Contrabass: Strings",e[44]="Tremolo Strings: Strings",e[45]="Pizzicato Strings: Strings",e[46]="Orchestral Harp: Strings",e[47]="Timpani: Strings",e[48]="String Ensemble 1: Ensemble",e[49]="String Ensemble 2: Ensemble",e[50]="Synth Strings 1: Ensemble",e[51]="Synth Strings 2: Ensemble",e[52]="Choir Aahs: Ensemble",e[53]="Voice Oohs: Ensemble",e[54]="Synth Choir: Ensemble",e[55]="Orchestra Hit: Ensemble",e[56]="Trumpet: Brass",e[57]="Trombone: Brass",e[58]="Tuba: Brass",e[59]="Muted Trumpet: Brass",e[60]="French Horn: Brass",e[61]="Brass Section: Brass",e[62]="Synth Brass 1: Brass",e[63]="Synth Brass 2: Brass",e[64]="Soprano Sax: Reed",e[65]="Alto Sax: Reed",e[66]="Tenor Sax: Reed",e[67]="Baritone Sax: Reed",e[68]="Oboe: Reed",e[69]="English Horn: Reed",e[70]="Bassoon: Reed",e[71]="Clarinet: Reed",e[72]="Piccolo: Pipe",e[73]="Flute: Pipe",e[74]="Recorder: Pipe",e[75]="Pan Flute: Pipe",e[76]="Blown bottle: Pipe",e[77]="Shakuhachi: Pipe",e[78]="Whistle: Pipe",e[79]="Ocarina: Pipe",e[80]="Lead 1 (square): Synth Lead",e[81]="Lead 2 (sawtooth): Synth Lead",e[82]="Lead 3 (calliope): Synth Lead",e[83]="Lead 4 (chiff): Synth Lead",e[84]="Lead 5 (charang): Synth Lead",e[85]="Lead 6 (voice): Synth Lead",e[86]="Lead 7 (fifths): Synth Lead",e[87]="Lead 8 (bass + lead): Synth Lead",e[88]="Pad 1 (new age): Synth Pad",e[89]="Pad 2 (warm): Synth Pad",e[90]="Pad 3 (polysynth): Synth Pad",e[91]="Pad 4 (choir): Synth Pad",e[92]="Pad 5 (bowed): Synth Pad",e[93]="Pad 6 (metallic): Synth Pad",e[94]="Pad 7 (halo): Synth Pad",e[95]="Pad 8 (sweep): Synth Pad",e[96]="FX 1 (rain): Synth Effects",e[97]="FX 2 (soundtrack): Synth Effects",e[98]="FX 3 (crystal): Synth Effects",e[99]="FX 4 (atmosphere): Synth Effects",e[100]="FX 5 (brightness): Synth Effects",e[101]="FX 6 (goblins): Synth Effects",e[102]="FX 7 (echoes): Synth Effects",e[103]="FX 8 (sci-fi): Synth Effects",e[104]="Sitar: Ethnic",e[105]="Banjo: Ethnic",e[106]="Shamisen: Ethnic",e[107]="Koto: Ethnic",e[108]="Kalimba: Ethnic",e[109]="Bagpipe: Ethnic",e[110]="Fiddle: Ethnic",e[111]="Shanai: Ethnic",e[112]="Tinkle Bell: Percussive",e[113]="Agogo: Percussive",e[114]="Steel Drums: Percussive",e[115]="Woodblock: Percussive",e[116]="Taiko Drum: Percussive",e[117]="Melodic Tom: Percussive",e[118]="Synth Drum: Percussive",e[119]="Reverse Cymbal: Percussive",e[120]="Guitar Fret Noise: Sound effects",e[121]="Breath Noise: Sound effects",e[122]="Seashore: Sound effects",e[123]="Bird Tweet: Sound effects",e[124]="Telephone Ring: Sound effects",e[125]="Helicopter: Sound effects",e[126]="Applause: Sound effects",e[127]="Gunshot: Sound effects",e}},1667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAudioFontLoader=void 0;const r=n(9082),i=n(2777),a=n(4999),o={162:"samples/organ/0160_FluidR3_GM_sf2_file.json",176:"samples/organ/0170_SoundBlasterOld_sf2.json",182:"samples/organ/0180_FluidR3_GM_sf2_file.json"},s=/localhost/.test(window.location.href);t.WebAudioFontLoader=class{cached=[];player;instrumentKeyArray=[];instrumentNamesArray=[];choosenInfos=[];drumNamesArray=[];drumKeyArray=[];constructor(e){this.player=e}async startLoad(e,t,n,r){const i=t.split("/").pop();if(!window[n]){for(var a=0;a<this.cached.length;a++)if(this.cached[a].variableName==n)return;if(this.cached.push({filePath:t,variableName:n}),o[r])try{const t=s?`${o[r]}`:`assets/${o[r]}`,i=await fetch(t);if(!i.ok)throw new Error(`${i.status} ${i.statusText}`);{const t=await i.json();window[n]=t,this.decodeAfterLoading(e,n)}}catch(e){console.log("load sampleJson",e)}else(async function(e){let t,n=new Promise((e=>{t=e}));if(!s)return t(null),n;const r=`D:/audio/webaudiofontdata/sound/${e}`;try{const e=await fetch(`api/readFile?path=${r}`);if(e.ok){const n=await e.text();t(n)}else t(null)}catch(e){t(null)}return n})(i).then((e=>{if(e){var t=document.createElement("script");t.type="text/javascript";var n=e;try{t.appendChild(document.createTextNode(n)),document.body.appendChild(t)}catch(e){t.text=n,document.body.appendChild(t)}return!0}return!1})).then((r=>{if(!r){var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(i)}this.decodeAfterLoading(e,n)}))}}setInstrumentOnWindow(e){}decodeAfterLoading(e,t){this.waitOrFinish(t,(function(){(0,r.preparePreset)({audioContext:e,preset:window[t],var:t})}))}waitOrFinish(e,t){if(window[e])t();else{var n=this;setTimeout((function(){n.waitOrFinish(e,t)}),111)}}loaded(e){if(!window[e])return!1;for(var t=window[e],n=0;n<t.zones.length;n++)if(!t.zones[n].buffer)return!1;return!0}progress(){if(this.cached.length>0){for(var e=0;e<this.cached.length;e++)if(!this.loaded(this.cached[e].variableName))return e/this.cached.length;return 1}return 1}waitLoad(e){var t=this;this.progress()>=1?e():setTimeout((function(){t.waitLoad(e)}),333)}instrumentTitles=function(){return 0==this.instrumentNamesArray.length&&(this.instrumentNamesArray=(0,i.getInstrumentTitles)()),this.instrumentNamesArray};instrumentKeys(){return 0==this.instrumentKeyArray.length&&(this.instrumentKeyArray=["0000_JCLive_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_FluidR3_GM_sf2_file","0000_GeneralUserGS_sf2_file","0000_SBLive_sf2","0000_SoundBlasterOld_sf2","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0002_GeneralUserGS_sf2_file","0003_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0010_SBLive_sf2","0010_SoundBlasterOld_sf2","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0020_SBLive_sf2","0020_SoundBlasterOld_sf2","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0030_SBLive_sf2","0030_SoundBlasterOld_sf2","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file","0031_SoundBlasterOld_sf2","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_FluidR3_GM_sf2_file","0040_GeneralUserGS_sf2_file","0040_JCLive_sf2_file","0040_SBLive_sf2","0040_SoundBlasterOld_sf2","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0041_SoundBlasterOld_sf2","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0045_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_FluidR3_GM_sf2_file","0050_GeneralUserGS_sf2_file","0050_JCLive_sf2_file","0050_SBLive_sf2","0050_SoundBlasterOld_sf2","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0052_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_FluidR3_GM_sf2_file","0060_GeneralUserGS_sf2_file","0060_JCLive_sf2_file","0060_SBLive_sf2","0060_SoundBlasterOld_sf2","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0061_SoundBlasterOld_sf2","0062_GeneralUserGS_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file","0070_FluidR3_GM_sf2_file","0070_GeneralUserGS_sf2_file","0070_JCLive_sf2_file","0070_SBLive_sf2","0070_SoundBlasterOld_sf2","0071_GeneralUserGS_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0080_JCLive_sf2_file","0080_SBLive_sf2","0080_SoundBlasterOld_sf2","0081_FluidR3_GM_sf2_file","0081_GeneralUserGS_sf2_file","0081_SoundBlasterOld_sf2","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file","0090_JCLive_sf2_file","0090_SBLive_sf2","0090_SoundBlasterOld_sf2","0091_SoundBlasterOld_sf2","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file","0100_JCLive_sf2_file","0100_SBLive_sf2","0100_SoundBlasterOld_sf2","0101_GeneralUserGS_sf2_file","0101_SoundBlasterOld_sf2","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0110_JCLive_sf2_file","0110_SBLive_sf2","0110_SoundBlasterOld_sf2","0111_FluidR3_GM_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0120_JCLive_sf2_file","0120_SBLive_sf2","0120_SoundBlasterOld_sf2","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0130_JCLive_sf2_file","0130_SBLive_sf2","0130_SoundBlasterOld_sf2","0131_FluidR3_GM_sf2_file","0140_Aspirin_sf2_file","0140_Chaos_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0140_JCLive_sf2_file","0140_SBLive_sf2","0140_SoundBlasterOld_sf2","0141_FluidR3_GM_sf2_file","0141_GeneralUserGS_sf2_file","0142_GeneralUserGS_sf2_file","0143_GeneralUserGS_sf2_file","0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0150_JCLive_sf2_file","0150_SBLive_sf2","0150_SoundBlasterOld_sf2","0151_FluidR3_GM_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0160_JCLive_sf2_file","0160_SBLive_sf2","0160_SoundBlasterOld_sf2","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file","0161_SoundBlasterOld_sf2","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0170_GeneralUserGS_sf2_file","0170_JCLive_sf2_file","0170_SBLive_sf2","0170_SoundBlasterOld_sf2","0171_FluidR3_GM_sf2_file","0171_GeneralUserGS_sf2_file","0172_FluidR3_GM_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file","0180_JCLive_sf2_file","0180_SBLive_sf2","0180_SoundBlasterOld_sf2","0181_Aspirin_sf2_file","0181_GeneralUserGS_sf2_file","0181_SoundBlasterOld_sf2","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file","0190_JCLive_sf2_file","0190_SBLive_sf2","0190_SoundBlasterOld_sf2","0191_Aspirin_sf2_file","0191_GeneralUserGS_sf2_file","0191_SoundBlasterOld_sf2","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0200_JCLive_sf2_file","0200_SBLive_sf2","0200_SoundBlasterOld_sf2","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file","0201_SoundBlasterOld_sf2","0210_Aspirin_sf2_file","0210_Chaos_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0210_JCLive_sf2_file","0210_SBLive_sf2","0210_SoundBlasterOld_sf2","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0211_SoundBlasterOld_sf2","0212_GeneralUserGS_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_FluidR3_GM_sf2_file","0220_GeneralUserGS_sf2_file","0220_JCLive_sf2_file","0220_SBLive_sf2","0220_SoundBlasterOld_sf2","0221_FluidR3_GM_sf2_file","0230_Aspirin_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0230_JCLive_sf2_file","0230_SBLive_sf2","0230_SoundBlasterOld_sf2","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0231_SoundBlasterOld_sf2","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_JCLive_sf2_file","0240_LK_Godin_Nylon_SF2_file","0240_SBLive_sf2","0240_SoundBlasterOld_sf2","0241_GeneralUserGS_sf2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file","0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_JCLive_sf2_file","0250_LK_AcousticSteel_SF2_file","0250_SBLive_sf2","0250_SoundBlasterOld_sf2","0251_Acoustic_Guitar_sf2_file","0251_GeneralUserGS_sf2_file","0252_Acoustic_Guitar_sf2_file","0252_GeneralUserGS_sf2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file","0255_GeneralUserGS_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_JCLive_sf2_file","0260_SBLive_sf2","0260_SoundBlasterOld_sf2","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_SoundBlasterOld_sf2","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file","0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_Gibson_Les_Paul_sf2_file","0270_JCLive_sf2_file","0270_SBAWE32_sf2_file","0270_SBLive_sf2","0270_SoundBlasterOld_sf2","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file","0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_FluidR3_GM_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0280_SBLive_sf2","0280_SoundBlasterOld_sf2","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file","0282_GeneralUserGS_sf2_file","0283_GeneralUserGS_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_FluidR3_GM_sf2_file","0290_GeneralUserGS_sf2_file","0290_JCLive_sf2_file","0290_LesPaul_sf2","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0290_SBLive_sf2","0290_SoundBlasterOld_sf2","0291_Aspirin_sf2_file","0291_LesPaul_sf2","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0291_SoundBlasterOld_sf2","0292_Aspirin_sf2_file","0292_LesPaul_sf2","0292_LesPaul_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_FluidR3_GM_sf2_file","0300_GeneralUserGS_sf2_file","0300_JCLive_sf2_file","0300_LesPaul_sf2","0300_LesPaul_sf2_file","0300_SBAWE32_sf2_file","0300_SBLive_sf2","0300_SoundBlasterOld_sf2","0301_Aspirin_sf2_file","0301_FluidR3_GM_sf2_file","0301_GeneralUserGS_sf2_file","0301_JCLive_sf2_file","0301_LesPaul_sf2","0301_LesPaul_sf2_file","0302_Aspirin_sf2_file","0302_GeneralUserGS_sf2_file","0302_JCLive_sf2_file","0303_Aspirin_sf2_file","0304_Aspirin_sf2_file","0310_Aspirin_sf2_file","0310_Chaos_sf2_file","0310_FluidR3_GM_sf2_file","0310_GeneralUserGS_sf2_file","0310_JCLive_sf2_file","0310_LesPaul_sf2","0310_LesPaul_sf2_file","0310_SBAWE32_sf2_file","0310_SBLive_sf2","0310_SoundBlasterOld_sf2","0311_FluidR3_GM_sf2_file","0311_GeneralUserGS_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file","0320_FluidR3_GM_sf2_file","0320_GeneralUserGS_sf2_file","0320_JCLive_sf2_file","0320_SBLive_sf2","0320_SoundBlasterOld_sf2","0321_GeneralUserGS_sf2_file","0322_GeneralUserGS_sf2_file","0330_Aspirin_sf2_file","0330_Chaos_sf2_file","0330_FluidR3_GM_sf2_file","0330_GeneralUserGS_sf2_file","0330_JCLive_sf2_file","0330_SBLive_sf2","0330_SoundBlasterOld_sf2","0331_GeneralUserGS_sf2_file","0332_GeneralUserGS_sf2_file","0340_Aspirin_sf2_file","0340_Chaos_sf2_file","0340_FluidR3_GM_sf2_file","0340_GeneralUserGS_sf2_file","0340_JCLive_sf2_file","0340_SBLive_sf2","0340_SoundBlasterOld_sf2","0341_Aspirin_sf2_file","0341_GeneralUserGS_sf2_file","0350_Aspirin_sf2_file","0350_Chaos_sf2_file","0350_FluidR3_GM_sf2_file","0350_GeneralUserGS_sf2_file","0350_JCLive_sf2_file","0350_SBLive_sf2","0350_SoundBlasterOld_sf2","0351_GeneralUserGS_sf2_file","0360_Aspirin_sf2_file","0360_Chaos_sf2_file","0360_FluidR3_GM_sf2_file","0360_GeneralUserGS_sf2_file","0360_JCLive_sf2_file","0360_SBLive_sf2","0360_SoundBlasterOld_sf2","0361_GeneralUserGS_sf2_file","0370_Aspirin_sf2_file","0370_Chaos_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_file","0370_JCLive_sf2_file","0370_SBLive_sf2","0370_SoundBlasterOld_sf2","0371_GeneralUserGS_sf2_file","0372_GeneralUserGS_sf2_file","0385_GeneralUserGS_sf2_file","0380_Aspirin_sf2_file","0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_GeneralUserGS_sf2_file","0380_JCLive_sf2_file","0380_SBLive_sf2","0380_SoundBlasterOld_sf2","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_FluidR3_GM_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0386_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file","0390_Aspirin_sf2_file","0390_Chaos_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0390_SBLive_sf2","0390_SoundBlasterOld_sf2","0391_FluidR3_GM_sf2_file","0391_GeneralUserGS_sf2_file","0391_SoundBlasterOld_sf2","0392_FluidR3_GM_sf2_file","0392_GeneralUserGS_sf2_file","0393_GeneralUserGS_sf2_file","0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0400_JCLive_sf2_file","0400_SBLive_sf2","0400_SoundBlasterOld_sf2","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file","0410_Aspirin_sf2_file","0410_Chaos_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0410_SBLive_sf2","0410_SoundBlasterOld_sf2","0411_FluidR3_GM_sf2_file","0420_Aspirin_sf2_file","0420_Chaos_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0420_SBLive_sf2","0420_SoundBlasterOld_sf2","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file","0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_FluidR3_GM_sf2_file","0430_GeneralUserGS_sf2_file","0430_JCLive_sf2_file","0430_SBLive_sf2","0430_SoundBlasterOld_sf2","0431_FluidR3_GM_sf2_file","0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_FluidR3_GM_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0440_SBLive_sf2","0440_SoundBlasterOld_sf2","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file","0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0450_SBLive_sf2","0450_SoundBlasterOld_sf2","0451_FluidR3_GM_sf2_file","0460_Aspirin_sf2_file","0460_Chaos_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0460_SBLive_sf2","0460_SoundBlasterOld_sf2","0461_FluidR3_GM_sf2_file","0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0470_JCLive_sf2_file","0470_SBLive_sf2","0470_SoundBlasterOld_sf2","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file","0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0480_SBLive_sf2","0480_SoundBlasterOld_sf2","04810_GeneralUserGS_sf2_file","04811_GeneralUserGS_sf2_file","04812_GeneralUserGS_sf2_file","04813_GeneralUserGS_sf2_file","04814_GeneralUserGS_sf2_file","04815_GeneralUserGS_sf2_file","04816_GeneralUserGS_sf2_file","04817_GeneralUserGS_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file","0484_GeneralUserGS_sf2_file","0485_GeneralUserGS_sf2_file","0486_GeneralUserGS_sf2_file","0487_GeneralUserGS_sf2_file","0488_GeneralUserGS_sf2_file","0489_GeneralUserGS_sf2_file","0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0490_SBLive_sf2","0490_SoundBlasterOld_sf2","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file","0500_Aspirin_sf2_file","0500_Chaos_sf2_file","0500_FluidR3_GM_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0500_SBLive_sf2","0500_SoundBlasterOld_sf2","0501_FluidR3_GM_sf2_file","0501_GeneralUserGS_sf2_file","0502_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0504_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file","0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_FluidR3_GM_sf2_file","0510_GeneralUserGS_sf2_file","0510_JCLive_sf2_file","0510_SBLive_sf2","0510_SoundBlasterOld_sf2","0511_GeneralUserGS_sf2_file","0511_SoundBlasterOld_sf2","0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_SBLive_sf2","0520_Soul_Ahhs_sf2_file","0520_SoundBlasterOld_sf2","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0521_SoundBlasterOld_sf2","0522_Soul_Ahhs_sf2_file","0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0530_JCLive_sf2_file","0530_SBLive_sf2","0530_Soul_Ahhs_sf2_file","0530_SoundBlasterOld_sf2","0531_FluidR3_GM_sf2_file","0531_GeneralUserGS_sf2_file","0531_JCLive_sf2_file","0531_SoundBlasterOld_sf2","0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0540_JCLive_sf2_file","0540_SBLive_sf2","0540_SoundBlasterOld_sf2","0541_FluidR3_GM_sf2_file","0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0550_JCLive_sf2_file","0550_SBLive_sf2","0550_SoundBlasterOld_sf2","0551_Aspirin_sf2_file","0551_FluidR3_GM_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file","0560_FluidR3_GM_sf2_file","0560_GeneralUserGS_sf2_file","0560_JCLive_sf2_file","0560_SBLive_sf2","0560_SoundBlasterOld_sf2","0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0570_JCLive_sf2_file","0570_SBLive_sf2","0570_SoundBlasterOld_sf2","0571_GeneralUserGS_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_FluidR3_GM_sf2_file","0580_GeneralUserGS_sf2_file","0580_JCLive_sf2_file","0580_SBLive_sf2","0580_SoundBlasterOld_sf2","0581_GeneralUserGS_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file","0590_JCLive_sf2_file","0590_SBLive_sf2","0590_SoundBlasterOld_sf2","0591_GeneralUserGS_sf2_file","0600_Aspirin_sf2_file","0600_Chaos_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0600_SBLive_sf2","0600_SoundBlasterOld_sf2","0601_FluidR3_GM_sf2_file","0601_GeneralUserGS_sf2_file","0602_GeneralUserGS_sf2_file","0603_GeneralUserGS_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file","0610_JCLive_sf2_file","0610_SBLive_sf2","0610_SoundBlasterOld_sf2","0611_GeneralUserGS_sf2_file","0612_GeneralUserGS_sf2_file","0613_GeneralUserGS_sf2_file","0614_GeneralUserGS_sf2_file","0615_GeneralUserGS_sf2_file","0620_Aspirin_sf2_file","0620_Chaos_sf2_file","0620_FluidR3_GM_sf2_file","0620_GeneralUserGS_sf2_file","0620_JCLive_sf2_file","0620_SBLive_sf2","0620_SoundBlasterOld_sf2","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file","0621_GeneralUserGS_sf2_file","0622_FluidR3_GM_sf2_file","0622_GeneralUserGS_sf2_file","0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_GeneralUserGS_sf2_file","0630_JCLive_sf2_file","0630_SBLive_sf2","0630_SoundBlasterOld_sf2","0631_Aspirin_sf2_file","0631_FluidR3_GM_sf2_file","0631_GeneralUserGS_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0640_GeneralUserGS_sf2_file","0640_JCLive_sf2_file","0640_SBLive_sf2","0640_SoundBlasterOld_sf2","0641_FluidR3_GM_sf2_file","0650_Aspirin_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0650_JCLive_sf2_file","0650_SBLive_sf2","0650_SoundBlasterOld_sf2","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_FluidR3_GM_sf2_file","0660_GeneralUserGS_sf2_file","0660_JCLive_sf2_file","0660_SBLive_sf2","0660_SoundBlasterOld_sf2","0661_FluidR3_GM_sf2_file","0661_GeneralUserGS_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0670_JCLive_sf2_file","0670_SBLive_sf2","0670_SoundBlasterOld_sf2","0671_FluidR3_GM_sf2_file","0680_Aspirin_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0680_JCLive_sf2_file","0680_SBLive_sf2","0680_SoundBlasterOld_sf2","0681_FluidR3_GM_sf2_file","0690_Aspirin_sf2_file","0690_Chaos_sf2_file","0690_FluidR3_GM_sf2_file","0690_GeneralUserGS_sf2_file","0690_JCLive_sf2_file","0690_SBLive_sf2","0690_SoundBlasterOld_sf2","0691_FluidR3_GM_sf2_file","0700_Aspirin_sf2_file","0700_Chaos_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0700_JCLive_sf2_file","0700_SBLive_sf2","0700_SoundBlasterOld_sf2","0701_FluidR3_GM_sf2_file","0701_GeneralUserGS_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0710_JCLive_sf2_file","0710_SBLive_sf2","0710_SoundBlasterOld_sf2","0711_FluidR3_GM_sf2_file","0720_Aspirin_sf2_file","0720_Chaos_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0720_JCLive_sf2_file","0720_SBLive_sf2","0720_SoundBlasterOld_sf2","0721_FluidR3_GM_sf2_file","0721_SoundBlasterOld_sf2","0730_Aspirin_sf2_file","0730_Chaos_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0730_JCLive_sf2_file","0730_SBLive_sf2","0730_SoundBlasterOld_sf2","0731_Aspirin_sf2_file","0731_FluidR3_GM_sf2_file","0731_SoundBlasterOld_sf2","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file","0740_JCLive_sf2_file","0740_SBLive_sf2","0740_SoundBlasterOld_sf2","0741_GeneralUserGS_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_FluidR3_GM_sf2_file","0750_GeneralUserGS_sf2_file","0750_JCLive_sf2_file","0750_SBLive_sf2","0750_SoundBlasterOld_sf2","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file","0751_SoundBlasterOld_sf2","0760_Aspirin_sf2_file","0760_Chaos_sf2_file","0760_FluidR3_GM_sf2_file","0760_GeneralUserGS_sf2_file","0760_JCLive_sf2_file","0760_SBLive_sf2","0760_SoundBlasterOld_sf2","0761_FluidR3_GM_sf2_file","0761_GeneralUserGS_sf2_file","0761_SoundBlasterOld_sf2","0762_GeneralUserGS_sf2_file","0770_Aspirin_sf2_file","0770_Chaos_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file","0770_JCLive_sf2_file","0770_SBLive_sf2","0770_SoundBlasterOld_sf2","0771_FluidR3_GM_sf2_file","0771_GeneralUserGS_sf2_file","0772_GeneralUserGS_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file","0780_FluidR3_GM_sf2_file","0780_GeneralUserGS_sf2_file","0780_JCLive_sf2_file","0780_SBLive_sf2","0780_SoundBlasterOld_sf2","0781_GeneralUserGS_sf2_file","0790_Aspirin_sf2_file","0790_Chaos_sf2_file","0790_FluidR3_GM_sf2_file","0790_GeneralUserGS_sf2_file","0790_JCLive_sf2_file","0790_SBLive_sf2","0790_SoundBlasterOld_sf2","0791_GeneralUserGS_sf2_file","0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file","0800_GeneralUserGS_sf2_file","0800_JCLive_sf2_file","0800_SBLive_sf2","0800_SoundBlasterOld_sf2","0801_FluidR3_GM_sf2_file","0801_GeneralUserGS_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0810_JCLive_sf2_file","0810_SBLive_sf2","0810_SoundBlasterOld_sf2","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file","0811_SoundBlasterOld_sf2","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0820_JCLive_sf2_file","0820_SBLive_sf2","0820_SoundBlasterOld_sf2","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file","0821_SoundBlasterOld_sf2","0822_GeneralUserGS_sf2_file","0823_GeneralUserGS_sf2_file","0830_Aspirin_sf2_file","0830_Chaos_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0830_JCLive_sf2_file","0830_SBLive_sf2","0830_SoundBlasterOld_sf2","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file","0831_SoundBlasterOld_sf2","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_FluidR3_GM_sf2_file","0840_GeneralUserGS_sf2_file","0840_JCLive_sf2_file","0840_SBLive_sf2","0840_SoundBlasterOld_sf2","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0841_JCLive_sf2_file","0841_SoundBlasterOld_sf2","0842_FluidR3_GM_sf2_file","0850_Aspirin_sf2_file","0850_Chaos_sf2_file","0850_FluidR3_GM_sf2_file","0850_GeneralUserGS_sf2_file","0850_JCLive_sf2_file","0850_SBLive_sf2","0850_SoundBlasterOld_sf2","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file","0851_SoundBlasterOld_sf2","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_FluidR3_GM_sf2_file","0860_GeneralUserGS_sf2_file","0860_JCLive_sf2_file","0860_SBLive_sf2","0860_SoundBlasterOld_sf2","0861_Aspirin_sf2_file","0861_FluidR3_GM_sf2_file","0861_SoundBlasterOld_sf2","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file","0870_JCLive_sf2_file","0870_SBLive_sf2","0870_SoundBlasterOld_sf2","0871_GeneralUserGS_sf2_file","0872_GeneralUserGS_sf2_file","0873_GeneralUserGS_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0880_JCLive_sf2_file","0880_SBLive_sf2","0880_SoundBlasterOld_sf2","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0881_SoundBlasterOld_sf2","0882_Aspirin_sf2_file","0882_FluidR3_GM_sf2_file","0882_GeneralUserGS_sf2_file","0883_GeneralUserGS_sf2_file","0884_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0886_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file","0888_GeneralUserGS_sf2_file","0889_GeneralUserGS_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0890_JCLive_sf2_file","0890_SBLive_sf2","0890_SoundBlasterOld_sf2","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file","0891_GeneralUserGS_sf2_file","0900_Aspirin_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0900_JCLive_sf2_file","0900_SBLive_sf2","0900_SoundBlasterOld_sf2","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file","0901_SoundBlasterOld_sf2","0910_Aspirin_sf2_file","0910_Chaos_sf2_file","0910_FluidR3_GM_sf2_file","0910_GeneralUserGS_sf2_file","0910_JCLive_sf2_file","0910_SBLive_sf2","0910_SoundBlasterOld_sf2","0911_Aspirin_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file","0911_SoundBlasterOld_sf2","0920_Aspirin_sf2_file","0920_Chaos_sf2_file","0920_FluidR3_GM_sf2_file","0920_GeneralUserGS_sf2_file","0920_JCLive_sf2_file","0920_SBLive_sf2","0920_SoundBlasterOld_sf2","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file","0921_SoundBlasterOld_sf2","0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0930_JCLive_sf2_file","0930_SBLive_sf2","0930_SoundBlasterOld_sf2","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file","0931_SoundBlasterOld_sf2","0940_Aspirin_sf2_file","0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0940_SBLive_sf2","0940_SoundBlasterOld_sf2","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file","0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0950_SBLive_sf2","0950_SoundBlasterOld_sf2","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file","0960_Aspirin_sf2_file","0960_Chaos_sf2_file","0960_FluidR3_GM_sf2_file","0960_GeneralUserGS_sf2_file","0960_JCLive_sf2_file","0960_SBLive_sf2","0960_SoundBlasterOld_sf2","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0961_GeneralUserGS_sf2_file","0961_SoundBlasterOld_sf2","0962_GeneralUserGS_sf2_file","0970_Aspirin_sf2_file","0970_Chaos_sf2_file","0970_FluidR3_GM_sf2_file","0970_GeneralUserGS_sf2_file","0970_JCLive_sf2_file","0970_SBLive_sf2","0970_SoundBlasterOld_sf2","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file","0971_SoundBlasterOld_sf2","0980_Aspirin_sf2_file","0980_Chaos_sf2_file","0980_FluidR3_GM_sf2_file","0980_GeneralUserGS_sf2_file","0980_JCLive_sf2_file","0980_SBLive_sf2","0980_SoundBlasterOld_sf2","0981_Aspirin_sf2_file","0981_FluidR3_GM_sf2_file","0981_GeneralUserGS_sf2_file","0981_SoundBlasterOld_sf2","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0990_JCLive_sf2_file","0990_SBLive_sf2","0990_SoundBlasterOld_sf2","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0991_SoundBlasterOld_sf2","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1000_JCLive_sf2_file","1000_SBLive_sf2","1000_SoundBlasterOld_sf2","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1001_SoundBlasterOld_sf2","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_FluidR3_GM_sf2_file","1010_GeneralUserGS_sf2_file","1010_JCLive_sf2_file","1010_SBLive_sf2","1010_SoundBlasterOld_sf2","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_FluidR3_GM_sf2_file","1020_GeneralUserGS_sf2_file","1020_JCLive_sf2_file","1020_SBLive_sf2","1020_SoundBlasterOld_sf2","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1021_SoundBlasterOld_sf2","1022_GeneralUserGS_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_FluidR3_GM_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1030_SBLive_sf2","1030_SoundBlasterOld_sf2","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1031_SoundBlasterOld_sf2","1032_FluidR3_GM_sf2_file","1040_Aspirin_sf2_file","1040_Chaos_sf2_file","1040_FluidR3_GM_sf2_file","1040_GeneralUserGS_sf2_file","1040_JCLive_sf2_file","1040_SBLive_sf2","1040_SoundBlasterOld_sf2","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_FluidR3_GM_sf2_file","1050_GeneralUserGS_sf2_file","1050_JCLive_sf2_file","1050_SBLive_sf2","1050_SoundBlasterOld_sf2","1051_GeneralUserGS_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_FluidR3_GM_sf2_file","1060_GeneralUserGS_sf2_file","1060_JCLive_sf2_file","1060_SBLive_sf2","1060_SoundBlasterOld_sf2","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file","1061_SoundBlasterOld_sf2","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_FluidR3_GM_sf2_file","1070_GeneralUserGS_sf2_file","1070_JCLive_sf2_file","1070_SBLive_sf2","1070_SoundBlasterOld_sf2","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_FluidR3_GM_sf2_file","1080_GeneralUserGS_sf2_file","1080_JCLive_sf2_file","1080_SBLive_sf2","1080_SoundBlasterOld_sf2","1081_SoundBlasterOld_sf2","1090_Aspirin_sf2_file","1090_Chaos_sf2_file","1090_FluidR3_GM_sf2_file","1090_GeneralUserGS_sf2_file","1090_JCLive_sf2_file","1090_SBLive_sf2","1090_SoundBlasterOld_sf2","1091_SoundBlasterOld_sf2","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1100_JCLive_sf2_file","1100_SBLive_sf2","1100_SoundBlasterOld_sf2","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file","1110_Aspirin_sf2_file","1110_Chaos_sf2_file","1110_FluidR3_GM_sf2_file","1110_GeneralUserGS_sf2_file","1110_JCLive_sf2_file","1110_SBLive_sf2","1110_SoundBlasterOld_sf2","1120_Aspirin_sf2_file","1120_Chaos_sf2_file","1120_FluidR3_GM_sf2_file","1120_GeneralUserGS_sf2_file","1120_JCLive_sf2_file","1120_SBLive_sf2","1120_SoundBlasterOld_sf2","1121_SoundBlasterOld_sf2","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1130_JCLive_sf2_file","1130_SBLive_sf2","1130_SoundBlasterOld_sf2","1131_FluidR3_GM_sf2_file","1131_SoundBlasterOld_sf2","1140_Aspirin_sf2_file","1140_Chaos_sf2_file","1140_FluidR3_GM_sf2_file","1140_GeneralUserGS_sf2_file","1140_JCLive_sf2_file","1140_SBLive_sf2","1140_SoundBlasterOld_sf2","1141_FluidR3_GM_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1150_JCLive_sf2_file","1150_SBLive_sf2","1150_SoundBlasterOld_sf2","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_FluidR3_GM_sf2_file","1160_GeneralUserGS_sf2_file","1160_JCLive_sf2_file","1160_SBLive_sf2","1160_SoundBlasterOld_sf2","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1161_SoundBlasterOld_sf2","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1170_JCLive_sf2_file","1170_SBLive_sf2","1170_SoundBlasterOld_sf2","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1180_JCLive_sf2_file","1180_SBLive_sf2","1180_SoundBlasterOld_sf2","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file","1181_SoundBlasterOld_sf2","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1190_JCLive_sf2_file","1190_SBLive_sf2","1190_SoundBlasterOld_sf2","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1200_JCLive_sf2_file","1200_SBLive_sf2","1200_SoundBlasterOld_sf2","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_FluidR3_GM_sf2_file","1210_GeneralUserGS_sf2_file","1210_JCLive_sf2_file","1210_SBLive_sf2","1210_SoundBlasterOld_sf2","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1220_JCLive_sf2_file","1220_SBLive_sf2","1220_SoundBlasterOld_sf2","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file","1230_Aspirin_sf2_file","1230_Chaos_sf2_file","1230_FluidR3_GM_sf2_file","1230_GeneralUserGS_sf2_file","1230_JCLive_sf2_file","1230_SBLive_sf2","1230_SoundBlasterOld_sf2","1231_Aspirin_sf2_file","1231_GeneralUserGS_sf2_file","1232_Aspirin_sf2_file","1232_GeneralUserGS_sf2_file","1233_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1240_GeneralUserGS_sf2_file","1240_JCLive_sf2_file","1240_SBLive_sf2","1240_SoundBlasterOld_sf2","1241_Aspirin_sf2_file","1241_GeneralUserGS_sf2_file","1242_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file","1250_Aspirin_sf2_file","1250_Chaos_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1250_JCLive_sf2_file","1250_SBLive_sf2","1250_SoundBlasterOld_sf2","1251_Aspirin_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_Aspirin_sf2_file","1253_GeneralUserGS_sf2_file","1254_Aspirin_sf2_file","1254_GeneralUserGS_sf2_file","1255_Aspirin_sf2_file","1255_GeneralUserGS_sf2_file","1256_Aspirin_sf2_file","1256_GeneralUserGS_sf2_file","1257_Aspirin_sf2_file","1257_GeneralUserGS_sf2_file","1258_Aspirin_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1260_JCLive_sf2_file","1260_SBLive_sf2","1260_SoundBlasterOld_sf2","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1270_JCLive_sf2_file","1270_SBLive_sf2","1270_SoundBlasterOld_sf2","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file"]),this.instrumentKeyArray}instrumentInfo(e){var t=this.instrumentKeys()[e],n=1*parseInt(t.substring(0,3));return{variable:"_tone_"+t,fileName:`${t}.js`,url:`https://surikov.github.io/webaudiofontdata/sound/${t}.js`,title:this.instrumentTitles()[n],pitch:-1}}getInstrumentsByGroup(e){const t=[],n=(0,a.parseInteger)(e,null);return null===n||this.instrumentKeys().forEach(((e,r)=>{const i=(0,a.parseInteger)(e.substring(0,3));n===i&&t.push({variable:"_tone_"+e,url:"https://surikov.github.io/webaudiofontdata/sound/"+e+".js",title:this.instrumentTitles()[n],index:r,pitch:-1})})),t}findInstrument(e){0==this.choosenInfos.length&&(this.choosenInfos=[[1,2],[2,14],[3,25],[4,37],[5,48],[6,58],[7,70],[8,83],[9,91],[10,99],[11,107],[12,118],[13,127],[14,136],[15,144],[16,152],[17,164],[18,170],[19,183],[20,194],[21,205],[22,215],[23,228],[24,241],[25,254],[26,263],[27,277],[28,296],[29,308],[30,319],[31,350],[32,356],[33,369],[34,379],[35,385],[36,399],[37,403],[38,412],[39,421],[40,438],[41,452],[42,461],[43,467],[44,477],[45,488],[46,493],[47,501],[48,511],[49,518],[50,547]]);for(var t=0;t<this.instrumentKeys().length;t++)if(e==1*parseInt(this.instrumentKeys()[t].substring(0,3)))return t;return console.log("program",e,"not found"),0}drumTitles(){if(0==this.drumNamesArray.length){var e=[];e[35]="Bass Drum 2",e[36]="Bass Drum 1",e[37]="Side Stick/Rimshot",e[38]="Snare Drum 1",e[39]="Hand Clap",e[40]="Snare Drum 2",e[41]="Low Tom 2",e[42]="Closed Hi-hat",e[43]="Low Tom 1",e[44]="Pedal Hi-hat",e[45]="Mid Tom 2",e[46]="Open Hi-hat",e[47]="Mid Tom 1",e[48]="High Tom 2",e[49]="Crash Cymbal 1",e[50]="High Tom 1",e[51]="Ride Cymbal 1",e[52]="Chinese Cymbal",e[53]="Ride Bell",e[54]="Tambourine",e[55]="Splash Cymbal",e[56]="Cowbell",e[57]="Crash Cymbal 2",e[58]="Vibra Slap",e[59]="Ride Cymbal 2",e[60]="High Bongo",e[61]="Low Bongo",e[62]="Mute High Conga",e[63]="Open High Conga",e[64]="Low Conga",e[65]="High Timbale",e[66]="Low Timbale",e[67]="High Agogo",e[68]="Low Agogo",e[69]="Cabasa",e[70]="Maracas",e[71]="Short Whistle",e[72]="Long Whistle",e[73]="Short Guiro",e[74]="Long Guiro",e[75]="Claves",e[76]="High Wood Block",e[77]="Low Wood Block",e[78]="Mute Cuica",e[79]="Open Cuica",e[80]="Mute Triangle",e[81]="Open Triangle",this.drumNamesArray=e}return this.drumNamesArray}drumKeys(){return 0==this.drumKeyArray.length&&(this.drumKeyArray=["35_0_Chaos_sf2_file","35_12_JCLive_sf2_file","35_16_JCLive_sf2_file","35_18_JCLive_sf2_file","35_4_Chaos_sf2_file","36_0_SBLive_sf2","36_12_JCLive_sf2_file","36_16_JCLive_sf2_file","36_18_JCLive_sf2_file","36_4_Chaos_sf2_file","37_0_SBLive_sf2","37_12_JCLive_sf2_file","37_16_JCLive_sf2_file","37_18_JCLive_sf2_file","37_4_Chaos_sf2_file","38_0_SBLive_sf2","38_12_JCLive_sf2_file","38_16_JCLive_sf2_file","38_18_JCLive_sf2_file","38_4_Chaos_sf2_file","39_0_SBLive_sf2","39_12_JCLive_sf2_file","39_16_JCLive_sf2_file","39_18_JCLive_sf2_file","39_4_Chaos_sf2_file","40_0_SBLive_sf2","40_12_JCLive_sf2_file","40_16_JCLive_sf2_file","40_18_JCLive_sf2_file","40_4_Chaos_sf2_file","41_0_SBLive_sf2","41_12_JCLive_sf2_file","41_16_JCLive_sf2_file","41_18_JCLive_sf2_file","41_4_Chaos_sf2_file","42_0_SBLive_sf2","42_12_JCLive_sf2_file","42_16_JCLive_sf2_file","42_18_JCLive_sf2_file","42_4_Chaos_sf2_file","43_0_SBLive_sf2","43_12_JCLive_sf2_file","43_16_JCLive_sf2_file","43_18_JCLive_sf2_file","43_4_Chaos_sf2_file","44_0_SBLive_sf2","44_12_JCLive_sf2_file","44_16_JCLive_sf2_file","44_18_JCLive_sf2_file","44_4_Chaos_sf2_file","45_0_SBLive_sf2","45_12_JCLive_sf2_file","45_16_JCLive_sf2_file","45_18_JCLive_sf2_file","45_4_Chaos_sf2_file","46_0_SBLive_sf2","46_12_JCLive_sf2_file","46_16_JCLive_sf2_file","46_18_JCLive_sf2_file","46_4_Chaos_sf2_file","47_0_SBLive_sf2","47_12_JCLive_sf2_file","47_16_JCLive_sf2_file","47_18_JCLive_sf2_file","47_4_Chaos_sf2_file","48_0_SBLive_sf2","48_12_JCLive_sf2_file","48_16_JCLive_sf2_file","48_18_JCLive_sf2_file","48_4_Chaos_sf2_file","49_0_SBLive_sf2","49_12_JCLive_sf2_file","49_16_JCLive_sf2_file","49_18_JCLive_sf2_file","49_4_Chaos_sf2_file","50_0_SBLive_sf2","50_12_JCLive_sf2_file","50_16_JCLive_sf2_file","50_18_JCLive_sf2_file","50_4_Chaos_sf2_file","51_0_SBLive_sf2","51_12_JCLive_sf2_file","51_16_JCLive_sf2_file","51_18_JCLive_sf2_file","51_4_Chaos_sf2_file","52_0_SBLive_sf2","52_12_JCLive_sf2_file","52_16_JCLive_sf2_file","52_18_JCLive_sf2_file","52_4_Chaos_sf2_file","53_0_SBLive_sf2","53_12_JCLive_sf2_file","53_16_JCLive_sf2_file","53_18_JCLive_sf2_file","53_4_Chaos_sf2_file","54_0_SBLive_sf2","54_12_JCLive_sf2_file","54_16_JCLive_sf2_file","54_18_JCLive_sf2_file","54_4_Chaos_sf2_file","55_0_SBLive_sf2","55_12_JCLive_sf2_file","55_16_JCLive_sf2_file","55_18_JCLive_sf2_file","55_4_Chaos_sf2_file","56_0_SBLive_sf2","56_12_JCLive_sf2_file","56_16_JCLive_sf2_file","56_18_JCLive_sf2_file","56_4_Chaos_sf2_file","57_0_SBLive_sf2","57_12_JCLive_sf2_file","57_16_JCLive_sf2_file","57_18_JCLive_sf2_file","57_4_Chaos_sf2_file","58_0_SBLive_sf2","58_12_JCLive_sf2_file","58_16_JCLive_sf2_file","58_18_JCLive_sf2_file","58_4_Chaos_sf2_file","59_0_SBLive_sf2","59_12_JCLive_sf2_file","59_16_JCLive_sf2_file","59_18_JCLive_sf2_file","59_4_Chaos_sf2_file","60_0_SBLive_sf2","60_12_JCLive_sf2_file","60_16_JCLive_sf2_file","60_18_JCLive_sf2_file","60_4_Chaos_sf2_file","61_0_SBLive_sf2","61_12_JCLive_sf2_file","61_16_JCLive_sf2_file","61_18_JCLive_sf2_file","61_4_Chaos_sf2_file","62_0_SBLive_sf2","62_12_JCLive_sf2_file","62_16_JCLive_sf2_file","62_18_JCLive_sf2_file","62_4_Chaos_sf2_file","63_0_SBLive_sf2","63_12_JCLive_sf2_file","63_16_JCLive_sf2_file","63_18_JCLive_sf2_file","63_4_Chaos_sf2_file","64_0_SBLive_sf2","64_12_JCLive_sf2_file","64_16_JCLive_sf2_file","64_18_JCLive_sf2_file","64_4_Chaos_sf2_file","65_0_SBLive_sf2","65_12_JCLive_sf2_file","65_16_JCLive_sf2_file","65_18_JCLive_sf2_file","65_4_Chaos_sf2_file","66_0_SBLive_sf2","66_12_JCLive_sf2_file","66_16_JCLive_sf2_file","66_18_JCLive_sf2_file","66_4_Chaos_sf2_file","67_0_SBLive_sf2","67_12_JCLive_sf2_file","67_16_JCLive_sf2_file","67_18_JCLive_sf2_file","67_4_Chaos_sf2_file","68_0_SBLive_sf2","68_12_JCLive_sf2_file","68_16_JCLive_sf2_file","68_18_JCLive_sf2_file","68_4_Chaos_sf2_file","69_0_SBLive_sf2","69_12_JCLive_sf2_file","69_16_JCLive_sf2_file","69_18_JCLive_sf2_file","69_4_Chaos_sf2_file","70_0_SBLive_sf2","70_12_JCLive_sf2_file","70_16_JCLive_sf2_file","70_18_JCLive_sf2_file","70_4_Chaos_sf2_file","71_0_SBLive_sf2","71_12_JCLive_sf2_file","71_16_JCLive_sf2_file","71_18_JCLive_sf2_file","71_4_Chaos_sf2_file","72_0_SBLive_sf2","72_12_JCLive_sf2_file","72_16_JCLive_sf2_file","72_18_JCLive_sf2_file","72_4_Chaos_sf2_file","73_0_SBLive_sf2","73_12_JCLive_sf2_file","73_16_JCLive_sf2_file","73_18_JCLive_sf2_file","73_4_Chaos_sf2_file","74_0_SBLive_sf2","74_12_JCLive_sf2_file","74_16_JCLive_sf2_file","74_18_JCLive_sf2_file","74_4_Chaos_sf2_file","75_0_SBLive_sf2","75_12_JCLive_sf2_file","75_16_JCLive_sf2_file","75_18_JCLive_sf2_file","75_4_Chaos_sf2_file","76_0_SBLive_sf2","76_12_JCLive_sf2_file","76_16_JCLive_sf2_file","76_18_JCLive_sf2_file","76_4_Chaos_sf2_file","77_0_SBLive_sf2","77_12_JCLive_sf2_file","77_16_JCLive_sf2_file","77_18_JCLive_sf2_file","77_4_Chaos_sf2_file","78_0_SBLive_sf2","78_12_JCLive_sf2_file","78_16_JCLive_sf2_file","78_18_JCLive_sf2_file","78_4_Chaos_sf2_file","79_0_SBLive_sf2","79_12_JCLive_sf2_file","79_16_JCLive_sf2_file","79_18_JCLive_sf2_file","79_4_Chaos_sf2_file","80_0_SBLive_sf2","80_12_JCLive_sf2_file","80_16_JCLive_sf2_file","80_18_JCLive_sf2_file","80_4_Chaos_sf2_file","81_0_SBLive_sf2","81_12_JCLive_sf2_file","81_16_JCLive_sf2_file","81_18_JCLive_sf2_file","81_4_Chaos_sf2_file"]),this.drumKeyArray}drumInfo(e){var t=this.drumKeys()[e],n=1*parseInt(t.substring(0,2));return{variable:"_drum_"+t,fileName:`${t}.js`,url:`https://surikov.github.io/webaudiofontdata/sound/128${t}.js`,pitch:n,title:this.drumTitles()[n]}}findDrum(e){for(var t=0;t<this.drumKeys().length;t++)if(e==1*parseInt(this.drumKeys()[t].substring(0,2)))return t;return 0}}},3115:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAudioFontPlayer=void 0;const r=n(1667),i=n(9082);t.WebAudioFontPlayer=class{wboxes=[];loader=new r.WebAudioFontLoader(this);afterTime=.05;nearZero=1e-6;limitVolume(e){return e?1*e:0}noZeroVolume(e){return e>this.nearZero?e:this.nearZero}resumeContext(e){try{"suspended"==e.state&&(console.log("audioContext.resume",e),e.resume())}catch(e){}}queueWaveTableSrc(e){let t=e.pitch+e.preset.pitchShift,n=this.limitVolume(e.volume),r=e.cent||0;this.resumeContext(e.audioContext);var a=e.zone||(0,i.findZone)(e.audioContext,e.preset,t);if(!a)return null;if(!a.buffer)return console.log("empty buffer ",a),null;var o=a.originalPitch-100*a.coarseTune-a.fineTune,s=1*Math.pow(2,(100*t+r-o)/1200);let l=e.when;l<e.audioContext.currentTime&&(l=e.audioContext.currentTime);var c=e.duration+this.afterTime,d=!!a.loop;d||c>a.buffer.duration/s&&(c=a.buffer.duration/s);let u=!1,p=n,h=0,f=s,m=this.findWaveBox(e.audioContext,e.targetNode);m.audioBufferSourceNode=e.audioContext.createBufferSource();const g=m.gain.gain;g.cancelScheduledValues(l),m.audioBufferSourceNode.playbackRate.setValueAtTime(s,l);const v=e.slides&&e.slides.length>0?e.slides:[];for(var b=0;b<v.length;b++){let e=v[b],i=l+e.endWhen,a=null!=e.volume;u=a||u,p=a?n*(e.volume/50):p,0===b?(m.audioBufferSourceNode.playbackRate.setValueAtTime(s,i),e.hasVolumeSlide&&(g.setValueAtTime(this.noZeroVolume(p),l),g.setValueAtTime(this.noZeroVolume(p),i))):e.isPlato?(g.setValueAtTime(this.noZeroVolume(p),i),m.audioBufferSourceNode.playbackRate.setValueAtTime(f,i)):(e.delta!==h&&(h=e.delta||0,f=1*Math.pow(2,(100*t+r+h-o)/1200),m.audioBufferSourceNode.playbackRate.linearRampToValueAtTime(f,i)),a&&g.linearRampToValueAtTime(this.noZeroVolume(p),i))}return u?g.linearRampToValueAtTime(this.noZeroVolume(0),l+c):this.setupWaveBox(e.audioContext,m,a,n,l,c,e.duration),m.audioBufferSourceNode.buffer=a.buffer,d?(m.audioBufferSourceNode.loop=!0,m.audioBufferSourceNode.loopStart=a.loopStartSec,m.audioBufferSourceNode.loopEnd=a.loopEndSec):m.audioBufferSourceNode.loop=!1,m.audioBufferSourceNode.connect(m.gain),m.audioBufferSourceNode.start(l,a.delay),m.audioBufferSourceNode.stop(l+c),m.when=l,m.duration=c,m.pitch=t,m.preset=e.preset,m}setupWaveBox(e,t,n,r,i,a,o){var s=0,l=0,c=o,d=n.ahdsr;a<c+this.afterTime&&(c=a-this.afterTime),d?d.length>0||(d=[{duration:0,volume:1},{duration:.5,volume:1},{duration:1.5,volume:.5},{duration:3,volume:0}]):d=[{duration:0,volume:1},{duration:c,volume:1}];let u=d;const p=t.gain.gain;p.setValueAtTime(this.noZeroVolume(u[0].volume*r),i);for(var h=0;h<u.length;h++)if(u[h].duration>0){if(u[h].duration+s>c){var f=l-(1-(u[h].duration+s-c)/u[h].duration)*(l-u[h].volume);p.linearRampToValueAtTime(this.noZeroVolume(r*f),i+c);break}s+=u[h].duration,l=u[h].volume,p.linearRampToValueAtTime(this.noZeroVolume(r*l),i+s)}p.linearRampToValueAtTime(this.noZeroVolume(0),i+c+this.afterTime)}findWaveBox(e,t){let n=null;for(let r=0;r<this.wboxes.length;r++){let i=this.wboxes[r];if(i.target==t&&e.currentTime>i.when+i.duration+.001){try{i.audioBufferSourceNode&&(i.audioBufferSourceNode.disconnect(),i.audioBufferSourceNode.stop(0),i.audioBufferSourceNode=null)}catch(e){}n=i;break}}return n||(n={},n.gain=e.createGain(),n.target=t,n.gain.connect(t),n.cancel=function(){n&&n.when+n.duration>e.currentTime&&(n.gain.gain.cancelScheduledValues(0),n.gain.gain.setTargetAtTime(1e-5,e.currentTime,.1),n.when=e.currentTime+1e-5,n.duration=0)},this.wboxes.push(n)),n}cancelQueue(e){for(var t=0;t<this.wboxes.length;t++){var n=this.wboxes[t];n.gain.gain.cancelScheduledValues(0),n.gain.gain.setValueAtTime(this.nearZero,e.currentTime),n.when=-1;try{n.audioBufferSourceNode&&n.audioBufferSourceNode.disconnect()}catch(e){console.log(e)}}}}},9082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preparePreset=t.prepareZone=t.findZone=void 0;const r=n(6232);function i(e,t){return"number"==typeof e?e:t}async function a(e,t){if(t.buffer)return Promise.resolve(t);const n=new r.Deferred;return t.delay=t.delay||0,t.startOffsetSec=t.startOffsetSec||t.delay,t.loopStart=i(t.loopStart,0),t.loopEnd=i(t.loopEnd,0),t.coarseTune=i(t.coarseTune,0),t.fineTune=i(t.fineTune,0),t.originalPitch=i(t.originalPitch,6e3),t.sampleRate=i(t.sampleRate,44100),t.sustain=i(t.originalPitch,0),t.loopStartSec&&t.loopEndSec&&t.loopEndSec>t.loopStartSec&&(t.loop=!0),t.sampleRate&&t.loopStart&&t.loopEnd&&t.loopStart>1&&t.loopEnd>=t.loopStart&&!t.loopStartSec&&!t.loopEndSec&&(t.loop=!0,t.loopStartSec=t.loopStart/t.sampleRate,t.loopEndSec=t.loopEnd/t.sampleRate),t.file?(t.buffer=await async function(e,t){const n=new r.Deferred;let i,a=t.length,o=new ArrayBuffer(a),s=new Uint8Array(o),l=atob(t);for(let e=0;e<l.length;e++)i=l.charCodeAt(e),s[e]=i;return e.decodeAudioData(o,(e=>{n.resolve(e)})),n.promise}(e,t.file),n.resolve(t)):t.sample?(t.buffer=function(e,t){const n=atob(t.sample),r=e.createBuffer(1,n.length/2,t.sampleRate),i=r.getChannelData(0);let a,o,s;for(let e=0;e<n.length/2;e++)a=n.charCodeAt(2*e),o=n.charCodeAt(2*e+1),a<0&&(a=256+a),o<0&&(o=256+o),s=256*o+a,s>=32768&&(s-=65536),i[e]=s/65536;return r}(e,t),n.resolve(t)):n.resolve(t),n.promise}t.findZone=function(e,t,n){var r=null;for(let e=t.zones.length-1;e>=0&&!((r=t.zones[e]).keyRangeLow<=n&&r.keyRangeHigh>=n);e--);try{r&&a(e,r)}catch(e){console.log("prepareZone",e)}return r},t.prepareZone=a,t.preparePreset=async function(e){if(!e.preset)return console.log("preparePreset: preset is null",e),Promise.resolve(null);e.preset.pitchShift=i(e.preset.pitchShift,0),("_tone_0180_FluidR3_GM_sf2_file"===e.var||"_tone_0130_GeneralUserGS_sf2_file"===e.var)&&(e.preset.pitchShift=12);for(let t=0;t<e.preset.zones.length;t++)a(e.audioContext,e.preset.zones[t]);return Promise.resolve(e.preset)}},6232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=class{promise;resolve;reject;constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}},6753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"abt1",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/abt/abt1.midi",content:'\n        <div style="margin: .5rem;">\n            Abt (вокализ 1)        \n        </div>  \n  '}},3143:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"bell",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/bell.midi",pathNotesJson:"motes/bandit/bell.json",content:'\n    <div style="margin: .5rem;">\n        Bell\n    </div>  \n  '.trim()}},7522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"billy",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/billy.midi",pathNotesJson:"motes/bandit/billy.json",content:'\n    <div style="margin: .5rem;">\n        Billy\n    </div>  \n  '.trim()}},4685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"butterflyEffect",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit_draft/butterflyEffect.midi",pathNotesJson:"motes/bandit_draft/butterflyEffect.json",content:'\n        <div style="margin: .5rem;">\n            Эффект бабочки (Butterfly effect)        \n        </div>  \n  '}},6684:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"carcassiOp60n7",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/carcassiOp60n7.midi",pathNotesJson:"motes/bandit/carcassiOp60n7.json",content:'\n        <div style="margin: .5rem;">\n            Matteo Carcassi Opus 60 №7\n        </div>  \n    '}},2984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"engine",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/engine.midi",pathNotesJson:"",content:'\n        <div style="margin: .5rem;">\n            Engine\n        </div>  \n  '}},1033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"glass",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit_draft/glass.midi",pathNotesJson:"motes/bandit_draft/glass.json",content:'\n        <div style="margin: .5rem;">\n            Glass        \n        </div>  \n  '}},8976:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(9699)),a=r(n(4893)),o=r(n(3143)),s=r(n(6684)),l=r(n(9399)),c=r(n(7522)),d=r(n(9446)),u=r(n(2984)),p=r(n(5383)),h=r(n(5106)),f=r(n(1033)),m=r(n(4685)),g=r(n(4442)),v=r(n(6753)),b=r(n(5138)),y=r(n(3013));t.default={tiriTiri:a.default,bell:o.default,carcassiOp60n7:s.default,partingGlass:l.default,billy:c.default,sweetLeaf:d.default,engine:u.default,threeDots:p.default,noSystems:h.default,glass:f.default,butterflyEffect:m.default,roundtrip:g.default,abt1:v.default,setBand:b.default,setBandDraft:y.default,setMy:i.default}},5106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"noSystems",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/noSystems.midi",pathNotesJson:"motes/bandit/noSystems.json",content:'\n        <div style="margin: .5rem;">\n            No systems\n        </div>  \n  '}},9399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"partingGlass",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/partingGlass.midi",pathNotesJson:"motes/bandit/partingGlass.json",content:'\n        <div style="margin: .5rem;">\n            Parting glass        \n        </div>  \n  '}},4442:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"roundtrip",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit_draft/roundtrip.midi",content:'\n        <div style="margin: .5rem;">\n            Туда-сюда (Roundtrip)        \n        </div>  \n  '}},5138:(e,t)=>{"use strict";function n(e,t){return`<a class="link" href="${t}">${e}</a>`}Object.defineProperty(t,"__esModule",{value:!0});const r=`<div style="margin: .5rem;">\n    ${n("No systems","/mbox/noSystems/")}\n</div>\n`.trim(),i=`<div style="margin: .5rem;">\n    ${n("Продолжение следует","/mbox/threeDots/")} (Three dots)\n</div>\n`.trim(),a=`<div style="margin: .5rem;">\n    ${n("Мотор","/mbox/engine/")} (Engine)\n</div>\n`.trim(),o=`<div style="margin: .5rem;">\n    ${n("Sweet Leaf","/mbox/sweetLeaf/")}\n</div>\n`.trim(),s=(`<div style="margin: .5rem;">\n    ${n("Peter Gunn","/mbox/peterGunn/")}\n</div>\n`.trim(),`<div style="margin: .5rem;">\n    ${n("Билли","/mbox/billy/")} (Billy)\n</div>\n`.trim()),l=`<div style="margin: .5rem;">\n    ${n("The parting glass","/mbox/partingGlass/")} (Чарка на посошок)\n</div>\n`.trim(),c=`<div style="margin: .5rem;">\n    ${n("Matteo Carcassi, opus 60-7","/mbox/carcassiOp60n7/")}\n</div>\n`.trim(),d=`<div style="margin: .5rem;">\n    ${n("тырыТыры","/mbox/tiriTiri/")} (tiriTiri)\n</div>\n`.trim(),u=`\n  ${r}\n  ${`<div style="margin: .5rem;">\n    ${n("Колокольчик","/mbox/bell/")} (bell)\n</div>\n`.trim()}\n  ${i}\n  ${a}\n  ${o}\n  ${s}\n  ${c}\n  ${l}\n  ${d}\n  <div style="margin-bottom: 3rem;"></div>\n`.trim();t.default={content:u,tracks:[],isSongList:!0,ns:"band-song"}},3013:(e,t)=>{"use strict";function n(e,t){return`<a class="link" href="${t}">${e}</a>`}Object.defineProperty(t,"__esModule",{value:!0});const r=`\n  ${`<div style="margin: .5rem;">\n    ${n("Стакан (Glass)","/mbox/glass/")}\n</div>\n`.trim()}\n  ${`<div style="margin: .5rem;">\n    ${n("Эффект бабочки (Butterfly effect)","/mbox/butterflyEffect/")}\n</div>\n`.trim()}\n  ${`<div style="margin: .5rem;">\n    ${n("Туда-сюда (Roundtrip)","/mbox/roundtrip/")}\n</div>\n`.trim()}\n  ${`<div style="margin: .5rem;">\n    ${n("Abt 1 (вокализ)","/mbox/abt1/")}\n</div>\n`.trim()}  \n  <div style="margin-bottom: 3rem;"></div>\n`.trim();t.default={content:r,tracks:[],isSongList:!0,ns:"band-song"}},9699:(e,t)=>{"use strict";function n(e,t){return`<a class="link" href="${t}">${e}</a>`}Object.defineProperty(t,"__esModule",{value:!0});const r=`<div style="margin: .5rem;">\n    ${n("SetAll","/mbox/set_all/")} (SetAll)\n</div>\n`.trim(),i=`<div style="margin: .5rem;">\n    ${n("Engine","/mbox/engine/")} (Мотор)\n</div>\n`.trim(),a=`<div style="margin: .5rem;">\n    ${n("Billy","/mbox/billy/")} (Билли)\n</div>\n`.trim(),o=`<div style="margin: .5rem;">\n    ${n("The parting glass","/mbox/partingGlass/")} (Чарка на посошок)\n</div>\n`.trim(),s=`<div style="margin: .5rem;">\n    ${n("Matteo Carcassi, opus 60-7","/mbox/carcassiOp60n7/")}\n</div>\n`.trim(),l=`<div style="margin: .5rem;">\n    ${n("тырыТыры","/mbox/tiriTiri/")} (tiriTiri)\n</div>\n`.trim();`\n  ${i}\n  ${a}\n  ${s}\n  ${`<div style="margin: .5rem;">\n    ${n("Колокольчик","/mbox/bell/")} (bell)\n</div>\n`.trim()}\n  ${o}\n  ${l}  \n  ${r}  \n  <div style="margin-bottom: 3rem;"></div>\n`.trim(),t.default={content:"",tracks:[],source:"my",oldNs:"my",ns:"my-song",isSongList:!0}},9446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"sweetLeaf",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/sweetLeaf.midi",content:'\n        <div style="margin: .5rem;">\n            Sweet leaf\n        </div>  \n  '}},5383:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"threeDots",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/threeDots.midi",content:'\n    <div style="margin: .5rem;">\n        Three dots    \n    </div>  \n  '}},4893:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={id:"tiriTiri",ns:"band-song",exportToLineModel:!0,pathNotesText:"motes/bandit/tiriTiri.midi",pathNotesJson:"motes/bandit/tiriTiri.json",content:'\n    <div style="margin: .5rem;">\n        TiriTiri\n    </div>  \n  '}},1841:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetTrackDialog=void 0;const r=n(8593),i=n(6625);t.GetTrackDialog=class{context;dialog;cb;song=null;tracks=[];get root(){return(0,r.getWithDataAttr)("get-track-dialog-content")[0]}constructor(e){this.context=e}getTracksForChoice(){const e="\n            display: inline-block;\n            margin: 0;            \n            margin-right: .5rem;\n            margin-bottom: 1rem;            \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim();let t="";return this.tracks.forEach((n=>{t+=`\n                <span style="${e}" data-get-track-dialog-select-track-action data-track-name="${n.name}">\n                    ${n.name}\n                </span>            \n            `})),`\n            <div style="margin-left: 1rem;">\n                ${t}                            \n            </div>\n        `.trim()}openTrackDialog(e,t=null){this.cb=t||(()=>{}),this.song=e,this.tracks=i.SongStore.GetTracksNodeBySong(JSON.parse(JSON.stringify(e))),this.tracks=this.tracks.filter((e=>"total"!==e.name)),this.tracks.forEach((e=>e.isExcluded=!1));const n="\n            display: inline-block;\n            margin: 0;            \n            margin-right: .5rem;\n            margin-bottom: 1rem;            \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim(),r=`\n            <div class="popup">\n                <div class="page">\n                    <div class="page-content">\n                        <div style="padding: 1rem 0 0 1rem;" data-get-track-dialog-content>\n                            <span data-get-track-dialog-ok style="${n}">&nbsp;ОК&nbsp;</span>&nbsp;\n                            <span data-get-track-dialog-cancel style="${n}">Cancel</span>\n                        </div>                        \n                        %content%\n                    </div>\n                </div>\n            </div>        \n        `.trim().replace("%content%",`\n            ${this.getTracksForChoice()}        \n        `.trim());this.dialog=this.context.$f7.popup.create({content:r,on:{opened:()=>{this.subTrackDialogEvents(),this.updateView()}}}),this.dialog.open(!1)}subTrackDialogEvents(){(0,r.getWithDataAttr)("get-track-dialog-select-track-action").forEach((e=>{e.addEventListener("pointerdown",(()=>this.toggleTrack(e.dataset.trackName)))})),(0,r.getWithDataAttr)("get-track-dialog-ok").forEach((e=>{e.addEventListener("pointerdown",(()=>this.okClick()))})),(0,r.getWithDataAttr)("get-track-dialog-cancel").forEach((e=>{e.addEventListener("pointerdown",(()=>this.cancelClick()))}))}toggleTrack(e){const t=this.tracks.find((t=>t.name===e));t&&(t.isExcluded=!t.isExcluded,this.updateView())}okClick(){const e=this.tracks.filter((e=>!e.isExcluded)).map((e=>e.name));this.dialog.close(),this.cb&&this.cb(e)}cancelClick(){this.dialog.close(),this.cb&&this.cb(null)}updateView(){(0,r.getWithDataAttr)("get-track-dialog-select-track-action").forEach((e=>{const t=e.dataset.trackName,n=this.tracks.find((e=>e.name===t));e.style.background=n?.isExcluded?"none":"lime"}))}}},3352:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoteDetailsDialog=void 0;const r=n(8593),i=n(434),a=n(7526);t.NoteDetailsDialog=class{context;board;dialog;cb;trackName="";song=null;track=null;trackSrc=null;volumeRange;note;get slidesTextFromInput(){let e="";return(0,r.getWithDataAttr)("note-details-dialog-slides-input").forEach((t=>{e=(t.value||"").trim()})),e}get durQFromInput(){let e=0;return(0,r.getWithDataAttr)("note-details-dialog-duration-input").forEach((t=>{e=a.Muse.parseInteger(t.value,e)})),e}get trackNameFromInput(){let e="";return(0,r.getWithDataAttr)("edit-track-dialog-name-input").forEach((t=>{e=t.value,e=e.replace(/ /g,""),e=e.replace("$",""),e=e.replace("@",""),e=e.trim()})),e?i.drumBoards[this.track.board]?"@"+e:"$"+e:""}get root(){return(0,r.getWithDataAttr)("edit-track-dialog-content")[0]}get page(){return this.board.page}constructor(e,t){this.context=e,this.board=t}getBoardForChoice(){const e="\n            display: inline-block;\n            margin: 0;            \n            margin-right: .5rem;\n            margin-bottom: 1rem;            \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim();return`\n            <div style="margin-left: 1rem;" data-get-board-wrapper>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.toneBoards.guitar}">\n                    Guitar\n                </span>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.toneBoards.bassGuitar}">\n                    Bass guitar\n                </span>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.toneBoards.bassSolo34}">\n                    Harmonica\n                </span>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.drumBoards.drums}">\n                    Drums\n                </span>                            \n            </div>\n        `.trim()}setVolumeRange(){this.volumeRange=this.context.$f7.range.create({el:(0,r.getWithDataAttr)("note-details-dialog-volume-range")[0],on:{changed:e=>{this.note.volume=e.value}}}),setTimeout((()=>{this.volumeRange.setValue(this.note.volume)}),100)}openDialog(e,t=null){this.cb=t,this.note={...e},this.note.volume=a.Muse.parseInteger(this.note.volume,a.Muse.DEFAULT_VOLUME);const n="\n            display: inline-block;\n            margin: 0;            \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim();let i=`\n            <div class="popup">\n                <div class="page">\n                    <div class="navbar">\n                        <div class="navbar-bg"></div>\n                        <div class="navbar-inner" style="justify-content: space-evenly;">\n                            <span data-edit-track-dialog-ok style="${n}">&nbsp;ОК&nbsp;</span>&nbsp;\n                            <span data-edit-track-dialog-cancel style="${n}">Cancel</span>\n                            \x3c!--div class="title">Popup Title</div>\n                            <div class="right">\n                                <a class="link popup-close">Close</a>\n                            </div--\x3e\n                        </div>\n                    </div>\n                    <div class="page-content">\n                        %content%\n                    </div>\n                </div>\n            </div>\n        `.trim().replace("%content%",`\n            ${this.getVolumeContent()}\n            <div style="margin-left: 1rem;">\n                <div>\n                    <small>длительность</small>                   \n                </div>   \n                <div\n                    class="stepper stepper-fill stepper-init"\n                    data-wraps="true"\n                    data-autorepeat="true"\n                    data-autorepeat-dynamic="true"\n                    data-manual-input-mode="true"\n                    data-note-details-dialog-duration-stepper\n                >\n                    <div class="stepper-button-minus"></div>\n                    <div class="stepper-input-wrap">\n                        <input\n                            data-note-details-dialog-duration-input\n                            type="text"\n                            value="${e.durQ}" min="1" max="10000" step="10" />\n                    </div>\n                    <div class="stepper-button-plus"></div>\n                </div>\n            </div>      \n            \x3c!--div style="margin-left: 1rem;">\n                durationQ: ${e.durQ}\n            </div--\x3e\n            <div class="list" style="margin: 1rem;">\n                <ul>\n                    <li class="item-content item-input">\n                        <div class="item-inner">\n                            <div class="item-input-wrap">\n                                <textarea\n                                    data-note-details-dialog-slides-input\n                                    placeholder="Slides"\n                                >${this.note.slides||""}</textarea>\n                            </div>\n                      </div>\n                    </li>\n                </ul>\n            </div>            \n        `.trim());this.dialog=this.context.$f7.popup.create({content:i,on:{opened:()=>{this.subEvents(),this.setVolumeRange()}}}),this.dialog.open(!1),this.context.$f7.stepper.create({el:(0,r.getWithDataAttr)("note-details-dialog-duration-stepper")[0]})}subEvents(){(0,r.getWithDataAttr)("edit-track-dialog-ok").forEach((e=>{e.addEventListener("pointerup",(()=>this.okClick()))})),(0,r.getWithDataAttr)("edit-track-dialog-cancel").forEach((e=>{e.addEventListener("pointerup",(()=>this.cancelClick()))}))}setBoard(e){this.track.board=e,this.updateView()}okClick(){this.note.slides=this.slidesTextFromInput,this.note.durQ=this.durQFromInput,(()=>{this.dialog.close(),this.cb&&this.cb(this.note)})()}cancelClick(){this.dialog.close()}updateView(){(0,r.getWithDataAttr)("edit-track-dialog-board-type").forEach((e=>{e.style.fontWeight=e.dataset.editTrackDialogBoardType===this.track.board?"700":"400"}))}getVolumeContent(){return'\n            <div style="margin: 1rem; margin-bottom: 2rem;">\n                Громкость\n                <div\n                    data-note-details-dialog-volume-range\n                    class="range-slider"\n                    data-label="true"\n                    data-min="0"   \n                    data-max="100"\n                    data-step="1"\n                    data-value="50"\n                    data-scale="true"\n                    data-scale-steps="10"\n                    data-scale-sub-steps="5"\n                ></div>\n            </div>\n        '.trim()}}},3920:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackDetailsDialog=void 0;const r=n(8593),i=n(434);t.TrackDetailsDialog=class{context;dialog;cb;trackName="";song=null;track=null;trackSrc=null;volumeRange;ns;get trackNameFromInput(){let e="";return(0,r.getWithDataAttr)("edit-track-dialog-name-input").forEach((t=>{e=t.value,e=e.replace(/ /g,""),e=e.replace("$",""),e=e.replace("@",""),e=e.trim()})),e?i.drumBoards[this.track.board]?"@"+e:"$"+e:""}get root(){return(0,r.getWithDataAttr)("edit-track-dialog-content")[0]}constructor(e){this.context=e}getBoardForChoice(){const e="\n            display: inline-block;\n            margin: 0;            \n            margin-right: .5rem;\n            margin-bottom: 1rem;            \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim();return`\n            <div style="margin-left: 1rem;" data-get-board-wrapper>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.toneBoards.guitar}">\n                    Guitar\n                </span>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.toneBoards.bassGuitar}">\n                    Bass guitar\n                </span>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.toneBoards.bassSolo34}">\n                    Harmonica\n                </span>\n                <span style="${e}" data-edit-track-dialog-board-type="${i.drumBoards.drums}">\n                    Drums\n                </span>                            \n            </div>\n        `.trim()}setVolumeRange(){this.volumeRange=this.context.$f7.range.create({el:(0,r.getWithDataAttr)("edit-track-dialog-volume-range")[0],on:{changed:e=>{this.track.volume=e.value}}}),setTimeout((()=>{this.volumeRange.setValue(this.track.volume)}),100)}openTrackDialog(e,t="",n=null){if(this.trackName=t,this.cb=n,this.song=e,!this.song)return;let r=this.song.tracks.find((e=>e.name===t));if(t&&!r)return;this.track=r?{...r}:{name:"",board:i.toneBoards.guitar,volume:50},this.trackSrc={...this.track};const a="\n            display: inline-block;\n            margin: 0;            \n            margin-right: .5rem;\n            margin-bottom: 1rem;            \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim(),o=`\n            <div class="popup">\n                <div class="page">\n                    <div class="page-content">\n                        <div style="padding: 1rem 0 0 1rem;" data-edit-track-dialog-content>\n                            <span data-edit-track-dialog-ok style="${a}">&nbsp;ОК&nbsp;</span>&nbsp;\n                            <span data-edit-track-dialog-cancel style="${a}">Cancel</span>\n                        </div>                        \n                        %content%\n                    </div>\n                </div>\n            </div>        \n        `.trim().replace("%content%",`\n            <div class="list" style="margin: 1rem;">\n                <ul>\n                    <li class="item-content item-input">\n                        <div class="item-inner">\n                            <div class="item-title item-label">Track name</div>\n                            <div class="item-input-wrap">\n                                <input\n                                    data-edit-track-dialog-name-input\n                                    type="text"\n                                    placeholder="Track name"\n                                    value="${this.track.name}"\n                                    ${this.track.isHardTrack?"readonly":""}\n                                >\n                                <span class="input-clear-button"></span>\n                            </div>\n                      </div>\n                    </li>\n                </ul>\n            </div>\n            ${this.getVolumeContent()}\n            ${this.getBoardForChoice()}        \n        `.trim());this.dialog=this.context.$f7.popup.create({content:o,on:{opened:()=>{this.subTrackDialogEvents(),this.updateView(),this.setVolumeRange()}}}),this.dialog.open(!1)}subTrackDialogEvents(){(0,r.getWithDataAttr)("edit-track-dialog-board-type").forEach((e=>{e.addEventListener("pointerdown",(()=>this.setBoard(e.dataset.editTrackDialogBoardType)))})),(0,r.getWithDataAttr)("edit-track-dialog-ok").forEach((e=>{e.addEventListener("pointerdown",(()=>this.okClick()))})),(0,r.getWithDataAttr)("edit-track-dialog-cancel").forEach((e=>{e.addEventListener("pointerdown",(()=>this.cancelClick()))}))}setBoard(e){this.track.board=e,this.updateView()}okClick(){let e=this.trackNameFromInput;const t=()=>{this.dialog.close(),this.cb&&this.cb(!1)};if(!e)return t();if(this.trackSrc.name)this.updateTrackInSong();else{if(this.song.tracks.find((t=>t.name===e)))return t();this.song.tracks.push({...this.track,name:e})}this.song.tracks=this.song.tracks.filter((e=>e.name&&e.board)),this.dialog.close(),this.cb&&this.cb(!0)}updateTrackInSong(){const e=this.trackNameFromInput,t=this.trackSrc.name;this.song.tracks.forEach((n=>{n.name===t&&(n.name=e,n.board=this.track.board,n.volume=this.track.volume,this.song.dynamic.forEach((n=>{n.track===t&&(n.track=e)})))}))}cancelClick(){this.dialog.close(),this.cb&&this.cb(!1)}updateView(){(0,r.getWithDataAttr)("edit-track-dialog-board-type").forEach((e=>{e.style.fontWeight=e.dataset.editTrackDialogBoardType===this.track.board?"700":"400"}))}getVolumeContent(){return'\n            <div style="margin: 1rem; margin-bottom: 2rem;">\n                Громкость\n                <div\n                    data-edit-track-dialog-volume-range\n                    class="range-slider"\n                    data-label="true"\n                    data-min="0"   \n                    data-max="100"\n                    data-step="1"\n                    data-value="50"\n                    data-scale="true"\n                    data-scale-steps="10"\n                    data-scale-sub-steps="5"\n                ></div>\n            </div>\n        '.trim()}}},3470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracksVolumeDialog=void 0;const r=n(7526),i=n(8593),a=n(6625),o=n(5336);t.TracksVolumeDialog=class{context;dialog;cb;song=null;tracks=null;tracksSrc=null;get root(){return(0,i.getWithDataAttr)("edit-track-dialog-content")[0]}constructor(e){this.context=e}setVolumeRange(){const e=()=>{const e=this.tracks.find((e=>"total"===e.name))||{volume:a.DEFAULT_OUT_VOLUME};o.ideService.setDataByTracks({tracks:this.tracks,volume:e.volume})};this.tracks.forEach((t=>{this.context.$f7.range.create({el:(0,i.getWithDataAttrValue)("tracks-volume-dialog-item",t.name)[0],on:{changed:n=>{t.volume=n.value,e()}}}),t.items&&t.items.length&&t.items.forEach((n=>{this.context.$f7.range.create({el:(0,i.getWithDataAttrValue)("tracks-volume-dialog-item",`${t.name}:${n.name}`)[0],on:{changed:t=>{n.volume=t.value,e()}}})}))}))}openTrackDialog(e=null){if(this.cb=e,!o.ideService.songStore?.data)return;this.song=o.ideService.songStore.data,this.tracks=JSON.parse(JSON.stringify(this.song.tracks)),this.tracksSrc=JSON.parse(JSON.stringify(this.song.tracks));const t="\n            display: inline-block;\n            margin: 0;\n            padding: .5rem;\n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim(),n=`\n            <div class="popup">\n                <div class="page">\n                    <div class="navbar">\n                        <div class="navbar-bg"></div>\n                        <div class="navbar-inner" style="justify-content: space-evenly;">\n                            <div data-tracks-volume-dialog-ok style="${t}"><b>OK</b></div>\n                            <div data-tracks-volume-dialog-cancel style="${t}">Cancel</div>                            \n                        </div>\n                    </div>                \n                    <div class="page-content" style="padding-right: 3rem;">\n                        %content%\n                    </div>\n                </div>\n            </div>\n        `.trim().replace("%content%",`\n            ${this.getVolumeContent()}\n        `.trim());this.dialog=this.context.$f7.popup.create({content:n,on:{opened:()=>{this.subTrackDialogEvents(),this.updateView(),this.setVolumeRange()}}}),this.dialog.open(!1)}subTrackDialogEvents(){(0,i.getWithDataAttr)("tracks-volume-dialog-ok").forEach((e=>{e.addEventListener("pointerdown",(()=>this.okClick()))})),(0,i.getWithDataAttr)("tracks-volume-dialog-cancel").forEach((e=>{e.addEventListener("pointerdown",(()=>this.cancelClick()))}))}cancelClick(){const e=this.tracksSrc.filter((e=>"total"!==e.name));this.song.tracks=e,o.ideService.setDataByTracks(this.song),this.dialog.close(),this.cb&&this.cb(!1)}okClick(){const e=this.tracks.find((e=>"total"===e.name))||{volume:a.DEFAULT_OUT_VOLUME},t=this.tracks.filter((e=>"total"!==e.name));this.song.volume=e.volume,this.song.tracks=t,o.ideService.setDataByTracks(this.song),this.dialog.close(),this.cb&&this.cb(!0)}updateView(){}getTrackVolumeContent(e,t,n){let r="";return r+=`\n            <div style="margin: 1rem; margin-bottom: 2rem;">\n                ${e}\n                <div\n                    data-tracks-volume-dialog-item="${t}"\n                    class="range-slider"\n                    data-label="true"\n                    data-min="0"\n                    data-max="100"\n                    data-step="1"\n                    data-value="${n||0}"\n                    data-scale="true"\n                    data-scale-steps="10"\n                    data-scale-sub-steps="5"\n                ></div>\n            </div>`.trim(),r}getVolumeContent(){let e="";return this.tracks.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),this.tracks.unshift({name:"total",volume:r.Muse.parseInteger(this.song.volume,a.DEFAULT_OUT_VOLUME),board:""}),this.tracks.forEach((t=>{const n=[];this.song.dynamic.filter((e=>e.track===t.name)).forEach((e=>{e.lines.forEach((e=>{e.cells.forEach((e=>{e.notes.forEach((e=>{n.includes(e.instName)||n.push(e.instName)}))}))}))})),n.sort();const i=t.items||[];t.items=n.map((e=>({name:e,volume:50}))),i.length&&t.items.forEach((e=>{const t=i.find((t=>t.name===e.name));e.volume=r.Muse.isPresent(t?.volume)?t.volume:e.volume})),e+=this.getTrackVolumeContent(`<b>${t.name}:${t.volume}</b>`,t.name,t.volume),t.items&&t.items.length&&t.items.forEach((n=>{e+=this.getTrackVolumeContent(`${t.name}:${n.name}:${t.volume}`,`${t.name}:${n.name}`,n.volume)}))})),e}}},4017:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrumBoard=t.drumNotesInfo=void 0,t.drumNotesInfo={bd:{note:"bd",headColor:"sienna",bodyColor:"tan",char:"O",vocalism:"пы"},sn:{note:"sn",headColor:"tomato",bodyColor:"tomato",char:"V",vocalism:"ба"},hc:{note:"hc",headColor:"lightgray",bodyColor:"whitesmoke",char:"x",vocalism:"чи"},ho:{note:"ho",headColor:"lightgray",bodyColor:"whitesmoke",char:"x",vocalism:"ча"},hp:{note:"hp",headColor:"lightgray",bodyColor:"whitesmoke",char:"x",vocalism:"hp"},cc:{note:"cc",headColor:"orange",bodyColor:"orange",char:"щ",vocalism:"щи"},rc:{note:"rc",headColor:"lightgray",bodyColor:"whitesmoke",char:"ц",vocalism:"ци"},tl:{note:"tl",headColor:"bisque",bodyColor:"bisque",char:"у",vocalism:"ту"},tm:{note:"tm",headColor:"seagreen",bodyColor:"lightgreen",char:"о",vocalism:"то"},th:{note:"th",headColor:"steelblue",bodyColor:"lightblue",char:"а",vocalism:"та"}},t.DrumBoard=class{constructor(){}getContentOld(e,t){let n=0;const r="rem";return`\n                <div style="display: flex; user-select: none; touch-action: none; position: relative;">\n                    <div style="width: 66%;">\n                        <div style="display: flex; width: 100%;">\n                            <div \n                                style="background-color: antiquewhite; width: 50%; height: 5${r}; text-align: center; user-select: none; touch-action: none;"\n                                data-action-drum-key="tl"\n                                data-keyboard-id="${e}-${n++}"\n                                data-color="lightgray"\n                                data-color2="lightgray"\n                                data-char="l"\n                            >\n                                \x3c!--data-action-drum-key="sn+hc"\n                                data-keyboard-id="${e}-${n++}"--\x3e\n                                \x3c!--<br/>&nbsp;A-a--\x3e\n                            </div>\n                            <div \n                                style="width: 50%; height: 5rem; text-align: center; background-color: lightgreen; user-select: none; touch-action: none;"\n                                data-action-drum-key="tm"\n                                data-keyboard-id="${e}-${n++}"\n                                data-color="seagreen"                                \n                                data-color2="lightgreen"\n                                data-char="m"\n                            >\n                                \x3c!--<br/>&nbsp;T-t--\x3e\n                            </div>\n                        </div>                        \n                        \n                        <div\n                            style="display: flex; width: 100%; height: 5rem; background-color: whitesmoke; user-select: none; touch-action: none;"                        \n                        >\n                            <div \n                                style="width: 50%; height: 5rem; box-sizing: border-box; text-align: center; background-color: whitesmoke; user-select: none; touch-action: none;"\n                                data-action-drum-key="cc"\n                                data-keyboard-id="${e}-${n++}"\n                                data-color="lightgray"\n                                data-color2="whitesmoke"                                                                \n                            >         \n                                \x3c!--<br/>&nbsp;?--\x3e\n                            </div>\n                            <div \n                                style="width: 50%; height: 5rem; box-sizing: border-box; text-align: center; background-color: lightgray; user-select: none; touch-action: none;"\n                                data-action-drum-key="hc"\n                                data-keyboard-id="${e}-${n++}"\n                                data-highlight-drum="bd+hc"  \n                                data-color="lightgray"\n                                data-color2="whitesmoke"\n                                data-char="x"\n                            >  \n                                \x3c!--<br/>&nbsp;X-x--\x3e\n                            </div>   \n                        </div>\n                                                 \n                        <div\n                            style="display: flex; width: 100%; height: 5${r}; background-color: whitesmoke; user-select: none; touch-action: none;"                        \n                        >\n                            <div \n                                style="width: 50%; height: 5${r}; box-sizing: border-box; text-align: center; background-color: lightgray; user-select: none; touch-action: none;"\n                                data-action-drum-key="hc"\n                                data-keyboard-id="${e}-${n++}"\n                                data-highlight-drum="sn+hc"  \n                                data-color="lightgray"\n                                data-color2="whitesmoke"\n                                data-char="x"\n                            >       \n                                \x3c!--<br/>&nbsp;X-x--\x3e\n                            </div>\n                            \n                        \n                            <div \n                                style="width: 50%; height: 5${r}; box-sizing: border-box; text-align: center; background-color: whitesmoke; user-select: none; touch-action: none;"\n                                data-action-drum-key="rc"                                \n                                data-keyboard-id="${e}-${n++}"   \n                                data-color="lightgray"\n                                data-color2="whitesmoke"\n                            >     \n                                \x3c!--<br/>&nbsp;?--\x3e\n                            </div>   \n                        </div>                        \n                        \n                        <div\n                            style="width: 100%; height: 5${r}; background-color: tan; user-select: none; touch-action: none;"\n                            data-action-drum-key="bd"\n                            data-keyboard-id="${e}-${n++}"\n                            data-highlight-drum="bd+hc"\n                            data-color="sienna"\n                            data-color2="tan"\n                            data-char="O"\n                        >\n                            \x3c!--&nbsp;O-o--\x3e\n                        </div>                    \n                    </div>\n\n                    <div style="width: 33%; user-select: none; touch-action: none;">\n                        <div\n                            style="height: 10${r}; width: 100%; background-color: lightpink; user-select: none; touch-action: none;"\n                            data-action-drum-key="sn"\n                            data-keyboard-id="${e}-${n++}"\n                            data-highlight-drum="sn+hc"\n                            data-color="deeppink"                                                                                    \n                            data-color2="lightpink"\n                            data-char="V"\n                        >\n                            \x3c!--&nbsp;V-v--\x3e\n                        </div>\n                                            \n                        <div \n                            style="width: 100%; height: 5${r}; text-align: center; background-color: lightblue; user-select: none; touch-action: none;"\n                            data-action-drum-key="th"\n                            data-keyboard-id="${e}-${n++}"  \n                            data-color="steelblue"\n                            data-color2="lightblue"\n                            data-char="h"\n                        >\n                            \x3c!--<br/>&nbsp;K-k--\x3e\n                        </div>\n\n                        <div\n                            style="width: 100%; height: 5${r}; text-align: center; user-select: none; touch-action: none;"\n                            data-action-drum="get-bpm-or-stop"\n                        >\n                            \x3c!--data-action-drum-key="bd+hc"\n                            data-keyboard-id="${e}-${n++}"--\x3e\n                            \x3c!--<br/>&nbsp;Q-q--\x3e\n                        </div>\n                    </div>\n                                           \n                    <div \n                        style="font-size: 1.7rem; font-family: monospace; height: 20rem; width: 100%; position: absolute; top: 0; pointer-events: none; user-select: none; touch-action: none; padding-left: .5rem;"\n                        data-name="drum-text-under-board"\n                    >\n                    </div>\n                </div>\n            `.trim()}getContent(e,n){let r=0;const i="rem",a=t.drumNotesInfo,o="display: flex; width: 100%; user-select: none; touch-action: none; font-size: 1.2rem;";return`\n            <div style="user-select: none; touch-action: none; position: relative;">\n                <div style="${o}">\n                    <div \n                        style="background-color: ${a.ho.bodyColor}; width: 33%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.ho.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.ho.bodyColor}"\n                        data-color2="${a.ho.headColor}"\n                        data-char="${a.ho.char}"\n                    >\n                        <br/>${a.ho.vocalism}\n                    </div>\n                    <div \n                        style="background-color: ${a.cc.bodyColor}; width: 33%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.cc.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.cc.bodyColor}"\n                        data-color2="${a.cc.headColor}"\n                        data-char="${a.cc.char}"\n                    >\n                        <br/>${a.cc.vocalism}\n                    </div>\n                    <div \n                        style="background-color: ${a.rc.bodyColor}; width: 34%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.rc.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.rc.bodyColor}"\n                        data-color2="${a.rc.headColor}"\n                        data-char="${a.rc.char}"\n                    >\n                        <br/>${a.rc.vocalism}\n                    </div>                        \n                </div>                        \n                    \n                <div style="${o}">\n                    <div \n                        style="background-color: ${a.th.bodyColor}; width: 33%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.th.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.th.bodyColor}"\n                        data-color2="${a.th.headColor}"\n                        data-char="${a.th.char}"                                                                \n                    >         \n                        <br/>${a.th.vocalism}\n                    </div>\n                    <div \n                        style="background-color: ${a.tm.bodyColor}; width: 33%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.tm.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.tm.bodyColor}"\n                        data-color2="${a.tm.headColor}"\n                        data-char="${a.tm.char}"                                                                \n                    >         \n                        <br/>${a.tm.vocalism}\n                    </div>   \n                    <div \n                        style="background-color: ${a.tl.bodyColor}; width: 34%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.tl.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.tl.bodyColor}"\n                        data-color2="${a.tl.headColor}"\n                        data-char="${a.tl.char}"                                                                \n                    >         \n                        <br/>${a.tl.vocalism}\n                    </div>                        \n                </div>\n\n                <div style="${o}">\n                    <div \n                        style="background-color: ${a.sn.bodyColor}; width: 33%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.sn.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.sn.bodyColor}"\n                        data-color2="${a.sn.headColor}"\n                        data-char="${a.sn.char}"                                                                \n                    >         \n                        <br/>${a.sn.vocalism}\n                    </div>                \n                    <div \n                        style="background-color: ${a.hc.bodyColor}; width: 33%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.hc.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.hc.bodyColor}"\n                        data-color2="${a.hc.headColor}"\n                        data-char="${a.hc.char}"                                                                \n                    >         \n                        <br/>${a.hc.vocalism}\n                    </div>\n                    <div \n                        style="background-color: ${a.bd.bodyColor}; width: 34%; height: 6${i}; text-align: center; user-select: none; touch-action: none;"\n                        data-action-drum-key="${a.bd.note}"\n                        data-keyboard-id="${e}-${r++}"\n                        data-color="${a.bd.bodyColor}"\n                        data-color2="${a.bd.headColor}"\n                        data-char="${a.bd.char}"                                                                \n                    >         \n                        <br/>${a.bd.vocalism}\n                    </div>                        \n                </div>\n                    \n                <div \n                    style="font-size: 1.7rem; font-family: monospace; height: 20rem; width: 100%; position: absolute; top: 0; pointer-events: none; user-select: none; touch-action: none; padding-left: .5rem;"\n                    data-name="drum-text-under-board"\n                >\n                </div>\n            </div>\n        `.trim()}}},5744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBassCells=void 0;const r=n(7526),i=n(7878),a=n(8299),o={но:0,ха:1,са:2,ща:3,жа:4,ла:5,ша:6,за:7,ва:8,фа:9,ра:10,га:11,йа:12,ху:-1,су:-2,щу:-3,жу:-4,лу:-5,шу:-6,зу:-7,ву:-8,фу:-9,ру:-10,гу:-11,йу:-12},s={0:"но",1:"ха",2:"са",3:"ща",4:"жа",5:"ла",6:"ша",7:"за",8:"ва",9:"фа",10:"ра",11:"га",12:"йа","-1":"ху","-2":"су","-3":"щу","-4":"жу","-5":"лу","-6":"шу","-7":"зу","-8":"ву","-9":"фу","-10":"ру","-11":"гу","-12":"йу"},l={0:"н",1:"х",2:"с",3:"щ",4:"ж",5:"л",6:"ш",7:"з",8:"в",9:"ф",10:"р",11:"г",12:"й"},c=["щж ва жщ : 120 90 30 : ноЗаЖу","жщ лу жщ : -30 90 90 30 : ноВуЗа","жщ за жщ : 60 60 90 30 : ноХоЖаЖу","жщ ру щж : -30 90 90 30 : ноЖаЗу","щж ва жщ : 120 90 30 : ноЩаЖа","жщ ру щж : -30 90 30 90 : ноЖаЗу","щж ва жщ : 120 90 30 : ноЙаЛу","жщ лу жщ : -30 90 90 30 : ноЛуЖу","жщ за жщ : 60 60 90 30 : ноНоЗаЗу","жщ ру щж : 60 60 90 30 : ноНоЖаЖу","щж на жщ : 60 60 90 30 : ноНоЩаЩу","жщ су щж : -30 90 : но","щж шу щж : 120 : но","щж хо щж : 90 60 120 60 150: ноЙаЛуЖуЩу"].reduce(((e,t)=>{let n=t.split(":").map((e=>e.trim().replace(/ +/g," ")));const r=`${n[0]}:${n[1]}`;if(e[r]||(e[r]=[]),!e[r].find((e=>e.key===n[2]))){const t=(i=((i=n[2])||"").trim())?(i=function(e){return e[0].toLowerCase()+e.slice(1)}(i)).replace(/([a-z0-9а-яё])([A-ZА-ЯЁ])/g,"$1-$2").toLowerCase():"",s=t.split("-").map((e=>o[e])).filter(a.isPresent);t&&e[r].push({key:t,arr:s})}var i;return e}),{});function d(e){const t={notes:[],codes:[],formula:""};if(!e.notes.length)return t;const n=e.notes.map((e=>i.freqInfoHash[r.Sound.GetNoteLat(e.note)])).filter((e=>e));for(let e=1;e<n.length;e++)n[e].code<n[e-1].code&&(n[e]=i.freqInfoHash[n[e].code+12]);for(let e=0;e<n.length;e++)n[e]=i.freqInfoHash[n[e].code-24];if(t.notes=n.map((e=>e.noteLat)),t.codes=n.map((e=>e.code)),1===t.notes.length)t.formula="х";else for(let e=1;e<t.codes.length;e++){const n=t.codes[e]-t.codes[e-1];t.formula+=l[n]}return t}function u(e,t,n){console.log("bassCells",e),e.forEach(((i,o)=>{const s=e[o+1];let l;s?i.notes.forEach((e=>{e.durQ=s.blockOffsetQ+s.startOffsetQ-(i.blockOffsetQ+i.startOffsetQ)})):i.notes.forEach((e=>{e.durQ=n-(i.blockOffsetQ+i.startOffsetQ)}));for(let e=0;e<t.length&&(t[e].startOffsetQ+t[e].blockOffsetQ<=i.startOffsetQ+i.blockOffsetQ&&(l=t[e]),!(t[e].startOffsetQ+t[e].blockOffsetQ>i.startOffsetQ+i.blockOffsetQ));e++);if(l&&l.notes.length){let e=i.notes.find((e=>"@bd"===e.instName))||i.notes.find((e=>"@sn"===e.instName));if(!e)return void(i.notes=[]);e={durQ:e.durQ,volume:50,id:e.id,lineOffsetQ:e.lineOffsetQ,instCode:"",instName:e.instName};let t="";if("@bd"===e.instName?(t=r.Sound.GetNoteLat(l.notes[0].note),e.note=t[0]+"u"):(t=(0,a.getRandomElement)(l.notes).note,e.note=t[0]+"y"),!t)return void(i.notes=[]);e.instName="$eBass*f",e.instCode="",i.notes=((c=[e]).forEach((e=>{e.durQ&&(e.durQ=e.durQ>10?e.durQ-10:e.durQ)})),c)}else i.notes=[];var c}))}console.log("bassLines",c),t.getBassCells=function(e,t,n){const r=d(e.curr),o=d(e.next),l=o.codes[0]-r.codes[0];let p=function(e,t,n){let r=0,i=[];return e.forEach(((a,o)=>{let s=n;o||(r=t-(a.blockOffsetQ+a.startOffsetQ),r&&i.push(r));const l=e[o+1];l&&(s=l.blockOffsetQ+l.startOffsetQ),i.push(s-(a.blockOffsetQ+a.startOffsetQ))})),i}(t,e.curr.startOffsetQ+e.curr.blockOffsetQ,e.next.startOffsetQ+e.next.blockOffsetQ);const h=`${r.formula} ${s[l]} ${o.formula}:${p.join(" ")}`,f=((0,a.getRandomElement)(c[h]||[])||{key:"",arr:[]}).arr;if(p=p.filter((e=>e>-1)),!f.length||f.length!==t.length)return console.log(`pattern for ${h} not found!`),u(t,[e.curr,e.next],n);let m=r.codes[0],g=[];if(f.forEach((e=>{m+=e,i.freqInfoHash[m]&&g.push(i.freqInfoHash[m])})),!g.length||g.length!==t.length)return console.log(`pattern for ${h} not found!`),u(t,[e.curr,e.next],n);g.forEach(((e,n)=>{let r=t[n],i=r.notes[0];const a=r.notes.find((e=>"@bd"===e.instName)),o=r.notes.find((e=>"@sn"===e.instName));i={id:i.id,volume:50,instName:a&&o?"$cBass*s":"$cBass*f",durQ:p[n],startOffsetQ:i.startOffsetQ,note:e.noteLat},console.log("note",i),r.notes=[i]}))}},8586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyGlComponent=void 0,t.EmptyGlComponent=class{glContainer;constructor(e,t){this.glContainer=e;const n=document.createElement("div");n.innerHTML="empty",n.style.backgroundColor="#fff",this.glContainer.element.appendChild(n)}}},5725:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileTreeGlComponent=void 0;const i=n(5336),a=r(n(3464));t.FileTreeGlComponent=class{glContainer;rootEl;fileTree=[];constructor(e,t){this.glContainer=e;const n=document.createElement("div");n.style.paddingLeft=".5rem",this.rootEl=n,n.style.backgroundColor="#fff",this.glContainer.element.style.overflow="auto",this.glContainer.element.appendChild(n),this.showTopLevel()}clickByFile(e,t){e.style.paddingLeft="0.5rem",e.addEventListener("click",(async()=>{await a.default.readTextFile(t.path),i.ideService.emit(i.ideEvents.openFile,t)}))}async showDirContent(e){this.rootEl.innerHTML=null;const t=document.createElement("div");t.style.paddingLeft=".5rem",t.style.cursor="pointer",t.innerText="...",t.style.fontWeight="700";const n=document.createElement("div");n.style.paddingLeft=".5rem",n.innerText=e.name,n.style.fontWeight="700",this.rootEl.appendChild(t),this.rootEl.appendChild(n),t.addEventListener("click",(()=>{this.showTopLevel()})),e.children&&e.children.forEach((e=>{const t=document.createElement("div");t.innerText=e.name,t.dataset.path=e.path,this.rootEl.appendChild(t),e.isFile&&this.clickByFile(t,e)}))}async showTopLevel(){this.rootEl.innerHTML=null;const e=document.createElement("button");e.innerText="update",e.addEventListener("click",(()=>this.showTopLevel())),this.rootEl.appendChild(e),this.fileTree=await a.default.readdir("motes"),this.fileTree.forEach(((e,t)=>{if(e.isFile)return;const n=document.createElement("div");n.style.paddingLeft=".5rem",n.style.cursor="pointer",n.dataset.path=e.path,n.innerText=e.name,this.rootEl.appendChild(n),n.addEventListener("click",(t=>{this.showDirContent(e)}))}))}}},1134:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontViewerGlComponent=void 0;const ide_service_1=__webpack_require__(5336),file_service_1=__importDefault(__webpack_require__(3464)),loader_1=__webpack_require__(1667),instrument_titles_1=__webpack_require__(2777),common_1=__webpack_require__(4999),muse_1=__webpack_require__(7526),fontLoader=new loader_1.WebAudioFontLoader(null);class FontViewerGlComponent{glContainer;rootEl;constructor(e,t){this.glContainer=e;const n=document.createElement("div");n.style.paddingLeft=".5rem",n.style.backgroundColor="#fff",this.rootEl=n,this.glContainer.element.style.overflow="auto",this.glContainer.element.appendChild(n),this.showTopList()}showTopList(){this.rootEl.innerHTML=null,(0,instrument_titles_1.getInstrumentTitles)().forEach(((e,t)=>{const n=document.createElement("div");n.style.paddingLeft=".5rem",n.style.cursor="pointer",n.style.userSelect="none",n.dataset.index=t,n.innerText=e+" - "+fontLoader.getInstrumentsByGroup(t).length,this.rootEl.appendChild(n),n.addEventListener("click",(n=>{this.showGroupAndItems(e,t)}))}))}showGroupAndItems(e,t){this.rootEl.innerHTML=null;const n=document.createElement("div");n.style.paddingLeft=".5rem",n.style.cursor="pointer",n.innerText="...",n.style.fontWeight="700";const r=document.createElement("div");r.style.paddingLeft=".5rem",r.innerText=e,r.style.fontWeight="700",this.rootEl.appendChild(n),this.rootEl.appendChild(r),n.addEventListener("click",(()=>{this.showTopList()})),fontLoader.getInstrumentsByGroup(t).forEach((e=>{const t=document.createElement("div");t.style.paddingLeft="1rem",t.style.cursor="pointer",t.style.userSelect="none",n.style.cursor="pointer",t.dataset.index=e.variable,t.innerText=e.variable+" - "+e.index,this.rootEl.appendChild(t),t.addEventListener("click",(async()=>{this.loadInstrument(e.index)}))}))}async loadInstrument(code){code=(0,common_1.parseInteger)(code);const info=fontLoader.instrumentInfo((0,common_1.parseInteger)(code));if(!info||window[info.variable])return void(ide_service_1.ideService.useToneInstrument=code);const path=`D:\\audio\\webaudiofontdata\\sound\\${info.fileName}`,text=await file_service_1.default.readTextFile(path),arr=text.split("\n");let preset;for(let e=0;e<arr.length;e++){let t=arr[e].trim();t.startsWith("console")&&(t=""),t.startsWith("var ")&&(t="preset = {"),t.startsWith("};")&&(t="}"),arr[e]=t}eval(arr.filter((e=>!!e)).join("\n")),muse_1.Sound.setToneSound(code,info.variable,preset),ide_service_1.ideService.useToneInstrument=code}}exports.FontViewerGlComponent=FontViewerGlComponent},5336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ideEvents=t.ideService=t.defaultTracks=void 0;const r=n(6963),i=n(7526),a=n(434),o=n(6625),s=new i.Muse.MultiPlayer,l=new i.Muse.MultiPlayer,c=new i.Muse.Ticker(i.Muse.Sound.ctx),d=new i.Synthesizer;d.connect({ctx:i.Muse.Sound.ctx}),d.setSettings(i.Muse.toneAndDrumPlayerSettings),t.defaultTracks=[{name:i.Muse.drumsTrack,board:a.drumBoards.drums,volume:50},{name:"$bass",board:a.toneBoards.bassGuitar,volume:50},{name:"$guitar",board:a.toneBoards.guitar,volume:50},{name:"$harmonica",board:a.toneBoards.bassSolo34,volume:50}];class u extends r.EventEmitter{_lastTrackName="";_lastBoardView="";songStore;dataByTracks={};blocks=[];settings=i.Muse.getFileSettings([]);pitchShift=0;multiPlayer=s;metronome=l;synthesizer=d;ticker=c;boards={};bpmValue=90;get outVolume(){return i.Muse.parseInteger(this.dataByTracks?.total?.volume,o.DEFAULT_OUT_VOLUME)}get lastBoardView(){return this._lastBoardView||(this._lastBoardView=localStorage.getItem("lastBoardView")||"drums"),this._lastBoardView}get lastTrackName(){return this._lastTrackName||(this._lastTrackName=localStorage.getItem("lastTrackName")||""),this._lastTrackName}set lastBoardView(e){this._lastBoardView=e||"drums",localStorage.setItem("lastBoardView",this._lastBoardView)}set lastTrackName(e){this._lastTrackName=e||"",localStorage.setItem("lastTrackName",this._lastTrackName)}editedItems=[];_guid=1;useToneInstrument=i.Muse.DEFAULT_TONE_INSTR;currentEdit={};get guid(){return this._guid++}reset(){}getDataByTracks(e,t){let n={};return e&&e.forEach((e=>{const t=e.isExcluded?0:e.volume,r=e.items||[];n[e.name]={volume:t,isExcluded:e.isExcluded,items:r.reduce(((e,t)=>(e[t.name]={volume:t.volume},e)),{})}})),n.total={volume:i.Muse.isPresent(t)?t:o.DEFAULT_OUT_VOLUME},n}setDataByTracks(e){const t=e||this.songStore.data,n=this.getDataByTracks(t.tracks,t.volume);Object.keys(this.dataByTracks).forEach((e=>{delete this.dataByTracks[e]})),Object.keys(n).forEach((e=>{this.dataByTracks[e]=n[e]}))}}t.ideService=new u,t.ideEvents={openFile:"openFile"}},8933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testMidiText=t.skipEvent=t.unplayedKeysHash=t.getInstrCodesByKeyCodes=t.getLeftKeyCodes=t.getRightKeyCodes=t.getAllMusicKeyCodes=t.leftTopKeys=t.leftDownKeys=t.rightTopKeys=t.rightDownKeys=void 0,t.rightDownKeys={Period:"Period",Comma:"Comma",KeyM:"KeyM",KeyN:"KeyN"},t.rightTopKeys={Equal:"Equal",BracketLeft:"BracketLeft",Semicolon:"Semicolon",Minus:"Minus",KeyP:"KeyP",KeyL:"KeyL",Digit0:"Digit0",KeyO:"KeyO",KeyK:"KeyK",Digit9:"Digit9",KeyI:"KeyI",KeyJ:"KeyJ"},t.leftDownKeys={KeyZ:"KeyZ",KeyX:"KeyX",KeyC:"KeyC",KeyV:"KeyV"},t.leftTopKeys={Digit1:"Digit1",KeyQ:"KeyQ",KeyA:"KeyA",Digit2:"Digit2",KeyW:"KeyW",KeyS:"KeyS",Digit3:"Digit3",KeyE:"KeyE",KeyD:"KeyD",Digit4:"Digit4",KeyR:"KeyR",KeyF:"KeyF"},t.getAllMusicKeyCodes=function(){return{...t.leftTopKeys,...t.rightTopKeys,...t.rightDownKeys,...t.leftDownKeys}},t.getRightKeyCodes=function(){return{...t.rightTopKeys,...t.leftDownKeys,...t.rightDownKeys}},t.getLeftKeyCodes=function(){return{...t.leftTopKeys}},t.getInstrCodesByKeyCodes=function(){return{Digit1:"organ",KeyQ:"organ",KeyA:"organ",Digit2:"guitar*EDM",KeyW:"guitar*EDM",KeyS:"guitar*EDM",Digit3:"guitar*ED",KeyE:"guitar*ED",KeyD:"guitar*ED",Digit4:"guitar*EC",KeyR:"guitar*EC",KeyF:"guitar*EC",Equal:"organ",BracketLeft:"organ",Semicolon:"organ",Period:"organ",Minus:"harm",KeyP:"harm",KeyL:"harm",Comma:"organ",Digit0:"xlphn",KeyO:"xlphn",KeyK:"xlphn",KeyM:"organ",Digit9:"organ",KeyI:"organ",KeyJ:"organ",KeyN:"organ"}},t.unplayedKeysHash={ArrowUp:"ArrowUp",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",End:"End",Home:"Home",PageUp:"PageUp",PageDown:"PageDown",Insert:"Insert",Escape:"Escape"},t.skipEvent=function(e,t){return e.preventDefault(),e.stopPropagation(),t},t.testMidiText="\n<out>\nsimple1@\n\n<simple44@>\n-  : 1   2   3   4   :\n@hc: xxxxxxxxxxxxxxxx:\n@sn:     2       4   :\n@bd: 1       3       :\n\n<simple1@>\n#    j ._i .*._j i . j ._i .*._j i j |\n#    |               |               |\n-  : 1   2   3   4   5   6   7   8   :\n@hc: x x x x x x x x x x x x x x x x :\n@sn:     x  x    x       x  x    x   :\n@bd: x  x     xx     x  x     xx   x :\n\n<simple2@>\n#    j ._i j j*. i j j_. i ._.*j i .*|\n#    |               |               |\n-  : 1   2   3   4   5   6   7   8   :\n@hc: x x x x x x x x x x x x x x x x :\n@sn:     x    x  x       x    x  x  x:\n@bd: x  x  x x     x xx     x  x     :\n\n".trim()},7505:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinePlayer=t.getAudioBufferFromBlob=t.decodeArrayBufferToAudio=void 0;const r=n(7526),i=n(8933),a=n(5336),o=n(5576);async function s(e){return await r.Muse.Sound.ctx.decodeAudioData(e)}function l(e){return e.listSelections()[0].head.line}t.decodeArrayBufferToAudio=s,t.getAudioBufferFromBlob=async function(e){return s(await e.arrayBuffer())};const c=["F1","F2","F3","F4","F5","F6","F7","F8","F10","F11","F12"];function d(e){const t=e?.dataByTracks||{},n={};return Object.keys(t).forEach((e=>{const i=r.Muse.getVolumeFromString(t[e]);n[e]={volume:i}})),n}t.LinePlayer=class{pitchShift=0;recorder;isRecording=!1;pressCount=0;startUpTime=0;noteArr=[];uri="";notesByChannels={left:[],right:[]};keyData;playingKeys={};playingId=0;keySequence=[];beatInput;textInput;multiBuffer;synthesizer;isNote;mode="Digit1";downedKeys={};bpmInfo={bpm:0,lastDownTime:0,pressCount:0,totalMs:0};multiPlayer;lastTickTime=0;currBlock;currRowInfo={first:0,last:0};blocks=[];settings={};bassKeys=(0,i.getLeftKeyCodes)();instrCodeByKeyCode=(0,i.getInstrCodesByKeyCodes)();musicKeyCodes=(0,i.getAllMusicKeyCodes)();playingWithMidi=!1;inputMode="linePlayer";constructor(){}connect(e){this.disconnect(),this.beatInput=e.beatInput,this.textInput=e.textInput,this.multiBuffer=e.multiBuffer,this.isNote=e.isNote||(()=>{}),this.multiPlayer=e.multiPlayer||new r.MultiPlayer,this.synthesizer=e.synthesizer,this.uri=e.uri,this.onConnect()}disconnect(){this.downedKeys={},this.clear(!0),this.stopTick(),this.multiBuffer=null,this.multiPlayer&&this.multiPlayer.stopAndClearMidiPlayer(),this.multiPlayer=null,this.textInput=null,this.synthesizer=null,this.isNote=null,this.lastTickTime=0,this.recorder&&(this.recorder.stopAndSave(),this.recorder=null)}handleGetBpmKey(e,t){}stopSound(e,t){e.split("+").forEach((e=>this.synthesizer.playSound({id:t,keyOrNote:e,print:!1,onlyStop:!0})))}playSound(e,t,n,i,a=0){e.split("+").forEach((e=>this.synthesizer.playSound({id:n,keyOrNote:e,print:!1,instrCode:r.Muse.getInstrCodeBy(t),volume:i/100,pitchShift:a})))}getInstrCodeByKeyCode(e){return this.instrCodeByKeyCode[e]||""}handlePlayKey(e,t,n){if(this.playingKeys[e]&&0===n){const t=this.playingKeys[e];return delete this.playingKeys[e],void t.forEach((e=>{this.stopSound(e.note,e.id)}))}let r=this.bassKeys[e]?this.notesByChannels.left:this.notesByChannels.right;if(r.reduce(((e,t)=>e+t.length),0)&&!this.playingKeys[e]&&1===n){const n=[];r.forEach((r=>{if(!r.length)return;const i=r[0],a=++this.playingId;n.push({id:a,code:e,down:t,note:i.note,up:0,next:0}),r.shift(),this.playSound(i.note,i.instr||this.getInstrCodeByKeyCode(e),a,i.volume,i.pitchShift+this.pitchShift)})),this.playingKeys[e]=n,this.syncCurrentLine()}}soundKeyHandler(e,t){(0,i.skipEvent)(e),1!==t?0!==t||this.synthesizer.playSound({keyOrNote:e.code,pitchShift:r.Muse.parseInteger(this.settings.boardShift[0],0),onlyStop:!0}):this.synthesizer.playSound({keyOrNote:e.code,pitchShift:r.Muse.parseInteger(this.settings.boardShift[0],0),print:!0,onlyStop:!1,instrCode:a.ideService.useToneInstrument})}keyHandler=(e,t)=>{const n=e.code;if(!i.unplayedKeysHash[n]){if(1===t&&("Enter"===n||"Space"===n&&e.ctrlKey))return this.clear(!0),this.getCurrBlockInfo(e),(0,i.skipEvent)(e);if("Delete"===n)return 0===t&&this.synthesizer.clearOut(),(0,i.skipEvent)(e);if(1===t){if(e.repeat||this.downedKeys[n])return(0,i.skipEvent)(e);this.downedKeys[n]=!0}else delete this.downedKeys[n];if("linePlayer"===this.inputMode&&this.currBlock&&this.musicKeyCodes[n])return this.handlePlayKey(e.code,Date.now(),t),1!==t||this.countNotesForPlay()||this.getNextLinesForHandlePlay(),(0,i.skipEvent)(e);if(!c.find((e=>e===n)))return"sound"===this.inputMode?this.soundKeyHandler(e,t):(0,i.skipEvent)(e)}};stopTick(){}playTick(e){}clear(e,t=!1){this.pressCount=0,this.startUpTime=0,this.noteArr=[],this.keyData=null,this.keySequence=[],this.playingId=0,this.notesByChannels.left=[],this.notesByChannels.right=[],e&&(this.bpmInfo={bpm:0,lastDownTime:0,pressCount:0,totalMs:0})}countNotesForPlay(){return this.notesByChannels.left.reduce(((e,t)=>e+t.length),0)+this.notesByChannels.right.reduce(((e,t)=>e+t.length),0)}syncCurrentLine(){const e=this.currRowInfo.first+this.currBlock.startRow;if(l(this.textInput)===e)return;const t=this.textInput;t.setCursor(e+6,0),t.setCursor(e,0)}getNextLinesForHandlePlay(e=!0,t=!1){const n=r.Muse.getNextLinesForHandlePlay({block:this.currBlock,getNextRange:e,currRowInfo:this.currRowInfo,skipLineByType:this.playingWithMidi?"$R":null});this.notesByChannels.left=n.notesByChannels.left,this.notesByChannels.right=n.notesByChannels.right,this.currRowInfo.first=n.rowsRange.first,this.currRowInfo.last=n.rowsRange.last,n.gotoTop&&this.syncCurrentLine()}getCurrBlockInfo(e){const t={blocks:this.blocks,currBlock:null,currRowInfo:this.currRowInfo,excludeIndex:[],midiBlockOut:null,playBlockOut:"",topBlocksOut:[]},n=l(this.textInput);t.currBlock=this.currBlock=t.blocks.find((e=>e.startRow<=n&&e.endRow>=n)),t.currRowInfo.first=n-t.currBlock.startRow,t.currRowInfo.last=n-t.currBlock.startRow,e.ctrlKey&&r.Muse.getMidiConfig(t);const i=this.playingWithMidi;t.playBlockOut&&(this.playingWithMidi=!0,this.multiPlayer.tryPlayMidiBlock({blocks:t.blocks,playBlock:t.playBlockOut,cb:(e,t)=>{"break"!==e&&"finish"!==e||(this.playingWithMidi=!1)},excludeLines:this.settings.exclude,dataByTracks:d(this.settings),pitchShift:r.Muse.parseInteger(this.settings.pitchShift[0])})),t.currBlock&&t.currBlock!==t.midiBlockOut&&(this.getNextLinesForHandlePlay(!1,!i),this.syncCurrentLine()),e.ctrlKey&&e.shiftKey&&(this.recorder&&(this.recorder.break(),this.recorder=null),this.recorder=new o.WavRecorder(this.synthesizer.ctx),this.recorder.start())}onConnect(){let e=this.textInput.getValue()+"\n";this.settings=r.Muse.getFileSettings(r.Muse.getTextBlocks(e)),this.pitchShift=r.Muse.getPitchShiftSetting(this.settings),this.settings.import.length;let t=r.Muse.getTextBlocks(e);t.forEach((e=>{e.rows=e.rows.map((e=>r.Muse.clearEndComment(e).trim()))})),this.blocks=t}setInputMode(e){this.inputMode=e}}},2659:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextEditorGlComponent=t.isSafeKeys=t.safeKeys=t.unplayedKeysHash=t.isObject=void 0;const i=r(n(9059));n(334),n(6292),n(9079),n(4027),n(1992),n(6970),n(2774),n(2162);const a=n(7526),o=r(n(3464)),s=n(7505),l={};function c(e){return!(!e||Array.isArray(e)||"object"!=typeof e)}function d(e,t){return e.preventDefault(),e.stopPropagation(),e.codemirrorIgnore=!0,!!t}t.isObject=c,t.unplayedKeysHash={ArrowUp:"ArrowUp",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",End:"End",Home:"Home",PageUp:"PageUp",PageDown:"PageDown",Insert:"Insert",Escape:"Escape"},t.safeKeys=["ArrowUp","ArrowLeft","ArrowRight","ArrowDown","End","Home","PageUp","PageDown","Insert"],t.isSafeKeys=function(e){const n="string"==typeof e?e:e.code;return!!t.safeKeys.find((e=>e===n))},t.TextEditorGlComponent=class{glContainer;mainEditor;synthesizer=new a.Synthesizer;freqs={};currTool;inputMode=null;downedKeys={};cmWrapper;menuEl;fileInfo;multiPlayer=new a.MultiPlayer;linePlayer=new s.LinePlayer;constructor(e,t){this.glContainer=e,this.createCmEditor(t),this.subscribeGl(),this.subscribeKeys(),this.createSynthesizer()}createSynthesizer(){this.synthesizer.connect({ctx:a.Sound.ctx}),this.synthesizer.setSettings(a.Muse.defaultSynthSettings)}async createCmEditor(e){this.menuEl=document.createElement("div"),this.menuEl.style.height="24px";const t=this.cmWrapper=document.createElement("div");t.setAttribute("contenteditable","true"),this.glContainer.element.appendChild(this.menuEl),this.glContainer.element.appendChild(t);const n=l[e?.componentState.file]||{},r=e.componentState.field||"text",a=(0,i.default)(t,{lineNumbers:!0,mode:"text",styleActiveLine:{nonEmpty:!0}});this.mainEditor=a,this.addCongifBlocks(n),this.fileInfo=e?.componentState?.fileInfo,this.fileInfo?this.setValueByFileInfo(this.fileInfo):this.setValueByField(n,r),this.mainEditor.refresh(),setTimeout((function(){a.refresh()}),1e3)}addCongifBlocks(e){this.menuEl.innerHTML="",e&&Object.keys(e).forEach(((t,n)=>{const r=document.createElement("span");r.innerHTML=t,r.style.color="white",r.style.paddingRight="4px",r.style.paddingTop="4px",r.style.display="inline-block",r.style.cursor="pointer",0===n&&(r.style.paddingLeft="4px"),this.menuEl.appendChild(r),r.addEventListener("click",(()=>{this.setValueByField(e,t)}))}))}async setValueByFileInfo(e){let t=await o.default.readTextFile(e.path);this.mainEditor.setOption("mode","musa"),this.mainEditor.setValue(t)}setValueByField(e,t){if(!e)return;let n=e[t]||"";c(n)&&(n=JSON.stringify(n,null,4)),"settings"===t&&this.mainEditor.setOption("mode","javascript"),"drums"===t&&this.mainEditor.setOption("mode","xml"),this.mainEditor.setValue(n)}subscribeGl(){this.glContainer.on("resize",(()=>{const{width:e,height:t}=this.glContainer;this.mainEditor.setSize(e-4,t-24)}))}handleKeyEvent(e,t){const n=this.inputMode;if(!this.isCommand(e,t))return"linePlayer"===n?this.linePlayer.keyHandler(e,t):"sound"===this.inputMode?this.handleSoundKeyEvent(e,t):"text"===this.inputMode?this.handleTextKeyEvent(e,t):"beat"===n?this.handleBeatKeyEvent(e,t):this.inputMode?void 0:this.handleNoModeKeyEvent(e,t)}handleTextKeyEvent(e,t){if(e.ctrlKey&&e.altKey&&1===t){if("ArrowDown"===e.code){const t=this.mainEditor.listSelections();if(0===t.length)return d(e);const n=t[t.length-1];return this.mainEditor.getLine(n.anchor.line+1),this.mainEditor.addSelection({line:n.anchor.line+1,ch:n.anchor.ch}),d(e)}if("ArrowUp"===e.code){const t=this.mainEditor.listSelections();if(0===t.length)return d(e);const n=t[0];return this.mainEditor.getLine(n.anchor.line-1),this.mainEditor.addSelection({line:n.anchor.line-1,ch:n.anchor.ch}),d(e)}}e.ctrlKey||e.altKey||e.shiftKey}handleBeatKeyEvent(e,t){!e.ctrlKey&&e.altKey}handleNoModeKeyEvent(e,n){t.unplayedKeysHash[e.code]||d(e)}handleSoundKeyEvent(e,t){}subscribeKeys(){this.mainEditor.on("keydown",((e,t)=>{this.handleKeyEvent(t,1)})),this.mainEditor.on("keyup",((e,t)=>{this.handleKeyEvent(t,0)}))}disconnectCurrTool(){this.currTool&&this.currTool.disconnect(),this.currTool=null}setMode(e,t){this.disconnectCurrTool(),"sound"===this.inputMode&&"sound"!==e&&(this.downedKeys={}),this.inputMode=e}isCommand(e,n){const r=e.code;return"F12"===r||(r===t.unplayedKeysHash.Escape?(this.downedKeys[r]=n,!0):"F2"===e.code?(0===n&&this.setMode("text"),d(e,!0)):"F4"===e.code||"F1"===e.code?(0===n&&((this.downedKeys[t.unplayedKeysHash.Escape]||"linePlayer"!==this.inputMode)&&(this.setMode("linePlayer"),this.linePlayer.connect({beatInput:this.mainEditor,textInput:this.mainEditor,synthesizer:this.synthesizer,multiPlayer:this.multiPlayer}),this.currTool=this.linePlayer),"F4"===e.code&&this.linePlayer.setInputMode("linePlayer"),"F1"===e.code&&this.linePlayer.setInputMode("sound")),d(e,!0)):!(!e.ctrlKey||"KeyS"!==e.code)&&("text"===this.inputMode&&this.fileInfo&&o.default.writeTextFile(this.mainEditor.getValue(),this.fileInfo.path),d(e,!0)))}}},5576:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WavRecorder=t.getAudioBufferFromBlob=t.decodeArrayBufferToAudio=void 0;const r=n(7526);async function i(e){return await r.Sound.ctx.decodeAudioData(e)}t.decodeArrayBufferToAudio=i,t.getAudioBufferFromBlob=async function(e){return i(await e.arrayBuffer())},t.WavRecorder=class{chunks=[];ctx;dest;mediaRecorder;breakMe=!1;constructor(e){this.ctx=e}downloadBlob(e="",t){let n=document.createElement("a");n.href=URL.createObjectURL(t),n.innerHTML="Click here to download the file",setTimeout((function(){URL.revokeObjectURL(n.href)}),4e4),setTimeout((function(){n.dispatchEvent(new MouseEvent("click"))}),0),n.download=`${e}.ogg`,document.body.appendChild(n)}start(e=""){e=e||"record",this.chunks=[],this.dest=this.ctx.createMediaStreamDestination(),this.mediaRecorder=new MediaRecorder(this.dest.stream),r.Sound.masterGain.connect(this.dest),this.mediaRecorder.ondataavailable=e=>{this.chunks.push(e.data)},this.mediaRecorder.onstop=async t=>{if(this.breakMe)return;const n=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"});this.downloadBlob(e,n)},this.mediaRecorder.start()}stopAndSave(){this.mediaRecorder.stop(),r.Sound.masterGain.disconnect(this.dest),this.clear()}break(){this.breakMe=!0,this.stopAndSave()}clear(){this.chunks=[],this.dest=null,this.mediaRecorder=null}}},8551:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2062),t),i(n(9107),t),i(n(7038),t),i(n(8777),t)},6083:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardChessCtrl=void 0;const o=n(7526),s=a(n(7900)),l=n(8593),c=n(4999),d=n(4017),u=n(3458),p="px";let h=0,f=0,m=0;t.KeyboardChessCtrl=class{board;liner;userSettings=u.UserSettingsStore.GetUserSettings();get page(){return this.board.page}constructor(e,t){this.board=e,this.liner=t;let n=this.page.pageEl.getBoundingClientRect().width;n=n>400?400:n,h=2*Math.floor(n/16/2),f=h+4,m=Math.floor((h-h/3)/2*2)}chessCellClick(e){if(null===(0,c.parseInteger)(e.dataset.chessTotalOffset,null))return;const t=this.board;e.dataset.selected?(this.board.highlightCellByRowCol(t.activeCell.rowCol,!1),t.setActiveCell(null)):(t.setActiveCell(e),t.highlightCellByRowCol(t.activeCell.rowCol))}subscribeChess(){(0,l.getWithDataAttr)("chess-cell-row-col",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.chessCellClick(e)))})),(0,l.getWithDataAttr)("chess-pony-col-line-ind",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.board.ponyCellClicked()))}))}getChessLine(e){return Array(e).fill(null).map(((e,t)=>({colInd:t,bgColor:"whitesmoke",noteId:0,cellId:0,char:"",startOffsetQ:0,totalOffsetQ:0,underline:!1,durQ:0,octave:""})))}getChessCellFor(e){const t={colInd:0,noteId:0,cellId:0,char:"",octave:"",bgColor:"#eee",underline:!1,startOffsetQ:0,totalOffsetQ:0,durQ:0};if(!e[0])return t;const n=e[0].note[0],r=e[0].note[1],i=this.userSettings.useCyrillicNote?s.mapNoteToCharRus:s.mapNoteToCharLat;return t.cellId=e[0].id,t.char=i[n]||"?",t.bgColor={u:"black",y:"darkblue",o:"darkgreen",a:"lightblue",e:"lightgreen",i:"yellow"}[r]||"gray",t.durQ=e[0].durQ,t}getRowTpl({rowBorderBottom:e}){return`<div style="\n            box-sizing: border-box;\n            position: relative;\n            margin: 0;\n            padding: 0;\n            color: white;                    \n            user-select: none;\n            height: ${f}px;\n            width:${12*h}px;                    \n            border-bottom: ${e}\n        ">\n            %content%\n        </div>`}getColTpl({iRow:e,iCol:t,totalOffsetQ:n,bgColor:r}){return`<span\n            data-chess-cell-line-ind="${e}"\n            data-chess-cell-col="${t}"\n            data-chess-cell-row-col="${e}-${t}"\n            data-chess-cell-id=""\n            data-chess-total-offset="${n}"                        \n            style="\n                box-sizing: border-box;\n                border: 1px solid white;\n                display: inline-block;\n                z-index: 0;\n                position: absolute;\n                width: ${h}${p};\n                height: ${h}${p};\n                background-color: ${r};\n                user-select: none;\n                touch-action: none;\n                text-align: center;\n                left: ${t*h}${p};\n                top: 1px;\n            "\n        ></span>`.trim()}getCellTpl({iRow:e,iCol:t,cellId:n,totalOffsetQ:r,bgColor:i,char:a,textDecoration:o}){return`<span\n            data-chess-cell-line-ind="${e}"\n            data-chess-cell-col="${t}"\n            data-chess-cell-row-col="${e}-${t}"                                                \n            data-chess-cell-id="${n}"\n            data-chess-total-offset="${r}"\n            data-chess-cell-with-id-offset="${r}"\n            data-chess-cell-with-id-row-col="${e}-${t}"                                                                        \n            style="\n                box-sizing: border-box;\n                border: none;\n                display: inline-block;\n                position: absolute;\n                z-index: 0;                            \n                width: ${h-2}${p};\n                height: ${h-2}${p};\n                background-color: ${i};\n                user-select: none;\n                touch-action: none;\n                text-align: center;\n                font-weight: 700;\n                font-size: ${m}${p};\n                line-height: ${m}${p};\n                text-decoration: ${o};\n                left: ${t*h+1}${p};\n                top: 2px;\n            "\n        >${a}</span>`.trim()}getToneChess(e){let t="";const n=e.map(((t,n)=>{const r={row:t,cells:[]},i=e[n+1],a=!!i&&i.blockOffsetQ!==t.blockOffsetQ;r.rowBorderBottom=a?"2px solid black;":"none;",r.cols=this.getChessLine(t.durQ/t.cellSizeQ),r.cols.forEach(((e,n)=>{e.startOffsetQ=t.startOffsetQ+o.Muse.CELL_SIZE*n,e.totalOffsetQ=e.startOffsetQ+t.blockOffsetQ}));const s=this.liner.getOffsetsByRow(t);for(let e of s){const n=(e-t.startOffsetQ)/o.Muse.CELL_SIZE,i=this.liner.getNotesListByOffset(t,e),a=r.cols[n],s=this.getChessCellFor(i);s.colInd=a.colInd,s.startOffsetQ=a.startOffsetQ,s.totalOffsetQ=a.totalOffsetQ,s.octave=a.octave,r.cells.push(s)}return r}));return n.forEach(((e,t)=>{e.cells.forEach((e=>{let r=e.durQ?Math.floor(e.durQ/o.Muse.CELL_SIZE):1,i=e.colInd;for(let e=t;e<n.length&&r;e++){const t=n[e];for(let e=i;e<t.cols.length&&r;e++)t.cols[e].bgColor="#bbb",r--,e===t.cols.length-1&&(i=0)}}))})),n.forEach(((e,n)=>{let r="",i=this.getRowTpl({rowBorderBottom:e.rowBorderBottom});e.cols.forEach((e=>{r+=this.getColTpl({iRow:n,iCol:e.colInd,totalOffsetQ:e.totalOffsetQ,bgColor:e.bgColor})})),e.cells.forEach((e=>{e.cellId&&(r+=this.getCellTpl({iRow:n,iCol:e.colInd,cellId:e.cellId,totalOffsetQ:e.totalOffsetQ,bgColor:e.bgColor,char:e.char,textDecoration:e.underline?"underline":"none"}))})),t+=i.replace("%content%",r)})),{content:t,rowCount:e.length}}getDrumChess(e){let t="";const n=e=>{const t={noteId:0,cellId:0,char:"",bgColor:"lightgray",underline:!1,startOffsetQ:0,totalOffsetQ:0},n={bd:0,sn:0,hc:0};(e=e.filter((e=>"bd"!==e.note&&"sn"!==e.note&&"hc"!==e.note||(n[e.note]=e.id,!1)))).length?(t.char=d.drumNotesInfo[e[0].note]?.char||"?",t.noteId=e[0].id||0):(t.char=n.hc?"_":"",t.noteId=n.hc?n.hc:0),n.bd&&n.sn?(t.noteId=n.bd,t.bgColor="black"):n.bd?(t.noteId=n.bd,t.bgColor=d.drumNotesInfo.bd.headColor):n.sn?(t.noteId=n.sn,t.bgColor=d.drumNotesInfo.sn.headColor):e.length&&(t.bgColor=d.drumNotesInfo[e[0].note]?.headColor||"darkgray"),n.hc&&(t.underline=!0);const r=this.liner.getCellByNoteId(t.noteId);return t.cellId=r?.id,t};return e.forEach(((r,i)=>{const a=e[i+1],o=this.liner.getOffsetsByRow(r),s=a&&a.blockOffsetQ!==r.blockOffsetQ?"2px solid black;":"none;";let l="";const c=(d=r.durQ/r.cellSizeQ,Array(d).fill(null).map((()=>({bgColor:"whitesmoke",noteId:0,cellId:0,char:"",startOffsetQ:0,totalOffsetQ:0,underline:!1}))));var d;c.forEach(((e,t)=>{e.startOffsetQ=r.startOffsetQ+10*t,e.totalOffsetQ=e.startOffsetQ+r.blockOffsetQ}));for(let e of o){const t=(e-r.startOffsetQ)/10,i=this.liner.getNotesListByOffset(r,e),a=c[t],o=n(i);a.cellId=o.cellId,a.noteId=o.noteId,a.bgColor=o.bgColor,a.char=o.char,a.underline=o.underline}c.forEach(((e,t)=>{l+=this.getColTpl({iRow:i,iCol:t,totalOffsetQ:e.totalOffsetQ,bgColor:e.bgColor})})),c.forEach(((e,t)=>{e.cellId&&(l+=this.getCellTpl({iRow:i,iCol:t,cellId:e.cellId,totalOffsetQ:e.totalOffsetQ,bgColor:e.bgColor,textDecoration:e.underline?"underline":"none",char:e.char}))}));let u=this.getRowTpl({rowBorderBottom:s});t+=u.replace("%content%",l)})),{content:t,rowCount:e.length}}getPonyCol(e){let t="";for(let n=0;n<e;n++)t+=`<div \n                style="\n                    height: ${f}px;\n                    width: ${3*h}px"\n                >\n                    <div\n                        data-chess-pony-col-line-ind="${n}"                    \n                        style="\n                            display: none;\n                            margin-left: ${h}px;\n                            width: ${2*h}px;\n                            border: 1px solid black;\n                            height: ${f}px;                            \n                            text-align: center;\n                        "\n                        ></div>\n                </div>`;return t}printChess(e){const t=e.rowCount*f,n=`\n            <div style="display: flex; padding-left: ${h}px;">\n                <div style="width: ${12*h}px; height: ${t}px; user-select: none; touch-action: none;">\n                    ${e.content}\n                </div>\n                <div style="width: ${3*h}px; height: ${t}px;">\n                    ${this.getPonyCol(e.rowCount)}\n                </div>\n            </div>\n        `.trim(),r=(0,l.dyName)("chess-wrapper",this.page.pageEl);return r&&(r.innerHTML=n),this.subscribeChess(),e}printDrumChess(e){this.printChess(this.getDrumChess(e))}printToneChess(e){this.printChess(this.getToneChess(e))}}},434:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardCtrl=t.drumBoards=t.toneBoards=void 0;const o=n(8593),s=n(7526),l=n(4999),c=n(5336),d=n(8760),u=n(6625),p=a(n(9072)),h=n(3352);t.toneBoards={bassGuitar:"bassGuitar",solo34:"solo34",bass34:"bass34",bassSolo34:"bassSolo34",bassBass34:"bassBass34",soloSolo34:"soloSolo34",guitar:"guitar",piano:"guitar"},t.drumBoards={drums:"drums",percussion:"percussion"},["display: inline-block;","border: 1px solid lightgray; border-radius: 0.25rem;","line-height: 0;","user-select: none;","padding: 0; margin: 0; margin-right: .4rem;"].join("");class f{page;boardType;trackName="";liner=new s.LineModel;confirm;notesForCopy=[];linesForCopy;activeCell={id:0,col:0,lineInd:0,rowCol:"",totalOffset:0};get hasIdeItem(){const e=c.ideService.currentEdit;return!!e&&!!e.editPartsNio&&!!e.allSongParts}get hasEditedItems(){return!!c.ideService.editedItems.length}get isMy(){return!(!c.ideService.currentEdit||"my"!==c.ideService.currentEdit.source)}get useLineModel(){return!(!c.ideService.currentEdit||!c.ideService.currentEdit.useLineModel)}get ns(){return c.ideService?.currentEdit?.ns||""}get songId(){return c.ideService.currentEdit.songId}constructor(e,t){this.page=e,this.boardType=t}getEmptyBpmInfo(){return{bpm:0,lastDownTime:0,pressCount:0,totalMs:0}}getMoveButtons(){return`\n            ${p.moveLeftBtn('data-action-move-cell="left"',"",20)}\n            ${p.moveTopBtn('data-action-move-cell="top"',"",20)}\n            ${p.moveDownBtn('data-action-move-cell="bottom"',"",20)}\n            ${p.moveRightBtn('data-action-move-cell="right"',"",20)}\n        `.trim()}addCellDuration(e,t){if(!e)return;const n=this.liner.addCellDuration(e,t);n&&(this.printChess(this.liner.lines),this.highlightCellByRowCol(`${n.row}-${n.col}`),this.activeCell.id=e)}moveCell(e,t){if(!e)return;const n=this.liner.moveCell(e,t);n&&(this.printChess(this.liner.lines),this.highlightCellByRowCol(`${n.row}-${n.col}`),this.activeCell.id=e)}pasteFromClipboard(){if(this.activeCell.rowCol)if(this.notesForCopy.length)this.notesForCopy.forEach((e=>{this.addOrDelNote({note:e,rowCol:this.activeCell.rowCol,totalOffsetQ:this.activeCell.totalOffset})}));else if(this.linesForCopy.length){let e=this.liner.lines[this.activeCell.lineInd];if(!e)return;const t=s.LineModel.CloneLines(this.linesForCopy);let n=this.liner.getMaxCellId()+1,r=this.liner.getMaxNoteId()+1;const i=e.rowInPartId,a=this.liner.lines.filter((e=>e.rowInPartId===i));t.forEach(((e,t)=>{if(t>a.length-1)return;const i=a[t];i.cells=e.cells,i.cells.forEach((e=>{e.id=n++,e.notes.forEach((e=>{e.id=r++}))}))})),this.updateChess()}}copyToClipboard(e){if(this.linesForCopy=[],this.notesForCopy=[],"notes"!==e){if("row"===e){const e=this.liner.lines[this.activeCell.lineInd];if(e&&e.rowInPartId){const e=this.liner.lines[this.activeCell.lineInd].rowInPartId,t=this.liner.lines.filter((t=>t.rowInPartId===e));this.linesForCopy=s.LineModel.CloneLines(t)}}}else this.activeCell.id&&(this.notesForCopy=this.liner.getNotesByOffset(this.activeCell.totalOffset))}subscribeDurationCommands(){(0,o.getWithDataAttrValue)("set-cell-duration-action","add",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.addCellDuration(this.activeCell.id,s.Muse.CELL_SIZE)))})),(0,o.getWithDataAttrValue)("set-cell-duration-action","sub",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.addCellDuration(this.activeCell.id,-s.Muse.CELL_SIZE)))})),(0,o.getWithDataAttr)("copy-notes-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.copyToClipboard("notes")))})),(0,o.getWithDataAttr)("copy-row-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.copyToClipboard("row")))})),(0,o.getWithDataAttr)("paste-notes-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.pasteFromClipboard()))}))}subscribeMoveCommands(){(0,o.getWithDataAttrValue)("action-move-cell","top",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.moveCell(this.activeCell.id,-120)))})),(0,o.getWithDataAttrValue)("action-move-cell","bottom",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.moveCell(this.activeCell.id,120)))})),(0,o.getWithDataAttrValue)("action-move-cell","left",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.moveCell(this.activeCell.id,-s.Muse.CELL_SIZE)))})),(0,o.getWithDataAttrValue)("action-move-cell","right",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.moveCell(this.activeCell.id,s.Muse.CELL_SIZE)))}))}getCellId(e){return s.Muse.parseInteger(e.dataset.chessCellId,0)}setActiveCell(e){this.activeCell=this.getCellInfo(e)}getCellInfo(e){return e?{id:this.getCellId(e),lineInd:(0,l.parseInteger)(e.dataset.chessCellLineInd,0),col:(0,l.parseInteger)(e.dataset.chessCellCol,0),rowCol:e.dataset.chessCellRowCol,totalOffset:(0,l.parseInteger)(e.dataset.chessTotalOffset,0)}:{id:0,col:0,lineInd:0,rowCol:"",totalOffset:0}}highlightCellByRowCol(e,t=!0){if(e=e||this.activeCell.rowCol,(0,o.getWithDataAttr)("chess-cell-row-col",this.page.pageEl).forEach((e=>{e.style.outline=null,e.style.zIndex="0",e.dataset.selected=""})),(0,o.getWithDataAttr)("chess-pony-col-line-ind",this.page.pageEl).forEach((e=>{e.style.display="none"})),t){this.setActiveCell(null);let t=(0,o.getWithDataAttrValue)("chess-cell-with-id-row-col",e)[0];if(t){const e=this.getCellId(t),n=this.liner.getNoteById(e);if(!n)return;(0,o.getWithDataAttrValue)("chess-pony-col-line-ind",t.dataset.chessCellLineInd).forEach((e=>{e.style.display="block",e.innerHTML=s.Muse.parseInteger(n.volume,s.Muse.DEFAULT_VOLUME).toString()+(n.slides?"~":"")}))}t=t||(0,o.getWithDataAttrValue)("chess-cell-row-col",e)[0],t&&(this.setActiveCell(t),t.style.outline="3px solid yellow",t.style.zIndex="1",t.dataset.selected="true",this.highlightInstruments())}}getRowActionsCommands(){return`\n            <div data-edit-row-actions style="display: ${c.ideService.currentEdit?.freezeStructure?"none":"block"}; width: 90%; font-family: monospace; margin: .5rem 0; padding-left: 1rem; user-select: none;">\n                ${p.addLineBtn('data-edit-row-action="add-line"',"")}\n                ${p.insertLineBtn('data-edit-row-action="insert-line"',"")}&emsp;\n                ${p.deleteLineBtn('data-edit-row-action="delete-line"',"red")}\n            </div>        \n        `.trim()}getMoveCommandPanel(e=!0){let t=e?`${p.deleteBtn('data-edit-line-action="delete-cell"')}&emsp;`:"";return`\n            <div style="width: 90%; font-family: monospace; margin: .5rem 0; padding-left: 1rem; user-select: none;">\n                ${this.getMoveButtons()}\n                ${t}\n            </div>\n        `.trim()}getEditCellCommandPanel(e=!0){const t="width: 90%; font-family: monospace; margin: .5rem 0; padding-left: 1rem; user-select: none;";let n=e?`${p.deleteBtn('data-edit-line-action="delete-cell"')}&emsp;`:"",r="";return r+=`\n            <div style="${t}">\n                ${p.minusBtn('data-set-cell-duration-action="sub"',"orange")}\n                ${p.moveTopBtn('data-action-move-cell="top"',"",20)}\n                ${p.plusBtn('data-set-cell-duration-action="add"',"green")}\n                ${p.noteBtn("data-get-note-for-cell-action","blue")}\n                ${p.copyBtn("data-copy-notes-action","black")}\n                ${p.pasteBtn("data-paste-notes-action","black")}\n            </div>\n        `.trim(),r+=`\n            <div style="${t}">\n                ${p.moveLeftBtn('data-action-move-cell="left"',"",20)}\n                ${p.moveDownBtn('data-action-move-cell="bottom"',"",20)}\n                ${p.moveRightBtn('data-action-move-cell="right"',"",20)}\n                ${p.instrumentBtn("data-get-instrument-action","blue")}\n                ${p.copyManyBtn("data-copy-row-action","black")}\n                ${p.emptyBtn("",20)}\n                ${n}\n            </div>\n        `.trim(),r}getDurationCommandPanel(){return`\n            <div style="width: 90%; font-family: monospace; margin: .5rem 0; padding-left: 1rem; user-select: none;">\n                ${p.plusBtn('data-set-cell-duration-action="add"',"green")}\n                ${p.minusBtn('data-set-cell-duration-action="sub"',"orange")}\n                ${p.noteBtn("data-get-note-for-cell-action","blue")}\n                ${p.instrumentBtn("data-get-instrument-action","blue")}\n                ${p.copyBtn("data-copy-notes-action","black")}\n                ${p.copyManyBtn("data-copy-row-action","black")}\n                ${p.pasteBtn("data-paste-notes-action","black")}\n                \n            </div>\n        `.trim()}getRecordCommandPanel(){const e="border-radius: 0.25rem; border: 1px solid lightgray; font-size: 1.1rem; user-select: none;";let t="";return t=`\n            <div style="margin: .5rem 0; padding-left: 1rem; width: 90%; user-select: none; font-family: monospace;">\n                <span\n                    style="${e}"\n                    data-page-action="record"\n                >rec</span>&nbsp;\n                <span\n                    style="${e}"\n                    data-action-type="tick"\n                    data-signature="1:4"\n                >1:4</span>\n                <span\n                    style="${e}"\n                    data-action-type="tick"\n                    data-signature="3:8"                    \n                >3:8</span>&nbsp;\n            </div>\n        `.trim(),t}delete_Cell(e){const t=(0,o.getWithDataAttrValue)("chess-cell-row-col",this.activeCell.rowCol)[0];if(!t)return;const n=(0,l.parseInteger)(t.dataset.chessTotalOffset,null);null!==n&&(this.liner.delete_CellByOffset(n),this.printChess(this.liner.lines),this.highlightCellByRowCol(this.activeCell.rowCol))}addLine(){const e=this.liner.lines[this.activeCell.lineInd];this.liner.addLineAfter(this.activeCell.lineInd,e?.rowInPartId||""),this.setEditingItemDurationAndBlockOffsetByLines(),this.printChess(this.liner.lines),this.highlightCellByRowCol(this.activeCell.rowCol)}insertLine(){const e=this.liner.lines[this.activeCell.lineInd];this.liner.addLineAfter(this.activeCell.lineInd-1,e?.rowInPartId||""),this.setEditingItemDurationAndBlockOffsetByLines(),this.printChess(this.liner.lines),this.highlightCellByRowCol(this.activeCell.rowCol)}delete_Line(){if(!this.activeCell.rowCol)return;const e=this.liner.lines[this.activeCell.lineInd];this.hasEditedItems&&this.liner.lines.filter((t=>t.rowInPartId===e.rowInPartId)).length-1<1||(this.liner.delete_Line(this.activeCell.lineInd,e.rowInPartId),this.setEditingItemDurationAndBlockOffsetByLines(),this.printChess(this.liner.lines),this.highlightCellByRowCol(this.activeCell.rowCol))}getPlayCommandPanel(){const e='<span style="width: .5rem; display: inline-block;"></span>',t="\n            padding: .5rem 0 .25rem 1rem;            \n            user-select: none;\n            border-top: 1px solid gray;\n        ".trim(),n="\n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1rem;\n            user-select: none; touch-action: none;\n        ".trim();let r=`\n            <div data-play-command-panel>\n                <div style="${t}">\n                    %content%                                        \n                </div>\n            </div>\n        `.trim();return r=this.hasIdeItem?r.replace("%content%",`\n                ${p.saveBtn('data-ide-action="save"',"",20)}${e}${e}\n                ${p.stopBtn('data-ide-action="stop"',"",20)}${e}\n                ${p.playBtn('data-ide-action="play-solo-action"',"",20)}${e}\n                ${p.playBtn2('data-ide-action="play-both"',"",20)}${e}\n                ${p.playBtn3('data-ide-action="play-source"',"",20)}${e}\n                <span style="${n}" data-clear-ide-song-action>free</span>\n            `.trim()):r.replace("%content%",`\n                ${p.stopBtn('data-ide-action="stop"',"",20)}${e}\n                ${p.playBtn('data-ide-action="play-solo-action"',"",20)}${e}\n            `.trim()),r}setEditingItemDurationAndBlockOffsetByLines(){this.sort_ByPartAndRowNio(c.ideService.editedItems);let e=0;c.ideService.editedItems.forEach((t=>{let n=this.liner.lines.filter((e=>e.rowInPartId===t.rowInPartId)),r=s.LineModel.GetDurationQByLines(n);t.duration=r,n.forEach((n=>{n.rowInPartId=t.rowInPartId,n.blockOffsetQ=e})),e+=r}))}getRowsForPart(e,t){const n=e.dynamic.filter((e=>{const n=(e.partId||"").trim(),r=s.Muse.getPartNio(e.rowInPartId);return t.partId&&n?t.partId===n:t.partNio===r}));return this.sort_ByPartAndRowNio(n),n}resetBlockOffset(e){e.forEach((e=>{s.LineModel.ClearBlockOffset(e.lines)}))}getPartsWithRows(e){const t={},n=[];return e.parts.forEach((r=>{const i=this.getRowsForPart(e.song,r).filter((t=>!e.useEditingItems||t.track!==this.trackName));e.useEditingItems&&(c.ideService.editedItems.forEach((e=>{if(e.partNio!==r.partNio)return;let t=s.LineModel.CloneLines(this.liner.lines.filter((t=>e.rowInPartId===t.rowInPartId)));i.push({type:this.boardType,track:this.trackName,partId:e.partId,rowInPartId:e.rowInPartId,rowNio:s.Muse.getRowNio(e.rowInPartId),status:"unknown",lines:t})})),this.sort_ByPartAndRowNio(i)),e.resetBlockOffset&&this.resetBlockOffset(i),i.forEach((e=>{const i=s.Muse.getPartNio(e.rowInPartId),a=s.Muse.getRowNio(e.rowInPartId);t[i]||(t[i]={partId:r.partId,rows:[]},n.push(t[i])),t[i][a]||(t[i][a]=[],t[i].rows.push(t[i][a])),t[i][a].push(e)}))})),n}getNotes(e,t){if("drums"===t.type||t.track.startsWith(s.Muse.drumChar)){const n=t.track||s.Muse.drumsTrack;return s.LineModel.GetDrumNotes(e,n,t.lines)}return s.LineModel.GetToneNotes({blockName:e,rows:t.lines,instrName:"$organ",track:t.track||"$unknown"})}buildBlocksForMySong(e,t=!1,n=!1){const r=c.ideService.songStore.data,i=[];c.ideService.currentEdit.editPartsNio.sort(),c.ideService.currentEdit.editPartsNio.forEach((e=>{i.push(s.Muse.getPartInfo(c.ideService.currentEdit.allSongParts[e-1]))}));const a=this.getPartsWithRows({song:r,parts:i,resetBlockOffset:t,useEditingItems:n});let o=[];return a.forEach((t=>{let n=[`<${t.partId} set>`];t.rows.forEach((t=>{let r=0,i=`head_${c.ideService.guid.toString()}`,a=[i];t.forEach((t=>{const n=`temp_${c.ideService.guid.toString()}`,i=s.LineModel.GetDurationQByLines(t.lines);let o=this.getNotes(n,t);o||(o=`<${n} $>\n$organ: ${i}`);const l=s.Muse.getTextBlocks(o)[0];e=[...e,l],r=i>r?i:r,a.push(n)}));const o=s.Muse.getTextBlocks(`<${i} $>\n$organ: ${r}`)[0];e=[...e,o],n.push(a.join(" "))})),o.push(n)})),o.forEach((t=>{const n=s.Muse.getTextBlocks(t.join("\n"))[0];e=[...e,n]})),e}updateChess(){let e=[],t=0;this.songId;const n=c.ideService.songStore.clone();c.ideService.editedItems.forEach((r=>{let i=this.liner.lines.filter((e=>e.rowInPartId===r.rowInPartId));!i.length&&n&&n.dynamic.forEach((e=>{e.rowInPartId===r.rowInPartId&&e.track===this.trackName&&(i=[...i,...e.lines])})),i.length||(i=this.liner.getLinesByMask(r.duration)),i.forEach((e=>{e.rowInPartId=r.rowInPartId,e.blockOffsetQ=t})),e=[...e,...i],t+=r.duration})),this.liner.setData(e),this.printChess(this.liner.lines)}getMidiConfig(e={}){const t=c.ideService.currentEdit;let n=[...t.blocks];this.useLineModel&&(n=this.buildBlocksForMySong(n,e.resetBlockOffset,e.useEditing));const r=t.editPartsNio.reduce(((e,n)=>{const r=t.allSongParts[n-1];let i="";return s.Muse.getPartInfo(r).partNio||(i=` ${s.Muse.getNRowInPartId(n)}`),e.push(`> ${r}${i}`),e}),[]),i={blocks:n,excludeIndex:[],currRowInfo:{first:0,last:0},currBlock:s.Muse.createOutBlock({id:"out",type:"text",bpm:this.page.bpmValue,rows:r,volume:c.ideService.outVolume}),midiBlockOut:null,playBlockOut:null,topBlocksOut:[]};return s.Muse.getMidiConfig(i),i}getRowsByPartActions(e){const t="\n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1rem;\n            user-select: none; touch-action: none;\n        ".trim();return`\n            <span\n                style="${t} color: green;"\n                data-ide-action="add-row"\n                data-part-nio="${e.partNio}"\n                data-part-id="${e.partId}"                    \n            >${d.sings.add}</span>&emsp;\n            <span\n                style="${t} color: red;"\n                data-ide-action="delete-row"\n                data-part-nio="${e.partNio}"\n                data-part-id="${e.partId}"                    \n            >${d.sings.delete}</span>&emsp;\n            \x3c!--span\n                style="${t} color: red;"\n                data-ide-action="test-sheet"\n            >test-sheet</span--\x3e\n        `}getRowsByPartComplexContent(){return this.hasIdeItem?`\n            ${this.getRowsByPartContent()}\n        `.trim():""}getRowsByPartContent(){if(!this.hasIdeItem)return"";const e=c.ideService.currentEdit;let t="\n            display: inline-block;\n            padding: .15rem;\n            margin-right: .5rem; margin-top: .5rem;\n            font-size: .8rem; font-weight: 400;\n            user-select: none; touch-action: none;\n            border: 1px solid gray; border-radius: .3rem;\n        ".trim();const n=this.getMidiConfig(),r=s.Muse.getOutBlocksInfo(n.blocks,n.playBlockOut),i={},a=[];c.ideService.currentEdit.editPartsNio.sort(),c.ideService.currentEdit.editPartsNio.forEach((t=>{const n=s.Muse.getPartInfo(e.allSongParts[t-1]);i[n.partNio]||(i[n.partNio]={part:n,rows:[]},a.push(i[n.partNio]))})),r.rows.forEach((e=>{const t=s.Muse.getPartInfo(e.text);t.partNio&&t.rowNio&&i[t.partNio]&&i[t.partNio].rows.push({partNio:t.partNio,rowNio:t.rowNio,row:e})}));let o="";return a.forEach((n=>{const r=n.part;let i="";c.ideService.currentEdit.freezeStructure||(i=`&emsp;${this.getRowsByPartActions(r)}`),o+=`\n                <div style="padding: .5rem 2rem 0 .5rem; border-top: 1px solid lightgray;">\n                    <span style="margin: .5rem; font-weight: 600;"\n                    >${r.partNio}-${r.ref}</span>\n                    ${i}       \n                </div>\n            `.trim(),o+='<div style="padding: 0 2rem .5rem .5rem; border-bottom: 1px solid lightgray;">',n.rows.forEach((n=>{const i=n.row,a=Math.ceil(i.rowDurationByHeadQ/s.Muse.NUM_120);let l=0;i.rowDurationByHeadQ%s.Muse.NUM_120&&(l=Math.floor(i.rowDurationByHeadQ%s.Muse.NUM_120/10)),o+=`<span\n                    style="${t}"\n                    data-row-in-part-item\n                    data-row-in-part-id="${n.partNio}-${n.rowNio}"                    \n                    data-song-name="${e.songId}"\n                    data-part-nio="${n.partNio}"                    \n                    data-row-nio="${n.rowNio}"\n                    data-part-id="${r.partId}"\n                    data-init-duration="${i.rowDurationByHeadQ}"                                                            \n                >${n.rowNio}:${a+(l?"."+l:"")}</span>`})),o+="</div>"})),o}remove_EditingItem(e){c.ideService.editedItems=c.ideService.editedItems.filter((t=>t.rowInPartId!==e))}addOrRemoveEditingItem(e,t){c.ideService.editedItems.find((t=>t.rowInPartId===e.rowInPartId))?c.ideService.editedItems=c.ideService.editedItems.filter((t=>t.rowInPartId!==e.rowInPartId)):c.ideService.editedItems.push(e)}sort_ByPartAndRowNio(e){return f.Sort_ByPartAndRowNio(e)}static Sort_ByPartAndRowNio(e){e.sort(((e,t)=>{const n=e.partNio?e.partNio:s.Muse.getPartNio(e.rowInPartId),r=t.partNio?t.partNio:s.Muse.getPartNio(t.rowInPartId);if(n<r)return-1;if(n>r)return 1;const i=e.rowNio?e.rowNio:s.Muse.getRowNio(e.rowInPartId),a=t.rowNio?t.rowNio:s.Muse.getRowNio(t.rowInPartId);return i<a?-1:a>a?1:0}))}songRowClick(e){const t={rowInPartId:e.dataset.rowInPartId,songName:e.dataset.songName,partNio:(0,l.parseInteger)(e.dataset.partNio,0),rowNio:(0,l.parseInteger)(e.dataset.rowNio,0),duration:(0,l.parseInteger)(e.dataset.initDuration,0),partId:e.dataset.partId||""};this.addOrRemoveEditingItem(t,e),this.sort_ByPartAndRowNio(c.ideService.editedItems),this.updateView()}resetEditingParts(){c.ideService.currentEdit={},c.ideService.editedItems=[],c.ideService.songStore=null,(0,o.getWithDataAttr)("ide-content",this.page.pageEl).forEach((e=>{e.innerHTML=null})),(0,o.getWithDataAttr)("play-command-panel",this.page.pageEl).forEach((e=>{e.innerHTML=null})),(0,o.getWithDataAttr)("edit-row-actions",this.page.pageEl).forEach((e=>{e.style.display="block"})),this.page.initData(),this.page.setContent()}subscribeIdeEvents(){(0,o.getWithDataAttrValue)("ide-action","play-both",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playBoth()))})),(0,o.getWithDataAttrValue)("ide-action","save",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.saveEditingItems()))})),(0,o.getWithDataAttr)("load-song-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.loadFile()))})),(0,o.getWithDataAttrValue)("ide-action","back-to-parts",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.gotoSong()))})),(0,o.getWithDataAttr)("row-in-part-item",this.page.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>this.songRowClick(e)))})),(0,o.getWithDataAttr)("clear-ide-song-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.resetEditingParts()))})),(0,o.getWithDataAttrValue)("ide-action","play-source",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playActive()))})),(0,o.getWithDataAttrValue)("ide-action","play-solo-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playSolo()))})),(0,o.getWithDataAttrValue)("ide-action","stop",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.page.stop()))})),(0,o.getWithDataAttrValue)("ide-action","add-row",this.page.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>this.addRowInPart(e.dataset.partId,e.dataset.partNio)))})),(0,o.getWithDataAttrValue)("ide-action","delete-row",this.page.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>this.delete_RowFromPart(e.dataset.partId,e.dataset.partNio)))})),(0,o.getWithDataAttrValue)("ide-action","test-sheet",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{(0,o.getWithDataAttr)("app-header-second-row-area").forEach((e=>{e.innerHTML=this.getRowsByPartContent()}))}))}))}gotoSong(){this.page.context.$f7router.navigate(`/mbox/${this.songId}/`)}delete_RowFromPart(e,t){if(e=(e||"").trim(),t=s.Muse.parseInteger(t,0),!e&&!t)return;const n=c.ideService.songStore.data,r=u.SongStore.GetRowsByPart(n.dynamic,e,t).map((e=>s.Muse.getPartRowNio(e.rowInPartId)));this.sort_ByPartAndRowNio(r);const i=r[r.length-1].rowNio;i&&(this.confirm=this.page.context.$f7.dialog.confirm("",`Удалить строку ${i} во всех трэках?`,(()=>{u.SongStore.Delete_RowFromPart(n,e,t,i),c.ideService.songStore.save(),this.remove_EditingItem(`${t}-${i}`),(0,o.getWithDataAttr)("edit-parts-wrapper").forEach((e=>{e.innerHTML=this.getRowsByPartComplexContent(),this.subscribeIdeEvents()})),this.updateView()}),(()=>{})),this.confirm.open())}addRowInPart(e,t){if(t=s.Muse.parseInteger(t,0),!(e=(e||"").trim())&&!t)return;const n=c.ideService.songStore.clone(),r=u.SongStore.GetRowsByPart(n.dynamic,e,t).map((e=>s.Muse.getRowNio(e.rowInPartId))),i=(r.length?Math.max(...r):0)+1,a=`${t}-${i}`;n.dynamic.push({partId:e,rowInPartId:`${t}-${i}`,rowNio:i,type:this.boardType,status:"draft",lines:[this.liner.getEmptyLine(a)],track:this.trackName}),c.ideService.songStore.save(n),(0,o.getWithDataAttr)("edit-parts-wrapper").forEach((e=>{e.innerHTML=this.getRowsByPartComplexContent(),this.subscribeIdeEvents()})),this.updateView()}loadFile(){let e=c.ideService.currentEdit?.songId||"";if(!e)return;const t=c.ideService.songStore.data;t&&function(e,t,n){let r=new Blob([e],{type:"application/text"}),i=window.URL.createObjectURL(r);(function(e,t){let n=document.createElement("a");n.download=t,n.href=e,n.click()})(i,n),window.URL.revokeObjectURL(i)}(JSON.stringify(t,null,2),0,`${e}.txt`)}saveEditingItems(){if(!c.ideService.editedItems.length)return;let e=c.ideService.songStore.clone();const t=c.ideService.editedItems.map((e=>e.rowInPartId)),n=e.dynamic.filter((e=>!t.includes(e.rowInPartId)||t.includes(e.rowInPartId)&&e.track!==this.trackName));c.ideService.editedItems.forEach((e=>{const t=this.liner.lines.filter((t=>t.rowInPartId===e.rowInPartId));t.length&&n.push({track:this.trackName,type:this.boardType,rowInPartId:e.rowInPartId,partId:e.partId,rowNio:e.rowNio,status:"unknown",lines:t})})),e.dynamic=n,c.ideService.songStore.save(e)}getMetronomeContent(){return`\n            <div style="margin: 0 0 1.5rem 1rem; width: 15rem;">\n                ${this.page.getMetronomeContent()}\n            </div>`.trim()}subscribeEditCommands(){(0,o.getWithDataAttrValue)("edit-line-action","delete-cell",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.delete_Cell(e)))})),(0,o.getWithDataAttrValue)("edit-row-action","add-line",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.addLine()))})),(0,o.getWithDataAttrValue)("edit-row-action","insert-line",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.insertLine()))})),(0,o.getWithDataAttrValue)("edit-row-action","delete-line",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.delete_Line()))}))}getTotalOffsetByRowCol(e){if(!e)return null;const t=(0,o.getWithDataAttrValue)("chess-cell-row-col",e)[0];if(!t)return null;const n=(0,l.parseInteger)(t.dataset.chessTotalOffset,null);return null===n?null:n}replaceInstrument(e){const t=e.dataset.replaceInstrumentAction,n=this.activeCell.rowCol;let r=[];if("note"===t){const e=this.getTotalOffsetByRowCol(n);if(null===e)return;r=this.liner.getNotesByOffset(e)}else if("block"===t){const e=this.liner.lines[this.activeCell.lineInd];if(e&&e.rowInPartId){const e=this.liner.lines[this.activeCell.lineInd].rowInPartId;this.liner.lines.filter((t=>t.rowInPartId===e)).forEach((e=>{e.cells.forEach((e=>{e.notes.forEach((e=>{r.push(e)}))}))}))}}else"blocks"===t&&(r=this.liner.getAllNotes());r.forEach((e=>{e.instCode=this.instrCode,e.instName=this.instrName})),this.printChess(this.liner.lines),this.highlightCellByRowCol(n)}addOrDelNote(e){const t="string"==typeof e.note?{note:e.note}:e.note;let n=this.getNoteInfo(t.note);n={...n,durQ:e.durQ||10,instCode:e.instCode||this.instrCode,instName:e.instName||this.instrName,...t};const r=this.liner.getNotesByOffset(e.totalOffsetQ);let i=!1;for(let n of r)n.note===t.note&&(i=!0,this.liner.delete_NoteByNoteAndOffset(e.totalOffsetQ,t.note));if(i)this.printChess(this.liner.lines),this.highlightCellByRowCol(e.rowCol);else{let t=this.liner.addNoteByOffset(e.totalOffsetQ,n);this.printChess(this.liner.lines),this.highlightCellByRowCol(e.rowCol),this.activeCell.id=t.note.id}}addOrDelNoteClick(e){if(!this.activeCell.rowCol)return;const t=this.activeCell.rowCol,n=this.getTotalOffsetByRowCol(t);if(null===n)return;const r="string"==typeof e?e:e.dataset.noteLat;r&&this.addOrDelNote({note:r,rowCol:t,totalOffsetQ:n,durQ:10})}playActive(){if(!this.hasEditedItems)return;this.page.stop();const e=this.getMidiConfig({resetBlockOffset:!0}),t=e.playBlockOut.rows.filter((e=>{const t=s.Muse.getPartInfo(e);return!!c.ideService.editedItems.find((e=>e.rowInPartId===t.rowInPartId))}));if(!t.length)return;const n=s.Muse.createOutBlock({id:"out",type:"set",rows:t,bpm:this.page.bpmValue,volume:c.ideService.outVolume});this.page.multiPlayer.tryPlayMidiBlock({blocks:e.blocks,playBlock:n,bpm:this.page.bpmValue,repeatCount:1,dataByTracks:c.ideService.dataByTracks})}async playSolo(){this.page.stop();for(let e=0;e<1e3;e++){const e=this.getNotes("temp",{track:this.trackName||"$unknown",type:this.boardType,lines:this.liner.lines});if(!e)return;let t=[`<out r1 v${c.ideService.outVolume} >`,"temp",e].join("\n");const n=await this.page.multiPlayer.tryPlayMidiBlock({blocks:t,bpm:this.page.bpmValue});if(this.page.stop(),"break"===n)return}}playBoth(){if(this.page.stop(),!this.hasEditedItems)return;let e=[];const t=this.getMidiConfig({resetBlockOffset:!0,useEditing:!0});let n=t.blocks,r=t.playBlockOut;r.rows.filter((e=>{const t=s.Muse.getPartInfo(e);return!!c.ideService.editedItems.find((e=>e.rowInPartId===t.rowInPartId))})).forEach((t=>{if(this.useLineModel)e.push(`${t}`);else{const r=s.Muse.getPartInfo(t);let i=this.liner.lines.filter((e=>e.rowInPartId===r.rowInPartId));i=this.liner.cloneRows(i),s.LineModel.ClearBlockOffset(i);const a=this.getNotes(c.ideService.guid.toString(),{track:this.trackName,type:this.boardType,lines:i});if(a){const r=s.Muse.getTextBlocks(a)[0];e.push(`${t} ${r.id}`),n=[...n,r]}else e.push(`${t}`)}})),r=s.Muse.createOutBlock({id:"out",type:"set",rows:e,bpm:this.page.bpmValue,volume:c.ideService.outVolume}),this.page.multiPlayer.tryPlayMidiBlock({blocks:n,playBlock:r,bpm:this.page.bpmValue,repeatCount:1,dataByTracks:c.ideService.dataByTracks})}ponyCellClicked(){const e=this.liner.getNoteById(this.activeCell.id);e&&new h.NoteDetailsDialog(this.page.context,this).openDialog(e,(t=>{e.volume=t.volume,e.slides=t.slides,e.durQ!==t.durQ&&(e.durQ=t.durQ)}))}updateRowInPartItems(){(0,o.getWithDataAttr)("row-in-part-item",this.page.pageEl).forEach((e=>{const t=e.dataset.rowInPartId;c.ideService.editedItems.find((e=>e.rowInPartId===t))?e.style.backgroundColor="lightgray":e.style.backgroundColor="white"}))}updateView(){}printChess(e){}highlightInstruments(){}getNoteInfo(e){return{}}get instrName(){return""}get instrCode(){return""}}t.KeyboardCtrl=f},1205:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DrumCtrl=void 0;const o=n(8593),s=n(7526),l=n(4017),c=n(434),d=a(n(9072)),u=n(6083),p=[{note:"ho",alias:"ча"},{note:"cc",alias:"щи"},{note:"rc",alias:"ци"}],h=[{note:"th",alias:"та"},{note:"tm",alias:"тo"},{note:"tl",alias:"ту"}],f=[{note:"hc",alias:"чи"},{note:"sn",alias:"ба"},{note:"bd",alias:"пы"}],m={note:"",headColor:"lightgray",bodyColor:"lightgray",char:"?"};class g extends c.KeyboardCtrl{page;type;bpmInfo=this.getEmptyBpmInfo();mode=null;keyData=null;keySequence=[];tickStartMs=0;board;chess;constructor(e,t){super(e,t),this.page=e,this.type=t,this.chess=new u.KeyboardChessCtrl(this,this.liner),this.board=new l.DrumBoard}highlightInstruments(){(0,o.getWithDataAttr)("add-note-action",this.page.pageEl).forEach((e=>{e.style.fontWeight="400",e.style.backgroundColor="white"})),this.liner.getNotesByOffset(this.activeCell.totalOffset).forEach((e=>{(0,o.getWithDataAttrValue)("add-note-action",e.note,this.page.pageEl).forEach((e=>{e.style.fontWeight="700",e.style.backgroundColor="lightgray"}))}))}updateView(){this.updateRowInPartItems(),this.updateChess()}subscribeCommonCommands(){const e=this.page,t=this.page.pageEl;(0,o.getWithDataAttrValue)("page-action","play-one",t).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playSolo()))})),(0,o.getWithDataAttrValue)("page-action","get-bpm-or-stop",t).forEach((t=>{t.addEventListener("pointerdown",(n=>{if(this.keyData)return this.keyData.next=Date.now(),this.keySequence.push(this.keyData),this.getOut(e.bpmValue,this.keySequence),this.clearRecordData(),void e.stopTicker();const r=this.bpmInfo,i=Date.now();if(r.pressCount++,r.lastDownTime&&(r.totalMs=r.totalMs+(i-r.lastDownTime)),r.lastDownTime=i,r.totalMs){const e=r.totalMs/(r.pressCount-1);r.bpm=Math.round(6e4/e)}t.innerText=""+(r.bpm||"")}))})),(0,o.getWithDataAttrValue)("page-action","record",t).forEach((e=>{e.addEventListener("pointerdown",(t=>{"record"!==this.mode?(this.mode="record",e.style.fontWeight="700"):(this.mode=null,e.style.fontWeight="400")}))})),(0,o.getWithDataAttr)("action-drum-key",t).forEach((t=>{const n=(t.dataset.actionDrumKey||"").split("+")[0];if(!n)return;const r=(t.dataset.actionDrum||"").split("+")[1],i=[n,r].filter((e=>!!e&&!e.startsWith("empty"))),a="cowbell"===n?.3:void 0,s=t.dataset.keyboardId,l=t.dataset.color,c=t.dataset.char;t.addEventListener("pointerdown",(d=>{d.preventDefault(),d.stopImmediatePropagation();const u=Date.now();"record"===this.mode&&this.handleKeyRecord(n,u,l,c,1),i.forEach((t=>{e.synthesizer.playSound({keyOrNote:t,volume:a,id:s,onlyStop:!1})})),r&&(0,o.getWithDataAttrValue)("highlight-drum",t.dataset.actionDrum).forEach((e=>{e.style.border="1px solid black"}))})),t.addEventListener("pointerup",(a=>{a.preventDefault(),a.stopImmediatePropagation();const d=Date.now();if("record"===this.mode)return this.handleKeyRecord(n,d,l,c,0);i.forEach((t=>{e.synthesizer.playSound({keyOrNote:t,id:s,onlyStop:!0})})),r&&(0,o.getWithDataAttrValue)("highlight-drum",t.dataset.actionDrum).forEach((e=>{e.style.border=null}))}))}))}addOrDelNoteClick(e){const t=this.activeCell.rowCol,n=this.getTotalOffsetByRowCol(t);if(null===n)return;const r="string"==typeof e?e:e.dataset.noteLat;r&&this.addOrDelNote({note:r,rowCol:t,totalOffsetQ:n,durQ:1,instName:`@${r}`})}subscribeEditCommands(){super.subscribeEditCommands(),(0,o.getWithDataAttr)("add-note-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.addOrDelNoteClick(e)))}))}subscribeEvents(){this.subscribeCommonCommands(),this.subscribeMoveCommands(),this.subscribeEditCommands(),this.subscribeIdeEvents()}clearRecordData(){this.keyData=null,this.keySequence=[]}clearBpmInfo(){this.bpmInfo=this.getEmptyBpmInfo()}getDrumNotesPanel(){const e="width: 100%; font-family: monospace; margin-top: .5rem; margin-bottom: .5rem; user-select: none;",t="border-radius: 0.25rem; border: 1px solid lightgray; font-size: 1.1rem; user-select: none; touch-action: none;";let n='\n            <div style="display: flex; width: 90%; justify-content: flex-start; user-select: none; margin-bottom: .5rem;">\n                <div style="margin-left: 1rem; margin-right: .5rem;">\n                    %actions%\n                </div>            \n                <div style="border-radius: .5rem; padding-left: .5rem; padding-right: .5rem; border: 1px solid lightgray;">\n                    %instruments%\n                </div>                \n            </div>\n        '.trim(),r="";p.forEach((e=>{const n=l.drumNotesInfo[e.note];r+=`\n                <span\n                    style="${t}"\n                    data-add-note-action="${n.note}"\n                    data-note-lat="${n.note}"\n                >${n.vocalism}</span>\n            `})),r=`<div style="${e}">${r}</div>`;let i="";h.forEach((e=>{const n=l.drumNotesInfo[e.note];i+=`\n                <span\n                    style="${t}"\n                    data-add-note-action="${n.note}"\n                    data-note-lat="${n.note}"                    \n                >${n.vocalism}</span>\n            `})),i=`<div style="${e}">${i}</div>`;let a="";f.forEach((e=>{const n=l.drumNotesInfo[e.note];a+=`\n                <span\n                    style="${t}"\n                    data-add-note-action="${n.note}"\n                    data-note-lat="${n.note}"                    \n                >${n.vocalism}</span>\n            `})),a=`<div style="${e}">${a}</div>`;let o=`\n            <div style="${e}">\n                ${d.emptyBtn("",20)}\n                ${d.moveTopBtn('data-action-move-cell="top"',"",20)}\n                ${d.emptyBtn("",20)}\n                ${d.emptyBtn("",20)}                                                            \n            </div>\n            <div style="${e}">\n                ${d.moveLeftBtn('data-action-move-cell="left"',"",20)}\n                ${d.moveDownBtn('data-action-move-cell="bottom"',"",20)}\n                ${d.moveRightBtn('data-action-move-cell="right"',"",20)}\n                ${d.emptyBtn("",20)}\n            </div>     \n            <div style="${e}">\n                ${d.emptyBtn("",20)}\n                ${d.emptyBtn("",20)}\n                ${d.emptyBtn("",20)}                \n                ${d.deleteBtn('data-edit-line-action="delete-cell"')}\n            </div>               \n        `.trim();return n=n.replace("%instruments%",r+i+a),n=n.replace("%actions%",o),n}getDrumBoard(e){return this.board.getContent(e)}getPatternsContent(){const e="font-size: 1.7rem; margin: .5rem; user-select: none; font-family: monospace;";return`\n            <div style="${e}" data-type="drum-pattern">\n                O-k-T-k-O---V---<br/>                    \n                O-k-T-k-O---O-kt<br/>\n                O-ktK-v-O---O---<br/>\n                O-k-|-k-O-k-V---<br/>\n                O---|-k-O---V---<br/>\n                O---T-k-O---V---<br/>\n                O---T-k-O---O---<br/>                                                        \n            </div>\n            <br/>\n            <div style="${e}" data-type="drum-pattern">\n                O-----k-----<br/>\n                T-----k-----<br/>\n                O-----------<br/>\n                V-----------<br/>\n            </div>\n            <br/>\n            <div style="${e}" data-type="drum-pattern">\n                O-----k-----<br/>\n                T-----k-----<br/>\n                O-----------<br/>\n                O-----k--t--<br/>\n            </div>     \n            <br/>                   \n            <div style="${e}" data-type="drum-pattern">\n                QoxoAoq_<br/>\n                X_qoA_xv<br/>\n                Q_q_Aoxo<br/>\n                X_x_A_xv\n            </div>\n            <br/>\n            <div style="${e}" data-type="drum-pattern">\n                Q_q_Aoq_<br/>\n                X_q_A_xv<br/>\n                Q_q_Aoxo<br/>\n                X_qoA_xv\n            </div>`.trim()}getContent(e,t){this.trackName=t;let n=Object.keys(s.Muse.drumInfo).reduce(((e,t)=>{const n=s.Muse.drumInfo[t],r=t===n.noteLat?t:`${t}:${n.noteLat}`;return e+`\n                <a data-action-drum-key="${n.noteLat}" style="user-select: none;">${r}</a>&emsp;            \n            `.trim()}),"");return`\n            ${this.getDrumBoard(e)}\n            ${this.getRecordCommandPanel()}\n            ${this.getMetronomeContent()}\n            \n            ${this.getPlayCommandPanel()}                            \n            ${this.getRowActionsCommands()}                \n            ${this.getDrumNotesPanel()}\n            \n            <div data-name="chess-wrapper" style="width: 100%;"></div>\n            \n            ${this.getPlayCommandPanel()}\n            \n            <div data-edit-parts-wrapper>\n                ${this.getRowsByPartComplexContent()}                \n            </div>                                \n            \n            <div style="padding-top: 1rem; font-size: 1.5rem; border-top: 1px solid lightgray;">\n                ${n}\n            </div>\n            \n            <div\n                data-name="drum-patterns"                \n                style="width: 90%; padding-left: 2%;"\n            >\n                ${this.getPatternsContent()}               \n        </div>`.trim()}handleKeyRecord(e,t,n,r,i){"record"===this.mode&&(this.keyData||1!==i?this.keyData&&(0===i&&(this.keyData.up=t),1===i&&(this.keyData.next=t,this.keySequence.push(this.keyData),this.keyData={note:e,char:r,code:e,down:t,up:0,next:0,quarterTime:0,quarterNio:0,color:n||"black",color2:""})):this.keyData={note:e,char:r,code:e,down:t,up:0,next:0,quarterTime:0,quarterNio:0,color:n||"black",color2:""})}getOut(e,t){const n=s.LineModel.GetLineModelFromRecord(e,this.tickStartMs,t);this.liner.setData(n),this.printChess(n)}printChess(e){this.chess.printDrumChess(e)}getNoteInfo(e){return l.drumNotesInfo[e]||m}}t.DrumCtrl=g},8777:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardPage=void 0;const i=n(8593),a=n(8342),o=n(1205),s=n(8387),l=n(434),c=n(5336),d=r(n(8161)),u=n(6625),p=n(3458),h="_empty_";t.KeyboardPage=class{props;context;userSettings=p.UserSettingsStore.GetUserSettings();keyboardType=c.ideService.lastBoardView;trackName=c.ideService.lastTrackName;drumCtrl;toneCtrl;playingTick="";bpmRange;tickInfo={quarterTime:0,quarterNio:0};tickNode=null;synthesizer=c.ideService.synthesizer;multiPlayer=c.ideService.multiPlayer;get bpmValue(){return c.ideService.bpmValue}set bpmValue(e){c.ideService.bpmValue=e}get songId(){return c.ideService.currentEdit.songId||h}get isMy(){return!(!c.ideService.currentEdit||"my"!==c.ideService.currentEdit.source)}get ns(){return c.ideService.currentEdit&&c.ideService.currentEdit.ns||""}get pageId(){return this.props.id}get pageEl(){return this.context.$el.value[0]}get el$(){return this.context.$el.value}get setInfo(){return d.default}getId(e){return this.pageId+"-"+e}onWindowResize=()=>{console.log("onWindowResize")};constructor(e,t){this.props=e,this.context=t}clearAppHeaderSecondRowArea(){(0,i.dyName)("app-header-second-row-area").innerHTML=null}onClosePage(){this.clearAppHeaderSecondRowArea(),this.setTrackName(),this.addTracksLink(),window.removeEventListener("resize",this.onWindowResize)}initData(){this.songId===h&&(c.ideService.songStore=new u.SongStore(h,u.MY_SONG,u.SongStore.GetSong(h,u.MY_SONG,!0)))}onMounted(){this.initData(),window.addEventListener("resize",this.onWindowResize),this.el$.html('\n            <div \n                class="page-content"\n                style="padding-top: 0; padding-bottom: 10rem;"\n            >\n                <div\n                    style="display: flex;"\n                    data-name="keyboard-page-wrapper"\n                >\n                </div>\n            </div>'.trim()),setTimeout((()=>this.setContent()),50)}getTracks(){const e=c.ideService?.songStore?.data;return e?e.tracks:c.defaultTracks}getTrackByName(e){return this.getTracks().find((t=>t.name===e))}addTracksLink(e=!1){const t=(0,i.getWithDataAttr)("app-right-header-area")[0];t&&(t.innerHTML=e?'<a data-track-links style="user-select: none; touch-action: none;">\n                <b>TRACK</b>\n            </a>'.trim():null,(0,i.getWithDataAttr)("track-links",t).forEach((e=>{e.addEventListener("pointerup",(()=>{if((0,i.getWithDataAttr)("track-list-content")[0]){const e=(0,i.dyName)("app-header-second-row-area");e&&(e.innerHTML=null)}else this.setTrackListContent(),this.updateTrackList()}))})))}setTrackName(e){const t=this.songId?`href="/mbox/${this.songId}/"`:"",n='<a class="panel-open" data-panel=".panel-left" style="user-select: none; touch-action: none;"><b>MAIN</b></a>',r=t?`&emsp;<a style="user-select: none; touch-action: none;" ${t}><b>BACK</b></a>`:"";(0,i.getWithDataAttr)("app-center-header-area").forEach((n=>{n.innerHTML=e?`<a style="user-select: none; touch-action: none;" ${t}>${e}</a>`:""})),(0,i.getWithDataAttr)("app-left-header-area").forEach((t=>{t.innerHTML=e?`${n}${r}`:n}))}setContent(e=""){let t=this.getTrackByName(e||this.trackName);t=t||c.defaultTracks.find((t=>t.name===e)),t=t||c.defaultTracks.find((e=>e.name===this.trackName)),t=t||c.defaultTracks.find((e=>e.board===this.keyboardType)),t=t||c.defaultTracks[0],this.keyboardType=t.board,this.trackName=t.name,c.ideService.lastBoardView=this.keyboardType,c.ideService.lastTrackName=this.trackName,l.toneBoards[this.keyboardType]?this.setToneContent(this.keyboardType,this.trackName):this.setDrumsContent("drums",this.trackName),this.addTracksLink(!0),this.updateTrackList(),this.setTrackName(t.name),setTimeout((()=>{this.subscribeCommonPageEvents(),this.subscribePageEvents()}),50)}setTrackListContent(){let e="\n            display: inline-block;\n            padding: .15rem;\n            margin-right: .5rem; margin-top: .5rem;\n            font-size: .9rem; font-weight: 400;\n            user-select: none; touch-action: none;\n            border: 1px solid gray; border-radius: .3rem;\n        ".trim();const t=(0,i.dyName)("app-header-second-row-area");if(!t)return;const n=c.ideService?.songStore?.data||null,r=n?n.tracks:c.defaultTracks;let a="";r.forEach((t=>{const n=t.isHardTrack?"text-decoration: underline;":"";a+=`\n                <span \n                    data-set-keyboard-type-action\n                    data-board-type="${t.board}"\n                    data-track-name="${t.name}"\n                    style="${e} ${n}"\n                >${t.label||t.name}</span>                \n            `.trim()})),t.innerHTML=`\n            <div style="padding: 0 0 .5rem .5rem;" data-track-list-content>\n                ${a}\n            </div>\n        `,(0,i.getWithDataAttr)("set-keyboard-type-action",t).forEach((e=>{e.addEventListener("pointerup",(()=>{this.setContent(e.dataset.trackName)}))}))}setRightPanelContent(){}updateTrackList(){const e=(0,i.dyName)("app-header-second-row-area");e&&(0,i.getWithDataAttr)("set-keyboard-type-action",e).forEach((e=>{e.style.backgroundColor="white",e.dataset.trackName===this.trackName&&(e.style.backgroundColor="lightgray")}))}updateRightPanel(){(0,i.getWithDataAttr)("set-keyboard-type-action",(0,i.dyName)("panel-right-content")).forEach((e=>{e.style.color="white",e.dataset.trackName===this.trackName&&(e.style.color="lime")}))}getMetronomeContent(){const e="border-radius: 0.25rem; border: 1px solid lightgray; font-size: 1rem; user-select: none; touch-action: none;";return`\n            \x3c!--div style="margin-bottom: .5rem;">\n                <span\n                    style="${e}"\n                    data-action-type="tick"\n                    data-signature="1:4"\n                >1:4</span>&emsp;\n                <span\n                    style="${e}"\n                    data-action-type="tick"\n                    data-signature="3:8"                    \n                >3:8</span>&emsp;                \n            </div--\x3e\n            <div \n                class="range-slider"\n                data-name="slider"\n                data-label="true"\n                data-min="30"   \n                data-max="230"\n                data-step="1"\n                data-value="100"\n                data-scale="true"\n                data-scale-steps="10"\n                data-scale-sub-steps="5"\n            >\n            </div>\n        `}subscribeMetronomeEvents(){(0,i.getWithDataAttr)("tick-trigger",this.pageEl)?.forEach((e=>{e.addEventListener("click",(t=>{this.playTick(e?.dataset?.tickTrigger)}))})),(0,i.getWithDataAttrValue)("action-type","tick",this.pageEl)?.forEach((e=>{e.addEventListener("click",(()=>this.playTick3(e.dataset.signature)))})),(0,i.getWithDataAttrValue)("action-type","test",this.pageEl)?.forEach((e=>{e.addEventListener("click",(e=>this.playTick3()))})),(0,i.getWithDataAttr)("set-bmp-action",this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(()=>{this.bpmRange.setValue(parseInt(e?.dataset?.bpm,10)||100),this.playTick(this.playingTick)}))}))}setDrumsContent(e,t){this.drumCtrl=new o.DrumCtrl(this,e);const n=`<div style="width: 100%; max-width: 400px;" keyboard-instanse>\n            ${this.drumCtrl.getContent(e,t)}\n        </div>`;(0,i.dyName)("keyboard-page-wrapper").innerHTML=n,this.drumCtrl.updateView(),this.bpmRange=this.context.$f7.range.create({el:(0,i.dyName)("slider",this.pageEl),on:{changed:e=>{this.bpmValue=e.value,this.playingTick&&this.playTick(this.playingTick)}}}),setTimeout((()=>{this.bpmRange.setValue(this.bpmValue)}),100)}setToneContent(e,t){this.toneCtrl=new s.ToneCtrl(this,this.keyboardType);const n=`<div style="width: 100%; max-width: 400px;" keyboard-instanse>\n            ${this.toneCtrl.getContent(e,t)}\n        </div>`;(0,i.dyName)("keyboard-page-wrapper").innerHTML=n,this.toneCtrl.updateView(),this.bpmRange=this.context.$f7.range.create({el:(0,i.dyName)("slider",this.pageEl),on:{changed:e=>{this.bpmValue=e.value,this.playingTick&&this.playTick(this.playingTick)}}}),setTimeout((()=>{this.bpmRange.setValue(this.bpmValue)}),100)}subscribeRightPanelEvents(){(0,i.getWithDataAttr)("set-keyboard-type-action",(0,i.dyName)("panel-right-content")).forEach((e=>{e.addEventListener("pointerdown",(()=>{this.setContent(e.dataset.trackName)}))}))}subscribeCommonPageEvents(){(0,i.getWithDataAttrValue)("action-type","stop",this.pageEl)?.forEach((e=>{e.addEventListener("click",(e=>this.stop()))}))}subscribePageEvents(){l.toneBoards[this.keyboardType]?(this.subscribeMetronomeEvents(),this.toneCtrl.subscribeEvents()):"drums"===this.keyboardType&&(this.subscribeMetronomeEvents(),this.drumCtrl.subscribeEvents())}getTracksContent(){return this.setInfo?.tracks?.length?this.setInfo.tracks.reduce(((e,t)=>(e+=`\n        <div class="row">\n          <button id="${this.getId("action-play-"+t.key)}" class="button col">${t.name||t.key}</button>\n          </div>\n        `).trim()),`\n        <div class="row">\n          <button id="${this.getId("action-stop")}" class="button col">stop</button>\n        </div>                  \n    `):""}stopTicker(){c.ideService.ticker.stop(),c.ideService.synthesizer.playSound({keyOrNote:"cowbell",id:"ticker",onlyStop:!0}),this.tickNode&&(this.tickNode.stop(),this.tickNode=null)}playTick3(e){this.stopTicker(),c.ideService.ticker.createTickSource({qms:Math.round(6e4/this.bpmValue),preset1:c.ideService.synthesizer.instruments.drum_56,preset2:c.ideService.synthesizer.instruments.drum_80,repeat:100,signature:e,cb:e=>{this.tickNode=e.ab,this.drumCtrl&&(this.drumCtrl.tickStartMs=e.startTimeMs),this.toneCtrl?.recData&&(this.toneCtrl.recData.startTimeMs=e.startTimeMs)}})}playTick2(e){this.tickInfo={quarterTime:Date.now(),quarterNio:-1},c.ideService.ticker.tickByBpm({bpm:this.bpmValue},(()=>{c.ideService.synthesizer.playSound({keyOrNote:"cowbell",id:"ticker",onlyStop:!0}),c.ideService.synthesizer.playSound({keyOrNote:"cowbell",id:"ticker",onlyStop:!1}),this.tickInfo={quarterTime:Date.now(),quarterNio:this.tickInfo.quarterNio+1}}))}playTick(e){e=e||"",this.playingTick=e,c.ideService.metronome.stopAndClearMidiPlayer();const t=a.standardTicks[this.playingTick];if(!t)return void(this.playingTick="");const n=`\n        <out r1000000>\n        tick\n\n        ${t}\n        `;c.ideService.metronome.tryPlayMidiBlock({blocks:n,bpm:this.bpmValue})}async tryPlayTextLine({text:e,repeat:t}){return c.ideService.multiPlayer.tryPlayTextLine({text:e,repeat:t})}stop(){c.ideService.multiPlayer.stopAndClearMidiPlayer(),c.ideService.metronome.stopAndClearMidiPlayer(),this.stopTicker()}async play(e,t){c.ideService.multiPlayer.tryPlayMidiBlock({blocks:e,repeatCount:t})}}},7900:(e,t)=>{"use strict";function n(e,n,r){e=e||"";let i=t.mainBgColor,a="&nbsp;";return 0!==n&&12!==n||(a=t.mapNoteToCharLat[e[0]]||a),0!==n&&3!==n&&5!==n&&7!==n&&9!==n&&12!==n||(i=t.darkBgColor),{bgColor:i,borders:"border: 1px solid black;",text:a}}function r(e){let t="#ccc";return"d"===(e=e||"")[0]&&(t="white"),e[0],e[0],"n"===e[0]&&(t="white"),e[0],e[0],e[0],e[0],"z"===e[0]&&(t="white"),e[0],e[0],"b"===e[0]&&(t="white"),{bgColor:t,borders:"border: none;",text:"&nbsp;"}}function i(e){const t=e.keyboardId||"",n=e.fontSize||"1.3rem",r=e.cellWidth||e.cellSize||"1.5rem",i=e.cellHeight||e.cellHeight||"1.5rem";let a=1;return(o,s,l,c)=>{o[0];let d=e.cellStylesFn(o,l,c);return`<div\n            style="\n            box-sizing: border-box;    \n            margin: 0;\n            padding: 0;\n            display: inline-block;\n            width: ${r};\n            height: ${i};\n            user-select: none;\n            touch-action: none;\n            font-size: ${n};\n            line-height: ${n};\n            font-weight: 400;\n            text-align: center;\n            color: black;\n            ${d.borders}        \n            background-color: ${d.bgColor};"                \n            data-note-key="${o}"\n            data-name="note-key-${o}"\n            data-note-lat="${o}"\n            data-keyboard-id="${t}"\n            data-note-cell-guid="${a++}"\n            data-col="${c}"\n            data-row="${l}"\n            data-bg-color="${d.bgColor}"\n        >${d.text}</div>`.replace(/\n/g," ").replace(/ +/g," ")}}function a(e){return"bassSolo34"===e||"soloSolo34"===e||"bassBass34"===e||"bass34"===e||"solo34"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.getPatternsList=t.getVerticalKeyboard=t.isT34=t.harmonicaKeys=t.guitarKeys=t.bassGuitarKeys=t.getKeyFn=t.getHarmonicaCellStyles=t["getGuitarСellStyles"]=t.mapNoteToCharRus=t.mapNoteToCharLat=t.darkBgColor=t.mainBgColor=t.lightBgColor=t.instrName=t.octaveColor=t.organInstr=t.rockGuitarInstr=t.cleanGuitarInstr=t.bassGuitarInstr=void 0,t.bassGuitarInstr=374,t.cleanGuitarInstr=276,t.rockGuitarInstr=327,t.organInstr=182,t.octaveColor={u:"black",y:"darkblue",o:"darkgreen",a:"lightblue",e:"lightgreen",i:"yellow"},t.instrName={327:"$egit*drp",321:"$egit*drpm",276:"$guit*ec",374:"$cBass*f",182:"$organ*r"},t.lightBgColor="#eee",t.mainBgColor="#ccc",t.darkBgColor="#aaa",t.mapNoteToCharLat={d:"C",t:"t",r:"D",n:"n",m:"E",f:"F",v:"v",s:"G",z:"z",l:"A",k:"k",b:"B"},t.mapNoteToCharRus={d:"Д",t:"т",r:"Р",n:"н",m:"М",f:"Ф",v:"в",s:"С",z:"з",l:"Л",k:"к",b:"Б"},t["getGuitarСellStyles"]=n,t.getHarmonicaCellStyles=r,t.getKeyFn=i,t.bassGuitarKeys=[["bj","mu","lu","ry","sy","do","fo"],["du","fu","ku","ny","zy","to","vo"],["tu","vu","bu","my","ly","ro","so"],["ru","su","dy","fy","ky","no","zo"],["nu","zu","ty","vy","by","mo","lo"],["mu","lu","ry","sy","do","fo","ko"],["fu","ku","ny","zy","to","vo","bo"],["vu","bu","my","ly","ro","so","da"],["su","dy","fy","ky","no","zo","ta"],["zu","ty","vy","by","mo","lo","ra"],["lu","ry","sy","do","fo","ko","na"],["ku","ny","zy","to","vo","bo","ma"],["bu","my","ly","ro","so","da","fa"],["dy","fy","ky","no","zo","ta","va"],["ty","vy","by","mo","lo","ra","sa"],["ry","sy","do","fo","ko","na","za"],["ny","zy","to","vo","bo","ma","la"],["my","ly","ro","so","da","fa","ka"],["fy","ky","no","zo","ta","va","ba"],["vy","by","mo","lo","ra","sa","de"],["sy","do","fo","ko","na","za","te"],["zy","to","vo","bo","ma","la","re"],["ly","ro","so","da","fa","ka","ne"],["ky","no","zo","ta","va","ba","me"],["by","mo","lo","ra","sa","de","fe"],["do","fo","ko","na","za","te","ve"],["to","vo","bo","ma","la","re","se"],["ro","so","da","fa","ka","ne","ze"],["no","zo","ta","va","ba","me","le"],["mo","lo","ra","sa","de","fe","ke"],["fo","ko","na","za","te","ve","be"],["vo","bo","ma","la","re","se","di"],["so","da","fa","ka","ne","ze","ti"],["zo","ta","va","ba","me","le","ri"],["lo","ra","sa","de","fe","ke","ni"],["ko","na","za","te","ve","be","mi"]],t.guitarKeys=[["bj","mu","lu","ry","sy","by","mo"],["du","fu","ku","ny","zy","do","fo"],["tu","vu","bu","my","ly","to","vo"],["ru","su","dy","fy","ky","ro","so"],["nu","zu","ty","vy","by","no","zo"],["mu","lu","ry","sy","do","mo","lo"],["fu","ku","ny","zy","to","fo","ko"],["vu","bu","my","ly","ro","vo","bo"],["su","dy","fy","ky","no","so","da"],["zu","ty","vy","by","mo","zo","ta"],["lu","ry","sy","do","fo","lo","ra"],["ku","ny","zy","to","vo","ko","na"],["bu","my","ly","ro","so","bo","ma"],["dy","fy","ky","no","zo","da","fa"],["ty","vy","by","mo","lo","ta","va"],["ry","sy","do","fo","ko","ra","sa"],["ny","zy","to","vo","bo","na","za"],["my","ly","ro","so","da","ma","la"],["fy","ky","no","zo","ta","fa","ka"],["vy","by","mo","lo","ra","va","ba"],["sy","do","fo","ko","na","sa","de"],["zy","to","vo","bo","ma","za","te"],["ly","ro","so","da","fa","la","re"],["ky","no","zo","ta","va","ka","ne"],["by","mo","lo","ra","sa","ba","me"],["do","fo","ko","na","za","de","fe"],["to","vo","bo","ma","la","te","ve"],["ro","so","da","fa","ka","re","se"],["no","zo","ta","va","ba","ne","ze"],["mo","lo","ra","sa","de","me","le"],["fo","ko","na","za","te","fe","ke"],["vo","bo","ma","la","re","ve","be"],["so","da","fa","ka","ne","se","di"],["zo","ta","va","ba","me","ze","ti"],["lo","ra","sa","de","fe","le","ri"],["ko","na","za","te","ve","ke","ni"]],t.harmonicaKeys=[["zi","li","ki","bi"],["mi","fi","vi","si"],["di","ti","ri","ni"],["ze","le","ke","be"],["me","fe","ve","se"],["de","te","re","ne"],["za","la","ka","ba"],["ma","fa","va","sa"],["da","ta","ra","na"],["zo","lo","ko","bo"],["mo","fo","vo","so"],["do","to","ro","no"],["zy","ly","ky","by"],["my","fy","vy","sy"],["dy","ty","ry","ny"],["zu","lu","ku","bu"],["mu","fu","vu","su"],["du","tu","ru","nu"]],t.isT34=a,t.getVerticalKeyboard=function(e){const t=e.keyboardId||"",o=a(e.type),s=e.cellWidth||e.cellSize||1.8,l=i({keyboardId:t,cellWidth:`${s}rem`,cellHeight:`${e.cellHeight||e.cellSize||1.8}rem`,fontSize:"1.3rem",cellStylesFn:o?r:n});let c="";e.keys[0]&&e.keys[0].length&&(c=`min-width: ${s*e.keys[0].length+.1}rem;`);let d=`\n        <div style="\n            font-family: monospace;\n            user-select: none;\n            touch-action: none;\n            ${c}                \n            data-name="keyboard-${t}"\n        >%tpl%</div>\n    `.trim(),u="";return e.keys.forEach(((e,t)=>{u+="<div>",e.forEach(((e,n)=>{u+=l(e,e,t,n)})),u+="</div>"})),d=d.replace("%tpl%",u),d},t.getPatternsList=function(e){const t=[];let n="";return["\n            (A) о... наОмаЩу\n            (A) луНаЩаСу\n            (D) луЛуСуЛу\n            (D) щаСаСаСа\n            (E) суЙуЙаЙу\n            (A) щаНаЩаСу\n            (D) луЛуСуЛу\n            (D) щаСаСаСаВу","\n            (A) о... наОмаЩу\n            (C) саМаЩаЛу\n            (F) луСуЛуО\n            (G) щаОЖуЛа\n            (C) саЛаЛаМу\n            (F) щаСуЛуМа\n            (G) саЛуСуМа\n            (A) саОзуМа\n            (E) луОоО\n            (E) оОлуЛуСуЛу\n            (E) заОоО\n            (E) оОлуЛуСуЛу\n            (J) гаНуСуСуСа\n            (D) луЛуСу\n            (A) лу... наОмаЩу","\n            (A) луНаЩаСу\n            (D) луЛуСуЛу\n            (D) щаОЛаО\n            (F) саМуСаЛа\n            (V) лаНаСуМу\n            (A) щаЩуСаЩу\n            (D) лаСаСаОЗу            \n            "].forEach((e=>{const n=(e=e.trim()).split("\n").map((e=>e.trim())).filter((e=>e));t.push(n)})),t.forEach((e=>{n+='<div data-type="pattern-block" style="margin-bottom: .5rem;">',e.forEach((e=>{n+=`<p data-type="pattern-item" style="margin: 0; padding: 0;">${e}</p>`})),n+="</div>"})),n}},8387:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ToneCtrl=void 0;const o=n(8593),s=n(5336),l=n(7526),c=n(434),d=a(n(7900)),u=n(6083),p=n(3458);class h extends c.KeyboardCtrl{page;boardType;userSettings=p.UserSettingsStore.GetUserSettings();_instrCode=l.Muse.DEFAULT_TONE_INSTR;playingNote={};lastPlayingNote="";offset=0;isMemoMode=!1;realBoardType="";isRecMode=!1;memoBuffer=[];memoBuffer2=[];recData={startTimeMs:0,endTimeMs:0,sequence:[],keys:{}};boardPopup;chess;lastNoteCellGuid="";get instrName(){const e=l.Muse.getInstrNameByCode(this.instrCode);return e?"$"+e:""}get instrCode(){return this._instrCode}constructor(e,t){super(e,t),this.page=e,this.boardType=t,this.chess=new u.KeyboardChessCtrl(this,this.liner),this._instrCode="bassGuitar"===t?d.bassGuitarInstr:"guitar"===t?d.rockGuitarInstr:d.organInstr}getGuitarBoard(e,t){let n=(t=t||this.getGuitarSettings()).stringCount,r=0;"bassGuitar"===e&&4===n&&(r=1),"guitar"===e&&6===n&&(r=1);let i=d.bassGuitarKeys.slice(t.offset,t.offset+13);return i=i.map((e=>e.slice(r,n+r))),d.getVerticalKeyboard({keyboardId:"base",type:e,keys:i,cellSize:1.8})}getBeatContent(){const e="\n            border: 1px solid lightgray;\n            font-size: 1.1rem;\n            margin: 0;\n            width: 100%;\n            background-color: whitesmoke;\n            height: 5rem;            \n            user-select: none;\n            touch-action: none;\n        ".trim();return`\n        <div\n            data-action-tone="record-beat-wrapper"\n            style="margin: .5rem; display: none; width: 80%;"\n        >\n            <div\n                data-action-tone="record-beat"\n                data-id="beat1"\n                style="${e}"\n            >beat me</div>\n            <div\n                data-action-tone="record-beat"\n                data-id="beat2"\n                style="${e}"\n            >beat me</div>\n            <div\n                data-action-tone="record-beat"\n                data-id="beat3"\n                style="${e}"\n            >beat me</div>                \n            <div\n                data-action-tone="record-beat"\n                data-id="stop"\n                style="${e} color: red;"\n            >STOP</div>\n            <br/>\n        </div>`.trim()}getMusicInfoContent(){return'<div style="margin: .5rem;">\n            <b>ДО</b> - С<br/>\n                до диез - С# или <b>t</b> <br/>\n                ре бемоль - Db или <b>t</b> <br/>\n            <b>РЕ</b> - D <br/>\n                ре диез - D# или <b>n</b> <br/>\n                ми бемоль - Eb или <b>n</b> <br/>\n            <b>МИ</b> - E <br/>\n            <b>ФА</b> - F <br/>\n                фа диез - F# или <b>v</b> <br/>\n                соль бемоль - Gb или <b>v</b> <br/>\n            <b>СОЛЬ</b> - G <br/>\n                соль диез - G# или <b>z</b> <br/>\n                ля бемоль - Ab или <b>z</b> <br/>\n            <b>ЛЯ</b> - A <br/>\n                ля диез - A# или <b>k</b> <br/>\n                си бемоль - Hb или B или <b>k</b> <br/>\n            <b>СИ</b> - H или B <br/>\n        </div>'.trim()}getGuitarRightSide(e,t){const n="border-radius: 0.25rem; border: 1px solid lightgray; font-size: 1.2rem; user-select: none; touch-action: none;";let r="";return"guitar"===e&&(r=`\n                <div>\n                    <span data-action-set-string-count="6" style="${n}">6s</span>\n                    <span data-action-set-string-count="7" style="${n}">7s</span>                                    \n                </div>\n            `.trim()),"bassGuitar"===e&&(r=`\n                <div>\n                    <span data-action-set-string-count="4" style="${n}">4s</span>\n                    <span data-action-set-string-count="5" style="${n}">5s</span>                    \n                    <span data-action-set-string-count="6" style="${n}">6s</span>                                        \n                </div>\n            `.trim()),`\n            ${r}<br/>\n            <span data-action-tone="set-offset-up" style="${n}">up</span>&emsp;\n            <span data-action-tone="set-offset-down" style="${n}">down</span><br/>\n            <span data-action-tone="open-guitar-board" style="${n}">sound</span><br/><br/>            \n            <span data-action-tone="fix-board-cell" style="${n} font-size: 1.4rem; background-color: yellow; ">fix</span><br/><br/>\n            <span data-action-tone="unfix-board-cell" style="${n}">unfix</span><br/><br/>\n            <span data-action-tone="memo-mode" style="${n}">memo</span><br/><br/>\n            <span data-action-tone="memo-clear" style="${n} color: red;">&times;mem</span><br/><br/>\n        `.trim()}getHarmonicaBoard(e){let t=d.harmonicaKeys.slice(3),n=d.harmonicaKeys.slice(0,15);return"solo34"===e||"soloSolo34"===e?(t=d.harmonicaKeys.slice(0,15),n=d.harmonicaKeys.slice(0,15)):"bass34"!==e&&"bassBass34"!==e||(t=d.harmonicaKeys.slice(3),n=d.harmonicaKeys.slice(3)),`\n            <div style="\n                margin: 0;\n                padding: 1rem 1rem 1rem 1rem;\n                user-select: none;\n                touch-action: none;\n                display: flex;\n                justify-content: space-between;\n                position: relative;"\n            >\n                ${d.getVerticalKeyboard({keyboardId:"base",type:e,keys:t,cellWidth:2,cellHeight:2})}            \n                <div style="width: 1rem; height: {size*rows}rem; user-select: none; touch-action: none;"></div>\n                ${d.getVerticalKeyboard({keyboardId:"solo",type:e,keys:n,cellWidth:2,cellHeight:2})}\n                <div\n                    style="font-size: 2rem;\n                    font-family: monospace;\n                    width: 100%;\n                    position: absolute;\n                    top: 0;\n                    pointer-events: none;\n                    user-select: none;\n                    touch-action: none;\n                    padding-left: .5rem;"\n                    data-type="text-under-board"\n                ></div>            \n            </div>`.trim()}getHarmonicaContent(e){const t="border-radius: 0.25rem; border: 1px solid lightgray; font-size: 1.2rem; user-select: none; touch-action: none;",n=this.useThisBoard,r=(e,t)=>`<span data-use-board-type="${e}" style="background-color: ${e===n?"lime":"white"}; padding: .15rem;">${t}</span>`;return`\n            ${this.getHarmonicaBoard(e)}\n            <div style="\n                width: 90%;\n                margin: 0;\n                padding: .5rem;\n                padding-left: 1rem;\n                user-select: none;"\n            >\n                <span data-action-tone="memo-mode" style="${t}">memo</span>&emsp;\n                <span data-action-tone="memo-clear" style="${t} color: red;">&times;mem</span>&emsp;\n                <span data-get-note-for-cell-action style="${t}">pop</span>                \n            </div>\n            \n            ${this.getBeatContent()}\n            ${this.getRecordCommandPanel()}\n            ${this.getMetronomeContent()}\n            ${this.getPlayCommandPanel()}\n            ${this.getRowActionsCommands()}            \n            ${this.getEditCellCommandPanel()}\n\n            <div data-name="chess-wrapper" style="width: 100%;"></div>\n            \n            ${this.getEditCellCommandPanel()}            \n            ${this.getPlayCommandPanel()}\n            \n            <div data-edit-parts-wrapper>\n                ${this.getRowsByPartComplexContent()}                \n            </div>\n            \n            <div style="margin: 1rem;">\n                use board:&emsp;\n                ${r("soloSolo34","SS")}&emsp;\n                ${r("bassSolo34","BS")}&emsp;\n                ${r("bassBass34","BB")}&emsp;\n            </div>            \n        `.trim()}getGuitarContent(e,t){return t=t||this.getGuitarSettings(),e=e||this.boardType,`\n            <div style="display: flex; margin: .5rem; justify-content: space-between; position: relative;">\n                <div data-guitar-board-wrapper style="user-select: none; touch-action: none;">\n                    ${this.getGuitarBoard(e,t)}\n                </div>\n                <div style="padding-left: .5rem; padding-top: .5rem;">\n                    ${this.getGuitarRightSide(e,t)}                                        \n                </div>\n            </div>\n            \n            ${this.getBeatContent()}\n            ${this.getRecordCommandPanel()}\n            ${this.getMetronomeContent()}\n            \n            ${this.getPlayCommandPanel()}\n            ${this.getRowActionsCommands()}\n            ${this.getEditCellCommandPanel()}\n            \n            <div data-name="chess-wrapper" style="width: 100%;"></div>\n            \n            ${this.getEditCellCommandPanel()}\n            ${this.getPlayCommandPanel()}\n                        \n            <div data-edit-parts-wrapper>\n                ${this.getRowsByPartComplexContent()}                \n            </div>            \n\n            <br/>            \n            ${this.getMusicInfoContent()}\n        `.trim()}get useThisBoard(){return localStorage.getItem("useThisBoard")||""}getContent(e,t=""){if(e=e||"soloSolo34",this.useLineModel){const e=s.ideService.songStore.data.tracks.filter((e=>e.name===t));this.trackName=e[0]?e[0].name:""}this.realBoardType=e;const n=this.useThisBoard;return d.isT34(e)||d.isT34(n)?(this.realBoardType=n||e,this.getHarmonicaContent(n||e)):"bassGuitar"===e?this.getGuitarContent("bassGuitar"):"guitar"===e?this.getGuitarContent("guitar"):void 0}setKeysColor(){let e=(this.playingNote.base||"")[0],t=this.userSettings.useCyrillicNote?d.mapNoteToCharRus:d.mapNoteToCharLat;(0,o.getWithDataAttr)("note-key",this.page.pageEl).forEach((n=>{n.style.backgroundColor=n.dataset.bgColor||"white";const r=n?.dataset||{},i=r.noteLat||"";if(("bassGuitar"===this.realBoardType||"guitar"===this.realBoardType)&&(e=this.lastPlayingNote[0],"0"!==r.row&&"12"!==r.row?n.innerHTML="&nbsp;":n.style.color="black",i[0]===e)){const r=(n.dataset.noteLat||"")[1];n.innerText=t[e],n.style.color=d.octaveColor[r]||"dimgrey"}}))}toggleRecord(){const e=this.page.pageEl;this.isRecMode=!this.isRecMode&&!!this.memoBuffer.length,this.isRecMode?(this.memoBuffer2=[...this.memoBuffer],this.recData.startTimeMs=Date.now(),(0,o.getWithDataAttrValue)("action-tone","record-mode",e).forEach((e=>{e.style.fontWeight="700"})),(0,o.getWithDataAttrValue)("action-tone","record-beat-wrapper",e).forEach((e=>{e.style.display="block"}))):(this.clearRecordData(),(0,o.getWithDataAttrValue)("action-tone","record-mode",e).forEach((e=>{e.style.fontWeight="400"})),(0,o.getWithDataAttrValue)("action-tone","record-beat-wrapper",e).forEach((e=>{e.style.display="none"})))}handleRecordResult(e,t){t.sequence.forEach(((e,n)=>{const r=t.sequence[n+1];e.next=r?r.down:t.endTimeMs}));const n=l.LineModel.GetToneLineModelFromRecord(e,t.startTimeMs,t.sequence);let r;if(this.hasEditedItems&&this.liner.lines&&n.forEach(((e,t)=>{this.liner.lines[t]&&(r=this.liner.lines[t]),r&&(e.rowInPartId=r.rowInPartId,e.blockOffsetQ=r.blockOffsetQ,e.startOffsetQ=e.startOffsetQ-e.blockOffsetQ,e.cells.forEach((t=>{t.startOffsetQ=t.startOffsetQ-e.blockOffsetQ,t.notes.forEach((e=>{e.instCode=this.instrCode,e.instName=this.instrName}))})))})),this.liner.lines.length>n.length){const e=this.liner.lines.length-n.length;for(let t=this.liner.lines.length-e;t<this.liner.lines.length;t++){const e=l.LineModel.CloneLine(this.liner.lines[t]);n.push(e)}}this.liner.setData(n),this.printChess(n)}clearRecordData(){this.recData={startTimeMs:0,endTimeMs:0,sequence:[],keys:{}}}handleKeyRecord(e,t,n){const r=this.instrCode;if(this.isRecMode){if("stop"!==e&&1===n&&this.memoBuffer2.length){const n=this.memoBuffer2.shift();return this.recData.keys[e]={note:n,char:n[0],code:n,down:t,up:0,next:0,quarterTime:0,quarterNio:0,color:"gray",color2:"#eee"},this.recData.sequence.push(this.recData.keys[e]),void s.ideService.synthesizer.playSound({id:e,keyOrNote:n,instrCode:r})}return"stop"!==e&&0===n&&this.recData.keys[e]?(this.recData.keys[e].up=t,s.ideService.synthesizer.playSound({id:e,keyOrNote:this.recData.keys[e].note,onlyStop:!0}),void(this.recData.keys[e]=null)):this.memoBuffer2.length&&"stop"!==e||1!==n?void 0:(this.recData.endTimeMs=t,Object.keys(this.recData.keys).forEach((e=>{const n=this.recData.keys[e];n&&(n.next=t,s.ideService.synthesizer.playSound({id:e,keyOrNote:this.recData.keys[e].note,onlyStop:!0}),this.recData.keys[e]=null)})),this.handleRecordResult(this.page.bpmValue,this.recData),this.page.stopTicker(),void setTimeout((()=>this.toggleRecord()),300))}}pushNoteToMemo(e){e?this.memoBuffer.push(e):this.memoBuffer=[],(0,o.getWithDataAttrValue)("action-tone","memo-clear",this.page.pageEl).forEach((e=>{e.style.fontWeight=this.memoBuffer.length?"700":"400"}))}toggleMemo(){this.isMemoMode=!this.isMemoMode,(0,o.getWithDataAttrValue)("action-tone","memo-mode",this.page.pageEl).forEach((e=>{this.isMemoMode?e.style.fontWeight="700":e.style.fontWeight="400"}))}updatePopupBoard(){const e=(0,o.getWithDataAttr)("dynamic-tone-board")[0];(0,o.getWithDataAttr)("instrument-code",e).forEach((e=>{e.style.backgroundColor="white"})),(0,o.getWithDataAttrValue)("instrument-code",this.instrCode,e).forEach((e=>{e.style.backgroundColor="lightgray"}))}updateInstrumentsPopup(){const e=(0,o.getWithDataAttr)("instruments-popup")[0];(0,o.getWithDataAttr)("instrument-code",e).forEach((e=>{e.style.backgroundColor="white"})),(0,o.getWithDataAttrValue)("instrument-code",this.instrCode,e).forEach((e=>{e.style.backgroundColor="lightgray"}))}subscribeInstrumentsPopup(){const e=(0,o.getWithDataAttr)("instruments-popup")[0];(0,o.getWithDataAttr)("instrument-code",e).forEach((e=>{e.addEventListener("pointerdown",(()=>{this._instrCode=l.Muse.parseInteger(e.dataset.instrumentCode,l.Muse.DEFAULT_TONE_INSTR),this.updatePopupBoard(),s.ideService.synthesizer.playSound({keyOrNote:"do",id:"popup",instrCode:this.instrCode})}))})),(0,o.getWithDataAttr)("instrument-code",e).forEach((e=>{e.addEventListener("pointerup",(()=>{s.ideService.synthesizer.playSound({keyOrNote:"do",id:"popup",onlyStop:!0})}))})),(0,o.getWithDataAttr)("close-popup",e).forEach((e=>{e.addEventListener("pointerup",(()=>{this.boardPopup.close(!1)}))})),(0,o.getWithDataAttr)("replace-instrument-action",e).forEach((e=>{e.addEventListener("pointerup",(()=>{this.replaceInstrument(e),this.boardPopup.close(!1)}))}))}subscribePopupBoard(e){let t,n="";const r={},i=(0,o.getWithDataAttr)("dynamic-tone-board")[0];(0,o.getWithDataAttr)("instrument-code",i).forEach((e=>{e.addEventListener("pointerdown",(()=>{this._instrCode=l.Muse.parseInteger(e.dataset.instrumentCode,l.Muse.DEFAULT_TONE_INSTR),this.updatePopupBoard(),s.ideService.synthesizer.playSound({keyOrNote:"do",id:"popup",instrCode:this.instrCode})}))})),(0,o.getWithDataAttr)("instrument-code",i).forEach((e=>{e.addEventListener("pointerup",(()=>{s.ideService.synthesizer.playSound({keyOrNote:"do",id:"popup",onlyStop:!0})}))})),(0,o.getWithDataAttr)("close-popup",i).forEach((e=>{e.addEventListener("pointerup",(()=>{setTimeout((()=>{this.boardPopup.close(!1)}),10)}))})),(0,o.getWithDataAttr)("select-note-action",i).forEach((e=>{e.addEventListener("pointerup",(()=>{let e=t?t.dataset.noteLat:"";setTimeout((()=>{this.boardPopup.close(!1),this.addOrDelNoteClick(e)}),10)}))})),(0,o.getWithDataAttr)("note-key",i).forEach((e=>{const i=e.dataset.keyboardId,a=e.dataset.noteLat||"";let o=i;"bassGuitar"!==this.boardType&&"guitar"!==this.boardType||(o=e.dataset.noteCellGuid),e.addEventListener("pointerdown",(i=>{i.preventDefault(),i.stopImmediatePropagation();const l=this.instrCode;s.ideService.synthesizer.playSound({keyOrNote:this.playingNote[o],id:o,onlyStop:!0}),r[o]=a,n=a,t=e,s.ideService.synthesizer.playSound({keyOrNote:a,id:o,instrCode:l})})),e.addEventListener("pointerup",(e=>{e.preventDefault(),e.stopImmediatePropagation(),n&&(s.ideService.synthesizer.playSound({keyOrNote:a,id:o,onlyStop:!0}),r[o]=void 0)}))}))}getInstrumentsForChoice(){const e="\n            display: inline-block;\n            margin: 0 1rem .5rem 0;\n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.1rem;\n            user-select: none;".trim();let t="";return[[{code:327,label:"RGtr:Drive"},{code:321,label:"RGtr:Drive:Mute"},{code:276,label:"EGtr:Clean"}],[{code:374,label:"CBass:Finger"},{code:366,label:"CBass:Slap"},{code:375,label:"EBass:Finger"},{code:388,label:"EBass:Mediator"},{code:405,label:"EBass:Beat"}],[{code:182,label:"Organ:Hard"},{code:162,label:"Organ:Soft"},{code:235,label:"Bayan"}],[{code:617,label:"Trumpet"},{code:626,label:"Trombone"},{code:635,label:"Tuba"},{code:762,label:"picFlute"},{code:790,label:"panFlute"}],[{code:136,label:"Xylo"},{code:466,label:"Violin"}]].forEach((n=>{n.forEach((n=>{t+=`<span\n                    style="${e}" \n                    data-instrument-code="${n.code}"                    \n                >${n.label}</span>\n            `.trim()})),t+="</br>"})),t}getInstrumentNavbarContent(){const e="\n            display: inline-block;\n            margin: 0;\n            padding: .25rem;  \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim();return`\n            <div class="navbar">\n                <div class="navbar-bg"></div>\n                <div class="navbar-inner" style="justify-content: space-evenly;">\n                    <div data-replace-instrument-action="note"   style="${e}">note</div>\n                    <div data-replace-instrument-action="block"  style="${e}">Block</div>\n                    <div data-replace-instrument-action="blocks" style="${e}">BLOCKS</div>\n                    <div data-close-popup style="${e}">Close</div>\n                </div>\n            </div>`.trim()}open_InstrumentBoard(){this.boardPopup=this.page.context.$f7.popup.create({content:`\n                <div class="popup" data-instruments-popup>\n                    <div class="page">\n                        ${this.getInstrumentNavbarContent()}                        \n                        <div class="page-content" >\n                            <div style="margin: 1rem 2rem 0 1rem;">\n                                ${this.getInstrumentsForChoice()}\n                            </div>\n                        </div>\n                    </div>\n                </div>`.trim(),on:{opened:()=>{this.subscribeInstrumentsPopup(),this.updateInstrumentsPopup()}}}),this.boardPopup.open(!1)}getOKCloseNavbarContent(){const e="\n            display: inline-block;\n            margin: 0;\n            padding: .25rem;  \n            border-radius: 0.25rem;\n            border: 1px solid lightgray;\n            font-size: 1.2rem;\n            user-select: none;\n        ".trim();return`\n            <div class="navbar">\n                <div class="navbar-bg"></div>\n                <div class="navbar-inner" style="justify-content: space-evenly;">\n                <div data-select-note-action style="${e}"><b>OK</b></div>\n                <div data-close-popup style="${e}">Close</div>                            \n            </div>\n        </div>`.trim()}open_GuitarBoard(){this.boardPopup=this.page.context.$f7.popup.create({content:`\n                <div class="popup" data-dynamic-tone-board>\n                    <div class="page">\n                        ${this.getOKCloseNavbarContent()}                    \n                        <div class="page-content">\n                            <div style="display: flex; margin: .5rem; justify-content: space-between; position: relative;">\n                                <div style="margin-top: .5rem; user-select: none; touch-action: none;">\n                                    ${this.getGuitarBoard(this.boardType)}\n                                </div>\n                                <div style="margin-top: .5rem;">\n                                    \x3c!-- content --\x3e\n                                </div>\n                            </div>\n                            <div style="margin: 1rem;">\n                                ${this.getInstrumentsForChoice()} \n                            </div>                            \n                        </div>                        \n                    </div>\n                </div>`.trim(),on:{opened:()=>{this.subscribePopupBoard(),this.updatePopupBoard(),this.updateFixedCellsOnBoard((0,o.getWithDataAttr)("dynamic-tone-board")[0])}}}),this.boardPopup.open(!1)}open_HarmonicaBoard(e){e=e||this.useThisBoard||"soloSolo34",this.boardPopup=this.page.context.$f7.popup.create({content:`\n                <div class="popup" data-dynamic-tone-board>\n                    <div class="page">\n                        ${this.getOKCloseNavbarContent()}\n                        <div class="page-content" >\n                            ${this.getHarmonicaBoard(e)}                           \n                            <div style="margin: 0 1rem 0 1rem;">\n                                ${this.getInstrumentsForChoice()}\n                            </div>\n                        </div>\n                    </div>\n                </div>`.trim(),on:{opened:()=>{this.subscribePopupBoard(),this.updatePopupBoard()}}}),this.boardPopup.open(!1)}subscribeEditCommands(){super.subscribeEditCommands()}getGuitarSettings(){if(!localStorage.getItem(`[settings]${this.boardType}`)){let e=0;"guitar"===this.boardType&&(e=12),this.setGuitarSettings({stringCount:6,offset:e})}return JSON.parse(localStorage.getItem(`[settings]${this.boardType}`))}setGuitarSettings(e){localStorage.setItem(`[settings]${this.boardType}`,JSON.stringify(e))}updateFixedCellsOnBoard(e){e=e||this.page.pageEl;const t=s.ideService.boards[this.boardType]||{};s.ideService.boards[this.boardType]||(s.ideService.boards[this.boardType]=t),t.fixedCells||(t.fixedCells=[]),(0,o.getWithDataAttr)("note-cell-guid",e).forEach((e=>{t.fixedCells.includes(e.dataset.noteCellGuid)?(e.dataset.fixNoteCell="true",e.style.boxShadow="inset 0px 0px 6px yellow"):(e.style.boxShadow=null,e.dataset.fixNoteCell="")}))}fixBoardCell(e=!1){const t=s.ideService.boards[this.boardType]||{};s.ideService.boards[this.boardType]||(s.ideService.boards[this.boardType]=t),t.fixedCells||(t.fixedCells=[]),e?s.ideService.boards[this.boardType].fixedCells=[]:t.fixedCells.includes(this.lastNoteCellGuid)?t.fixedCells=t.fixedCells.filter((e=>e!==this.lastNoteCellGuid)):t.fixedCells.push(this.lastNoteCellGuid),this.updateFixedCellsOnBoard()}setGuitarOffset(e){let t=this.getGuitarSettings();const n=t.offset+e;if(n<0)return;t.offset=n,this.setGuitarSettings(t),(0,o.getWithDataAttr)("guitar-board-wrapper").forEach((e=>{e.innerHTML=null}));const r=this.getGuitarBoard(this.boardType,t);(0,o.getWithDataAttr)("guitar-board-wrapper").forEach((e=>{e.innerHTML=r})),this.subscribeBoardEvents()}setStringCount(e){e=l.Muse.parseInteger(e,6);let t=this.getGuitarSettings();t.stringCount=e,this.setGuitarSettings(t),(0,o.getWithDataAttr)("guitar-board-wrapper").forEach((e=>{e.innerHTML=null}));const n=this.getGuitarBoard(this.boardType,t);(0,o.getWithDataAttr)("guitar-board-wrapper").forEach((e=>{e.innerHTML=n})),this.subscribeBoardEvents()}subscribeBoardEvents(){const e=this.page.pageEl;(0,o.getWithDataAttr)("note-key",e).forEach((e=>{const t=e.dataset.keyboardId,n=e.dataset.noteLat||"";let r=t;"bassGuitar"!==this.realBoardType&&"guitar"!==this.realBoardType||(r=e.dataset.noteCellGuid);const i=`${t}-${n}`;e.addEventListener("pointerdown",(t=>{t.preventDefault(),t.stopImmediatePropagation();const r=this.instrCode;s.ideService.synthesizer.playSound({keyOrNote:this.playingNote[i],id:i,onlyStop:!0}),this.playingNote[i]=n,this.lastPlayingNote=n,this.lastNoteCellGuid=e?.dataset?.noteCellGuid||"",s.ideService.synthesizer.playSound({keyOrNote:n,id:i,instrCode:r}),this.setKeysColor(),this.isMemoMode&&this.pushNoteToMemo(n)})),e.addEventListener("pointerup",(e=>{e.preventDefault(),e.stopImmediatePropagation(),s.ideService.synthesizer.playSound({keyOrNote:n,id:i,onlyStop:!0}),this.playingNote[i]=void 0}))}))}subscribeCommonCommands(){const e=this.page.pageEl;(0,o.getWithDataAttr)("action-set-string-count",e).forEach((e=>{e.addEventListener("pointerdown",(()=>this.setStringCount(e.dataset.actionSetStringCount)))})),(0,o.getWithDataAttrValue)("action-tone","set-offset-up",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.setGuitarOffset(1)))})),(0,o.getWithDataAttrValue)("action-tone","set-offset-down",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.setGuitarOffset(-1)))})),(0,o.getWithDataAttrValue)("action-tone","open-guitar-board",this.page.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>this.open_GuitarBoard()))})),(0,o.getWithDataAttrValue)("action-tone","fix-board-cell",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.fixBoardCell()))})),(0,o.getWithDataAttrValue)("action-tone","unfix-board-cell",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.fixBoardCell(!0)))})),(0,o.getWithDataAttrValue)("page-action","play-one",this.page.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playSolo()))})),(0,o.getWithDataAttrValue)("action-tone","memo-mode",e).forEach((e=>{e.addEventListener("pointerdown",(()=>this.toggleMemo()))})),(0,o.getWithDataAttrValue)("action-tone","memo-clear",e).forEach((e=>{e.addEventListener("pointerdown",(()=>this.pushNoteToMemo(null)))})),(0,o.getWithDataAttr)("use-board-type",e).forEach((e=>{e.addEventListener("pointerdown",(()=>{const t=e.dataset.useBoardType,n=this.useThisBoard;localStorage.setItem("useThisBoard",n===t?"":t),this.page.setContent()}))})),(0,o.getWithDataAttrValue)("action-tone","record-beat",e).forEach((e=>{e.addEventListener("pointerdown",(t=>{t.preventDefault(),t.stopImmediatePropagation(),this.handleKeyRecord(e.dataset.id,Date.now(),1)})),e.addEventListener("pointerup",(t=>{t.preventDefault(),t.stopImmediatePropagation(),this.handleKeyRecord(e.dataset.id,Date.now(),0)}))})),(0,o.getWithDataAttrValue)("action-tone","record-mode",e).forEach((e=>{e.addEventListener("pointerup",(()=>this.toggleRecord()))}));const t=()=>{(0,o.getWithDataAttr)("note-key",e).forEach((e=>{e.style.backgroundColor=e.dataset.bgColor||"white"}))};let n=(0,o.dyName)("clear-keys-color",e);n&&n.addEventListener("click",(()=>t())),n=(0,o.dyName)("select-random-key",e),n&&n.addEventListener("click",(()=>{const n=l.Muse.getRandomElement("dtrnmfvszlkb")+l.Muse.getRandomElement("uoa"),r=(0,o.dyName)(`note-key-${n}`,(0,o.dyName)("keyboard-solo",e));r&&(t(),r.style.backgroundColor="gray")}))}subscribeEvents(){this.subscribeCommonCommands(),this.subscribeMoveCommands(),this.subscribeEditCommands(),this.subscribeIdeEvents(),this.subscribeDurationCommands(),this.subscribeBoardEvents()}printChess(e){this.chess.printToneChess(e)}updateView(){this.updateRowInPartItems(),this.updateChess(),this.updateFixedCellsOnBoard()}subscribeDurationCommands(){super.subscribeDurationCommands(),(0,o.getWithDataAttr)("get-note-for-cell-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>{"bassGuitar"===this.realBoardType||"guitar"===this.realBoardType?this.open_GuitarBoard():this.open_HarmonicaBoard()}))})),(0,o.getWithDataAttr)("get-instrument-action",this.page.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>{this.open_InstrumentBoard()}))}))}}t.ToneCtrl=h},8161:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[["setDa",null,null,null,-13,-24,-23,null,null,null,"setQuickNote"],[null,null,null,null,-1,-12,-11,null,null,null,null],[null,null,null,null,11,0,1,null,null,null,null],[null,null,null,null,23,12,13,null,null,null,null]],r=[[-14,-2,10,22,null,null,null,14,2,-10,-22],[-15,-3,9,21,null,"fix",null,15,3,-9,-21],[-16,-4,8,20,null,null,null,16,4,-8,-20]],i=[[null,null,null,null,19,18,17,null,null,null,null],[null,null,null,null,7,6,5,null,null,null,null],[null,null,null,null,-5,-6,-7,null,null,null,null],[null,null,null,null,-17,-18,-19,null,null,null,"fixQuickNote"]];function a(e){const t=e.id||"",n=e.fontSize||"1.3rem",r=e.width||"1.5rem";return(e,i)=>{let a=e[0],o=["m","f","v","s"].find((e=>e===a))?800:400,s=function(e){let t="border: none;";return"m"===(e=e||"")[0]&&(t="border-top: 2px solid black; border-left: 2px solid black; border-right: 2px solid black;"),"s"===e[0]&&(t="border-bottom: 2px solid black; border-left: 2px solid black; border-right: 2px solid black;"),"l"===e[0]&&(t="border-right: 2px solid black; border-top: 2px solid black;"),"k"===e[0]&&(t="border-right: 2px solid black; border-bottom: 2px solid black;"),"f"!==e[0]&&"v"!==e[0]||(t="border: none;"),"t"===e[0]&&(t="border-left: 2px solid black; border-top: 2px solid black;"),"r"===e[0]&&(t="border-left: 2px solid black; border-bottom: 2px solid black;"),t}(e);return`<div\n      style="\n        box-sizing: border-box;    \n        margin: 0;\n        padding: 0;\n        display: inline-block;\n        font-size: ${n};\n        width: ${r};\n        user-select: none;\n        text-align: center;\n        user-select: none;        \n        touch-action: none;\n        ${s}\n        color: black;\n        font-weight: ${o};" \n        data-note-key="${e}"\n        data-name="note-key-${e}"\n        data-note-lat="${e}"\n        data-keyboard-id="${t}"\n\n        >&nbsp;</div>`.replace(/\n/g," ").replace(/ +/g," ")}}const o=`\n  \n<div style="margin: .5rem; user-select: none; touch-action: none;">\n\x3c!--br/--\x3e\n\n${function(e){const t=a({id:e=e||"",width:"2rem",fontSize:"1.5rem"});return`\n<div style="\n    font-family: monospace;\n    user-select: none;\n    touch-action: none;    \n    padding: 0.5rem 0 0.5rem 0.5rem;"\n    data-name="keyboard-${e}"\n>\n${t("du","д")}${t("mu","м")}${t("zu","з")}\n${t("dy","~")}${t("my","!")}${t("zy","@")}\n${t("do","#")}${t("mo","$")}${t("zo","%")}\n<br/>\n${t("tu","т")}${t("fu","ф")}${t("lu","л")}\n${t("ty","?")}${t("fy","q")}${t("ly","w")}\n${t("to","e")}${t("fo","r")}${t("lo","t")}\n<br/>\n${t("ru","р")}${t("vu","в")}${t("ku","к")}\n${t("ry","?")}${t("vy","a")}${t("ky","s")}\n${t("ro","d")}${t("vo","f")}${t("ko","g")}\n<br/>\n${t("nu","н")}${t("su","с")}${t("bu","б")}\n${t("ny","?")}${t("sy","с")}${t("by","б")}\n${t("no","н")}${t("so","с")}${t("bo","б")}\n</div>\n\n`.replace(/\n/g,"")}("base")}\n\n\x3c!-- br/ --\x3e\n\n<span style="font-size: 1.5rem; user-select: none; touch-action: none;" data-name="clear-keys-color">\n  clr&nbsp;&nbsp;\n</span>\n<span style="font-size: 1.5rem; user-select: none; touch-action: none;" data-name="select-random-key">\n  rnd&nbsp;&nbsp;\n</span>\n\n<br/>\n<br/>\n${function(e){const t=a({id:e=e||""});return`\n<div style="\n    font-family: monospace;\n    user-select: none;\n    touch-action: none;    \n    padding: 0.5rem 0 0.5rem 0.5rem;"\n    data-name="keyboard-${e}"\n>\n${t("dy","~")}${t("my","!")}${t("zy","@")}\n${t("do","#")}${t("mo","$")}${t("zo","%")}\n${t("da","^")}${t("ma","&")}${t("za","*")}\n${t("de","(")}${t("me",")")}${t("ze","_")}\n<br/>\n${t("ty","?")}${t("fy","q")}${t("ly","w")}\n${t("to","e")}${t("fo","r")}${t("lo","t")}\n${t("ta","y")}${t("fa","u")}${t("la","i")}\n${t("te","o")}${t("fe","p")}${t("le","[")}\n<br/>\n${t("ry","?")}${t("vy","a")}${t("ky","s")}\n${t("ro","d")}${t("vo","f")}${t("ko","g")}\n${t("ra","h")}${t("va","j")}${t("ka","k")}\n${t("re","l")}${t("ve",";")}${t("ke","'")}\n<br/>\n${t("ny","?")}${t("sy","z")}${t("by","x")}\n${t("no","c")}${t("so","v")}${t("bo","b")}\n${t("na","n")}${t("sa","m")}${t("ba",",")}\n${t("ne",".")}${t("se","/")}${t("be","?")}\n</div>\n\n`.replace(/\n/g,"")}("solo")}\n<br/>\n\n\x3c!--${function(e){const t=function(e){const t=e.keyboardId||"",n=e.fontSize||"1.3rem",r=e.width||"1.5rem";return(e,i)=>(e=(""+e).trim(),`<div\n      style="\n        box-sizing: border-box;    \n        margin: 0;\n        padding: 0;\n        display: inline-block;\n        font-size: ${n};\n        width: ${r};\n        user-select: none;\n        text-align: center;\n        touch-action: none;\n        ${e?"border: 1px solid black;":"border: none;"}\n        color: black;\n        font-weight: 400;"\n        data-name="relative-note-${e}" \n        data-is-relative-note="true"\n        data-pitch-offset="${e}"        \n        data-keyboard-id="${t}"\n\n        >${i=i||"&nbsp;"}</div>`.replace(/\n/g," ").replace(/ +/g," "))}({keyboardId:e=e||"",fontSize:"1rem"}),a=function(e){const t=e.keyboardId||"",n=e.fontSize||"1.3rem",r=e.width||"1.5rem";return(e,i)=>(i=i||"&nbsp;",e=(e||"").trim(),`<div\n      style="\n        box-sizing: border-box;    \n        margin: 0;\n        padding: 0;\n        display: inline-block;\n        font-size: ${n};\n        width: ${r};\n        user-select: none;\n        text-align: center;\n        touch-action: none;\n        ${e?"border: 1px solid black;":"border: none;"}\n        color: black;\n        font-weight: 400;"\n        data-name="relative-command-${e}" \n        data-is-relative-command="true"\n        data-command="${e}"        \n        data-keyboard-id="${t}"\n        >${i}</div>`.replace(/\n/g," ").replace(/ +/g," "))}({keyboardId:e,fontSize:"1rem"});let o="",s={fix:"da",setDa:"da",setQuickNote:"da",fixQuickNote:"x"};return[...n,...r,...i].forEach((e=>{e.forEach((e=>{o+="number"!=typeof(e=null===e?"":e)&&e?a(e,s[e]||"?"):t(e,0===e?"da":"")})),o+="<br/>"})),`\n<div style="\n    font-family: monospace;\n    user-select: none;\n    touch-action: none;        \n    padding: 0.5rem 0 0.5rem 0.5rem;"    \n    data-name="keyboard-${e}"\n>${o}</div>\n`.replace(/\n/g,"")}("relative")}--\x3e\n\n<div style="font-size: 1.5rem; font-family: monospace; user-select: none; touch-action: none;">\n  о яЛуСуЛуЛуЛу cаНаЗуЛуЛаМа <br/>\n  оНаНу хаЛаНуЛу луЛуХаНа    <br/>\n</div>\n\n</div>\n\n`.trim();"\n<tick4@>\n-  : 1   2   3   4   :\n@cowbell: x   x   x   x   :\n--------------------------------------------------------------------------------\n<tick3@>\n-  : 1   2   3   :\n@cowbell: x   x   x   :\n--------------------------------------------------------------------------------\n<simple44@>\n-  : 1   2   3   4   :\n@hc: x x x x x x x x :\n@sn:     2       4   :\n@bd: 1       3       :\n--------------------------------------------------------------------------------\n<simple44_drum@>\n-  : 1   2   3   4   :\n@hc: x x x x x x x x :\n@sn:     2       4   :\n@bd: 1       3       :\n--------------------------------------------------------------------------------\n<pause100@>\n-  : 1   :\n@hc:     :\n--------------------------------------------------------------------------------\n<pause200@>\n-  : 1   2   :\n@hc:         :\n--------------------------------------------------------------------------------\n<pause300@>\n-  : 1   2   3   :\n@hc:             :\n--------------------------------------------------------------------------------\n<pause400@>\n-  : 1   2   3   4   :\n@hc:                 :\n--------------------------------------------------------------------------------\n<hat@>\n-  : 1   2   3   4   :\n@hc: x   x   x   x   :\n--------------------------------------------------------------------------------\n<hat8@>\n-  : 1   2   3   4   :\n@hc: x x x x x x x x :\n--------------------------------------------------------------------------------\n<pause50$>\n$organ: 50\n\n\n".trim(),"\n<out b120 r1000>\nsimple44@\n\n<simple44@>\n-  : 1   2   3   4   :\n@hc: x x x x x x x x :\n@sn:     2       4   :\n@bd: 1       3       :\n".trim(),t.default={content:o,tracks:[],hideMetronome:!0}},7038:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MBoxPage=void 0;const s=n(8593),l=n(8342),c=n(5744),d=n(7526),u=o(n(8976)),p=n(5336),h=n(6625),f=a(n(9072)),m=n(3920),g=n(3470),v=n(5576),b=n(1841),y=n(434),_=n(8299),w=n(3458),C=/localhost/.test(window.location.href),x="dev"===w.UserSettingsStore.GetUserSettings().userName||C;t.MBoxPage=class{props;context;view="list";recorder;playingTick="";bpmRange;excludePartNio=[];selectedSong="";selectedSongName="";ns="";isMy=!1;get bpmValue(){return p.ideService.bpmValue}set bpmValue(e){p.ideService.bpmValue=e}get pageId(){return this.props.id}get songId(){return this.props.song}get pageEl(){return this.context.$el.value[0]}get el$(){return this.context.$el.value}get outBlock(){return this.blocks.find((e=>"out"===e.id))}get useLineModel(){return!(!this.isMy&&!this.pageData.exportToLineModel)}get blocks(){return p.ideService.blocks}get settings(){return p.ideService.settings}get allSongParts(){const e=(p.ideService.songStore?.data.parts||[]).map(((e,t)=>`${e.name} %${e.id} №${t+1}`));return console.log("allSongParts\n",e.join("\n")),e}getId(e){return this.pageId+"-"+e}constructor(e,t){this.props=e,this.context=t}pageData;getPageData(){if(u.default[this.songId])return u.default[this.songId];const e=h.SongStore.GetSong(this.songId,h.MY_SONG,!0);return e.source="my",e.ns=h.MY_SONG,e}async initData(e){const t=this.songId,n=this.pageData=this.getPageData();if(this.isMy="my"===n.source,this.view=n.isSongList?"list":"song",this.ns=n.ns,"song"===this.view){if(n.pathNotesText)try{const e=C?n.pathNotesText:`assets/${n.pathNotesText}`,t=await fetch(e);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);{const e=await t.text();n.score=e}}catch(e){console.log("load notesText",e)}if(n.pathNotesJson)try{const e=C?n.pathNotesJson:`assets/${n.pathNotesJson}`,t=await fetch(e);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);{const e=await t.json();n.songNodeHard=h.SongStore.TransformOldDrums(e)}}catch(e){console.log("load notesJson",e)}}if("song"===this.view){let r;p.ideService?.songStore?.songId&&p.ideService.songStore.songId===t&&!e||(p.ideService.blocks=d.Muse.getTextBlocks(n.score)||[],p.ideService.settings=d.Muse.getFileSettings(p.ideService.blocks),p.ideService.pitchShift=0,u.default[t]?(r=u.default[this.songId],r=this.textModelToLineModel(this.songId,r)):r=n,r.ns=this.ns,p.ideService.songStore=new h.SongStore(t,this.ns,r),p.ideService.setDataByTracks(p.ideService.songStore.data))}}async onMounted(){await this.initData(!1),this.setRightPanelContent(),this.setPageContent()}setRightPanelContent(){(0,s.dyName)("panel-right-content").innerHTML="".trim()}getMetronomeContent(){return'&emsp;\n            <a data-tick-trigger="1:4"><b>1:4</b></a>&emsp;\n            <a data-tick-trigger="2:4"><b>2:4</b></a>&emsp;\n            <a data-tick-trigger="3:4"><b>3:4</b></a>&emsp;\n            <a data-tick-trigger="4:4"><b>4:4</b></a>&emsp;\n            <a data-action-type="stop"><b>stop</b></a>&emsp;\n            <div \n                class="range-slider"\n                data-name="slider"\n                data-label="true"\n                data-min="0"   \n                data-max="200"\n                data-step="1"\n                data-value="100"\n                data-scale="true"\n                data-scale-steps="10"\n                data-scale-sub-steps="5"\n            ></div>\n        '.trim()}getSongListContent(){let e=this.pageData.content,t="",n="";return this.isMy&&(t="",h.SongStore.GetSongs(this.ns).forEach((t=>{e+=`<div class="row" style="margin: .5rem; align-items: center;">\n                    <div style="font-size: 1rem;">\n                        <span\n                            style="font-weight: 400; user-select: none;"\n                            data-song-id="${t.id}"\n                            data-song-item="${t.id}"\n                            data-song-name="${t.name}"                                                    \n                        >${t.name}</span>\n                    </div>\n                    <div style="margin-right: 1rem;">\n                        ${f.editBtn(`\n                            data-edit-song-action\n                            data-song-id="${t.id}"\n                        `,"",24)}\n                    </div>\n                </div>`})),n=`\n            <div style="margin: .5rem; margin-top: 1rem;">\n                ${f.moveTopBtn("data-move-song-up-action","",24)}\n                ${f.moveDownBtn("data-move-song-up-action","",24)}\n                ${f.renameBtn("data-rename-song-action","",24)}                \n                ${f.plusBtn("data-add-song-action","",24)}\n                ${f.minusBtn("data-delete-song-action","",24)}\n            </div>\n        `.trim()),`\n            ${`\n            <div style="padding: 1rem .5rem 1rem .5rem;">${this.getMetronomeContent()}</div>        \n        `.trim()}\n            ${n}\n            ${t}\n            <div data-name="pageContent">${e}</div>\n        `.trim()}getSongPageContent(){return`\n            <div style="padding: 1rem .5rem 1rem .5rem;">\n                ${this.getMetronomeContent()}\n            </div>\n\n            <div\n                data-tracks-content-wrapper\n                style="\n                    margin: 0;\n                    padding: .5rem .5rem 1rem 1rem;                    \n                    border-top: 1px solid gray;\n                    border-bottom: 1px solid gray;"\n            >\n                ${this.getTrackListContent()}                \n            </div>\n                            \n            ${this.getSongPartsContent()}\n            \n            <div data-name="pageContent">\n                ${this.pageData.content}\n            </div>\n        `.trim()}setPageContent(){const e='\n            <div\n                class="page-content"\n                data="page-content"\n                style="padding-top: 0;\n                padding-bottom: 2rem;"\n            >%content%</div>\n        '.trim();let t="";"list"===this.view?(t=e.replace("%content%",this.getSongListContent()),this.el$.html(t),this.updateSongListView()):(t=e.replace("%content%",this.getSongPageContent()),this.el$.html(t),this.updatePartListView()),this.bpmRange=this.context.$f7.range.create({el:(0,s.dyName)("slider",this.pageEl),on:{changed:e=>{this.bpmValue=e.value,this.playingTick&&this.playTick(this.playingTick)}}});let n=this.bpmValue;"song"===this.view&&(n=this.songId===p.ideService.currentEdit.songId?this.bpmValue:p.ideService.songStore?.data?.bmpValue||90),setTimeout((()=>{this.subscribeEvents(),this.bpmValue=n,this.bpmRange.setValue(this.bpmValue),this.updateView()}),100)}getTrackListContent(){let e="\n            display: inline-block;\n            padding: .15rem;\n            margin-right: .5rem; margin-top: .5rem;\n            font-size: .9rem; font-weight: 400;\n            user-select: none; touch-action: none;\n            border: 1px solid gray; border-radius: .3rem;\n        ".trim(),t="";const n=(e="")=>`<span\n                style="display: inline-block; border: 1px solid lightgray; border-radius: 0.25rem; user-select: none; padding: 0; margin: 0; margin-right: .4rem;"\n                data-create-bass-track${e}-action\n            >\n                +B${e}\n            </span>`;let r=`\n            <div style="margin: 1rem 0 0 0;">\n                ${f.uncheckBtn("data-uncheck-all-tracks-action","black",24)}\n                ${f.checkBtn("data-check-all-tracks-action","black",24)}\n                ${f.plusBtn("data-add-track-action","",24)}\n                ${f.minusBtn("data-delete-track-action","",24)}\n                ${f.editBtn("data-edit-track-action","",24)}\n                ${f.soundBtn("data-edit-tracks-volume-action","",24)}<span style="width: .5rem; display: inline-block;"></span>\n                ${f.copyPasteBtn("data-clone-track-action","",24)}\n                ${n()}\n                ${x?n("2"):""}\n            </div>\n        `.trim();return(p.ideService?.songStore?.data?.tracks||[]).forEach((n=>{const r=n.isHardTrack?"text-decoration: underline;":"";t+=`\n                    <span style="${e} ${r}" data-use-track-action="${n.name}">\n                        ${n.name}:${n.volume}\n                    </span>            \n            `.trim()})),t+=r,t}getSongPartsContent(){let e=this.allSongParts;const t='\n            <div style="margin: .5rem 1rem;">\n                %content%\n            </div>        \n        '.trim();let n=`\n            ${f.downloadBtn("data-download-song-action","",24)}&emsp;        \n            ${f.playAndSaveBtn("data-play-and-download-ogg-action","",24)}&emsp;\n        `.trim(),r="";if(this.isMy){const t=`${f.plusBtn("data-add-part-action","",24)}`;r=`\n                <div style="margin-top: 1rem;">\n                    ${f.moveTopBtn("data-move-part-up-action","",24)}\n                    ${f.moveDownBtn("data-move-part-down-action","",24)}                    \n                    ${f.editBtn("data-edit-selected-parts-action","",24)}\n                    ${t}\n                    ${f.minusBtn("data-delete-part-action","",24)}\n                    ${f.renameBtn("data-rename-part-action","",24)}\n                    ${f.copyPasteBtn("data-clone-part-action","",24)}\n                </div>            \n            `.trim(),e.length||(r=t),n+=`\n                ${f.uploadBtn("data-upload-song-action","",24)}&nbsp;              \n                <input style="display: none;" type="file" data-upload-song-input multiple />                                \n            `.trim()}else r=`\n                <div style="margin-top: 1rem;">\n                    ${f.editBtn("data-edit-selected-parts-action","",24)}\n                </div>            \n            `.trim();n+=`\n                ${f.saveBtn("data-save-song-action","",24)}&nbsp;\n        `.trim(),n=`<div style="margin: 1rem;">\n            ${n}\n        </div>`.trim();let i=`\n            <div>\n                ${f.uncheckBtn("data-unselect-all-parts-action","",24)}\n                ${f.checkBtn("data-select-all-parts-action","",24)}\n                ${f.stopBtn('data-action-type="stop"',"",24)}\n                ${f.playBtn("data-play-all-action","",24)}\n                ${f.playLoopBtn("data-loop-all-action","",24)}\n            </div>\n            ${r}\n        `.trim();return i=t.replace("%content%",i),i+e.reduce(((e,t,n)=>{const r=d.Muse.getPartInfo(t);return e+`\n                <div class="row" style="margin: .5rem; align-items: center;">\n                    <span\n                        style="font-weight: 700; font-size: 1rem; user-select: none;"\n                        data-part-nio="${n+1}"\n                        data-part-item="${r.ref}"                        \n                    >${r.partNio}&nbsp;&nbsp;${r.ref}</span>\n                    <div style="margin-right: 1rem;">   \n                        ${f.editBtn(`\n                            data-edit-part-action                        \n                            data-part-nio="${n+1}"\n                            data-part-id="${r.partId}"                                                        \n                        `,"",24)}\n                    </div>                    \n                </div>\n            `.trim()}),"")+(e.length>5?i:"")+n}playTick(e){e=e||"",this.playingTick=e,p.ideService.metronome.stopAndClearMidiPlayer();const t=l.standardTicks[this.playingTick];if(!t)return void(this.playingTick="");const n=`\n        <out r1000000>\n        tick\n\n        ${t}\n        `;p.ideService.metronome.tryPlayMidiBlock({blocks:n,bpm:this.bpmValue})}subscribeEvents(){this.subscribePageEvents(),this.subscribeMetronomeEvents(),this.subscribeSongsAndPartsActions(),this.subTracksEvents()}getSelectedTracks(){const e=[];return(0,s.getWithDataAttr)("use-track-action",this.pageEl).forEach((t=>{let n=t.dataset.useTrackAction,r=p.ideService.songStore.data.tracks.find((e=>e.name===n));r&&!r?.isExcluded&&e.push(r.name)})),e}subTracksEvents(){(0,s.getWithDataAttr)("add-track-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.addTrack()))})),(0,s.getWithDataAttr)("edit-tracks-volume-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.editTracksVolume()))})),(0,s.getWithDataAttr)("edit-track-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{const e=this.getSelectedTracks();e.length>1||this.editTrack(e[0])}))})),(0,s.getWithDataAttr)("delete-track-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{const e=this.getSelectedTracks();if(e.length>1)return;const t=p.ideService.songStore.data.tracks.find((t=>t.name===e[0]));t&&!t.isHardTrack&&(this.confirm=this.context.$f7.dialog.confirm(t.name,"Удалить трэк?",(()=>{h.SongStore.DeleteTrack(p.ideService.songStore.data,t.name)&&(this.renderTracksView(),p.ideService.songStore.save())}),(()=>{})),this.confirm.open())}))})),(0,s.getWithDataAttr)("uncheck-all-tracks-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{(0,s.getWithDataAttr)("use-track-action",this.pageEl).forEach((e=>{p.ideService.songStore.data.tracks.forEach((e=>{e.isExcluded=!0}))})),this.update_TracksView(),p.ideService.songStore.save(),p.ideService.setDataByTracks()}))})),(0,s.getWithDataAttr)("check-all-tracks-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{(0,s.getWithDataAttr)("use-track-action",this.pageEl).forEach((e=>{p.ideService.songStore.data.tracks.forEach((e=>{e.isExcluded=!1}))})),this.update_TracksView(),p.ideService.songStore.save(),p.ideService.setDataByTracks()}))})),(0,s.getWithDataAttr)("use-track-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{const t=e.dataset.useTrackAction,n=p.ideService.songStore.data.tracks.find((e=>e.name===t));n&&(n.isExcluded=!n.isExcluded,this.update_TracksView(),p.ideService.songStore.save(),p.ideService.setDataByTracks())}))})),(0,s.getWithDataAttr)("clone-track-action",this.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>this.cloneTrack()))})),(0,s.getWithDataAttr)("create-bass-track-action",this.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>this.createBassTrack()))})),(0,s.getWithDataAttr)("create-bass-track2-action",this.pageEl).forEach((e=>{e.addEventListener("pointerup",(()=>this.createBassTrack2()))}))}update_TracksView(){(0,s.getWithDataAttr)("use-track-action",this.pageEl).forEach((e=>{const t=e.dataset.useTrackAction,n=p.ideService.songStore.data.tracks.find((e=>e.name===t));e.style.backgroundColor=n?.isExcluded?"white":"lightgray"}))}renderTracksView(){const e=this.getTrackListContent();(0,s.getWithDataAttr)("tracks-content-wrapper",this.pageEl).forEach((t=>{t.innerHTML=e})),this.subTracksEvents(),this.update_TracksView()}gotoEditSong(e){(e=(e||"").trim())&&this.context.$f7router.navigate(`/mbox/${e}/`)}getSelectedParts(){return this.allSongParts.filter(((e,t)=>!this.excludePartNio.includes(t+1)))}getSelectedPartsNio(){return this.allSongParts.map(((e,t)=>t+1)).filter((e=>!this.excludePartNio.includes(e)))}gotoEditPart(e){let t=d.Muse.parseInteger(e,null),n=[];const r=this.isMy;n=t?[t]:this.getSelectedPartsNio(),n.length&&(p.ideService.setDataByTracks(p.ideService.songStore.data),p.ideService.editedItems=[],p.ideService.currentEdit.songId=this.songId,p.ideService.currentEdit.allSongParts=this.allSongParts,p.ideService.currentEdit.blocks=this.blocks,p.ideService.currentEdit.editPartsNio=n,p.ideService.currentEdit.source=this.pageData.source,p.ideService.currentEdit.freezeStructure=!r,p.ideService.currentEdit.settings=this.settings,p.ideService.currentEdit.ns=r?h.MY_SONG:this.pageData.ns||"",p.ideService.currentEdit.useLineModel=r||this.pageData.exportToLineModel||!1,this.context.$f7router.navigate("/page/page_keyboard/"))}subscribeSongsAndPartsActions(){(0,s.getWithDataAttr)("delete-song-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.deleteSong(this.selectedSong)))})),(0,s.getWithDataAttr)("edit-song-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.gotoEditSong(e.dataset.songId)))})),(0,s.getWithDataAttr)("rename-song-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.renameSong(this.selectedSong)))})),(0,s.getWithDataAttr)("move-song-up-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.moveSong(this.selectedSong,-1)))})),(0,s.getWithDataAttr)("move-song-down-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.moveSong(this.selectedSong,1)))})),(0,s.getWithDataAttr)("song-item",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.selectSong(e.dataset.songId,e.dataset.songName)))})),(0,s.getWithDataAttr)("part-item",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.selectPart(e.dataset.partNio)))})),(0,s.getWithDataAttr)("edit-part-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.gotoEditPart(e.dataset.partNio)))})),(0,s.getWithDataAttr)("delete-part-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.deletePart()))})),(0,s.getWithDataAttr)("rename-part-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.renamePart()))})),(0,s.getWithDataAttr)("clone-part-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.clonePart()))})),(0,s.getWithDataAttr)("move-part-up-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.movePart(-1)))})),(0,s.getWithDataAttr)("move-part-down-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.movePart(1)))})),(0,s.getWithDataAttr)("download-song-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.downloadFile()))})),(0,s.getWithDataAttr)("play-and-download-ogg-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playAll(1,!0)))})),(0,s.getWithDataAttr)("upload-song-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.uploadFileClick()))})),(0,s.getWithDataAttr)("save-song-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.saveSong()))})),(0,s.getWithDataAttr)("upload-song-input",this.pageEl).forEach((e=>{e.addEventListener("change",(e=>this.uploadFile(e)))}))}getOneSelectedPartNio(e){const t=Array.isArray(e)?e:this.allSongParts;if(t.length-this.excludePartNio.length!=1)return 0;for(let e=0;e<t.length;e++)if(!this.excludePartNio.includes(e+1))return e+1;return 0}getOneSelectedPartInfo(e){e=Array.isArray(e)?e:this.allSongParts;const t=this.getOneSelectedPartNio(e);return t?d.Muse.getPartInfo(e[t-1]):null}selectAllParts(){this.excludePartNio=[],this.updatePartListView()}unselectAllParts(){const e=this.allSongParts;this.excludePartNio=e.map(((e,t)=>t+1)),this.updatePartListView()}selectPart(e){(e=d.Muse.parseInteger(e,null))&&(this.excludePartNio.includes(e)?this.excludePartNio=this.excludePartNio.filter((t=>t!==e)):this.excludePartNio.push(e),this.updatePartListView())}movePart(e){const t=p.ideService.songStore;if(!t)return;const n=this.getOneSelectedPartInfo();if(n&&h.SongStore.MovePart(t.data,n.partId,e)){const e=this.allSongParts;this.excludePartNio=[],e.forEach(((e,t)=>{d.Muse.getPartInfo(e).partId!==n.partId&&this.excludePartNio.push(t+1)})),this.setPageContent(),p.ideService.songStore.save()}}updateView(){this.update_TracksView(),this.updatePartListView(),this.updateSongListView()}updatePartListView(){(0,s.getWithDataAttr)("part-item",this.pageEl).forEach((e=>{const t=d.Muse.parseInteger(e.dataset.partNio,0);this.excludePartNio.includes(t)?e.style.fontWeight="400":e.style.fontWeight="700"}))}updateSongListView(){(0,s.getWithDataAttr)("song-item",this.pageEl).forEach((e=>{e.style.fontWeight="400",e.dataset.songId===this.selectedSong&&(e.style.fontWeight="700")}))}selectSong(e,t=""){this.selectedSongName=t,this.selectedSong=this.selectedSong===e?"":e,this.updateSongListView()}moveSong(e,t){h.SongStore.MoveSong(e,t,this.ns),this.setPageContent()}editTracksVolume(){new g.TracksVolumeDialog(this.context).openTrackDialog((e=>{e&&(this.renderTracksView(),p.ideService.songStore.save())}))}editTrack(e){new m.TrackDetailsDialog(this.context).openTrackDialog(p.ideService.songStore?.data,e,(e=>{e&&(this.renderTracksView(),p.ideService.songStore.save())}))}addTrack(){new m.TrackDetailsDialog(this.context).openTrackDialog(p.ideService.songStore.data,"",(e=>{e&&(this.renderTracksView(),p.ideService.songStore.save())}))}renameSong(e){(e=(e||"").trim())&&(this.prompt=this.context.$f7.dialog.prompt("Название","Наименование",(t=>{h.SongStore.RenameSong(e,t.trim(),this.ns),this.setPageContent()}),(()=>{}),this.selectedSongName),this.prompt.open())}deleteSong(e){(e=(e||"").trim())&&(this.confirm=this.context.$f7.dialog.confirm("","Удалить?",(()=>{h.SongStore.DeleteSong(e,this.ns),this.setPageContent()}),(()=>{})),this.confirm.open())}clonePart(){const e=p.ideService.songStore?.data,t=this.getOneSelectedPartInfo();e&&t&&(h.SongStore.ClonePart(e,t.partId),this.setPageContent(),p.ideService.songStore.save())}getUniqTrackName(e,t){let n=0;for(;n++,e.tracks.find((e=>e.name===`${t}${n}`)););return`${t}${n}`}getFullLineModel(e){const t=[];e.dynamic.forEach((e=>{let n=t.find((t=>t.rowInPartId===e.rowInPartId));n||(n={rowInPartId:e.rowInPartId,lines:[],durQ:0,blockOffsetQ:0},t.push(n)),e.lines.length>n.lines.length&&(n.lines=e.lines.map((t=>({durQ:t.durQ,rowInPartId:e.rowInPartId,startOffsetQ:t.startOffsetQ,blockOffsetQ:0,cells:[],cellSizeQ:t.cellSizeQ,endLine:t.endLine}))))})),y.KeyboardCtrl.Sort_ByPartAndRowNio(t);let n=0,r=0;return t.forEach((e=>{r=0,e.lines.forEach((e=>{r+=e.durQ,e.blockOffsetQ=n})),e.durQ=r,e.blockOffsetQ=n,n+=r})),t}createBassTrack2(){const e=p.ideService.songStore?.data;if(!e)return;const t=this.getFullLineModel(e),n=t.reduce(((e,t)=>e+t.durQ),0);let r="@drums",i="$bass",a=e.dynamic.filter((e=>e.track===r)),o=e.tracks.find((e=>e.name===r)),s=e.dynamic.filter((e=>"$H"===e.track)),l=e.tracks.find((e=>"$H"===e.name));if(!o||!l)return null;r=this.getUniqTrackName(e,r),i=this.getUniqTrackName(e,i),a=JSON.parse(JSON.stringify(a));let u=JSON.parse(JSON.stringify(t));o=JSON.parse(JSON.stringify(o)),s=JSON.parse(JSON.stringify(s));let h=JSON.parse(JSON.stringify(t));o.name=i,o.isHardTrack=!1,o.board="bassGuitar",y.KeyboardCtrl.Sort_ByPartAndRowNio(s),y.KeyboardCtrl.Sort_ByPartAndRowNio(a);const f=[];s.forEach((e=>{const t=h.find((t=>t.rowInPartId===e.rowInPartId));e.lines.forEach(((e,n)=>{const r=[];e.cells.forEach((e=>{e.blockOffsetQ=t.blockOffsetQ;const n=r.find((t=>t.startOffsetQ===e.startOffsetQ));n?n.notes=[...n.notes,...e.notes]:r.push(e)})),d.LineModel.SortByStartOffsetQ(r),t.lines[n].cells=r,f.push(...r)}))}));const m=[];a.forEach((e=>{const t=u.find((t=>t.rowInPartId===e.rowInPartId));e.lines=e.lines.map((e=>{e.blockOffsetQ=t.blockOffsetQ;const n=[];return e.cells.forEach((e=>{if(e.blockOffsetQ=t.blockOffsetQ,e.notes=e.notes.filter((e=>"@bd"===e.instName||"@sn"===e.instName)),!e.notes.length)return;const r=n.find((t=>t.startOffsetQ===e.startOffsetQ));r?r.notes=[...r.notes,...e.notes]:n.push(e)})),d.LineModel.SortByStartOffsetQ(n),e.cells=n,m.push(...n),e}))})),f.forEach(((e,t)=>{let r=null;if(!e.notes.length)return;for(let e=t+1;e<f.length;e++)if(f[e].notes.length){r=f[e];break}const i=e.blockOffsetQ+e.startOffsetQ,a=r?r.blockOffsetQ+r.startOffsetQ:n;r=r||e;const o=[];for(let e of m)e.startOffsetQ+e.blockOffsetQ>=i&&e.startOffsetQ+e.blockOffsetQ<a&&e.notes.length&&o.push(e);(0,c.getBassCells)({curr:e,next:r},o,a)})),a.forEach((e=>{e.track=i,e.type="tone",d.LineModel.ClearBlockOffset(e.lines),e.lines.forEach((e=>{e.cells.forEach((e=>{["blockOffsetQ","durQ","line"].forEach((t=>{delete e[t]})),e.notes=e.notes.filter((e=>!!e.durQ))})),e.cells=e.cells.filter((e=>!!e.notes.length))}))})),a.forEach((t=>e.dynamic.push(t))),e.tracks.push(o),d.Muse.sortTracks(p.ideService.songStore.data.tracks),this.setPageContent(),p.ideService.songStore.save()}createBassTrack(){const e=p.ideService.songStore?.data;if(!e)return;const t=this.getFullLineModel(e);let n="@drums",r="$bass",i=e.dynamic.filter((e=>e.track===n)),a=e.tracks.find((e=>e.name===n)),o=e.dynamic.filter((e=>"$H"===e.track)),s=e.tracks.find((e=>"$H"===e.name));if(!a||!s)return null;n=this.getUniqTrackName(e,n),r=this.getUniqTrackName(e,r),i=JSON.parse(JSON.stringify(i));let l=JSON.parse(JSON.stringify(t));a=JSON.parse(JSON.stringify(a)),o=JSON.parse(JSON.stringify(o));let c=JSON.parse(JSON.stringify(t));a.name=r,a.isHardTrack=!1,a.board="bassGuitar",y.KeyboardCtrl.Sort_ByPartAndRowNio(o),y.KeyboardCtrl.Sort_ByPartAndRowNio(i);const u=[];o.forEach((e=>{const t=c.find((t=>t.rowInPartId===e.rowInPartId));e.lines.forEach(((e,n)=>{const r=[];e.cells.forEach((e=>{e.blockOffsetQ=t.blockOffsetQ;const n=r.find((t=>t.startOffsetQ===e.startOffsetQ));n?n.notes=[...n.notes,...e.notes]:r.push(e)})),d.LineModel.SortByStartOffsetQ(r),t.lines[n].cells=r,u.push(...r)}))}));const h=[];i.forEach((e=>{const t=l.find((t=>t.rowInPartId===e.rowInPartId));e.lines=e.lines.map((e=>{e.blockOffsetQ=t.blockOffsetQ;const n=[];return e.cells.forEach((e=>{if(e.blockOffsetQ=t.blockOffsetQ,e.notes=e.notes.filter((e=>"@bd"===e.instName||"@sn"===e.instName)),!e.notes.length)return;const r=n.find((t=>t.startOffsetQ===e.startOffsetQ));r?r.notes=[...r.notes,...e.notes]:n.push(e)})),d.LineModel.SortByStartOffsetQ(n),e.cells=n,h.push(...n),e}))})),h.forEach(((e,t)=>{const n=h[t+1];let r;n?e.notes.forEach((t=>{t.durQ=n.blockOffsetQ+n.startOffsetQ-(e.blockOffsetQ+e.startOffsetQ)})):e.notes.forEach((e=>{e.durQ=30}));for(let t=0;t<u.length&&(u[t].startOffsetQ+u[t].blockOffsetQ<=e.startOffsetQ+e.blockOffsetQ&&(r=u[t]),!(u[t].startOffsetQ+u[t].blockOffsetQ>e.startOffsetQ+e.blockOffsetQ));t++);if(r&&r.notes.length){let t=e.notes.find((e=>"@bd"===e.instName))||e.notes.find((e=>"@sn"===e.instName));if(!t)return void(e.notes=[]);t={durQ:t.durQ,volume:50,id:t.id,lineOffsetQ:t.lineOffsetQ,instCode:"",instName:t.instName};let n="";if("@bd"===t.instName?(n=d.Sound.GetNoteLat(r.notes[0].note),t.note=n[0]+"u"):(n=(0,_.getRandomElement)(r.notes).note,t.note=n[0]+"y"),!n)return void(e.notes=[]);t.durQ=t.durQ>10?t.durQ-10:t.durQ,t.instName="$cBass*f",t.instCode="",e.notes=[t]}else e.notes=[]})),i.forEach((e=>{e.track=r,e.type="tone",d.LineModel.ClearBlockOffset(e.lines),e.lines.forEach((e=>{e.cells.forEach((e=>{delete e.blockOffsetQ,delete e.durQ,e.notes=e.notes.filter((e=>!!e.durQ))})),e.cells=e.cells.filter((e=>!!e.notes.length))}))})),console.log("createBassTrack.headTrack",s),console.log("createBassTrack.bassTrack",a),console.log("createBassTrack.itemsByBass",i),i.forEach((t=>e.dynamic.push(t))),e.tracks.push(a),d.Muse.sortTracks(p.ideService.songStore.data.tracks),this.setPageContent(),p.ideService.songStore.save()}cloneTrack(){const e=this.getSelectedTracks();if(e.length>1)return;const t=e[0],n=p.ideService.songStore?.data;n&&t&&h.SongStore.CloneAndAddTrack(n,t)&&(d.Muse.sortTracks(p.ideService.songStore.data.tracks),this.setPageContent(),p.ideService.songStore.save())}renamePart(){const e=(this.songId||"").trim(),t=this.getOneSelectedPartInfo();e&&t&&(this.prompt=this.context.$f7.dialog.prompt("Название только буквами, цифрами, знаками - или _ (без пробелов)","Наименование",(e=>{h.SongStore.RenamePart(p.ideService.songStore.data,t.partId,e.trim()),this.setPageContent(),p.ideService.songStore.save()}),(()=>{}),t.name),this.prompt.open())}deletePart(){const e=this.getOneSelectedPartInfo();if(!e)return;const t=e.partId;this.confirm=this.context.$f7.dialog.confirm("","Удалить?",(()=>{h.SongStore.DeletePart(p.ideService.songStore.data,t)&&(this.setPageContent(),p.ideService.songStore.save())}),(()=>{})),this.confirm.open()}dialog;prompt;confirm;addSong(e){h.SongStore.AddSongToList(e,this.ns),this.setPageContent()}addPart(e){h.SongStore.AddPartToSong(p.ideService.songStore.data,e)&&(this.setPageContent(),p.ideService.songStore.save())}subscribePageEvents(){(0,s.getWithDataAttr)("add-part-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{this.prompt=this.context.$f7.dialog.prompt("Название только буквами, цифрами, знаками - или _ (без пробелов)","Наименование",(e=>this.addPart(e)),(()=>{}),""),this.prompt.open()}))})),(0,s.getWithDataAttr)("add-song-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{this.prompt=this.context.$f7.dialog.prompt("Название только буквами, цифрами, знаками - или _ (без пробелов)","Наименование",(e=>this.addSong(e)),(()=>{}),""),this.prompt.open()}))})),(0,s.getWithDataAttr)("note-line",this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(()=>{this.tryPlayTextLine({text:e?.dataset?.noteLine})}))})),(0,s.getWithDataAttrValue)("action-type","stop",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.stop()))})),(0,s.getWithDataAttr)("play-all-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playAll()))})),(0,s.getWithDataAttr)("loop-all-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.playAll(100)))})),(0,s.getWithDataAttr)("select-all-parts-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.selectAllParts()))})),(0,s.getWithDataAttr)("unselect-all-parts-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.unselectAllParts()))})),(0,s.getWithDataAttr)("edit-selected-parts-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>this.gotoEditPart()))}))}subscribeMetronomeEvents(){(0,s.getWithDataAttr)("tick-trigger",this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(t=>{this.playTick(e?.dataset?.tickTrigger)}))})),(0,s.getWithDataAttr)("set-bmp-action",this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(()=>{this.bpmRange.setValue(parseInt(e?.dataset?.bpm,10)||100),this.playTick(this.playingTick)}))}))}async tryPlayTextLine({text:e,repeat:t}){return p.ideService.multiPlayer.tryPlayTextLine({text:e,repeat:t})}buildBlocksForMySong(e){e=[];const t=p.ideService.songStore.clone(),n={},r=[];this.getSelectedParts().forEach((e=>{const i=d.Muse.getPartInfo(e),a=t.dynamic.filter((e=>{const t=(e.partId||"").trim(),n=d.Muse.parseInteger(e.rowInPartId.split("-")[0],0);return i.partId&&t?i.partId===t:i.partNio===n}));a.sort(((e,t)=>{const n=d.Muse.parseInteger(e.rowInPartId.split("-")[1],0),r=d.Muse.parseInteger(t.rowInPartId.split("-")[1],0);return n<r?-1:n>r?1:0})),a.forEach((e=>{const t=d.Muse.parseInteger(e.rowInPartId.split("-")[0],0),a=d.Muse.parseInteger(e.rowInPartId.split("-")[1],0);n[t]||(n[t]={id:i.partId,rows:[]},r.push(n[t])),n[t][a]||(n[t][a]=[],n[t].rows.push(n[t][a])),n[t][a].push(e)}))}));let i=[];return r.forEach((t=>{let n=[`<${t.id} set>`];t.rows.forEach((t=>{let r=0,i=`head_${p.ideService.guid.toString()}`,a=[i];t.forEach((t=>{const n=`temp_${p.ideService.guid.toString()}`,i=d.LineModel.GetDurationQByLines(t.lines);let o=this.getNotes(n,t);o||(o=`<${n} $>\n$organ: ${i}`);const s=d.Muse.getTextBlocks(o)[0];e=[...e,s],r=i>r?i:r,a.push(n)}));const o=d.Muse.getTextBlocks(`<${i} $>\n$organ: ${r}`)[0];e=[...e,o],n.push(a.join(" "))})),i.push(n)})),i.forEach((t=>{const n=d.Muse.getTextBlocks(t.join("\n"))[0];e=[...e,n]})),e}getNotes(e,t){if(t.lines.forEach((e=>{e.blockOffsetQ=0})),"drums"===t.type||t.track.startsWith(d.Muse.drumChar)){const n=t.track||d.Muse.drumsTrack;return d.LineModel.GetDrumNotes(e,n,t.lines)}return d.LineModel.GetToneNotes({blockName:e,rows:t.lines,instrName:"$organ",track:t.track||"$unknown"})}textModelToLineModel(e,t){const n=t.ns,r=d.Muse.textModelToLineModel({songId:e,ns:n,settings:p.ideService.settings,blocks:p.ideService.blocks,sourceSong:t,targetSong:h.SongStore.GetOldSong(e,n,!0)});return h.SongStore.SetSong(e,r,t.ns),r}playAll(e=1,t=!1){this.stop();let n=this.useLineModel?this.buildBlocksForMySong(this.blocks):[...this.blocks];const r={blocks:n,currBlock:null,currRowInfo:{first:0,last:0},excludeIndex:this.excludePartNio,midiBlockOut:null,playBlockOut:"",topBlocksOut:[]};if(this.useLineModel){const e=this.getSelectedParts().map((e=>`> ${e}`));r.excludeIndex=[],r.currBlock=d.Muse.createOutBlock({id:"out",type:"text",bpm:this.bpmValue,rows:e,volume:p.ideService.outVolume})}else r.currBlock=r.blocks.find((e=>"out"===e.id));d.Muse.getMidiConfig(r);const i=r.playBlockOut;if(n=[...r.blocks],r.playBlockOut)return p.ideService.multiPlayer.tryPlayMidiBlock({blocks:n,playBlock:i,cb:(e,t)=>{"finish"===e&&this.recorder&&(this.recorder.stopAndSave(),this.recorder=null)},excludeLines:this.settings.exclude,dataByTracks:p.ideService.dataByTracks,bpm:this.bpmValue,repeatCount:e}),void(t&&(this.recorder&&(this.recorder.break(),this.recorder=null),this.recorder=new v.WavRecorder(d.Muse.Sound.ctx),this.recorder.start(this.songId)));p.ideService.multiPlayer.stopAndClearMidiPlayer()}stop(){p.ideService.multiPlayer.stopAndClearMidiPlayer(),this.recorder&&(this.recorder.break(),this.recorder=null)}async play(e,t){p.ideService.multiPlayer.tryPlayMidiBlock({blocks:e,repeatCount:t})}replaceSong(e){if(!(e=(e||"").trim()))return null;let t;t=JSON.parse(e),t.tracks.forEach((e=>{e.isHardTrack=!1})),h.SongStore.SetSong(this.songId,t,this.ns),this.initData(!0),this.setPageContent()}uploadFile(e){const t=e.target.files;t[0]&&(async e=>{const t=new FileReader;t.readAsText(e),t.addEventListener("load",(async e=>{const t=e.target.result;this.replaceSong(t)}))})(t[0])}uploadFileClick(){(0,s.getWithDataAttr)("upload-song-input",this.pageEl).forEach((e=>{e.click()}))}saveSong(){const e=p.ideService.songStore;e&&(e.data.bmpValue=this.bpmValue,e.save())}async choiceTracks(){const e=p.ideService.songStore;return e?new Promise(((t,n)=>{new b.GetTrackDialog(this.context).openTrackDialog(e.data,(e=>{t(e||[])}))})):Promise.resolve(null)}async downloadFile(){const e=await this.choiceTracks();if(!e.length)return;let t=this.songId;if(!t)return;let n=p.ideService?.songStore?.data;n&&(n=JSON.parse(JSON.stringify(n)),n.tracks=n.tracks.filter((t=>e.includes(t.name))),n.dynamic=n.dynamic.filter((t=>e.includes(t.track))),function(e,t,n){let r=new Blob([e],{type:"application/text"}),i=window.URL.createObjectURL(r);!function(e,t){let n=document.createElement("a");n.download=t,n.href=e,n.click()}(i,n),window.URL.revokeObjectURL(i)}(JSON.stringify(n,null,2),0,`${t}.txt`))}}},9107:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MBoxOldPage=void 0;const i=n(8593),a=n(7526),o=r(n(8976)),s=new a.Muse.MultiPlayer,l=new a.Muse.MultiPlayer,c=new a.Muse.Synthesizer;function d(e,t){return(t||document).querySelectorAll(`[data-${e}]`)||[]}c.connect({ctx:a.Muse.Sound.ctx}),c.setSettings(a.Muse.defaultSynthSettings),a.Muse.Sound.AddSound(366),a.Muse.Sound.AddSound(697),a.Muse.Sound.AddSound(776),a.Muse.Sound.AddSound(762),a.Muse.Sound.AddSound(790),a.Muse.Sound.AddSound(781),a.Muse.Sound.AddSound(320),a.Muse.Sound.AddSound(137);const u="set-note",p={"1:4":"\n<beat@>\n-             : 1 :\n@cowbell      : 1 :\n".trim(),"2:4":"\n<beat@>\n-             : 1   2   :\n@cowbell      : 1       :\n@nil          :     2   :\n".trim(),"3:4":"\n<beat@>\n-             : 1   2   3   :\n@cowbell      : 1           :\n@nil          :     2   3   :\n".trim(),"4:4":"\n<beat@>\n-             : 1   2   3   4   :\n@cowbell      : 1               :\n@nil          :     2   3   4   :\n".trim()};t.MBoxOldPage=class{props;context;view="info";bpmMultiple=100;playingTick="";bpmRange;get pageId(){return this.props.id}get pageEl(){return this.context.$el.value[0]}get el$(){return this.context.$el.value}get setInfo(){return o.default[this.pageId]}getId(e){return this.pageId+"-"+e}constructor(e,t){this.props=e,this.context=t}onMounted(){this.setViewInfo(),(0,i.dyName)("panel-right-content").innerHTML='\n      <p data-name="action-info">табы</p>\n      <p data-name="action-drums">барабан</p>\n    ',this.subscribePageEvents()}setViewInfo(){this.view="info";let e=`\n        <div style="padding: 1rem .5rem 1rem .5rem;">\n          &emsp;\n          <a data-tick-trigger="1:4"><b>1:4</b></a>&emsp;\n          <a data-tick-trigger="2:4"><b>2:4</b></a>&emsp;\n          <a data-tick-trigger="3:4"><b>3:4</b></a>&emsp;\n          <a data-tick-trigger="4:4"><b>4:4</b></a>&emsp;\n          <a data-tick-trigger="stop"><b>stop</b></a>&emsp;\n          <div \n            class="range-slider"\n            data-name="slider"\n            data-label="true"\n            data-min="0"   \n            data-max="200"\n            data-step="1"\n            data-value="100"\n            data-scale="true"\n            data-scale-steps="10"\n            data-scale-sub-steps="5"\n          >\n          </div>\n        </div>\n        ${this.getTracksContent()}\n    `;this.setInfo.hideMetronome&&(e="");const t=`\n      <div class="page-content" style="padding-top: 0; padding-bottom: 2rem;">\n      ${e}\n      <div data-name="setContent">\n        ${this.setInfo.content}\n      </div>\n      </div>\n    `;this.el$.html(t),this.bpmRange=this.context.$f7.range.create({el:(0,i.dyName)("slider",this.pageEl),on:{changed:e=>{this.bpmMultiple=e.value,this.playingTick&&this.playTick(this.playingTick)}}}),this.subscribViewInfoEvents()}subscribePageEvents(){(0,i.dyName)("action-drums",(0,i.dyName)("panel-right-content")).addEventListener("click",(()=>{this.setViewDrums()})),(0,i.dyName)("action-info",(0,i.dyName)("panel-right-content")).addEventListener("click",(()=>{this.setViewInfo()})),d("tick-trigger",this.pageEl)?.forEach((e=>{e.addEventListener("click",(t=>{this.playTick(e?.dataset?.tickTrigger)}))})),d("note-line",this.pageEl)?.forEach((e=>{e.addEventListener("click",(t=>{this.tryPlayTextLine({text:e?.dataset?.noteLine})}))})),d("note-key",this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(t=>{let n=e?.dataset?.noteLat||"";e.style.backgroundColor="lightgray",c.playSound({keyOrNote:n,id:e?.dataset?.keyboardId});const r=(0,i.dyName)("relative-keyboard-wrapper",this.pageEl);r&&(r.dataset.relativeKeyboardBase=e?.dataset?.noteLat)})),e.addEventListener("pointerup",(t=>{let n=e?.dataset?.noteLat||"";c.playSound({keyOrNote:n,id:e?.dataset?.keyboardId,onlyStop:!0})}))}));const e=()=>{d("note-key",this.pageEl)?.forEach((e=>{e.style.backgroundColor="white"}))};let t=(0,i.dyName)("clear-keys-color",this.pageEl);t&&t.addEventListener("click",(()=>e())),t=(0,i.dyName)("select-random-key",this.pageEl),t&&t.addEventListener("click",(()=>{const t=a.Muse.getRandomElement("dtrnmfvszlkb")+a.Muse.getRandomElement("uoa"),n=(0,i.dyName)(`note-key-${t}`,(0,i.dyName)("keyboard-solo",this.pageEl));n&&(e(),n.style.backgroundColor="lightgray")})),d("relative-key",this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(()=>{const t=(0,i.dyName)("relative-keyboard-wrapper");if(!t)return;let n=t.dataset.relativeKeyboardBase||"do",r=a.Muse.getNoteByOffset(n,e.dataset.relativeKey);r&&(t.dataset.relativeKeyboardBase=r,d(u,this.pageEl)?.forEach((e=>{e.style.backgroundColor="white"})),(0,i.dyName)(`set-note-${r}`,this.pageEl)&&((0,i.dyName)(`set-note-${r}`,this.pageEl).style.backgroundColor="lightgray"),this.tryPlayTextLine({text:`b60 ${r}-25`}))}))})),d(u,this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(()=>{const t=(0,i.dyName)("relative-keyboard-wrapper",this.pageEl);if(!t)return;d(u,this.pageEl)?.forEach((e=>{e.style.backgroundColor="white"})),e.style.backgroundColor="lightgray";const n=e.innerText.trim();t.dataset.relativeKeyboardBase=n,this.tryPlayTextLine({text:`b60 ${n}-25`})}))})),d("set-bmp-action",this.pageEl)?.forEach((e=>{e.addEventListener("pointerdown",(()=>{this.bpmRange.setValue(parseInt(e?.dataset?.bpm,10)||100),this.playTick(this.playingTick)}))}))}getTracksContent(){return this.setInfo?.tracks?.length?this.setInfo.tracks.reduce(((e,t)=>(e+=`\n        <div class="row">\n          <button id="${this.getId("action-play-"+t.key)}" class="button col">${t.name||t.key}</button>\n          </div>\n        `).trim()),`\n        <div class="row">\n          <button id="${this.getId("action-stop")}" class="button col">stop</button>\n        </div>                  \n    `):""}playTick(e){e=e||"",this.playingTick=e,l.stopAndClearMidiPlayer();const t=p[this.playingTick];if(!t)return void(this.playingTick="");const n=`\n        <out r1000000>\n        beat@\n\n        ${t}\n      `;l.tryPlayMidiBlock({blocks:n,bpm:this.bpmMultiple})}subscribViewInfoEvents(){this.subscribViewDrumsEvents()}subscribViewDrumsEvents(){setTimeout((()=>{(0,i.byId)(this.getId("action-stop"))?.addEventListener("click",(e=>{this.stop()})),this.setInfo.tracks.forEach((e=>{(0,i.byId)(`${this.getId("action-play-"+e.key)}`).addEventListener("click",(t=>{const n=this.setInfo.tracks.find((t=>t.key===e.key));n&&this.play(n.value)}))}))}),550)}setViewDrums(){this.view="drums";const e=`\n      <div class="page-content" style="padding-top: 0; padding-bottom: 2rem;">\n        <div style="padding: 1rem .5rem 1rem .5rem;">\n          % ускорения\n          <div \n            class="range-slider"\n            data-name="slider"\n            data-label="true"\n            data-min="0"   \n            data-max="200"\n            data-step="1"\n            data-value="100"\n            data-scale="true"\n            data-scale-steps="10"\n            data-scale-sub-steps="5"\n          >\n          </div>\n        </div>\n        ${this.getTracksContent()}\n      </div>\n    `;this.el$.html(e),this.bpmRange=this.context.$f7.range.create({el:(0,i.dyName)("slider",this.pageEl),on:{changed:e=>{this.bpmMultiple=e.value}}}),this.subscribViewDrumsEvents()}async tryPlayTextLine({text:e,repeat:t}){return s.tryPlayTextLine({text:e,repeat:t})}stop(){s.stopAndClearMidiPlayer()}async play(e,t){s.tryPlayMidiBlock({blocks:e,repeatCount:t})}}},8582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuseEditorPage=void 0;const r=n(2179),i=n(5336),a=n(8586),o=n(5725),s=n(2659),l=n(1134);var c;!function(e){e.fileTree="fileTree",e.textEditor="textEditor",e.fontViewer="fontViewer"}(c||(c={}));const d="component";let u=1,p={root:{type:"row",content:[{type:d,componentType:c.fileTree,title:"fileTree",id:"fileTree",componentState:{title:"fileTree",componentType:c.fileTree}},{type:d,componentType:c.textEditor,title:"settings",id:"settings",componentState:{title:"settings",file:"settings",field:"short",componentType:c.textEditor}}]}};function h(e,t){const n=t.componentState;return n.guid=u++,n.componentType===c.textEditor?{component:new s.TextEditorGlComponent(e,t),virtual:!1}:n.componentType===c.fileTree?{component:new o.FileTreeGlComponent(e,t),virtual:!1}:n.componentType===c.fontViewer?{component:new l.FontViewerGlComponent(e,t),virtual:!1}:{component:new a.EmptyGlComponent(e,t),virtual:!1}}function f(e){}const m="muse-editor-page-top-menu",g="muse-editor-page-gl-container",v={settings:{title:"settings",file:"settings",field:"short",componentType:c.textEditor},fileTree:{title:"fileTree",componentType:c.fileTree},fontViewer:{title:"fontViewer",componentType:c.fontViewer}};t.MuseEditorPage=class{props;context;glLayout;glContainer;menuContainer;get pageId(){return this.props.id}get pageEl(){return this.context.$el.value[0]}get el$(){return this.context.$el.value}constructor(e,t){this.props=e,this.context=t}onMounted(){this.addTopContainers(),this.setGl(),this.setTopMenu(),this.subscribeEvents()}onUnmounted(){this.unsubscribeEvents()}setTopMenu(){Object.keys(v).forEach((e=>{const t=v[e],n=document.createElement("span");n.innerText=e,this.menuContainer.appendChild(n),n.style.paddingRight="4px",this.glLayout.newDragSource(n,t.componentType,{file:t.file,field:t.field,componentType:t.componentType},t.title)}))}setGlContainerSize=()=>{const e=function(){const e=window,t=e.document.documentElement,n=e.document.getElementsByTagName("body")[0];return{width:e.innerWidth||t.clientWidth||n.clientWidth,height:e.innerHeight||t.clientHeight||n.clientHeight}}(),t=this.glContainer.getBoundingClientRect();this.glContainer.style.width=e.width-16+"px",this.glContainer.style.height=e.height-t.y-16+"px",this.glLayout.updateSizeFromContainer()};setGl(){this.glContainer=document.getElementById(g),this.menuContainer=document.getElementById(m),this.glLayout=new r.GoldenLayout(this.glContainer,h,f),this.glLayout.loadLayout(p),setTimeout((()=>this.setGlContainerSize()),100)}addTopContainers(){this.el$.html(`\n            <div style="height: 32px; margin: 2px;" id="${m}"></div>\n            <div id="${g}" style="width: 99%; height: calc(90% - 32px);"></div>\n    `)}getId(e){return this.pageId+"-"+e}subscribeEvents(){window.addEventListener("resize",this.setGlContainerSize),i.ideService.on(i.ideEvents.openFile,this,(e=>{const t=this.glLayout.findFirstComponentItemById(c.fileTree);let n=null;t&&(n=t.parentItem);for(let e of this.glLayout.rootItem.contentItems)if(e!==n){n=e;break}n.addItem({type:"component",componentType:c.textEditor,componentState:{fileInfo:e,componentType:c.textEditor,title:e.name},title:e.name},0)}))}unsubscribeEvents(){window.removeEventListener("resize",this.setGlContainerSize),i.ideService.off(i.ideEvents.openFile,this)}}},2062:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RollPage=void 0;const r=n(5748);null==customElements.get(r.NoteSequencer.tag)&&customElements.define(r.NoteSequencer.tag,r.NoteSequencer),t.RollPage=class{props;context;get pageId(){return this.props.id}get pageEl(){return this.context.$el.value[0]}get el$(){return this.context.$el.value}constructor(e,t){this.props=e,this.context=t}onMounted(){this.setContent()}setContent(){this.el$.html('\n      <div style="height: 90%; width: 99%;">\n        <note-sequencer theme="default"></note-sequencer>    \n      </div>    \n    ')}getId(e){return this.pageId+"-"+e}}},222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSettingsPage=void 0;const r=n(7526),i=n(8593),a=n(3458);t.UserSettingsPage=class{props;context;get pageId(){return this.props.id}get pageEl(){return this.context.$el.value[0]}get el$(){return this.context.$el.value}constructor(e,t){this.props=e,this.context=t}onMounted(){this.setContent()}setContent(){const e=a.UserSettingsStore.GetUserSettings();this.el$.html(`\n            <div style="">\n                <div style="padding: .5rem 0 .5rem 1rem;" class="text-align-center">\n                    <div>\n                        <small>громкость клавиатуры</small>                   \n                    </div>   \n                    <div\n                        class="stepper stepper-fill stepper-init"\n                        data-wraps="true"\n                        data-autorepeat="true"\n                        data-autorepeat-dynamic="true"\n                        data-manual-input-mode="true"\n                    >\n                        <div class="stepper-button-minus"></div>\n                        <div class="stepper-input-wrap">\n                            <input\n                                data-board-volume-input\n                                type="text"\n                                value="${e.boardVolume}" min="0" max="100" step="1" />\n                        </div>\n                        <div class="stepper-button-plus"></div>\n                    </div>\n                    \n                    <div>\n                        <small>имя пользователя</small>                   \n                    </div>                                        \n                    <div class="item-input-wrap">\n                        <input\n                            data-user-name-input\n                            type="text"\n                            placeholder="User name"\n                            value="${e.userName}"\n                        />\n                    </div>             \n                </div>\n                \n                <div class="list list-strong list-outline-ios list-dividers-ios">\n                    <ul>\n                        <li>\n                            <label class="item-content">\n                                <div class="item-inner">\n                                    <div class="item-title">Ноты кириллицей</div>\n                                    <div class="item-after">\n                                        <div class="toggle toggle-init">\n                                            <input\n                                                data-use-сyrillic-note\n                                                type="checkbox"\n                                                ${e.useCyrillicNote?"checked":""}\n                                            >\n                                            <span class="toggle-icon"></span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </label>\n                        </li>\n                    </ul>                \n                </div>                \n                \n                <div data-save-user-settings-action style="padding: .5rem 1rem .5rem 1rem;">\n                    <button class="button button-fill color-green">save</button>\n                </div>\n            </div>    \n        `),(0,i.getWithDataAttr)("save-user-settings-action",this.pageEl).forEach((e=>{e.addEventListener("pointerdown",(()=>{this.saveSettings()}))}))}getId(e){return this.pageId+"-"+e}saveSettings(){let e=70,t="",n=!1;(0,i.getWithDataAttr)("board-volume-input",this.pageEl).forEach((t=>{e=r.Muse.parseInteger(t.value,e)})),(0,i.getWithDataAttr)("user-name-input",this.pageEl).forEach((e=>{t=(e.value||"").trim()})),(0,i.getWithDataAttr)("use-сyrillic-note",this.pageEl).forEach((e=>{n=e.checked})),a.UserSettingsStore.SetUserSettings({boardVolume:e,userName:t,useCyrillicNote:n})}}},8760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sings=void 0,t.sings={play:"&nbsp;&#9654;&nbsp;",play1:"&#9654;",stop:"&nbsp;&#9632;&nbsp;",edit:"&nbsp;&#9998;&nbsp;",select:"&nbsp;&#9745;&nbsp;",unselect:"&nbsp;&#9744;&nbsp;",add:"&nbsp;&#10010;&nbsp;",delete:"&nbsp;&#9746&nbsp;",note:"&nbsp;&#9834;&nbsp;"}},6625:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SongStore=t.SONG_LIST=t.BAND_SONG=t.MY_SONG=t.DEFAULT_OUT_VOLUME=void 0;const r=n(7526);function i(e){return!!r.Muse.drumIdByAlias[e]}function a(e){return!!r.Muse.bassGuitarCodes[e]}function o(e){return!!r.Muse.guitarCodes[e]}function s(e){return e.dynamic.forEach((e=>{("drums"===e.type||e.track.startsWith("@"))&&e.lines.forEach((e=>{e.cells.forEach((e=>{e.notes.forEach((e=>{delete e.headColor,delete e.bodyColor,delete e.char,delete e.vocalism}))}))}))})),e}t.DEFAULT_OUT_VOLUME=70,t.MY_SONG="my-song",t.BAND_SONG="band-song",t.SONG_LIST="song-list";const l=[function(e){return e.dynamic.forEach((e=>{e.track=e.track||"",e.type=e.type||"",("drums"===e.type||e.track.startsWith("@"))&&e.lines.forEach((e=>{e.cells.forEach((e=>{e.notes.forEach((e=>{e.durQ=1,e.instName=`@${e.note}`}))}))}))})),e.version=1,e}];class c{songId;ns;data;constructor(e,t,n){this.songId=e,this.ns=t,this.data=n}save(e){(e=e||this.data)&&this.ns&&(c.SetSong(this.songId,e,this.ns),this.data=e)}clone(e){return e=e||this.data,JSON.parse(JSON.stringify(e))}static DeletePart(e,t){return t=(t||"").trim(),!(!e||!t||(e.parts=e.parts.filter((e=>e.id!==t)),e.dynamic=e.dynamic.filter((e=>e.partId!==t)),0))}static MoveSong(e,t,n){let r=c.GetSongs(n),i=r.findIndex((t=>t.id===e));if(r.length<2||i<0||i+t<0||i+t>r.length-1)return;let a=r[i];r=r.filter((t=>t.id!==e));let o=r.slice(0,i+t),s=r.slice(i+t);r=[...o,a,...s],c.SetSongs(r,n)}static MovePart(e,t,n){if(!e)return!1;let r=e.parts,i=r.findIndex((e=>e.id===t));if(r.length<2||i<0||i+n<0||i+n>r.length-1)return!1;let a=r[i];r=r.filter((e=>e.id!==t));let o=r.slice(0,i+n),s=r.slice(i+n);return r=[...o,a,...s],e.parts=r,c.ReindexPartRows(e),!0}static ReindexPartRows(e){e.parts.forEach(((t,n)=>{const i=n+1;e.dynamic.filter((e=>e.partId===t.id)).forEach((e=>{const t=e.rowNio||r.Muse.getPartInfo(e.rowInPartId).rowNio;e.rowInPartId=`${i}-${t}`,e.lines.forEach((e=>{const t=r.Muse.getPartInfo(e.rowInPartId).rowNio;e.rowInPartId=`${i}-${t}`}))}))}))}static RenameSong(e,t,n){const r=c.GetSongs(n);r.forEach((n=>{n.id===e&&(n.name=t)})),c.SetSongs(r,n)}static RenamePart(e,t,n){e&&e.parts.forEach((e=>{e.id===t&&(e.name=n)}))}static RenameTrack(e,t,n){if(!e)return!1;let r=!1;return e.tracks.forEach((e=>{e.name===t&&(r=!0,e.name=n)})),e.dynamic.forEach((e=>{e.track===t&&(r=!0,e.track=n)})),r}static DeleteSong(e,t){let n=c.GetSongs(t);n=n.filter((t=>t.id!==e)),c.SetSongs(n,t),localStorage.removeItem(`[${t}]${e}`)}static GetSongs(e){return"my-song"===e&&localStorage.getItem("my-songs")&&(localStorage.setItem(`[${t.SONG_LIST}]my-song`,localStorage.getItem("my-songs")),localStorage.removeItem("my-songs")),localStorage.getItem(`[${t.SONG_LIST}]${e}`)||this.SetSongs([],e),JSON.parse(localStorage.getItem(`[${t.SONG_LIST}]${e}`))}static SetSongs(e,t){localStorage.setItem(`[song-list]${t}`,JSON.stringify(e))}static NormalizeSongNode(e){return e?(e.version=r.Muse.parseInteger(e.version,0),e.parts=Array.isArray(e.parts)?e.parts:[],e.dynamic=Array.isArray(e.dynamic)?e.dynamic:[],e.tracks=Array.isArray(e.tracks)?e.tracks:[],e.bmpValue=e.bmpValue?e.bmpValue:90,e.dynamic.forEach((e=>{e.track||"drums"!==e.type||(e.track=r.Muse.drumsTrack)})),e.tracks.length||(e.tracks=[{name:r.Muse.drumsTrack,board:"drums",volume:50},{name:"$bass",board:"bassGuitar",volume:30},{name:"$guit",board:"guitar",volume:50},{name:"$keys",board:"bassSolo34",volume:50}]),e):e}static TransformOldDrums(e){return s(e)}static TransformVersion(e){e=s(e);const t=r.Muse.parseInteger(e.version,0);return t===l.length||l.slice(t).forEach((t=>{e=t(e)})),e}static GetOldSong(e,t,n=!1){let i=c.NormalizeSongNode(JSON.parse(localStorage.getItem(`[${t}]${e}`)));if(!i&&!n)return null;if(!i)return i=c.GetEmptySong(),i.score="",i;const a=r.Muse.parseInteger(i.version,0);return i=c.TransformVersion(i),i.version!==a&&c.SetSong(e,i,t),i}static GetSong(e,t,n=!1){let i=c.NormalizeSongNode(JSON.parse(localStorage.getItem(`[${t}]${e}`)));if(!i&&!n)return null;if(i){const n=r.Muse.parseInteger(i.version,0);return i=c.TransformVersion(i),i.version!==n&&c.SetSong(e,i,t),i}return i=c.NormalizeSongNode(c.GetEmptySong()),c.SetSong(e,i,t),i}static SetSong(e,t,n,r){if(n&&t&&e){if(!r){const e={};t.tracks.forEach((t=>{t.isHardTrack&&(e[t.name]=!0)})),t={...t,dynamic:t.dynamic.filter((t=>!e[t.track]))}}localStorage.setItem(`[${n}]${e}`,JSON.stringify(t))}}static GetEmptySong(){return{bmpValue:90,volume:t.DEFAULT_OUT_VOLUME,content:"",break:"",drums:"",tracks:[],hideMetronome:!1,parts:[],score:"",dynamic:[],source:"my",version:l.length}}static CloneAndAddTrack(e,t){if(!e)return null;let n=e.dynamic.filter((e=>e.track===t)),r=e.tracks.find((e=>e.name===t));if(!r)return null;let i=0;for(;i++,e.tracks.find((e=>e.name===`${t}${i}`)););return t=`${t}${i}`,n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r)),r.name=t,r.isHardTrack=!1,e.tracks.push(r),n.forEach((n=>{n.track=t,e.dynamic.push(n)})),r}static ClonePart(e,t){if(!e)return;const n=e.parts.filter((e=>e.id===t))[0];if(!n)return null;const i=n.name.trim();if(!i)return null;let a="";for(;!a;){const t=r.Muse.guid(2);e.parts.filter((e=>e.id===t)).length||(a=t)}const o={name:i,id:a};e.parts.push(o);const s=e.parts.length;return e.dynamic.filter((e=>e.partId===t)).forEach((t=>{const n=r.Muse.getRowNio(t.rowInPartId),i=`${s}-${n}`;(t=JSON.parse(JSON.stringify(t))).partId=a,t.rowInPartId=i,t.lines.forEach((e=>{e.rowInPartId=i})),e.dynamic.push(t)})),o}static DeleteTrack(e,t){return!!e&&(!!e.tracks.find((e=>e.name===t))&&(e.tracks=e.tracks.filter((e=>e.name!==t)),e.dynamic=e.dynamic.filter((e=>e.track!==t)),!0))}static AddPartToSong(e,t){if(!(t=(t||"").trim()))return null;let n="";for(e.parts=Array.isArray(e.parts)?e.parts:[];!n;){const t=r.Muse.guid(2);e.parts.filter((e=>e.id===t)).length||(n=t)}const i={name:t,id:n};return e.parts.push(i),i}static AddSongToList(e,t){if(!(e=(e||"").trim()))return;let n="",i=c.GetSongs(t);for(;!n;){const e=r.Muse.guid(3);i.filter((t=>t.id===e)).length||(n=e)}const a={name:e,id:n};return i.push(a),c.SetSongs(i,t),a}static GetRowsByPart(e,t,n){return e.reduce(((e,i)=>{const a=(i.partId||"").trim(),o=r.Muse.getPartNio(i.rowInPartId),s=r.Muse.getRowNio(i.rowInPartId);return t&&a&&t!==a||n&&o&&n!==o?e:s?(e.push(i),e):e}),[])}static Delete_RowFromPart(e,t,n,i){return e.dynamic=e.dynamic.filter((e=>{const a=(e.partId||"").trim(),o=r.Muse.getPartNio(e.rowInPartId),s=r.Muse.getRowNio(e.rowInPartId);return!(!t||!a||t===a)||!(!n||!o||n===o)||s!==i})),e}static GetRowsByInstrument(e,t){const n=[];return e.forEach((e=>{let r=0;e.lines.forEach((e=>{e.cells=e.cells.filter((e=>{let n=0;return e.notes=e.notes.filter((e=>{const i=t(e)?1:0;return r+=i,n+=i,!!i})),!!n}))})),r&&n.push(e)})),n}static Transform(e){if(!(e=(e||"").trim()))return null;let t;t=JSON.parse(e);const n=c.GetRowsByInstrument(t.dynamic,(e=>i(e.note)));n.forEach((e=>{e.track=r.Muse.drumsTrack,e.type="drums"})),t=JSON.parse(e);const s=c.GetRowsByInstrument(t.dynamic,(e=>a(e.instCode)));s.forEach((e=>{e.track="$bass",e.type="bassGuitar"})),t=JSON.parse(e);const l=c.GetRowsByInstrument(t.dynamic,(e=>o(e.instCode)));l.forEach((e=>{e.track="$guitar",e.type="guitar"})),t=JSON.parse(e);const d=c.GetRowsByInstrument(t.dynamic,(e=>function(e){return!o(e.instCode)&&!a(e.instCode)&&!i(e.note)}(e)));return d.forEach((e=>{e.track="$organ",e.type="guitar"})),t.dynamic=[...d,...s,...l,...n],t}static GetTracksNodeBySong(e){if(!e)return[];const n=e.tracks||[];return n.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),n.find((e=>"total"===e.name))||n.unshift({name:"total",volume:r.Muse.parseInteger(e.volume,t.DEFAULT_OUT_VOLUME),board:""}),n.forEach((t=>{const n=[];e.dynamic.filter((e=>e.track===t.name)).forEach((e=>{e.lines.forEach((e=>{e.cells.forEach((e=>{e.notes.forEach((e=>{n.includes(e.instName)||n.push(e.instName)}))}))}))})),n.sort();const i=t.items||[];t.items=n.map((e=>({name:e,volume:50}))),i.length&&t.items.forEach((e=>{const t=i.find((t=>t.name===e.name));e.volume=r.Muse.isPresent(t?.volume)?t.volume:e.volume}))})),e.tracks}}t.SongStore=c},9072:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playAndSaveBtn=t.wavBtn=t.soundBtn=t.backBtn=t.saveBtn=t.uploadBtn=t.downloadBtn=t.instrumentBtn=t.deleteLineBtn=t.addLineBtn=t.insertLineBtn=t.playLoopBtn=t.stopBtn=t.playBtn3=t.playBtn2=t.playBtn=t.deleteBtn=t.copyPasteBtn=t.moveDownBtn=t.moveTopBtn=t.moveRightBtn=t.moveLeftBtn=t.editBtn=t.uncheckBtn=t.checkBtn=t.renameBtn=t.pasteBtn=t.copyManyBtn=t.emptyBtn=t.copyBtn=t.noteBtn=t.minusBtn=t.plusBtn=void 0;const n=["display: inline-block;","border: 1px solid lightgray; border-radius: 0.25rem;","line-height: 0;","user-select: none;","padding: 0; margin: 0; margin-right: .4rem;"].join("");t.plusBtn=function(e,t="green",r=20){return e=(e||"").trim(),t=(t||"").trim()||"green",`\n        <span style="${n}" ${e}>\n            <svg\n                width="${r}px" height="${r}px" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: ${t};"\n            >\n                <rect x="2" y="8" width="16" height="4"></rect>                \n                <rect x="8" y="2" width="4" height="16"></rect>                        \n            </svg>\n        </span>`.trim()},t.minusBtn=function(e,t="red",r=20){return e=(e||"").trim(),t=(t||"").trim()||"red",`\n        <span style="${n}" ${e}>\n            <svg\n                width="${r}px" height="${r}px" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: ${t};"\n            >\n                <rect x="2" y="8" width="16" height="4"></rect>                        \n            </svg>\n        </span>`.trim()},t.noteBtn=function(e,t="blue"){return e=(e||"").trim(),`\n        <span style="${n}" ${e}>\n            <svg \n                width="20px" height="20px" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: ${t};"                \n            >\n                <path d="M9.78103 1.69759C14.1038 4.63512 16.25 6.76176 16.25 8.30413C16.25 9.79646 15.4291 11.0034 13.8541 11.8872C13.418 12.132 12.9324 11.6555 13.1688 11.2148C13.5756 10.4565 13.4416 9.60793 12.7079 8.59803C11.934 7.53285 10.8174 6.75731 9.34301 6.26969C9.13826 6.20198 9 6.01063 9 5.79498V2.11114C9 1.70978 9.44906 1.47201 9.78103 1.69759Z"/>\n                <path d="M7.75 17.75C5.97914 17.75 4.5 16.607 4.5 15.125C4.5 13.643 5.97914 12.5 7.75 12.5C9.52086 12.5 11 13.643 11 15.125C11 16.607 9.52086 17.75 7.75 17.75Z"/>\n                <path d="M10 4C10.5523 4 11 4.44772 11 5V15C11 15.5523 10.5523 16 10 16C9.44772 16 9 15.5523 9 15V5C9 4.44772 9.44772 4 10 4Z"/>\n            </svg>\n        </span>`.trim()},t.copyBtn=function(e,t="black"){return e=(e||"").trim(),`\n        <span style="${n}" ${e}>\n            <svg \n                width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                        \n            >\n                <path d="M20 2H10c-1.103 0-2 .897-2 2v4H4c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2v-4h4c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zM4 20V10h10l.002 10H4zm16-6h-4v-4c0-1.103-.897-2-2-2h-4V4h10v10z"/>\n            </svg>\n        </span>`.trim()},t.emptyBtn=function(e,t){return e=(e||"").trim(),`\n        <span style="${n} width: ${t}px; height: ${t}px;" ${e}>\n        </span>`.trim()},t.copyManyBtn=function(e,t="black"){return e=(e||"").trim(),`\n        <span style="${n}" ${e}>\n            <svg\n                width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"            \n            >\n                <path d="M20 2H10c-1.103 0-2 .897-2 2v4H4c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2v-4h4c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zM4 20V10h10l.002 10H4zm16-6h-4v-4c0-1.103-.897-2-2-2h-4V4h10v10z"/><path d="M6 12h6v2H6zm0 4h6v2H6z"/>\n            </svg>\n        </span>`.trim()},t.pasteBtn=function(e,t="black"){return e=(e||"").trim(),`\n        <span style="${n}" ${e}>\n            <svg\n                width="20px" height="20px" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M22.6,4H21.55a3.89,3.89,0,0,0-7.31,0H13.4A2.41,2.41,0,0,0,11,6.4V10H25V6.4A2.41,2.41,0,0,0,22.6,4ZM23,8H13V6.25A.25.25,0,0,1,13.25,6h2.69l.12-1.11A1.24,1.24,0,0,1,16.61,4a2,2,0,0,1,3.15,1.18l.09.84h2.9a.25.25,0,0,1,.25.25Z" class="clr-i-outline clr-i-outline-path-1"></path><path d="M33.25,18.06H21.33l2.84-2.83a1,1,0,1,0-1.42-1.42L17.5,19.06l5.25,5.25a1,1,0,0,0,.71.29,1,1,0,0,0,.71-1.7l-2.84-2.84H33.25a1,1,0,0,0,0-2Z" class="clr-i-outline clr-i-outline-path-2"></path><path d="M29,16h2V6.68A1.66,1.66,0,0,0,29.35,5H27.08V7H29Z" class="clr-i-outline clr-i-outline-path-3"></path><path d="M29,31H7V7H9V5H6.64A1.66,1.66,0,0,0,5,6.67V31.32A1.66,1.66,0,0,0,6.65,33H29.36A1.66,1.66,0,0,0,31,31.33V22.06H29Z" class="clr-i-outline clr-i-outline-path-4"></path>\n                <rect x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n        </span>`.trim()},t.renameBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n             <svg \n                width="${r}px" height="${r}px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"\n            >\n                 <g id="Page-1" stroke="none" stroke-width="1">\n                    <g id="Combined-Shape" fill="#000000" transform="translate(42.666667, 64.000000)">\n                        <path d="M362.666667,1.42108547e-14 L362.666667,21.3333333 L320,21.333 L320,362.666 L362.666667,362.666667 L362.666667,384 L320,383.999 L320,384 L298.666667,384 L298.666,383.999 L256,384 L256,362.666667 L298.666,362.666 L298.666,21.333 L256,21.3333333 L256,1.42108547e-14 L362.666667,1.42108547e-14 Z M426.666667,64 L426.666667,320 L341.333333,320 L341.333333,277.333333 L384,277.333333 L384,106.666667 L341.333333,106.666667 L341.333333,64 L426.666667,64 Z M277.333333,64 L277.333333,320 L3.55271368e-14,320 L3.55271368e-14,64 L277.333333,64 Z M179.2,89.6 L149.333333,89.6 L149.333333,234.666667 C149.333333,248 148.5,256.333333 147.875,264.354167 L147.792993,265.422171 L147.792993,265.422171 L147.714003,266.48894 C147.417695,270.579012 147.2,274.696296 147.2,279.466667 L147.2,279.466667 L177.066667,279.466667 L177.066667,260.266667 C184.941497,273.926888 199.708077,282.130544 215.466667,281.6 C229.540046,281.805757 242.921593,275.508559 251.733333,264.533333 C263.162478,248.989677 269.832496,230.461848 270.933333,211.2 C270.933333,170.666667 249.6,142.933333 217.6,142.933333 C202.507405,142.999748 188.308689,150.099106 179.2,162.133333 L179.2,162.133333 L179.2,89.6 Z M119.466667,162.133333 C107.961824,149.843793 91.4322333,143.546807 74.6666667,145.066667 C57.6785115,144.485924 40.8138255,148.15216 25.6,155.733333 L25.6,155.733333 L34.1333333,177.066667 C45.3979052,171.147831 57.7246848,167.522308 70.4,166.4 C78.5613135,165.511423 86.6853595,168.371259 92.4903835,174.176283 C98.2954074,179.981307 101.155244,188.105353 100.266667,196.266667 L100.266667,196.266667 L100.266667,198.4 L78.9333333,198.4 C65.8181975,197.679203 52.705771,199.864608 40.5333333,204.8 C26.2806563,210.950309 17.6507691,225.621117 19.2,241.066667 C19.0625857,252.057651 23.6679763,262.574827 31.8381493,269.927982 C40.0083223,277.281138 50.9508304,280.757072 61.8666667,279.466667 C77.2795695,280.291768 92.2192911,274.001359 102.4,262.4 L102.4,262.4 L102.4,277.333333 L130.133333,277.333333 C128.292479,266.054406 127.577851,254.620365 128,243.2 L128,243.2 L128,204.8 C129.999138,190.023932 126.995128,175.003882 119.466667,162.133333 Z M98.1333333,213.333333 L98.1333333,238.933333 C92.082572,249.988391 80.836024,257.218314 68.2666667,258.133333 C63.0655139,258.520242 57.9538681,256.621996 54.2659359,252.934064 C50.5780036,249.246132 48.6797582,244.134486 49.0666667,238.933333 C49.0666667,224 59.7333333,215.466667 85.3333333,213.333333 L85.3333333,213.333333 L98.1333333,213.333333 Z M209.066667,166.4 C226.133333,166.4 238.933333,183.466667 238.933333,211.2 C238.933333,238.933333 228.266667,256 211.2,256 C197.298049,255.69869 184.825037,247.383349 179.2,234.666667 L179.2,234.666667 L179.2,187.733333 C185.154203,176.240507 196.263981,168.304951 209.066667,166.4 Z">\n                        </path>\n                    </g>\n                 </g>\n             </svg>\n        </span>`.trim()},t.checkBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="fill: none; stroke: ${t};"                \n            >\n                <path\n                    id="Vector" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" \n                    d="M8 12L11 15L16 9M4 16.8002V7.2002C4 6.08009 4 5.51962 4.21799 5.0918C4.40973 4.71547 4.71547 4.40973 5.0918 4.21799C5.51962 4 6.08009 4 7.2002 4H16.8002C17.9203 4 18.4796 4 18.9074 4.21799C19.2837 4.40973 19.5905 4.71547 19.7822 5.0918C20 5.5192 20 6.07899 20 7.19691V16.8036C20 17.9215 20 18.4805 19.7822 18.9079C19.5905 19.2842 19.2837 19.5905 18.9074 19.7822C18.48 20 17.921 20 16.8031 20H7.19691C6.07899 20 5.5192 20 5.0918 19.7822C4.71547 19.5905 4.40973 19.2842 4.21799 18.9079C4 18.4801 4 17.9203 4 16.8002Z"\n                 />\n            </svg>\n        </span>`.trim()},t.uncheckBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="fill: none; stroke: ${t};"                \n            >\n                <g id="Interface / Checkbox_Unchecked">\n                    <path \n                        id="Vector" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" \n                        d="M4 7.2002V16.8002C4 17.9203 4 18.4801 4.21799 18.9079C4.40973 19.2842 4.71547 19.5905 5.0918 19.7822C5.5192 20 6.07899 20 7.19691 20H16.8031C17.921 20 18.48 20 18.9074 19.7822C19.2837 19.5905 19.5905 19.2842 19.7822 18.9079C20 18.4805 20 17.9215 20 16.8036V7.19691C20 6.07899 20 5.5192 19.7822 5.0918C19.5905 4.71547 19.2837 4.40973 18.9074 4.21799C18.4796 4 17.9203 4 16.8002 4H7.2002C6.08009 4 5.51962 4 5.0918 4.21799C4.71547 4.40973 4.40973 4.71547 4.21799 5.0918C4 5.51962 4 6.08009 4 7.2002Z"\n                    />\n                </g>\n            </svg>\n        </span>`.trim()},t.editBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696L175.168 732.8zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336L104.32 708.8zm384 254.272v-64h448v64h-448z" />\n            </svg>\n        </span>`.trim()},t.moveLeftBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="-8.5 0 32 32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M7.094 15.938l7.688 7.688-3.719 3.563-11.063-11.063 11.313-11.344 3.531 3.5z"></path>\n            </svg>\n        </span>`.trim()},t.moveRightBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="-8.5 0 32 32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M7.75 16.063l-7.688-7.688 3.719-3.594 11.063 11.094-11.344 11.313-3.5-3.469z"></path>\n            </svg>\n        </span>`.trim()},t.moveTopBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="-5 0 32 32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M11.25 15.688l-7.656 7.656-3.594-3.688 11.063-11.094 11.344 11.344-3.5 3.5z"></path>\n            </svg>\n        </span>`.trim()},t.moveDownBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="-5 0 32 32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M11.125 16.313l7.688-7.688 3.594 3.719-11.094 11.063-11.313-11.313 3.5-3.531z"></path>\n            </svg>\n        </span>`.trim()},t.copyPasteBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M15,13h2v2h-2v2h-2v-2h-2v-2h2v-2h2V13z M27,7v2v20H9v-4H5V3h18v4H27z M21,23V5H7v18H21z M25,9 h-2v16H11v2h14V9z"/>\n            </svg>\n        </span>`.trim()},t.deleteBtn=function(e,t="red",r=20){return e=(e||"").trim(),t=(t||"").trim()||"red",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M48,0A48,48,0,1,0,96,48,48.0512,48.0512,0,0,0,48,0Zm0,84A36,36,0,1,1,84,48,36.0393,36.0393,0,0,1,48,84Z"/>\n                <path d="M64.2422,31.7578a5.9979,5.9979,0,0,0-8.4844,0L48,39.5156l-7.7578-7.7578a5.9994,5.9994,0,0,0-8.4844,8.4844L39.5156,48l-7.7578,7.7578a5.9994,5.9994,0,1,0,8.4844,8.4844L48,56.4844l7.7578,7.7578a5.9994,5.9994,0,0,0,8.4844-8.4844L56.4844,48l7.7578-7.7578A5.9979,5.9979,0,0,0,64.2422,31.7578Z"/>\n            </svg>\n        </span>`.trim()},t.playBtn=function(e,t="blue",r=20){return e=(e||"").trim(),t=(t||"").trim()||"blue",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M5.92 24.096q0 1.088 0.928 1.728 0.512 0.288 1.088 0.288 0.448 0 0.896-0.224l16.16-8.064q0.48-0.256 0.8-0.736t0.288-1.088-0.288-1.056-0.8-0.736l-16.16-8.064q-0.448-0.224-0.896-0.224-0.544 0-1.088 0.288-0.928 0.608-0.928 1.728v16.16z"></path>\n            </svg>\n        </span>`.trim()},t.playBtn2=function(e,t="blue",r=20){return e=(e||"").trim(),t=(t||"").trim()||"blue",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 330 330" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path id="XMLID_458_" d="M315,0H15C6.716,0,0,6.716,0,15v300c0,8.284,6.716,15,15,15h300c8.284,0,15-6.716,15-15V15 C330,6.716,323.284,0,315,0z M300,300H30V30h270V300z"/>\n                <path id="XMLID_461_" d="M113.729,245.62c2.266,1.256,4.77,1.88,7.271,1.88c2.763,0,5.523-0.763,7.95-2.28l108-67.499 c4.386-2.741,7.05-7.548,7.05-12.72c0-5.172-2.664-9.979-7.05-12.72l-108-67.501c-4.623-2.891-10.453-3.043-15.222-0.4 C108.959,87.024,106,92.047,106,97.5v135C106,237.953,108.959,242.976,113.729,245.62z"/>\n            </svg>\n        </span>`.trim()},t.playBtn3=function(e,t="blue",r=20){return e=(e||"").trim(),t=(t||"").trim()||"blue",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 25.362 25.361" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M23.861,0H1.5C0.673,0,0,0.672,0,1.5v22.361c0,0.826,0.672,1.5,1.5,1.5h22.36c0.827,0,1.5-0.674,1.5-1.5V1.5 C25.361,0.672,24.688,0,23.861,0z M7.346,19.967L7.273,5.447l11.114,7.205L7.346,19.967z"/>\n            </svg>\n        </span>`.trim()},t.stopBtn=function(e,t="gray",r=20){return e=(e||"").trim(),t=(t||"").trim()||"gray",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <path d="M5.92 24.096q0 0.832 0.576 1.408t1.44 0.608h16.128q0.832 0 1.44-0.608t0.576-1.408v-16.16q0-0.832-0.576-1.44t-1.44-0.576h-16.128q-0.832 0-1.44 0.576t-0.576 1.44v16.16z"></path>\n            </svg>\n        </span>`.trim()},t.playLoopBtn=function(e,t="blue",r=20){return e=(e||"").trim(),t=(t||"").trim()||"blue",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <g>\n                    <path d="M83.729,23.57c-0.007-0.562-0.32-1.084-0.825-1.337c-0.503-0.259-1.107-0.212-1.568,0.114l-5.944,4.262l-0.468,0.336 c-6.405-6.391-15.196-10.389-24.938-10.389c-13.284,0-24.878,7.354-30.941,18.201l0.024,0.013 c-0.548,1.183-0.124,2.607,1.026,3.271c0.001,0,0.001,0,0.002,0.001l8.136,4.697c1.218,0.704,2.777,0.287,3.48-0.932 c0.006-0.011,0.009-0.023,0.015-0.034c3.591-6.404,10.438-10.747,18.289-10.747c4.879,0,9.352,1.696,12.914,4.5l-1.001,0.719 l-5.948,4.262c-0.455,0.327-0.696,0.89-0.611,1.447c0.081,0.558,0.471,1.028,1.008,1.208l25.447,8.669 c0.461,0.162,0.966,0.084,1.367-0.203c0.399-0.29,0.629-0.746,0.627-1.23L83.729,23.57z"/>\n                    <path d="M79.904,61.958c0,0-0.001,0-0.002-0.001l-8.136-4.697c-1.218-0.704-2.777-0.287-3.48,0.932 c-0.006,0.011-0.009,0.023-0.015,0.034c-3.591,6.404-10.438,10.747-18.289,10.747c-4.879,0-9.352-1.696-12.914-4.5l1.001-0.719 l5.948-4.262c0.455-0.327,0.696-0.89,0.611-1.447c-0.081-0.558-0.471-1.028-1.008-1.208l-25.447-8.669 c-0.461-0.162-0.966-0.084-1.367,0.203c-0.399,0.29-0.629,0.746-0.627,1.23l0.092,26.828c0.007,0.562,0.32,1.084,0.825,1.337 c0.503,0.259,1.107,0.212,1.568-0.114l5.944-4.262l0.468-0.336c6.405,6.391,15.196,10.389,24.938,10.389 c13.284,0,24.878-7.354,30.941-18.201L80.93,65.23C81.478,64.046,81.055,62.623,79.904,61.958z"/>\n                </g>\n            </svg>\n        </span>`.trim()},t.insertLineBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg\n                width="${r}px" height="${r}px" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: none;"\n            >\n                <rect x="10" y="10" width="100" height="10" fill="gray"></rect>\n                <rect x="10" y="50" width="50"  height="10"></rect>                \n                <rect x="10" y="90" width="100" height="10" fill="gray"></rect>\n                \n                <rect x="70" y="50" width="40" height="15" fill="green"></rect>                \n                <rect x="82" y="37" width="15" height="40" fill="green"></rect>\n                                                \n            </svg>\n        </span>`.trim()},t.addLineBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: none;"                \n            >\n                <rect x="10" y="10" width="100" height="10" fill="gray"></rect>\n                <rect x="60" y="50" width="50"  height="10" fill="gray"></rect>                \n                <rect x="10" y="90" width="100" height="10"></rect>\n                \n                <rect x="10" y="50" width="40" height="15" fill="green"></rect>                \n                <rect x="22" y="37" width="15" height="40" fill="green"></rect>\n            </svg>\n        </span>`.trim()},t.deleteLineBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg\n                width="${r}px" height="${r}px" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: none;"\n            >\n                <rect x="10" y="10" width="100" height="10" fill="gray"></rect>\n                <rect x="10" y="50" width="50"  height="10" fill="gray"></rect>                \n                <rect x="10" y="90" width="100" height="10" fill="gray"></rect>\n                \n                <rect x="70" y="48" width="40" height="20" fill="red"></rect>                                                \n            </svg>\n        </span>`.trim()},t.instrumentBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 498.341 498.341" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t};"                \n            >\n                <g>\n                    <g>\n                        <path d="M492.293,158.605c-30.763-52.48-87.019-105.707-151.125-142.955c-8.149-6.315-19.008-7.829-28.736-3.776 c-10.709,4.501-17.536,14.933-17.429,26.368l0.128,73.792c0.384,21.547,0.192,34.176-7.531,42.048 c-2.005,1.771-202.56,178.667-271.296,244.011c-10.347,9.813-16.128,23.083-16.299,37.312 c-0.192,14.293,5.291,27.755,15.424,37.888h0.021c10.261,10.283,23.701,15.424,37.163,15.424c12.715,0,25.472-4.608,35.605-13.931 c14.187-13.077,33.92-31.68,56.064-52.715c2.624,13.781,9.237,26.944,19.883,37.589c13.653,13.632,31.829,21.163,51.243,21.163 c19.392,0,37.568-7.531,51.221-21.163l84.352-84.352c28.245-28.245,28.245-74.197,0-102.464 c-9.109-9.109-20.587-14.891-32.747-17.92c20.693-20.011,34.197-33.109,34.795-33.685c11.2-11.328,27.285-16.853,52.395-16.469 h64.043c11.051,0.427,22.101-6.72,26.624-17.451C500.144,177.656,498.629,166.755,492.293,158.605z M320.816,303.011 c11.605,11.627,11.605,30.528,0,42.133l-84.352,84.352c-11.179,11.157-30.955,11.157-42.133,0 c-11.605-11.627-11.605-30.528,0-42.133l84.352-84.352c5.589-5.568,13.077-8.661,21.077-8.661 C307.738,294.349,315.226,297.443,320.816,303.011z"/>\n                    </g>\n                </g>\n            </svg>\n        </span>`.trim()},t.downloadBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="stroke: ${t}; fill: none;"                \n            >\n                <path d="M13.5 3H12H7C5.89543 3 5 3.89543 5 5V19C5 20.1046 5.89543 21 7 21H7.5M13.5 3L19 8.625M13.5 3V7.625C13.5 8.17728 13.9477 8.625 14.5 8.625H19M19 8.625V9.75V12V19C19 20.1046 18.1046 21 17 21H16.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                <path d="M12 12V20M12 20L9.5 17.5M12 20L14.5 17.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n        </span>`.trim()},t.uploadBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="stroke: ${t}; fill: none;"                \n            >\n                <path d="M13.5 3H12H7C5.89543 3 5 3.89543 5 5V19C5 20.1046 5.89543 21 7 21H7.5M13.5 3L19 8.625M13.5 3V7.625C13.5 8.17728 13.9477 8.625 14.5 8.625H19M19 8.625V9.75V12V19C19 20.1046 18.1046 21 17 21H16.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                <path d="M12 21L12 13M12 13L14.5 15.5M12 13L9.5 15.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n        </span>`.trim()},t.saveBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="stroke: ${t}; fill: ${t};"                \n            >\n                <path  fill="none" d="M0 0h24v24H0z"/>\n                <path d="M4 3h13l3.707 3.707a1 1 0 0 1 .293.707V20a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm8 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6zM5 5v4h10V5H5z"/>\n            </svg>\n        </span>`.trim()},t.backBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"\n                style="stroke: none; fill: ${t};"                \n            >\n                <path d="M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"/>\n            </svg>\n        </span>`.trim()},t.soundBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: none;"                \n            >\n                <path d="M15.38,4.08a1,1,0,0,0-1.09.21L10.59,8H8a2,2,0,0,0-2,2v4a2,2,0,0,0,2,2h2.59l3.7,3.71A1,1,0,0,0,15,20a.84.84,0,0,0,.38-.08A1,1,0,0,0,16,19V5A1,1,0,0,0,15.38,4.08Z"></path>\n            </svg>\n        </span>`.trim()},t.wavBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: none;"                \n            >\n                <g>\n                    <g>\n                        <path d="M47.988,21.94c-0.006-0.091-0.023-0.179-0.054-0.266c-0.011-0.032-0.019-0.063-0.033-0.094\n                            c-0.048-0.103-0.108-0.199-0.191-0.283c-0.001-0.002-0.002-0.003-0.004-0.005L42,15.586V10c0-0.021-0.011-0.04-0.012-0.061\n                            c-0.006-0.089-0.023-0.175-0.052-0.259c-0.011-0.032-0.019-0.062-0.033-0.093c-0.049-0.106-0.11-0.207-0.196-0.293l-9-9\n                            c-0.086-0.086-0.186-0.147-0.292-0.195c-0.031-0.014-0.063-0.023-0.096-0.034c-0.083-0.028-0.167-0.045-0.255-0.051\n                            C32.042,0.011,32.022,0,32,0H7C6.447,0,6,0.448,6,1v14.586l-5.706,5.706c-0.002,0.002-0.002,0.003-0.004,0.005\n                            c-0.083,0.083-0.143,0.18-0.191,0.283c-0.014,0.03-0.022,0.062-0.033,0.094c-0.03,0.086-0.048,0.174-0.054,0.266\n                            C0.011,21.961,0,21.979,0,22v19c0,0.552,0.447,1,1,1h5v5c0,0.552,0.447,1,1,1h34c0.553,0,1-0.448,1-1v-5h5c0.553,0,1-0.448,1-1V22\n                            C48,21.979,47.989,21.961,47.988,21.94z M44.586,21H42v-2.586L44.586,21z M38.586,9H33V3.414L38.586,9z M8,2h23v8\n                            c0,0.552,0.447,1,1,1h8v5v5H8v-5V2z M6,18.414V21H3.414L6,18.414z M40,46H8v-4h32V46z M46,40H2V23h5h34h5V40z"\n                        />\n                        <path \n                            d="M24.85,25.964L21.858,38h2.04l0.612-2.55h3.162L28.267,38h2.125l-2.941-12.036H24.85z M24.765,33.852l1.309-5.967h0.068 l1.275,5.967H24.765z"\n                        />\n                        <polygon \n                            points="20.056,25.964 18.509,35.314 18.475,35.314 16.809,25.964 14.667,25.964 13.052,35.314 12.984,35.314 11.437,25.964 9.363,25.964 11.658,38 14.004,38 15.67,28.956 15.704,28.956 17.37,38 19.716,38 22.028,25.964 \t\t"\n                        />\n                        <polygon\n                            points="34.608,35.62 34.557,35.62 32.551,25.964 30.273,25.964 33.214,38 35.798,38 38.79,25.964 36.614,25.964 \t\t"\n                        />\n                    </g>\n                </g>\n            </svg>\n        </span>`.trim()},t.playAndSaveBtn=function(e,t="black",r=20){return e=(e||"").trim(),t=(t||"").trim()||"black",`\n        <span style="${n}" ${e}>\n            <svg \n                width="${r}px" height="${r}px" viewBox="0 0 370.32 370.32" xmlns="http://www.w3.org/2000/svg"\n                style="fill: ${t}; stroke: none;"\n            >\n                <g>\n                    <path d="M320.816,63.219L261.94,4.339C259.156,1.561,255.39,0,251.457,0H74.271\n                        C58.219,0,45.16,13.06,45.16,29.112v312.096c0,16.053,13.059,29.112,29.111,29.112h221.777c16.052,0,29.111-13.06,29.111-29.112\n                        V73.703C325.16,69.77,323.6,65.998,320.816,63.219z M293.547,337.907H76.773V32.414h154.088V75.99\n                        c0,10.555,8.554,19.106,19.105,19.106h43.58V337.907z"\n                    />\n                    <path d="M157.541,245.602c1.974,0.927,4.085,1.377,6.184,1.377c3.337,0,6.645-1.146,9.314-3.361\n                        l56.864-47.254c3.33-2.77,5.257-6.871,5.257-11.202c0-4.333-1.927-8.435-5.257-11.202l-56.864-47.256\n                        c-4.347-3.609-10.386-4.382-15.498-1.984c-5.115,2.403-8.381,7.542-8.381,13.187v94.511\n                        C149.16,238.062,152.426,243.2,157.541,245.602z"\n                    />\n                    <path d="M148.994,286.479c0-9.112-7.387-16.5-16.5-16.5c-9.113,0-16.5,7.388-16.5,16.5v0.834h-11.5\n                        c-5.523,0-10,4.477-10,10c0,5.522,4.477,10,10,10h11.5v0.833c0,9.112,7.387,16.5,16.5,16.5c9.113,0,16.5-7.388,16.5-16.5v-0.833\n                        h116.833c5.523,0,10-4.478,10-10c0-5.523-4.477-10-10-10H148.994V286.479z"\n                    />\n                </g>\n            </svg>\n        </span>`.trim()}},4667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThereminPage=void 0,n(3783);const r=n(8593),i=n(1221),a=n(7526),o=n(8299),s=n(7878);class l{type;volDirection;isSilent=!1;lastX=-1;lastY=-1;lastFreqObj;lastFreqVal=0;lastVolVal=0;sizes;gutter;canvasEl;canvasTop;canvasCtxTop;canvasMid;canvasCtxMid;canvasBot;canvasCtxBot;freqList;wave;isSmoothMode=!1;constructor(e,t){this.type=e,this.volDirection=t}clearCanvasTop(){this.canvasCtxTop.clearRect(0,0,this.canvasTop.width,this.canvasTop.height)}clearCanvasBot(){this.canvasCtxBot.clearRect(0,0,this.canvasBot.width,this.canvasBot.height)}clearCanvasMid(){this.canvasCtxMid.clearRect(0,0,this.canvasMid.width,this.canvasMid.height)}drawCells(){const e=this.gutter,t=e,n=e,r=(this.sizes.height,this.sizes.width-2*e),i=this.canvasCtxMid,a=this.sizes.cellSize;this.clearCanvasMid();const o="rgb(200, 200, 200)";this.freqList.forEach(((s,l)=>{i.strokeStyle=o,i.lineWidth=1,"d"!==s.step&&"m"!==s.step&&"z"!==s.step||(i.lineWidth=2,i.strokeStyle="red",i.fillRect(e/2,t+l*a+a/2,2,2),i.fillRect(e+r+e/2,t+l*a+a/2,2,2)),i.strokeStyle=o,i.lineWidth=.5,i.beginPath(),i.moveTo(n,t+l*a),i.lineTo(n+r,t+l*a),i.stroke(),l===this.freqList.length-1&&(i.strokeStyle=o,i.lineWidth=.5,i.beginPath(),i.moveTo(n,t+(l+1)*a),i.lineTo(n+r,t+(l+1)*a),i.stroke())}))}setFreqList(e,t,n){const r=function(e,t,n){const r=e.find((e=>e.noteLat===t)).code,i=e.find((e=>e.noteLat===n)).code;let a=e.filter((e=>e.code>=r&&e.code<=i)).map((e=>({...e})));return a.forEach(((e,t)=>{e.relatives=a.map(((t,n)=>t.step===e.step?n:-1)).filter((e=>e>-1)),e.index=t})),a}((e=[...e]).reverse(),t,n);this.freqList=r}createCanvas(e,t){this.sizes=e,this.gutter=e.cellSize,this.canvasEl=t,this.canvasBot=document.createElement("canvas"),this.canvasBot.style.position="absolute",this.canvasBot.width=e.width,this.canvasBot.height=e.height,this.canvasEl.appendChild(this.canvasBot),this.canvasCtxBot=this.canvasBot.getContext("2d"),this.canvasMid=document.createElement("canvas"),this.canvasMid.style.position="absolute",this.canvasMid.width=e.width,this.canvasMid.height=e.height,this.canvasEl.appendChild(this.canvasMid),this.canvasCtxMid=this.canvasMid.getContext("2d"),this.canvasTop=document.createElement("canvas"),this.canvasTop.style.position="absolute",this.canvasTop.width=e.width,this.canvasTop.height=e.height,this.canvasEl.appendChild(this.canvasTop),this.canvasCtxTop=this.canvasTop.getContext("2d")}update(e){const t=this.gutter,n=this.sizes.cellSize,r=this.sizes.halfSize,i=this.sizes,a=e.offsetX,s=e.offsetY;if(a<=t||a>=i.width-t||s<=t||s>=i.boardHeight-t||this.isSilent)return;let l=Math.round(a),c=Math.round(s),d=!1;if(c!==this.lastY){this.lastY=c,d=!0;const e=c-t,i=Math.floor(e/n);this.freqList[i]&&(this.lastFreqObj=this.freqList[i]);let a=this.lastFreqObj.value,o=this.wave.type1;if(this.isSmoothMode){let t=this.lastFreqObj.midF-this.lastFreqObj.botF,s=this.lastFreqObj.topF-this.lastFreqObj.midF,l=n*i,c=l+r+1;e===c?o="sawtooth":e>c?a-=t/(n*(i+1)-1-c)*(e-c):a+=s/(c-l)*(c-e)}this.lastFreqVal=a,this.wave.setFreq(a),this.wave.setType2(o)}if(l!==this.lastX){this.lastX=l,d=!0;let e=0,r=0,a=0;"rightToLeft"===this.volDirection&&(e=l<=t+n+n?100:l>=i.width-t-n-n?0:100*(1-(l-t-2*n)/(i.width-2*t-4*n)),a=this.lastFreqObj?this.lastFreqObj.volume:0),"leftToRight"===this.volDirection&&(e=l<=t+n+n?0:l>=i.width-t-n-n?100:(l-t-2*n)/(i.width-2*t-4*n)*100,a=this.lastFreqObj?this.lastFreqObj.volume:0),r=e*a,this.lastVolVal=r,this.wave.setVol((0,o.getEndPointVolume)(80*r/100)/100)}}pointerId;subscribe(){const e=function(e){let t=0,n=0;for(;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}}(this.canvasTop);this.sizes.boardTopOffset=e.y,this.sizes.boardLeftOffset=e.x,this.canvasTop.addEventListener("pointerdown",(e=>{e.preventDefault(),e.stopPropagation(),this.pointerId||(this.pointerId=e.pointerId,this.update(e))})),this.canvasTop.addEventListener("pointerenter",(e=>{e.preventDefault(),e.stopPropagation(),!this.pointerId&&e.buttons&&(this.pointerId=e.pointerId),e.pointerId===this.pointerId&&e.buttons&&this.update(e)})),this.canvasTop.addEventListener("pointermove",(e=>{e.preventDefault(),e.stopPropagation(),!this.pointerId&&e.buttons&&(this.pointerId=e.pointerId),e.pointerId===this.pointerId&&e.buttons&&this.update(e)})),this.canvasTop.addEventListener("pointerup",(e=>{e.preventDefault(),e.stopPropagation(),e.pointerId===this.pointerId&&(this.pointerId=null)})),this.canvasTop.addEventListener("pointerleave",(e=>{e.preventDefault(),e.stopPropagation(),e.pointerId===this.pointerId&&e.buttons&&(this.pointerId=null)})),this.canvasTop.addEventListener("pointercancel",(e=>{e.preventDefault(),e.stopPropagation(),e.pointerId===this.pointerId&&(this.pointerId=null)}))}}t.ThereminPage=class{props;context;bassBoard;soloBoard;get pageId(){return this.props.id}get pageEl(){return this.context.$el.value[0]}get el$(){return this.context.$el.value}constructor(e,t){this.props=e,this.context=t}onMounted(){this.setContent()}onUnmounted(){}setContent(){const e="position: absolute; box-sizing: border-box; user-select: none; touch-action: none;",t='style="box-sizing: border-box; user-select: none; touch-action: none;"';this.el$.html(`\n            <div data-boards-container style="${t}">\n                <div data-board-bass-container style="${e}">\n                    <div data-board-bass-canvas-container style="${e}"></div>                \n                </div>\n                \n                <div data-board-solo-container style="${e}">\n                    <div data-board-solo-canvas-container style="${e}"></div>                \n                </div>\n            </div>\n            <div style="${t}">\n                <span style="${t}">Д</span>\n                <span style="${t}">т</span>\n                <span style="${t}">Р</span>\n                <span style="${t}">н</span>\n                <span style="${t}">М</span>\n                <span style="${t}">Ф</span>                \n                <span style="${t}">в</span>\n                <span style="${t}">С</span>\n                <span style="${t}">з</span>                \n                <span style="${t}">Л</span>                \n                <span style="${t}">к</span>\n                <span style="${t}">Б</span>                                \n            </div>\n        `);const n=function(e){let t=(0,r.getWithDataAttr)("app-header-first-row-area")[0].clientHeight,n=e.width,i=e.height-2*t,a=Math.floor((i-(e.cellCount+2))/(e.cellCount+2)/2),o=2*a+1;const s=Math.floor(n/o/2)*o;return{width:n,height:i,boardHeight:e.cellCount*o+2*o,cellSize:o,halfSize:a,boardSoloWidth:s,boardSoloLeft:n-1-s,boardBassLeft:0,boardBassWidth:s,boardLeftOffset:0,boardTopOffset:0}}({width:Math.floor(this.el$.width()),height:Math.floor(this.el$.height()),cellCount:36});let o=(0,r.getWithDataAttr)("boards-container")[0];o.style.width=`${n.width}px`,o.style.height=`${n.boardHeight}px`;let c=(0,r.getWithDataAttr)("board-bass-container")[0];c.style.top="0px",c.style.left=`${n.boardBassLeft}px`,c.style.width=`${n.boardBassWidth}px`,c.style.height=`${n.boardHeight}px`;let d=(0,r.getWithDataAttr)("board-bass-canvas-container")[0];d.style.top="0px",d.style.left="0px",d.style.width=`${n.boardBassWidth}px`,d.style.height=`${n.boardHeight}px`;let u=(0,r.getWithDataAttr)("board-solo-container")[0];u.style.top="0px",u.style.left=`${n.boardSoloLeft}px`,u.style.width=`${n.boardSoloWidth}px`,u.style.height=`${n.boardHeight}px`;let p=(0,r.getWithDataAttr)("board-solo-canvas-container")[0];p.style.top="0px",p.style.left="0px",p.style.width=`${n.boardSoloWidth}px`,p.style.height=`${n.boardHeight}px`,this.bassBoard=new l("bass","leftToRight"),this.bassBoard.setFreqList(s.freqInfoList,"do","be"),this.bassBoard.createCanvas({...n,width:n.boardBassWidth},d),this.bassBoard.drawCells(),this.bassBoard.wave=new i.WaveSource2,this.bassBoard.wave.connect(a.Sound.ctx.destination),this.bassBoard.wave.start(),this.bassBoard.subscribe(),this.soloBoard=new l("solo","rightToLeft"),this.soloBoard.setFreqList(s.freqInfoList,"da","bi"),this.soloBoard.createCanvas({...n,width:n.boardSoloWidth},p),this.soloBoard.drawCells(),this.soloBoard.wave=new i.WaveSource2,this.soloBoard.wave.connect(a.Sound.ctx.destination),this.soloBoard.wave.start(),this.soloBoard.subscribe()}}},1221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaveSource2=t.WaveSource=void 0;const r=n(7526),i=n(8299);t.WaveSource=class{vol;osc;dest;constructor(){this.vol=r.Sound.ctx.createGain(),this.vol.gain.value=0,this.osc=r.Sound.ctx.createOscillator(),this.osc.detune.value=0,this.osc.frequency.value=0,this.osc.connect(this.vol)}connect(e){if(this.dest){if(this.dest===e)return;this.vol.disconnect(this.dest)}this.dest&&this.dest!==e&&this.vol.disconnect(this.dest),this.dest=e,this.vol.connect(e)}disconnect(){this.dest&&this.vol.disconnect(this.dest),this.dest=null}setFreqAndVol(e,t){this.setFreq(e),this.setVol(t)}setFreq(e){(0,i.isPresent)(e)&&(this.osc.frequency.value=e)}setVol(e){(0,i.isPresent)(e)&&(this.vol.gain.value=e)}start(){this.osc.start(0)}},t.WaveSource2=class{type1;type2;volRatio=50;vol1;osc1;vol2;osc2;dest;constructor(e="sine",t="sine"){this.type1=e||"sine",this.type2=t||this.type1,this.vol1=r.Sound.ctx.createGain(),this.vol1.gain.value=0,this.osc1=r.Sound.ctx.createOscillator(),this.osc1.detune.value=0,this.osc1.frequency.value=0,this.osc1.type=this.type1,this.osc1.connect(this.vol1)}connect(e){if(this.dest){if(this.dest===e)return;this.vol1.disconnect(this.dest)}this.dest=e,this.vol1.connect(e)}disconnect(){this.dest&&this.vol1.disconnect(this.dest),this.dest=null}setFreqAndVol(e,t){this.setFreq(e),this.setVol(t)}setFreq(e){(0,i.isPresent)(e)&&(this.osc1.frequency.value=e)}setVol(e){(0,i.isPresent)(e)&&(this.vol1.gain.value=e)}start(){this.osc1.start(0)}setType1(e){this.type1=e||this.type1||"sine",this.osc1.type=this.type1}setType2(e){}toggleType2(){}}},8342:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardTicks=void 0;const n="\n<tick @>\n-             : 1 :\n@cowbell      : 1 :\n".trim(),r="\n<tick @>\n-             : 1   2   :\n@cowbell      : 1       :\n@nil          :     2   :\n".trim(),i="\n<tick @>\n-             : 1   2   3   :\n@cowbell      : 1           :\n@nil          :     2   3   :\n".trim(),a="\n<tick @>\n-             : 1   2   3   4   :\n@cowbell      : 1               :\n@nil          :     2   3   4   :\n".trim();t.standardTicks={"1:4":n,"2:4":r,"3:4":i,"4:4":a}},3458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSettingsStore=void 0;class n{static GetUserSettings(){let e;return e=localStorage.getItem("[user-settings]"),e||localStorage.setItem("[user-settings]",JSON.stringify({})),e=JSON.parse(localStorage.getItem("[user-settings]")),e.boardVolume=e.boardVolume||70,e.userName=e.userName||"",e.useCyrillicNote=e.useCyrillicNote||!1,localStorage.setItem("[user-settings]",JSON.stringify(e)),e}static SetUserSettings(e){let t=n.GetUserSettings();localStorage.setItem("[user-settings]",JSON.stringify({...t,...e}))}}t.UserSettingsStore=n},8779:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequencerRoot=void 0;const r=n(7793),i=n(1112),a=n(2396),o=n(114),s=n(8477),l=n(8947),c=n(7607),d=n(6020);class u extends r.CanvasComponent{model;_noteGrid;_pitchRuler;_timeRuler;_timeRulerMy;_velocityRuler;_draggableBorder;_velocityTrack;draggableBorderPosition;constructor(e){super(),this.model=e;const t={model:()=>this.model,borderDragged:e=>this.borderDragged(e),grid:()=>this._noteGrid};this._noteGrid=new a.NoteGridComponent(t),this.addAndMakeVisible(this._noteGrid),this._pitchRuler=new o.PitchRuler(t),this.addAndMakeVisible(this._pitchRuler),this._timeRuler=new s.TimeRuler(t),this.addAndMakeVisible(this._timeRuler),this._timeRulerMy=new l.TimeRulerMy(t),this.addAndMakeVisible(this._timeRulerMy),this._velocityRuler=new c.VelocityRuler(t),this.addAndMakeVisible(this._velocityRuler),this._draggableBorder=new i.DraggableBorder(t),this.addAndMakeVisible(this._draggableBorder),this._velocityTrack=new d.VelocityTrack(t),this.addAndMakeVisible(this._velocityTrack)}resized(){null==this.model.velocityTrackHeight?this.draggableBorderPosition=this.height-80:this.model.velocityTrackHeight<0&&(this.draggableBorderPosition=this.height*(1+this.model.velocityTrackHeight));const e=this.height-this.draggableBorderPosition,t=this.getLocalBounds(),n=t.removeFromBottom(e);this._velocityRuler.setBounds(n.removeFromLeft(40)),this._velocityTrack.setBounds(n),this._draggableBorder.setBounds(t.removeFromBottom(4));let r=t.removeFromTop(40);r.removeFromLeft(40),this._timeRuler.setBounds(r);let i=t.removeFromTop(40);i.removeFromLeft(40),this._timeRulerMy.setBounds(i),this._pitchRuler.setBounds(t.removeFromLeft(40)),this._noteGrid.setBounds(t),this.repaint()}render(e){e.fillStyle=this.model.colors.background,e.fillRect(0,0,this.width,this.height)}borderDragged(e){this.draggableBorderPosition=Math.max(80,Math.min(e-this.getPosition().y,this.height)),this.draggableBorderPosition>this.height-50&&(this.draggableBorderPosition=this.draggableBorderPosition>this.height-25?this.height:this.height-50),this.model.velocityTrackHeight=this.height-this.draggableBorderPosition,this.resized()}setTimeStart(e){const t=Math.max(0,e),n=t-this.model.maxTimeRange.start;if(0===n)return 0;this.model.maxTimeRange.start+=n,this.model.maxTimeRange.end+=n;const r=this.model.maxTimeRange.start-this.model.visibleTimeRange.start;r>0&&(this.model.visibleTimeRange.start+=r,this.model.visibleTimeRange.end+=r);const i=this.model.maxTimeRange.end-this.model.visibleTimeRange.end;return i<0&&(this.model.visibleTimeRange.start+=i,this.model.visibleTimeRange.end+=i),this.repaint(),t}setDuration(e){const t=this.model;return e=Math.max(0,e),t.maxTimeRange.end=t.maxTimeRange.start+e,t.visibleTimeRange.end=Math.min(t.visibleTimeRange.end,t.maxTimeRange.end),this.repaint(),e}setAtomInQuarter(e=12){return this.model.measure.atomInQuarter=e,this.repaint(),e}}t.SequencerRoot=u},5748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoteSequencer=void 0;const r=n(3303),i=n(8779),a=n(2115),o=n(7566),s=n(2128);class l extends a.CustomElement{static TIME_START="time-start";static DURATION="duration";static ATOM_IN_QUARTER="atom-in-quarter";static THEME="theme";_shadowRoot;_rootHolder;_model;_sequencerRoot;constructor(){super(),this._model=function(){const e={upper:4,lower:4,atomInQuarter:12},t=e.upper*e.atomInQuarter;return{velocityTrackHeight:-.1,verticalRange:{start:36,end:72},visibleTimeRange:{start:0,end:3*t},maxTimeRange:{start:0,end:6*t},measure:e,zoomSensitivity:30,adaptiveMode:!0,colors:s.defaultColors,theme:new o.LookAndFeel_Live,data:{notes:[],layers:[],quarters:[]}}}(),this._shadowRoot=this.attachShadow({mode:"closed"}),this._sequencerRoot=new i.SequencerRoot(this._model),this._rootHolder=new r.RootComponentHolder(100,100,this._sequencerRoot),this._shadowRoot.append(this._rootHolder.canvas);const e=document.createElement("style");e.innerHTML=s.CSS_STYLE,this._shadowRoot.append(e),new ResizeObserver((()=>this.resizeAndDraw())).observe(this),new MutationObserver((()=>{this.styleChanged()})).observe(this,{attributes:!0}),Object.keys(this._model.colors).forEach((e=>{this.registerCustomColor(e,this._model.colors[e])}))}static get tag(){return"note-sequencer"}static get observedAttributes(){return[l.TIME_START,"duration","pitch-start","pitch-end"]}get colors(){return this._model.colors}get atomInQuarter(){return this._model.measure.atomInQuarter||12}set atomInQuarter(e){e=Number(e),isNaN(e)&&(e=12),e=this._sequencerRoot.setAtomInQuarter(e),this.setAttribute(l.ATOM_IN_QUARTER,e.toString())}get timeStart(){return this._model.maxTimeRange.start}set timeStart(e){let t=Number(e);if(isNaN(t))throw new Error("Unhandled type error when setting timeStart");t=this._sequencerRoot.setTimeStart(t),this.setAttribute(l.TIME_START,t.toString())}get duration(){return this._model.maxTimeRange.start+this._model.maxTimeRange.end}set duration(e){let t=Number(e);if(isNaN(t))throw new Error("Unhandled type error when setting duration");t=this._sequencerRoot.setDuration(t),this.setAttribute(l.DURATION,t.toString())}get theme(){return this._model.theme.name}set theme(e){"live"===e?this._model.theme=new o.LookAndFeel_Live:(this._model.theme=new o.LookAndFeel_Default,e="default"),this.setAttribute(l.THEME,e),this.draw()}connectedCallback(){this._rootHolder.attachMouseEventListeners(),this.timeStart=this.timeStart||0,this.duration=this.duration||16,this.atomInQuarter=this.atomInQuarter||12,this.resizeAndDraw()}disconnectedCallback(){this._rootHolder.removeMouseEventListeners()}attributeChangedCallback(){this.draw()}draw(){this._rootHolder.repaint()}styleChanged(){super.styleChanged(),this.customColors.forEach((e=>{this._model.colors[e.name]=e.value})),this.draw()}resizeAndDraw(){const e=this.getBoundingClientRect();this._rootHolder.resize(Math.ceil(e.width),Math.ceil(e.height)),this.draw()}}t.NoteSequencer=l},2128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultColors=t.MAX_PITCH=t.MIN_PITCH=t.PITCH_PATTERN=t.MAX_SEMI_H=t.MIN_SEMI_H=t.MAX_VELOCITY=t.CSS_STYLE=void 0,t.CSS_STYLE="\n:host {\n  position: relative;\n  min-width: 200px;\n  min-height: 200px;\n  width: 100%;\n  height: 100%;\n  display: inline-block;\n}\n\ncanvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n",t.MAX_VELOCITY=127,t.MIN_SEMI_H=4,t.MAX_SEMI_H=30,t.PITCH_PATTERN=[0,1,0,1,0,0,1,0,1,0,1,0],t.MIN_PITCH=0,t.MAX_PITCH=127,t.defaultColors={background:"#ffffff",backgroundAlternate:"#0000000f",backgroundBlackKey:"#00000017",strokeLight:"#00000020",strokeDark:"#00000050",text:"#000000",velocityHandle:"#ff1906",velocityHandleSelected:"#00a8ff",whiteKey:"#ffffff",blackKey:"#5e5e5e",noteHigh:"#ff1906",noteLowBlend:"#d2c263",noteOutline:"#ff0000ff",noteOutlineSelected:"#00a8ff",draggableBorder:"#8f8f8f",draggableBorderHover:"#676767",lassoBackground:"#00a8ff20",lassoOutline:"#00a8ff80"}},1112:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DraggableBorder=void 0;const r=n(7793);class i extends r.CanvasComponent{context;initialPosition;constructor(e){super(),this.context=e,this.mouseCursor="ns-resize"}mousePressed(e){this.initialPosition=e.position.y}mouseDragged(e){const t=this.initialPosition+(e.position.y-e.positionAtMouseDown.y);this.context.borderDragged(t)}mouseEnter(e){super.mouseEnter(e),this.repaint()}mouseExit(e){super.mouseExit(e),this.repaint()}render(e){const t=this.context.model();e.fillStyle=this.hovered?t.colors.draggableBorderHover:t.colors.draggableBorder,e.fillRect(0,0,this.width,this.height)}resized(){}}t.DraggableBorder=i},9104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LassoSelector=void 0,t.LassoSelector=class{context;findAllElementsInLasso;get selectedItemSet(){return this.context.selectedSet()}get colors(){return this.context.colors()}lasso;constructor(e){this.context=e}beginLasso(e){const t=this.context.owner.getPosition();this.lasso={startX:e.position.x-t.x,startY:e.position.y-t.y,endX:e.position.x-t.x,endY:e.position.y-t.y,commuteMode:e.modifiers.shift,commutableSelection:[]},e.modifiers.shift&&(this.lasso.commutableSelection=this.selectedItemSet.getItems())}endLasso(){this.lasso=null}dragLasso(e){if(null==this.lasso)return;const t=this.context.owner.getPosition();this.lasso.endX=e.position.x-t.x,this.lasso.endY=e.position.y-t.y;const n={x:Math.min(this.lasso.startX,this.lasso.endX),y:Math.min(this.lasso.startY,this.lasso.endY),width:Math.abs(this.lasso.startX-this.lasso.endX),height:Math.abs(this.lasso.startY-this.lasso.endY)};let r;if("function"==typeof this.findAllElementsInLasso&&(r=this.findAllElementsInLasso(n)),null!=r)if(this.lasso.commuteMode){this.selectedItemSet.deselectAll();for(let e of this.lasso.commutableSelection)this.selectedItemSet.addToSelection(e);for(let e of r)this.selectedItemSet.getItems().indexOf(e)>=0?this.selectedItemSet.removeFromSelection(e):this.selectedItemSet.addToSelection(e)}else{this.selectedItemSet.deselectAll();for(let e of r)this.selectedItemSet.addToSelection(e)}}drawLasso(e){if(null==this.lasso)return;e.fillStyle=this.colors.lassoBackground,e.strokeStyle=this.colors.lassoOutline,e.lineWidth=2;const t=Math.min(this.lasso.startX,this.lasso.endX),n=Math.min(this.lasso.startY,this.lasso.endY),r=Math.max(this.lasso.startX,this.lasso.endX)-t,i=Math.max(this.lasso.startY,this.lasso.endY)-n;e.fillRect(t,n,r,i),e.strokeRect(t,n,r,i)}}},7566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LookAndFeel_Live=t.LookAndFeel_Default=void 0;const r=n(5420),i=n(2128);class a{name="default";minSemitoneHeight=5;drawTimeBackground(e,t,n,i,a,o,s,l){const c=(0,r.getBackgroundAlternateWidth)(n,s);for(let r=0;r<Math.ceil(o);r+=i){const o=(r-a)*n;e.fillStyle=l.backgroundAlternate,r%(2*c)==0&&e.fillRect(o,0,c*n,t),o<0||(r%(s.atomInQuarter*s.upper/s.lower)==0?(e.fillStyle=l.strokeDark,e.fillRect(o,0,1,t)):0==Math.round(r%i)&&(e.fillStyle=l.strokeLight,e.fillRect(o,0,1,t)))}}drawNote(e,t,n,r,i,a,o,s){const l=Math.max(0,Math.min(4,.4*i,r)),c=Math.PI,d=Math.PI/2;e.beginPath(),e.arc(l+t,l+n,l,-d,c,!0),e.lineTo(t,n+i-l),e.arc(l+t,i-l+n,l,c,d,!0),e.lineTo(t+r-l,n+i),e.arc(t+r-l,n+i-l,l,d,0,!0),e.lineTo(t+r,n+l),e.arc(t+r-l,n+l,l,0,-d,!0),e.lineTo(t+l,n),e.fillStyle=s.noteHigh,e.fill(),e.globalAlpha=1-a/127,e.fillStyle=s.noteLowBlend,e.fill(),e.globalAlpha=1,i<4&&!o||(e.lineWidth=o?2:1,e.strokeStyle=o?s.noteOutlineSelected:s.noteOutline,e.stroke())}drawVelocityHandle(e,t,n,r,i,a,o,s,l){if(n.hidden)return;const c=Math.max(0,o*(n.tempDuration?n.tempDuration:n.duration)),d=i-n.velocity*a,u=n.selected?l.velocityHandleSelected:l.velocityHandle;e.fillStyle=u,e.fillRect(t,d-1,c,2),e.fillRect(t+c-1,d-3,2,6),e.fillStyle=l.background,e.strokeStyle=u,e.lineWidth=2,e.beginPath(),e.arc(t,d,s,0,2*Math.PI),e.fill(),e.stroke()}drawOctaveLines(e,t,n,r,a,o,s){e.fillStyle=s.strokeLight;for(let s=0;s<i.MAX_PITCH;s+=12)if(s>=r&&s<=a){const i=n-(s-r)*o;e.fillRect(0,i,t,1)}}drawSemiTonePattern(e,t,n,r,i,a,o){const s=(r-Math.floor(r))*a;for(let l=Math.floor(r);l<Math.ceil(i);++l){const i=l%12,c=s+(n-(l-Math.floor(r))*a)-a;e.fillStyle=o.strokeLight,e.fillRect(0,c,t,11===i?2:1)}}drawPitchRuler(e,t,n,r,i,a,o,s){this.isPianoRollVisible(a)&&(this.drawPianoRoll(e,t,n,r,i,a,s),e.fillStyle=s.strokeLight,e.fillRect(t/2,0,1,n)),this.drawPitchLabels(e,t,n,r,i,a,o,s)}drawPitchLabels(e,t,n,r,i,a,o,s){const l=this.isPianoRollVisible(a)?.25*t:.5*t;for(let o=0;o<128;o+=12)if(o+6>=r&&o<=i){const i=n-(o-r)*a,c=""+this.getOctaveNumber(o);e.fillStyle=s.text,e.font="11px Arial",e.textBaseline="middle",e.textAlign="center",e.fillText(c,l,i-6*a,t/2),e.fillStyle=s.strokeDark,e.fillRect(0,i,t,1)}}drawPianoRoll(e,t,n,r,a,o,s){for(let l=Math.floor(r);l<=Math.ceil(a);++l){const a=n-(l-r)*o,c=l%12,d=i.PITCH_PATTERN[c];e.fillStyle=e.fillStyle=d?s.blackKey:s.whiteKey,e.fillRect(t/2,a-o,t/2,o),e.fillStyle=s.strokeLight,e.fillRect(t/2,a-o,t/2,1)}}isOnPianoRoll(e,t,n,r,i){return this.isPianoRollVisible(i)&&e>n/2}isPianoRollVisible(e){return e>this.minSemitoneHeight}drawVelocityRuler(e,t,n,r){const i=10;e.fillStyle=r.strokeDark,e.fillRect(t-1,0,1,n),e.fillRect(t-i,0,i,1),e.fillRect(t-i,Math.round(.5*n),i,1),e.fillRect(t-i,n-1,i,1),n>60&&(e.fillRect(t-5,Math.round(.25*n),5,1),e.fillRect(t-5,Math.round(.75*n),5,1)),e.fillStyle=r.text,e.fillText("0",t-20,n-2),e.fillText("100%",t-30,12)}getOctaveNumber(e){return Math.floor(e/12)-2}}t.LookAndFeel_Default=a,t.LookAndFeel_Live=class extends a{name="live";drawNote(e,t,n,r,i,a,o,s){e.globalAlpha=1,e.lineWidth=o?2:1,e.strokeStyle=o?s.noteOutlineSelected:s.noteOutline,e.strokeRect(t,n,r,i)}drawVelocityHandle(e,t,n,r,i,a,o,s,l){if(n.hidden)return;const c=n.velocity*a,d=i-c,u=n.selected?l.velocityHandleSelected:l.velocityHandle;e.fillStyle=u,e.fillRect(t-1,d,2,c),e.strokeStyle=u,e.fillStyle=l.background,e.lineWidth=1.8,e.beginPath(),e.arc(t,d,s,0,2*Math.PI),e.fill(),e.stroke()}drawPitchLabels(e,t,n,r,i,a,o,s){for(let o=0;o<128;o+=12)if(o>=r&&o<=i){const i=n-(o-r)*a,l="C"+(o/12-2);e.fillStyle=s.text,e.fillText(l,2,i-3,t/2),e.fillStyle=s.strokeDark,e.fillRect(0,i,t,1)}}drawVelocityRuler(e,t,n,r){e.fillStyle=r.strokeDark,e.textAlign="right",e.fillRect(t-1,0,1,n),e.fillRect(t-10,0,10,1),e.fillStyle=r.text,e.fillText("127",t-14,12),e.fillStyle=r.strokeDark,e.fillRect(t-5,Math.round(.5*n),5,1),e.fillRect(t-10,n-1,10,1),e.fillStyle=r.text,e.fillText("0",t-14,n-2)}}},2396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoteGridComponent=void 0;const r=n(2128),i=n(7793),a=n(9104),o=n(3333);class s extends i.CanvasComponent{context;get model(){return this.context.model()}adaptiveLabels=["XL","X","M","S","XS"];adaptiveRatios=[1,.5,.25,.1,.05];adaptiveIndex=3;fixedIncrements=[128,64,32,16,8,4,2,1,.5];fixedIndex=5;_selectedSet;_lasso;_dragAction;_mouseDownResult=!1;_currentVelocity=r.MAX_VELOCITY;_draggedItem;_initialDuration=null;_initialStart=null;_initialVelocity=null;_initialPosition=null;_minStartOffset=null;_maxDurationOffset=null;_minDragOffset=null;_maxDragOffset=null;constructor(e){super(),this.context=e,this._selectedSet=new o.SelectedItemSet,this._lasso=new a.LassoSelector({owner:this,selectedSet:()=>this._selectedSet,colors:()=>e.model().colors}),this._lasso.findAllElementsInLasso=e=>this.notes.filter((t=>{const n={x:this.getPositionForTime(t.atomInd),y:this.getPositionForPitch(t.pitch),width:Math.max(2,t.duration*this.getAtomWidth()),height:this.getSemitoneHeight()};return i.CanvasComponent.boundsIntersect(n,e)}))}get notes(){return this.model.data.notes}get selectedSet(){return this._selectedSet}render(e){e.fillStyle=this.model.colors.background,e.fillRect(0,0,this.width,this.height);const t=this.model.visibleTimeRange.start,n=this.model.visibleTimeRange.end,i=this.getAtomWidth();this.drawHorizontalBackground(e,i,t,n);const a=this.model.verticalRange.start,o=this.model.verticalRange.end,s=this.getSemitoneHeight();s>r.MIN_SEMI_H?this.model.theme.drawSemiTonePattern(e,this.width,this.height,a,o,s,this.model.colors):this.model.theme.drawOctaveLines(e,this.width,this.height,a,o,s,this.model.colors),this._lasso.drawLasso(e),this.drawNotes(e,s,i)}resized(){this.repaint()}removeNote(e,t=!0){this._selectedSet.removeFromSelection(e),this.model.data.notes=this.notes.filter((t=>t!==e)),t&&this.getParentComponent().repaint()}moveNoteToFront(e){const t=this.notes.indexOf(e);t>=0&&(this.notes.splice(t,1),this.notes.push(e),this.getParentComponent().repaint())}deleteSelection(){const e=this._selectedSet.getItems();for(let t=e.length;--t>=0;)this.removeNote(e[t],!1);this.getParentComponent().repaint()}getAtomWidth(){return this.width/(this.model.visibleTimeRange.end-this.model.visibleTimeRange.start)}getQuarterWidth(){return this.width/(this.model.visibleTimeRange.end-this.model.visibleTimeRange.start)}getTimeAt(e,t){const n=this.model.visibleTimeRange.start,r=this.getAtomWidth();let i=e;return i-=this.getPosition().x,i+=n*r,i/r}getPitchAt(e){const t=this.model.verticalRange.start,n=this.getSemitoneHeight();return e-=this.getPosition().y,e-=t*n,e=this.height-e,e+=.5*n,Math.round(e/n)}getPositionForTime(e){const t=this.model.visibleTimeRange.start,n=this.model.visibleTimeRange.end-t;return(e-t)*(this.width/n)}getPositionForPitch(e){const t=this.getSemitoneHeight();return this.height-(e-this.model.verticalRange.start)*t}getSemitoneHeight(){return this.height/(this.model.verticalRange.end-this.model.verticalRange.start)}doublePressed(e){const t=this.getPosition(),n={x:e.position.x-t.x,y:e.position.y-t.y},r=this.findNoteAt(n);if(null!=r)return void this.removeNote(r);const i=this.snapToGrid(this.getTimeAt(e.position.x,"jjkl")),a={atomInd:i,pitch:Math.round(this.getPitchAt(e.position.y)),duration:this.getTimeIncrement(),velocity:this._currentVelocity,hidden:!1,selected:!0,tempDuration:0,initialStart:i,initialVelocity:this._currentVelocity};this.notes.push(a),this._selectedSet.setUniqueSelection(a),this.removeOverlaps(!0),this._dragAction="V_RIGHT",this._draggedItem=a,this.getParentComponent().repaint(),this.mouseCursor="w-resize"}mouseMoved(e){if(super.mouseMoved(e),e.isDragging)return;const t=this.getPosition(),n={x:e.position.x-t.x,y:e.position.y-t.y},r=this.findNoteAt(n);if(null==r)return void(this.mouseCursor="default");const i=this.getDragActionForNoteAt(n,r);this.mouseCursor="MOVE_NOTE"==i?"move":"LEFT"==i?"w-resize":"RIGHT"==i?"e-resize":"default"}mousePressed(e){const t=this.getPosition(),n={x:e.position.x-t.x,y:e.position.y-t.y},r=this.findNoteAt(n);if(null==r)return e.modifiers.shift||this._selectedSet.deselectAll(),this._lasso.beginLasso(e),void(this._mouseDownResult=!0);this._mouseDownResult=this._selectedSet.addToSelectionMouseDown(r,e.modifiers.shift),this._dragAction=this.getDragActionForNoteAt(n,r),this.setMouseCursor(this._dragAction),this._draggedItem=r,this.moveNoteToFront(r)}mouseReleased(e){this._dragAction="NONE",this.setMouseCursor(this._dragAction),this._initialPosition=null,this._initialDuration=null,this._initialStart=null,this._initialVelocity=null,this._lasso.endLasso();for(const e of this._selectedSet.getItems())e.duration=Math.max(0,e.duration);this._selectedSet.addToSelectionMouseUp(e.wasDragged,e.modifiers.shift,this._mouseDownResult),this.removeOverlaps(!0),this.notes.forEach((e=>{e.initialVelocity=e.velocity})),this._draggedItem=null}mouseDragged(e){"NONE"==this._dragAction&&this._lasso.dragLasso(e),e.wasDragged&&"NONE"!=this._dragAction?("MOVE_NOTE"==this._dragAction?this.moveSelection(e):"RIGHT"==this._dragAction||"V_RIGHT"==this._dragAction?this.dragEndPoints(e):"LEFT"==this._dragAction&&this.dragStartPoints(e),"V_RIGHT"==this._dragAction&&this.dragVelocity(e),this.removeOverlaps(!1),this.getParentComponent().repaint()):this.getParentComponent().repaint()}getTimeAsMBS(e){const t=this.model.measure.atomInQuarter/this.model.measure.lower;let n=Math.floor(e/t);const r=e-n*t,i=Math.floor(n/this.model.measure.upper);return n-=i*this.model.measure.upper,[i,n,r]}getStringForTime(e,t){const n=this.getTimeAsMBS(e);let r=n[0],i=n[1],a=n[2];t&&(r++,i++,a++);const o=1!=a;return r+(o||1!=i?"."+i:"")+(o?"."+Math.floor(a):"")}getTimeIncrement(){const e=this.getAtomWidth();let t;if(e<1e-5)return null;if(this.model.adaptiveMode){const n=this.adaptiveRatios[this.adaptiveIndex]*this.width;if(t=this.model.measure.atomInQuarter*this.model.measure.upper/this.model.measure.lower,t*e>n)for(t/=this.model.measure.upper;e*t>n;)t/=2;else for(;e*t*2<n;)t*=2}else t=this.fixedIncrements[this.fixedIndex];return 1}moveSelection(e){if(null==this._draggedItem||0==this._selectedSet.getItems().length)return;const t={atomInd:this._draggedItem.atomInd,pitch:this._draggedItem.pitch};if(null==this._initialPosition){this._initialPosition=t;let e=1/0,n=-1/0,i=1/0,a=-1/0;this._selectedSet.getItems().forEach((t=>{(null==e||t.atomInd<e)&&(e=t.atomInd),(null==n||t.atomInd+t.duration>n)&&(n=t.atomInd+t.duration),(null==i||t.pitch-1<i)&&(i=t.pitch-1),(null==a||t.pitch>a)&&(a=t.pitch)})),this._minDragOffset={atomInd:-e,pitch:-i},this._maxDragOffset={atomInd:this.model.maxTimeRange.end-n,pitch:r.MAX_PITCH-a}}const n=e.position.x-e.positionAtMouseDown.x,i=e.position.y-e.positionAtMouseDown.y,a=Math.max(this._minDragOffset.atomInd,Math.min(n/this.getAtomWidth(),this._maxDragOffset.atomInd)),o=Math.max(this._minDragOffset.pitch,Math.min(-i/this.getSemitoneHeight(),this._maxDragOffset.pitch));this._draggedItem.pitch=Math.round(this._initialPosition.pitch+o),this._draggedItem.atomInd=this._initialPosition.atomInd+a,e.modifiers.option||(this._draggedItem.atomInd=this.snapToGrid(this._draggedItem.atomInd));const s=this._draggedItem.atomInd-t.atomInd,l=this._draggedItem.pitch-t.pitch;for(const e of this._selectedSet.getItems())e!==this._draggedItem&&(e.pitch+=l,e.atomInd+=s)}dragEndPoints(e){if(null===this._draggedItem)return;const t=this._draggedItem.duration;if(null==this._initialDuration){this._initialDuration=t;let e=null;this._selectedSet.getItems().forEach((t=>{(null==e||t.atomInd+t.duration>e)&&(e=t.atomInd+t.duration)})),this._maxDurationOffset=this.model.maxTimeRange.end-e}const n=e.position.x-e.positionAtMouseDown.x,r=Math.min(this._maxDurationOffset,n/this.getAtomWidth());if(this._draggedItem.duration=this._initialDuration+r,!e.modifiers.option){const e=this.snapToGrid(this._draggedItem.atomInd+this._draggedItem.duration);this._draggedItem.duration=e-this._draggedItem.atomInd,this._draggedItem.duration=Math.max(0,this._draggedItem.duration)}const i=this._draggedItem.duration-t;for(const e of this._selectedSet.getItems())e!==this._draggedItem&&(e.duration+=i)}dragStartPoints(e){if(null==this._draggedItem)return;const t=this._draggedItem.atomInd,n=this._draggedItem.duration;if(null===this._initialStart){this._initialStart=t,this._initialDuration=n;for(const e of this._selectedSet.getItems())e.initialStart=e.atomInd;let e=null;this._selectedSet.getItems().forEach((t=>{(null==e||t.atomInd<e)&&(e=t.atomInd)})),this._minStartOffset=-e}const r=e.position.x-e.positionAtMouseDown.x,i=Math.max(this._minStartOffset,r/this.getAtomWidth()),a=this._draggedItem.atomInd+this._draggedItem.duration;this._draggedItem.atomInd=Math.min(a,this._initialStart+i),this._draggedItem.duration=Math.max(0,this._initialDuration-i),!e.modifiers.option&&this._draggedItem.duration>0&&(this._draggedItem.atomInd=this.snapToGrid(this._draggedItem.atomInd),this._draggedItem.duration=Math.max(0,this._initialDuration-(this._draggedItem.atomInd-this._initialStart)));const o=this._draggedItem.atomInd-this._initialStart;for(const e of this._selectedSet.getItems()){if(e===this._draggedItem)continue;const t=e.atomInd+e.duration;e.atomInd=e.initialStart+o,e.atomInd=Math.min(e.atomInd,t),e.duration=Math.max(0,t-e.atomInd)}}dragVelocity(e){if(null==this._draggedItem)return;null==this._initialVelocity&&(this._initialVelocity=this._draggedItem.velocity);const t=e.position.y-e.positionAtMouseDown.y;this._draggedItem.velocity=this._initialVelocity-t,this._draggedItem.velocity=Math.max(0,Math.min(this._draggedItem.velocity,127)),this._currentVelocity=this._draggedItem.velocity}drawHorizontalBackground(e,t,n,r){const i=this.getTimeIncrement();i<=0||this.model.theme.drawTimeBackground(e,this.height,t,i,n,r,this.model.measure,this.model.colors)}drawNotes(e,t,n){for(const r of this.notes){if(r.hidden)continue;const i=this.getPositionForTime(r.atomInd),a=this.getPositionForPitch(r.pitch),o=Math.max(0,null!=r.tempDuration?r.tempDuration*n:r.duration*n);this.model.theme.drawNote(e,i,a,o,t,r.velocity,r.selected,this.model.colors)}}removeOverlaps(e){for(const e of this.notes)e.tempDuration=null,e.hidden=null;for(const t of this._selectedSet.getItems())for(const n of this.notes)t!=n&&t.pitch==n.pitch&&(t.atomInd<=n.atomInd?n.atomInd<t.atomInd+t.duration&&(n.selected||(e?this.removeNote(n):n.hidden=!0)):t.atomInd<n.atomInd+n.duration&&(e?n.duration=t.atomInd-n.atomInd:n.tempDuration=Math.max(0,t.atomInd-n.atomInd)));this.getParentComponent().repaint()}getDragActionForNoteAt(e,t){const n=this.getPositionForTime(t.atomInd),r=Math.max(2,t.duration*this.getAtomWidth()),i=e.x-n;return i>r?"NONE":i>=r-3?"RIGHT":i>=3?"MOVE_NOTE":i>=0?"LEFT":"NONE"}findNoteAt(e){for(const t of this.notes){const n=this.getPositionForTime(t.atomInd),r=this.getPositionForPitch(t.pitch),i=Math.max(2,t.duration*this.getAtomWidth()),a=this.getSemitoneHeight();if(e.x>=n&&e.x<=n+i&&e.y>=r&&e.y<=r+a)return t}return null}snapToGrid(e){const t=this.getTimeIncrement();return t>0?t*Math.floor(e/t):e*this.getAtomWidth()}setMouseCursor(e){switch(e){case"MOVE_NOTE":this.mouseCursor="move";break;case"LEFT":this.mouseCursor="w-resize";break;case"RIGHT":this.mouseCursor="e-resize";break;default:this.mouseCursor="default"}}}t.NoteGridComponent=s},114:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PitchRuler=void 0;const r=n(2128),i=n(7793);class a extends i.CanvasComponent{context;lastMouseX;lastMouseY;dragStarted=!1;currentlyTranslating=!1;currentlyZooming=!1;consecutiveHorizontalDrag=0;consecutiveVerticalDrag=0;isPreviewingNote=!1;lastPreviewedPitch=null;hoveredPitch=null;constructor(e){super(),this.context=e}mousePressed(e){const t=this.context.grid().getSemitoneHeight(),n=this.getPosition();this.context.model().theme.isOnPianoRoll(e.position.x-n.x,e.position.y-n.y,this.width,this.height,t)?this.previewNoteAt(e.position.y):this.dragStarted=!0,this.lastMouseX=e.position.x,this.lastMouseY=e.position.y}mouseDragged(e){const t=this.getPosition(),n=this.context.grid().getSemitoneHeight();if(this.dragStarted){const t=e.position.y-this.lastMouseY,n=e.position.x-this.lastMouseX;this.lastMouseY=e.position.y,this.lastMouseX=e.position.x,this.shouldTranslate(n,t)?this.translate(t):n>0?this.zoomIn():this.zoomOut()}else this.context.model().theme.isOnPianoRoll(e.position.x-t.x,e.position.y-t.y,this.width,this.height,n)&&this.previewNoteAt(e.position.y)}mouseReleased(){this.currentlyTranslating=!1,this.currentlyZooming=!1,this.dragStarted=!1,this.consecutiveHorizontalDrag=0,this.consecutiveVerticalDrag=0,this.isPreviewingNote&&(this.isPreviewingNote=!1)}doubleClicked(e){const t=this.getPosition(),n=this.context.model();n.theme.isOnPianoRoll(e.position.x-t.x,e.position.y-t.y,this.width,this.height,this.context.grid().getSemitoneHeight())||(n.verticalRange.start=r.MIN_PITCH,n.verticalRange.end=r.MAX_PITCH,this.getParentComponent().repaint())}resized(){}render(e){const t=this.getLocalBounds(),n=this.context.model();e.fillStyle=n.colors.background,e.fillRect(0,0,this.width,this.height);const r=n.verticalRange.start,i=n.verticalRange.end,a=this.context.grid().getSemitoneHeight();n.theme.drawPitchRuler(e,this.width,this.height,r,i,a,this.hoveredPitch,n.colors),e.fillStyle=n.colors.strokeDark,e.fillRect(t.width-1,0,1,t.height)}previewNoteAt(e){const t=this.context.grid().getPitchAt(e);t!=this.lastPreviewedPitch&&(this.isPreviewingNote=!0,this.lastPreviewedPitch=t)}zoomIn(){const e=this.context.model(),t=e.verticalRange.end-e.verticalRange.start;if(this.context.grid().getSemitoneHeight()<r.MAX_SEMI_H){const n=t/e.zoomSensitivity;e.verticalRange.start+=n,e.verticalRange.end-=n,this.getParentComponent().repaint()}}zoomOut(){const e=this.context.model(),t=e.verticalRange.start,n=(e.verticalRange.end-t)/e.zoomSensitivity;e.verticalRange.start-=n,e.verticalRange.end+=n,e.verticalRange.end=Math.min(e.verticalRange.end,r.MAX_PITCH),e.verticalRange.start=Math.max(e.verticalRange.start,r.MIN_PITCH),this.getParentComponent().repaint()}translate(e){const t=this.context.model(),n=t.verticalRange.start,i=t.verticalRange.end,a=this.context.grid().getSemitoneHeight();if(e<0){const i=n+e/a,o=Math.max(i,r.MIN_PITCH),s=o-i+e/a;t.verticalRange.start=o,t.verticalRange.end+=s,this.getParentComponent().repaint()}else if(e>0){const n=i+e/a,o=Math.min(n,r.MAX_PITCH),s=o-n+e/a;t.verticalRange.end=o,t.verticalRange.start+=s,this.getParentComponent().repaint()}}shouldTranslate(e,t){if(Math.abs(e)>Math.abs(t)?(this.consecutiveHorizontalDrag++,this.consecutiveVerticalDrag=0):Math.abs(t)>Math.abs(e)&&(this.consecutiveVerticalDrag++,this.consecutiveHorizontalDrag=0),this.currentlyTranslating){const n=Math.abs(e)>Math.abs(8+t)||this.consecutiveHorizontalDrag>5;return this.currentlyTranslating=!n,this.currentlyZooming=n,!n}if(this.currentlyZooming){const n=Math.abs(t)>Math.abs(8+e)||this.consecutiveVerticalDrag>5;return this.currentlyTranslating=n,this.currentlyZooming=!n,n}{const n=Math.abs(t)>Math.abs(e);return this.currentlyTranslating=n,this.currentlyZooming=!n,n}}}t.PitchRuler=a},5420:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackgroundAlternateWidth=void 0,t.getBackgroundAlternateWidth=function(e,t){return t.atomInQuarter*t.upper}},3333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedItemSet=void 0,t.SelectedItemSet=class{_selection=[];_itemAboutToBeSelected=null;onchange=()=>{};getItems(){return this._selection}addToSelection(e,t=!1){t&&this.deselectAll(),this._selection.push(e),e.selected=!0}addToSelectionMouseDown(e,t){return this._selection.includes(e)?!!t&&(this.removeFromSelection(e),!0):(t||this.deselectAll(),this.doAddToSelection(e,!0),!0)}addToSelectionMouseUp(e,t,n){null==this._itemAboutToBeSelected||e||n||this._selection.includes(this._itemAboutToBeSelected)||(t||this.deselectAll(),this.doAddToSelection(this._itemAboutToBeSelected,!0),this._itemAboutToBeSelected=null)}setUniqueSelection(e){this.deselectAll(),this.doAddToSelection(e,!0)}removeFromSelection(e){this._selection=this._selection.filter((t=>t!==e)),e.selected=!1,this.onchange()}deselectAll(){this._selection.forEach((e=>e.selected=!1)),this._selection=[],this.onchange()}doAddToSelection(e,t){this._selection.push(e),e.selected=!0,t&&this.onchange()}}},8947:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeRulerMy=void 0;const r=n(7793),i=n(8053);let a=0;class o extends r.CanvasComponent{context;timeAtMouseDown;rangeAtMouseDown;zoomAtMouseDown;constructor(e){super(),this.context=e}mousePressed(e){const t=this.context.model();this.timeAtMouseDown=this.context.grid().getTimeAt(e.position.x),this.rangeAtMouseDown={...t.visibleTimeRange},this.zoomAtMouseDown=(t.maxTimeRange.end-t.maxTimeRange.start)/(t.visibleTimeRange.end-t.visibleTimeRange.start)}doubleClicked(e){console.log(this.context.grid().notes)}mouseDragged(e){const t=this.context.model(),n=e.positionAtMouseDown.y-e.position.y;let r=(t.maxTimeRange.end-t.maxTimeRange.start)*n*-.0015/2;e.modifiers.option||(r=0);let a=this.rangeAtMouseDown.start+r,o=this.rangeAtMouseDown.end-r;const s=Math.max(0,1-(o-a));a-=.5*s,o+=.5*s,t.visibleTimeRange.start=Math.max(t.maxTimeRange.start,a),t.visibleTimeRange.end=Math.min(t.maxTimeRange.end,o);let l=this.timeAtMouseDown-this.context.grid().getTimeAt(e.position.x);const c=t.maxTimeRange.start-t.visibleTimeRange.start,d=t.visibleTimeRange.end-t.maxTimeRange.end;l=(0,i.clamp)(l,c,-d),t.visibleTimeRange.start=Math.max(t.maxTimeRange.start,a+l),t.visibleTimeRange.end=Math.min(t.maxTimeRange.end,o+l),this.getParentComponent().repaint()}resized(){}render(e){const t=this.context.model(),n=this.getLocalBounds();e.fillStyle=t.colors.background,e.fillRect(0,0,this.width,this.height);const r=t.visibleTimeRange.start,i=t.visibleTimeRange.end,o=this.context.grid().getAtomWidth();if(Math.ceil(o)!==a&&(a=Math.ceil(o)),o<1e-4||o===1/0)return;let s=1;for(;o*s<50;)s*=2;let l=1;if(o*l<5)for(;o*l<5;)l*=2;else for(;o*l*.5>5;)l*=.5;for(let a=0;a<Math.ceil(i);a+=l){const i=(a-r)*o;if(i<0)continue;const c=a%(4*l)==0?.4:.12;if(e.fillStyle=t.colors.strokeLight,e.fillRect(i,n.height*(1-c),1,n.height*c),a%s==0){e.rect(i+1,n.height*(1-c),1,1),e.fillStyle=t.colors.text;const r=this.context.grid().getStringForTime(a,!0);e.fillText(r,i+4,n.height-5,50)}}e.fillStyle=t.colors.strokeDark,e.fillRect(0,n.height-1,n.width,1)}}t.TimeRulerMy=o},8477:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeRuler=void 0;const r=n(7793),i=n(8053);class a extends r.CanvasComponent{context;timeAtMouseDown;rangeAtMouseDown;zoomAtMouseDown;constructor(e){super(),this.context=e}mousePressed(e){const t=this.context.model();this.timeAtMouseDown=this.context.grid().getTimeAt(e.position.x),this.rangeAtMouseDown={...t.visibleTimeRange},this.zoomAtMouseDown=(t.maxTimeRange.end-t.maxTimeRange.start)/(t.visibleTimeRange.end-t.visibleTimeRange.start)}doubleClicked(e){const t=this.context.model();t.visibleTimeRange.start=0,t.visibleTimeRange.end=t.maxTimeRange.end,this.getParentComponent().repaint()}mouseDragged(e){const t=this.context.model(),n=e.positionAtMouseDown.y-e.position.y,r=(t.maxTimeRange.end-t.maxTimeRange.start)*n*-.0015/2;let a=this.rangeAtMouseDown.start+r,o=this.rangeAtMouseDown.end-r;const s=Math.max(0,1-(o-a));a-=.5*s,o+=.5*s,t.visibleTimeRange.start=Math.max(t.maxTimeRange.start,a),t.visibleTimeRange.end=Math.min(t.maxTimeRange.end,o);let l=this.timeAtMouseDown-this.context.grid().getTimeAt(e.position.x);const c=t.maxTimeRange.start-t.visibleTimeRange.start,d=t.visibleTimeRange.end-t.maxTimeRange.end;l=(0,i.clamp)(l,c,-d),t.visibleTimeRange.start=Math.max(t.maxTimeRange.start,a+l),t.visibleTimeRange.end=Math.min(t.maxTimeRange.end,o+l),this.getParentComponent().repaint()}resized(){}render(e){const t=this.getLocalBounds(),n=this.context.model();e.fillStyle=n.colors.background,e.fillRect(0,0,this.width,this.height);const r=n.visibleTimeRange.start,i=n.visibleTimeRange.end,a=this.context.grid().getAtomWidth();if(a<1e-4||a===1/0)return;let o=1;for(;a*o<50;)o*=2;let s=1;if(a*s<5)for(;a*s<5;)s*=2;else for(;a*s*.5>5;)s*=.5;for(let l=0;l<Math.ceil(i);l+=s){const i=(l-r)*a;if(i<0)continue;const c=l%(4*s)==0?.4:.12;if(e.fillStyle=n.colors.strokeLight,e.fillRect(i,t.height*(1-c),1,t.height*c),l%o==0){e.rect(i+1,t.height*(1-c),1,1),e.fillStyle=n.colors.text;const r=this.context.grid().getStringForTime(l,!0);e.fillText(r,i+4,t.height-5,50)}}e.fillStyle=n.colors.strokeDark,e.fillRect(0,t.height-1,t.width,1)}}t.TimeRuler=a},8053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=function(e,t,n){const r=Math.min(t,n),i=Math.max(t,n);return Math.min(Math.max(r,e),i)}},7607:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VelocityRuler=void 0;const r=n(7793);class i extends r.CanvasComponent{context;constructor(e){super(),this.context=e}render(e){const t=this.context.model();e.fillStyle=t.colors.background,e.fillRect(0,0,this.width,this.height),t.theme.drawVelocityRuler(e,this.width,this.height,t.colors)}resized(){}}t.VelocityRuler=i},6020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VelocityTrack=void 0;const r=n(2128),i=n(3303),a=n(9104);class o extends i.CanvasComponent{context;handleRadius=3;_draggingHandle;_mouseDownResult;_initialVelocity;lasso;constructor(e){super(),this.context=e,this.lasso=new a.LassoSelector({owner:this,selectedSet:()=>e.grid().selectedSet,colors:()=>e.model().colors}),this.lasso.findAllElementsInLasso=e=>{const t=this.height/r.MAX_PITCH,n=this.context.grid();return n.notes.filter((r=>{const a={x:n.getPositionForTime(r.atomInd)-this.handleRadius,y:this.height-r.velocity*t-this.handleRadius,width:2*this.handleRadius,height:2*this.handleRadius};return i.CanvasComponent.boundsIntersect(a,e)}))}}mousePressed(e){const t=this.getPosition(),n=this.context.grid(),r={x:e.position.x-t.x,y:e.position.y-t.y};this._draggingHandle=!1;const i=this.findHandleAt(r);if(null==i)return e.modifiers.shift||n.selectedSet.deselectAll(),this.lasso.beginLasso(e),void(this._mouseDownResult=!0);this._initialVelocity=i.velocity,n.selectedSet.getItems().forEach((e=>{e.initialVelocity=e.velocity})),n.moveNoteToFront(i),this._draggingHandle=!0,this._mouseDownResult=n.selectedSet.addToSelectionMouseDown(i,e.modifiers.shift)}mouseDragged(e){e.wasDragged&&(this._draggingHandle?this.dragSelectedHandles(e):this.lasso.dragLasso(e),this.getParentComponent().repaint())}mouseReleased(e){this.lasso.endLasso();const t=this.context.grid();t.selectedSet.addToSelectionMouseUp(e.wasDragged,e.modifiers.shift,this._mouseDownResult),t.notes.forEach((e=>{e.initialVelocity=e.velocity})),this.getParentComponent().repaint()}render(e){const t=this.context.model();e.fillStyle=t.colors.background,e.fillRect(0,0,this.width,this.height);const n=t.visibleTimeRange.start,r=t.visibleTimeRange.end,i=this.context.grid().getAtomWidth();this.drawHorizontalBackground(e,i,n,r),this.lasso.drawLasso(e),this.drawVelocityHandles(e)}resized(){}drawHorizontalBackground(e,t,n,r){const i=this.context.model(),a=this.context.grid().getTimeIncrement();a<=0||i.theme.drawTimeBackground(e,this.height,t,a,n,r,i.measure,i.colors)}drawVelocityHandles(e){const t=this.context.model(),n=this.context.grid(),i=this.height/r.MAX_PITCH,a=n.getAtomWidth();for(const r of n.notes){const o=n.getPositionForTime(r.atomInd);o+Math.max(0,a*(r.tempDuration||r.duration))<-5||o>this.width+5||t.theme.drawVelocityHandle(e,o,r,this.width,this.height,i,a,this.handleRadius,t.colors)}}dragSelectedHandles(e){const t=this.height/r.MAX_PITCH,n=(e.position.y-e.positionAtMouseDown.y)/t;for(const e of this.context.grid().selectedSet.getItems())e.velocity=e.initialVelocity-n,e.velocity=Math.min(r.MAX_PITCH,Math.max(1,e.velocity))}findHandleAt(e){const t=this.context.grid();let n=this.height/r.MAX_PITCH;for(const r of t.notes){const a=t.getPositionForTime(r.atomInd),o=this.height-r.velocity*n;if((0,i.squaredDistance)(e.x,e.y,a,o)<64)return r}return null}}t.VelocityTrack=o},6752:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(129)),a=n(2718),o=document.getElementById("app"),s=/localhost/.test(window.location.href);let l='\n<div class="navbar">\n<div class="navbar-bg"></div>\n<div class="navbar-inner">\n  <div class="left">\n    <a href="#" class="link icon-only panel-open" data-panel=".panel-left">\n      <i class="icon f7-icons">menu</i>\n    </a>\n    \x3c!--a href="#" class="link back">\n      <i class="icon icon-back"></i>\n      <span class="if-not-md">Back</span>\n    </a--\x3e\n  </div>\n  <div class="title sliding">Band-IT</div>\n  <div class="right">\n    <a href="#" class="link icon-only panel-open" data-panel="right">\n      <i class="icon f7-icons">menu</i>\n    </a>\n  </div>\n</div>\n</div>\n';l='\n<div data-app-header-container style="border-bottom: 2px solid gray;">\n    <div data-app-header-first-row-area\n        style="\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            user-select: none;\n            border-bottom: 1px solid gray;\n            height: 2rem;\n        "\n    >\n        <div data-app-left-header-area style="padding-left: 1rem;">\n            <a class="panel-open"\n                data-panel=".panel-left"\n                style="user-select: none; touch-action: none;"\n            ><b>MAIN</b></a>    \n        </div>\n            <div data-app-center-header-area style=""></div>  \n          <div data-app-right-header-area style="padding-right: 1rem;"></div>\n    </div>  \n    <div data-name="app-header-second-row-area" data-app-header-second-row-area></div>  \n</div>\n';const c=`\n  \n<div\n  class="panel panel-left panel-cover panel-init theme-dark"\n  data-visible-breakpoint="2000"  \n>\n  <div class="view view-init" data-view="left">\n    <div class="page">\n      <div class="navbar">\n        <div class="navbar-bg"></div>\n        <div class="navbar-inner sliding">\n          <div class="title" data-app-left-panel-title></div>\n        </div>\n      </div>\x3c!-- navbar --\x3e\n\n      <div class="page-content">  \n        <div class="list links-list" style="margin-top: 0;">\n          <ul>\n            <li>${[{href:"/mbox/setBand/",name:"Список"},{href:"/mbox/setBandDraft/",name:"Черновики"},{href:"/mbox/setMy/",name:"Мои вещи"},{href:"/page/page_keyboard/",name:"keyboard",isDev:!1},{href:"/page/page_roll/",name:"roll",isDev:!0},{href:"/page/page_sample_editor/",name:"sampleEditor",isDev:!0},{href:"/page/page_muse_editor/",name:"museEditor",isDev:!0},{href:"/page/userSettings/",name:"Settings",isDev:!1},{href:"/page/theremin/",name:"Theremin",isDev:!1}].map((e=>!s&&e.isDev?"":`<a href="${e.href}" data-view=".view-main" class="panel-close">${e.name}</a>`)).join("")}</li>\n          </ul>\n        </div>      \n      </div>\x3c!-- page-content --\x3e\n    </div>\x3c!-- page --\x3e\n  </div>\n</div>\n\n  \n<div\n  class="panel panel-right panel-cover panel-init theme-dark"\n>\n  <div class="view view-init" data-view="right">\n    <div class="page">\n      <div class="navbar">\n        <div class="navbar-bg"></div>\n        <div class="navbar-inner sliding">\n          <div data-app-right-panel-title class="title"></div>\n        </div>\n      </div>\x3c!-- navbar --\x3e\n\n      <div class="page-content">  \n        <div class="block" data-name="panel-right-content">\n        </div>\n\n      </div>\x3c!-- page-content --\x3e\n    </div>\x3c!-- page --\x3e\n  </div>\n</div>\n\n  \n<div data-app-header-container style="border-bottom: 2px solid gray;">\n    <div data-app-header-first-row-area\n        style="\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            user-select: none;\n            border-bottom: 1px solid gray;\n            height: 2rem;\n        "\n    >\n        <div data-app-left-header-area style="padding-left: 1rem;">\n            <a class="panel-open"\n                data-panel=".panel-left"\n                style="user-select: none; touch-action: none;"\n            ><b>MAIN</b></a>    \n        </div>\n            <div data-app-center-header-area style=""></div>  \n          <div data-app-right-header-area style="padding-right: 1rem;"></div>\n    </div>  \n    <div data-name="app-header-second-row-area" data-app-header-second-row-area></div>  \n</div>\n\n  \x3c!-- Your main view, should have "view-main" class --\x3e\n  <div class="view view-main view-init safe-areas" data-url="/mbox/setBand/" id="app-view-main"></div>\n`;o.innerHTML=c,new i.default({el:"#app",name:"ITBand",panel:{},routes:[{path:"/page/:id",component:a.pageRc},{path:"/:id/:song",component:a.pageRc}],on:{}})},2718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageRc=void 0;const r=n(8551),i=n(8582),a=n(222),o=n(4667),s={page_roll:r.RollPage,page_keyboard:r.KeyboardPage,page_muse_editor:i.MuseEditorPage,mbox:r.MBoxPage,userSettings:a.UserSettingsPage,theremin:o.ThereminPage};let l;t.pageRc=(e,t)=>(console.log("props.id",e.id),s[e.id]?(l?.onClosePage&&l.onClosePage(),l=new s[e.id](e,t),t.$onBeforeMount((()=>l.onBeforeMount&&l.onBeforeMount())),t.$onMounted((()=>l.onMounted&&l.onMounted())),t.$onBeforeUpdate((()=>l.onBeforeUpdate&&l.onBeforeUpdate())),t.$onUpdated((()=>l.onUpdated&&l.onUpdated())),t.$onBeforeUnmount((()=>l.onBeforeUnmount&&l.onBeforeUnmount())),t.$onUnmounted((()=>l.onUnmounted&&l.onUnmounted())),()=>t.$h`<div class="page"></div>`):()=>t.$h`<div class="page">COMPONENT NOT FOUND</div>`)},8593:(e,t)=>{"use strict";function n(e){return e.value.substr(0,e.selectionStart).split("\n").length-1}function r(e,t=!1){return e=e.replace("[track] ","").trim(),t&&(e=e.replace(/[\[\]]/g,"").trim()),e}function i(e){return e.startsWith("[track] ")}Object.defineProperty(t,"__esModule",{value:!0}),t.getWithDataAttrValue=t.getWithDataAttr=t.getRandomElement=t.isPresent=t.dyName=t.getTrackList=t.parseTrackId=t.isTrackKey=t.pickTrackId=t.isSafeKeys=t.getCurrRow=t.getCurrRowText=t.getBlocksOld=t.getNearestIdFromText=t.dataURItoBlob=t.byId=t.Deferred=t.safeKeys=void 0,t.safeKeys=["ArrowUp","ArrowLeft","ArrowRight","ArrowDown","End","Home","PageUp","PageDown","Insert"],t.Deferred=class{promise;resolve;reject;constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},t.byId=function(e){return document.getElementById(e)},t.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);var o=new DataView(r);return new Blob([o],{type:n})},t.getNearestIdFromText=function(e,t){let n;e=Array.isArray(e)?e:(e||"").split(/\n/);for(let r=t;r>-1;r--){const t=e[r].match(/#\S+/);if(t){n=(t[0]||"").replace("#","");break}}return n},t.getBlocksOld=function(e){let t,n=[],r=[],i=(e=Array.isArray(e)?e:(e||"").split(/\n/)).length-1;for(let a=e.length-1;a>-1;a--){r.push(e[a]);const o=e[a].match(/#\S+/);o&&(t=(o[0]||"").replace("#",""),n.push({id:t,startRow:a,endRow:i,nio:0,rows:r.reverse()}),r=[],i=a-1)}return n=n.reverse(),n.forEach(((e,t)=>{e.nio=t})),n},t.getCurrRowText=function(e){const t=n(e);return(e.value||"").split(/\n/)[t]},t.getCurrRow=n,t.isSafeKeys=function(e){const n="string"==typeof e?e:e.code;return!!t.safeKeys.find((e=>e===n))},t.pickTrackId=r,t.isTrackKey=i,t.parseTrackId=function(e){if(!(e=(e||"").trim()))return null;const t=(e=r(e,!0)).split(":");return{id:e,ns:t[0],name:t[1],version:parseInt(t[2],10)}},t.getTrackList=function(e){const t=Object.keys(localStorage),n=[];for(let a of t){if(!i(a))continue;const t=r(a);e&&!t.startsWith(`[${e}:`)||n.push(t)}return n},t.dyName=function(e,t){return(t||document).querySelector(`[data-name="${e}"]`)},t.isPresent=function(e){return null!=e},t.getRandomElement=function(e){const t=e?e.length:0;return e[Math.floor(Math.random()*t)]},t.getWithDataAttr=function(e,t){return(t||document).querySelectorAll(`[data-${e}]`)||[]},t.getWithDataAttrValue=function(e,t,n){return(n||document).querySelectorAll(`[data-${e}="${t}"]`)||[]}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__(628),__webpack_require__(9558),__webpack_require__(3251),__webpack_require__(3346),__webpack_require__(3573),__webpack_require__(8601),__webpack_require__(1307),__webpack_require__(6752)})()})();